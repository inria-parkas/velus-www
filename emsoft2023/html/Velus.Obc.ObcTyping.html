
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module ObcTyping</title>
<meta name="description" content="Documentation of Coq module ObcTyping" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module ObcTyping</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CommonTyping.html">CommonTyping</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.VelusMemory.html">VelusMemory</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Obc.ObcSyntax.html">Obc.ObcSyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Obc.ObcSemantics.html">Obc.ObcSemantics</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<h1> Obc typing </h1>
<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="OBCTYPING">OBCTYPING</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Obc.ObcSyntax.html#OBCSYNTAX">OBCSYNTAX</a></span>     <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">ComTyp</span>: <span class="id"><a href="Velus.Common.CommonTyping.html#COMMONTYPING">COMMONTYPING</a></span>  <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Sem</span>   : <span class="id"><a href="Velus.Obc.ObcSemantics.html#OBCSEMANTICS">OBCSEMANTICS</a></span>  <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn">Syn</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="OBCTYPING.WellTyped">WellTyped</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCTYPING.WellTyped.p">p</a></span>     : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCTYPING.WellTyped.insts">insts</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> Γ<span class="id">m</span>  : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> Γ<span class="id">v</span>  : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="OBCTYPING.wt_exp">wt_exp</a></span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.exp">exp</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Var">wt_Var</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">ty</span>) Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Var">Var</a></span> <span class="id">x</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_State">wt_State</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">ty</span>) Γ<span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.State">State</a></span> <span class="id">x</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Const">wt_Const</a></span>: <span class="kwd">forall</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Const">Const</a></span> <span class="id">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Enum">wt_Enum</a></span>: <span class="kwd">forall</span> <span class="id">c</span> <span class="id">tx</span> <span class="id">tn</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.Tenum">Tenum</a></span> <span class="id">tx</span> <span class="id">tn</span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.p">p</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.types">types</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">c</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tn</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Enum">Enum</a></span> <span class="id">c</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.Tenum">Tenum</a></span> <span class="id">tx</span> <span class="id">tn</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Unop">wt_Unop</a></span>: <span class="kwd">forall</span> <span class="id">op</span> <span class="id">e</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type_unop">type_unop</a></span> <span class="id">op</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">ty</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Unop">Unop</a></span> <span class="id">op</span> <span class="id">e</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Binop">wt_Binop</a></span>: <span class="kwd">forall</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type_binop">type_binop</a></span> <span class="id">op</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e1</span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e2</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">ty</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> <span class="id">e1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> <span class="id">e2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Binop">Binop</a></span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Valid">wt_Valid</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">ty</span>) Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_exp</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Valid">Valid</a></span> <span class="id">x</span> <span class="id">ty</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="OBCTYPING.wt_stmt">wt_stmt</a></span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.stmt">stmt</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Assign">wt_Assign</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>) Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Assign">Assign</a></span> <span class="id">x</span> <span class="id">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_AssignSt">wt_AssignSt</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>) Γ<span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.AssignSt">AssignSt</a></span> <span class="id">x</span> <span class="id">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Switch">wt_Switch</a></span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">ss</span> <span class="id">d</span> <span class="id">tx</span> <span class="id">tn</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span> = <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.Tenum">Tenum</a></span> <span class="id">tx</span> <span class="id">tn</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.Tenum">Tenum</a></span> <span class="id">tx</span> <span class="id">tn</span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.p">p</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.types">types</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tn</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> <span class="id">d</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">s</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">s</span>) <span class="id">ss</span> -&gt; <span class="id">wt_stmt</span> <span class="id">s</span>) -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Switch">Switch</a></span> <span class="id">e</span> <span class="id">ss</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Comp">wt_Comp</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> <span class="id">s1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Comp">Comp</a></span> <span class="id">s1</span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Call">wt_Call</a></span>: <span class="kwd">forall</span> <span class="id">clsid</span> <span class="id">cls</span> <span class="id">p</span>' <span class="id">o</span> <span class="id">f</span> <span class="id">fm</span> <span class="id">ys</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">o</span>, <span class="id">clsid</span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.insts">insts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">clsid</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">cls</span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id">f</span> <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fm</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> <span class="id">xt</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>) Γ<span class="id">v</span>) <span class="id">ys</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>) <span class="id">es</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Call">Call</a></span> <span class="id">ys</span> <span class="id">clsid</span> <span class="id">o</span> <span class="id">f</span> <span class="id">es</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_ExternCall">wt_ExternCall</a></span>: <span class="kwd">forall</span> <span class="id">y</span> <span class="id">f</span> <span class="id">es</span> <span class="id">tyins</span> <span class="id">tyout</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">ty</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span> = <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.Tprimitive">Tprimitive</a></span> <span class="id">ty</span>) <span class="id">es</span> <span class="id">tyins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">f</span>, (<span class="id">tyins</span>, <span class="id">tyout</span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.p">p</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.externs">externs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">y</span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.Tprimitive">Tprimitive</a></span> <span class="id">tyout</span>) Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.ExternCall">ExternCall</a></span> <span class="id">y</span> <span class="id">f</span> <span class="id">es</span> <span class="id">tyout</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Skip">wt_Skip</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wt_stmt</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Skip">Skip</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped">WellTyped</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OBCTYPING.wt_method">wt_method</a></span> (<span class="id">p</span>     : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">insts</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Γ<span class="id">m</span>  : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">m</span>     : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.method">method</a></span>) : <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id">p</span> <span class="id">insts</span> Γ<span class="id">m</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.meth_vars">meth_vars</a></span> <span class="id">m</span>) <span class="id">m</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_body">m_body</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">ty</span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.meth_vars">meth_vars</a></span> <span class="id">m</span>) -&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_type">wt_type</a></span> <span class="id">p</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.types">types</a></span>) <span class="id">ty</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OBCTYPING.wt_class">wt_class</a></span> (<span class="id">p</span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span>) (<span class="id">cls</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.class">class</a></span>) : <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">ocls</span>=&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">ocls</span>) <span class="id">p</span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_method">wt_method</a></span> <span class="id">p</span> <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>)) <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Definition</span> <span class="id"><a name="OBCTYPING.wt_program">wt_program</a></span> := <span class="id"><a href="Velus.Common.CommonTyping.html#wt_program">CommonTyping.wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_class">wt_class</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span>: <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Permutation</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="OBCTYPING.wt_exp_Proper">wt_exp_Proper</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.exp">exp</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p2</span> <span class="id">p1</span> <span class="id">Hp</span> <span class="id">m2</span> <span class="id">m1</span> <span class="id">Hm</span> <span class="id">v2</span> <span class="id">v1</span> <span class="id">Hv</span> <span class="id">e</span>' <span class="id">e</span> <span class="id">He</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">split</span>; <span class="tactic">inversion_clear</span> 1; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Hp</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> ?<span class="id">v</span> <span class="id">_</span> |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> ?<span class="id">v</span> =&gt; <span class="tactic">rewrite</span> <span class="id">Hp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Hp</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> ?<span class="id">v</span> |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> ?<span class="id">v</span> =&gt; <span class="tactic">rewrite</span> &lt;-<span class="id">Hp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">_</span> &lt;-&gt; <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">apply</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="OBCTYPING.wt_stmt_Proper">wt_stmt_Proper</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.stmt">stmt</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span>' <span class="id">p</span> <span class="id">Hp</span> <span class="id">xs2</span> <span class="id">xs1</span> <span class="id">Hxs</span> <span class="id">ys2</span> <span class="id">ys1</span> <span class="id">Hys</span> <span class="id">zs2</span> <span class="id">zs1</span> <span class="id">Hzs</span> <span class="id">s</span>' <span class="id">s</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hp</span>, <span class="id">Hs</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">Hp</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span> <span class="kwd">using</span> <span class="id">stmt_ind2</span>'; <span class="tactic">split</span>; <span class="tactic">intro</span> <span class="id">HH</span>; <span class="id">inv</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Assign&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">rewrite</span> &lt;-<span class="id">Hzs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">rewrite</span> <span class="id">Hzs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;AssignSt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hzs</span>; <span class="tactic">rewrite</span> &lt;-<span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hzs</span>; <span class="tactic">rewrite</span> <span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id">Hys</span>, &lt;-<span class="id">Hzs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Hys</span>, <span class="id">Hzs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Comp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">IHs1</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">IHs2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHs1</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHs2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-3:<span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hxs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hys</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hzs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-3:<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hxs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hys</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hzs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Extern&nbsp;Call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-2:<span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hxs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hys</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hzs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-2:<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hxs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hys</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hzs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Skip&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Properties </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OBCTYPING.wt_state">wt_state</a></span> (<span class="id">p</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span>) (<span class="id">me</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.menv">menv</a></span>) (<span class="id">ve</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.venv">venv</a></span>) (<span class="id">c</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.class">class</a></span>) (Γ<span class="id">v</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span> <span class="id">p</span> <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) /\ <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> <span class="id">ve</span> Γ<span class="id">v</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_program_nodup_classes">wt_program_nodup_classes</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span> <span class="id">p</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.classes">classes</a></span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span>, <span class="id"><a href="Velus.Common.CommonTyping.html#wt_program">CommonTyping.wt_program</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1 <span class="kwd">as</span> [|?? []]; <span class="tactic">simpl</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hin</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;<span class="id">E</span>&amp;<span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hin</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_class_find_method">wt_class_find_method</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">cls</span> <span class="id">f</span> <span class="id">fm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_class">wt_class</a></span> <span class="id">p</span> <span class="id">cls</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id">f</span> <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fm</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_method">wt_method</a></span> <span class="id">p</span> <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">fm</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> <span class="id">cls</span> <span class="id">f</span> <span class="id">fm</span> <span class="id">WTc</span> <span class="id">Hfindm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">WTc</span> <span class="kwd">as</span> (<span class="id">Hfo</span> &amp; <span class="id">WTms</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">WTms</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method_In">find_method_In</a></span> <span class="kwd">with</span> (1:=<span class="id">Hfindm</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_exp_chained">wt_exp_chained</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">f</span> <span class="id">p</span> <span class="id">cl</span> <span class="id">p</span>' <span class="id">mems</span> <span class="id">insts</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">f</span> <span class="id">p</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">cl</span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">p</span>' <span class="id">mems</span> <span class="id">insts</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">p</span> <span class="id">mems</span> <span class="id">insts</span> <span class="id">e</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">inversion_clear</span> 2; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.types">types</a></span> <span class="id">p</span> = <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.types">types</a></span> <span class="id">p</span>') <span class="kwd">as</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_equiv_program">find_unit_equiv_program</a></span> <span class="kwd">in</span> <span class="id">it</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">it</span> []); <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">auto</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_exp_chained</span> : <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_exps_chained">wt_exps_chained</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">es</span> <span class="id">f</span> <span class="id">p</span> <span class="id">cl</span> <span class="id">p</span>' <span class="id">mems</span> <span class="id">insts</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">f</span> <span class="id">p</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">cl</span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">p</span>' <span class="id">mems</span> <span class="id">insts</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">p</span> <span class="id">mems</span> <span class="id">insts</span>) <span class="id">es</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 2; <span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">obctyping</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_exps_chained</span> : <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_exp">pres_sem_exp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.VelusMemory.html#values">values</a></span> <span class="id">me</span>) Γ<span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> <span class="id">ve</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">p</span> Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_value">wt_value</a></span> <span class="id">v</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="tactic">until</span> <span class="id">v</span>. <span class="tactic">intros</span> <span class="id">WTm</span> <span class="id">WTv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">intros</span> ? <span class="id">WTe</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.env_find_wt_value">env_find_wt_value</a></span> <span class="kwd">with</span> (1:=<span class="id">WTv</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.VelusMemory.html#find_val">find_val</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.env_find_wt_value">env_find_wt_value</a></span> <span class="kwd">with</span> (1:=<span class="id">WTm</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>. <span class="id">now</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hexp</span>. <span class="tactic">simpl</span>. <span class="tactic">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_cvalue_cconst">wt_cvalue_cconst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.pres_sem_unop">pres_sem_unop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.pres_sem_binop">pres_sem_binop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.env_find_wt_value">env_find_wt_value</a></span> <span class="kwd">with</span> (1:=<span class="id">WTv</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">pres_sem_exp</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">c</span> Γ<span class="id">v</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">prog</span> <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) Γ<span class="id">v</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_value">wt_value</a></span> <span class="id">v</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (<span class="id">WT_mem</span>&amp;?) ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WT_mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_exp">pres_sem_exp</a></span> <span class="kwd">with</span> (Γ<span class="id">v</span>:=Γ<span class="id">v</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pres_sem_exp</span>' : <span class="id">obctyping</span> <span class="id">obcsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_expo">pres_sem_expo</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">vo</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.VelusMemory.html#values">values</a></span> <span class="id">me</span>) Γ<span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> <span class="id">ve</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">prog</span> Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">vo</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">vo</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_exp">pres_sem_exp</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">pres_sem_expo</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">c</span> Γ<span class="id">v</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">vo</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">prog</span> <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) Γ<span class="id">v</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">vo</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">vo</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">obctyping</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pres_sem_expo</span>' : <span class="id">obctyping</span> <span class="id">obcsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_expos">pres_sem_expos</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">es</span> <span class="id">vos</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.VelusMemory.html#values">values</a></span> <span class="id">me</span>) Γ<span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> <span class="id">ve</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">prog</span> Γ<span class="id">m</span> Γ<span class="id">v</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id">me</span> <span class="id">ve</span>) <span class="id">es</span> <span class="id">vos</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">vo</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>)) <span class="id">es</span> <span class="id">vos</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">Hf</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> ?<span class="id">xs</span>, <span class="id">Hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> ?<span class="id">xs</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">Hf</span>) <span class="kwd">in</span> <span class="id">Hi</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_expo">pres_sem_expo</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">pres_sem_expos</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">c</span> Γ<span class="id">v</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">es</span> <span class="id">vos</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">prog</span> <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) Γ<span class="id">v</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id">me</span> <span class="id">ve</span>) <span class="id">es</span> <span class="id">vos</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">vo</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>)) <span class="id">es</span> <span class="id">vos</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">Hf</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> ?<span class="id">xs</span>, <span class="id">Hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> ?<span class="id">xs</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">Hf</span>) <span class="kwd">in</span> <span class="id">Hi</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">obctyping</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pres_sem_expos</span>' : <span class="id">obctyping</span> <span class="id">obcsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_add">wt_state_add</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> <span class="id">x</span> <span class="id">v</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">t</span>) Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_value">wt_value</a></span> <span class="id">v</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> (<span class="id"><a href="Velus.Environment.html#Env.add">Env.add</a></span> <span class="id">x</span> <span class="id">v</span> <span class="id">ve</span>) <span class="id">c</span> Γ<span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (?&amp;?) ???; <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">typing</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_add</span> : <span class="id">obctyping</span> <span class="id">obcsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_adds">wt_state_adds</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> <span class="id">vs</span> (<span class="id">xts</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> <span class="id">xt</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>) Γ<span class="id">v</span>) <span class="id">xs</span> <span class="id">xts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">rv</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_value">wt_value</a></span> <span class="id">rv</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) <span class="id">vs</span> <span class="id">xts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> (<span class="id"><a href="Velus.Environment.html#Env.adds">Env.adds</a></span> <span class="id">xs</span> <span class="id">vs</span> <span class="id">ve</span>) <span class="id">c</span> Γ<span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>; <span class="tactic">inversion</span> 3; <span class="tactic">inversion</span> 1; <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_cons_cons">Env.adds_cons_cons</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">obctyping</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_adds</span> : <span class="id">obctyping</span> <span class="id">obcsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_adds_opt">wt_state_adds_opt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> <span class="id">vs</span> (<span class="id">xts</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> <span class="id">xt</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>) Γ<span class="id">v</span>) <span class="id">xs</span> <span class="id">xts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">rv</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_value">wt_value</a></span> <span class="id">rv</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) <span class="id">vs</span> <span class="id">xts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> (<span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> <span class="id">xs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">vs</span>) <span class="id">ve</span>) <span class="id">c</span> Γ<span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_opt_is_adds">Env.adds_opt_is_adds</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">obctyping</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_adds_opt</span> : <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_add_val">wt_state_add_val</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> <span class="id">x</span> <span class="id">v</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">t</span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span> <span class="id">c</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_value">wt_value</a></span> <span class="id">v</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> (<span class="id"><a href="Velus.VelusMemory.html#add_val">add_val</a></span> <span class="id">x</span> <span class="id">v</span> <span class="id">me</span>) <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (?&amp;?) ??; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory_add_val">wt_memory_add_val</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_nodupmems">c_nodupmems</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_add_val</span> : <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_add_inst">wt_state_add_inst</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> <span class="id">c</span>' <span class="id">prog</span>' Γ<span class="id">v</span> <span class="id">x</span> <span class="id">me_x</span> <span class="id">c_x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">c_x</span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span> <span class="id">c</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">c_x</span> <span class="id">prog</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>', <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me_x</span> <span class="id">prog</span>' <span class="id">c</span>'.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">c</span>'.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">prog</span> (<span class="id"><a href="Velus.VelusMemory.html#add_inst">add_inst</a></span> <span class="id">x</span> <span class="id">me_x</span> <span class="id">me</span>) <span class="id">ve</span> <span class="id">c</span> Γ<span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (?&amp;?) ??; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory_add_inst">wt_memory_add_inst</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_nodupobjs">c_nodupobjs</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_add_inst</span> : <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_params">wt_params</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vos</span> <span class="id">xs</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">vo</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>)) <span class="id">es</span> <span class="id">vos</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> (<span class="id">xt</span>: <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>) =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>) <span class="id">es</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) <span class="id">vos</span> <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vos</span>, <span class="id">xs</span>, <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Wt</span> <span class="id">Eq</span>; <span class="id">inv</span> <span class="id">Wt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Eq</span> <span class="kwd">as</span> [|? ? ? ? <span class="id">E</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">E</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_params</span> : <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_env_params">wt_env_params</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vos</span> <span class="id">callee</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) <span class="id">vos</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>)) <span class="id">vos</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.vempty">vempty</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.meth_vars">meth_vars</a></span> <span class="id">callee</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_app">Forall_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_nodupvars">m_nodupvars</a></span> <span class="id">callee</span>) <span class="kwd">as</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_app_l">NoDupMembers_app_l</a></span> <span class="kwd">in</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env_adds_opt">wt_env_adds_opt</a></span> <span class="kwd">with</span> (<span class="id">outs</span>:=<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">typing</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">clear</span>; <span class="tactic">induction</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>) <span class="kwd">as</span> [|(?, ?)]; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">now</span> <span class="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">x</span>, <span class="id">t</span>) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span> <span class="id">Hin</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> <span class="id">Hin</span>'; <span class="tactic">destruct</span> <span class="id">Hin</span>' <span class="kwd">as</span> [(<span class="id">x</span>', <span class="id">t</span>') [? <span class="id">Hin</span>']]; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_split">in_split</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> (? &amp; ? &amp; <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_split">in_split</a></span> <span class="kwd">in</span> <span class="id">Hin</span>'; <span class="tactic">destruct</span> <span class="id">Hin</span>' <span class="kwd">as</span> (? &amp; ? &amp; <span class="id">Hin</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hin</span>, <span class="id">Hin</span>' <span class="kwd">in</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>, &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_comm_cons">app_comm_cons</a></span> <span class="kwd">in</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_app_r">NoDupMembers_app_r</a></span> <span class="kwd">in</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Nodup</span> <span class="kwd">as</span> [|? ? ? <span class="id">Notin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Notin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#InMembers_app">InMembers_app</a></span>; <span class="tactic">right</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#InMembers_app">InMembers_app</a></span>; <span class="tactic">right</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#InMembers_eq">InMembers_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env_value">wt_env_value</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.find_In_gsso_opt">Env.find_In_gsso_opt</a></span>, <span class="id"><a href="Velus.Environment.html#Env.gempty">Env.gempty</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_env_params</span> : <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_env_params_exprs">wt_env_params_exprs</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vos</span> <span class="id">callee</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">vo</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span>)) <span class="id">es</span> <span class="id">vos</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> (<span class="id">e</span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.exp">exp</a></span>) (<span class="id">xt</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>) =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>) <span class="id">es</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>)) <span class="id">vos</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.vempty">vempty</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.meth_vars">meth_vars</a></span> <span class="id">callee</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Wt</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env_params">wt_env_params</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_params">wt_params</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_env_params_exprs</span> : <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">pres_sem_stmt</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">p</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">stmt</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval">stmt_eval</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">stmt</span> <span class="id">e</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mems</span> <span class="id">insts</span> Γ<span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">me</span>', <span class="id">ve</span>') := <span class="id">e</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id">mems</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id">insts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span> <span class="id">p</span> <span class="id">mems</span> <span class="id">insts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> <span class="id">ve</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id">p</span> <span class="id">insts</span> <span class="id">mems</span> Γ<span class="id">v</span> <span class="id">stmt</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span>' <span class="id">p</span> <span class="id">mems</span> <span class="id">insts</span> /\ <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> <span class="id">ve</span>' Γ<span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">p</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">me</span>' <span class="id">rvs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">me</span>' <span class="id">rvs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>' <span class="id">cls</span> <span class="id">fm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">clsid</span> <span class="id">p</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">cls</span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id">f</span> <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fm</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span> <span class="id">p</span>' <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">v</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) <span class="id">vs</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span>' <span class="id">p</span>' <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">v</span> <span class="id">yt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">yt</span>)) <span class="id">rvs</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval_call_ind">stmt_eval_call_ind</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;assign&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hexp</span> <span class="id">mems</span> <span class="id">insts</span> Γ<span class="id">v</span> <span class="id">Hndup</span> <span class="id">Hndupm</span> <span class="id">Hndupi</span> <span class="id">WTp</span> <span class="id">WTm</span> <span class="id">WTe</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>. <span class="tactic">inversion_clear</span> <span class="id">WTm</span> <span class="kwd">as</span> [???? <span class="id">WTmv</span> <span class="id">WTmi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_exp">pres_sem_exp</a></span> <span class="kwd">with</span> (1:=<span class="id">WTmv</span>) (2:=<span class="id">WTe</span>) <span class="kwd">in</span> <span class="id">Hexp</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">typing</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;assign&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hexp</span> <span class="id">mems</span> <span class="id">insts</span> Γ<span class="id">v</span> <span class="id">Hndup</span> <span class="id">Hndupm</span> <span class="id">Hndupi</span> <span class="id">WTp</span> <span class="id">WTm</span> <span class="id">WTe</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>. <span class="tactic">inversion_clear</span> <span class="id">WTm</span> <span class="kwd">as</span> [???? <span class="id">WTmv</span> <span class="id">WTmi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_exp">pres_sem_exp</a></span> <span class="kwd">with</span> (1:=<span class="id">WTmv</span>) (2:=<span class="id">WTe</span>) <span class="kwd">in</span> <span class="id">Hexp</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env_add">wt_env_add</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_impl_In">Forall_impl_In</a></span> <span class="kwd">with</span> (2:=<span class="id">WTmi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> * <span class="id">Hevals</span> <span class="id">Hcall</span> <span class="id">IH</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mems</span> <span class="id">insts</span> Γ<span class="id">v</span> <span class="id">Hndups</span> <span class="id">Hndupm</span> <span class="id">Hndupi</span> <span class="id">WTp</span> <span class="id">WTm</span> <span class="id">WTe</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IH</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">typing</span>; <span class="tactic">clear</span> <span class="id">IH</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Instance&nbsp;memory&nbsp;is&nbsp;well-typed&nbsp;before&nbsp;execution.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.instance_match">instance_match</a></span>; <span class="tactic">destruct</span> (<span class="id"><a href="Velus.VelusMemory.html#find_inst">find_inst</a></span> <span class="id">o</span> <span class="id">me</span>) <span class="id">eqn</span>:<span class="id">Hmfind</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory_empty">wt_memory_empty</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTm</span> <span class="kwd">as</span> [???? <span class="id">WTv</span> <span class="id">WTi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">WTi</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTi</span> <span class="kwd">as</span> [? ? ? ? <span class="id">Hmfind</span>'|? ? ? ? ? ? ? <span class="id">Hmfind</span>' <span class="id">Hcfind</span>' <span class="id">WTm</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hmfind</span>' <span class="kwd">in</span> <span class="id">Hmfind</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">Hcfind</span>:<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">_</span>, <span class="id">p</span>') |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hcfind</span>'; <span class="tactic">setoid_rewrite</span> <span class="id">Hcfind</span> <span class="kwd">in</span> <span class="id">Hcfind</span>' <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">Hmfind</span>; <span class="tactic">injection</span> <span class="id">Hcfind</span>'. <span class="tactic">intros</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Arguments&nbsp;are&nbsp;well-typed&nbsp;if&nbsp;given.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">Hevals</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id">_</span> <span class="id">es</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>) |- <span class="id">_</span> =&gt; <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">Hes</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#all_In_Forall2">all_In_Forall2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-(<span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hes</span>), (<span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hevals</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">v</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Forall2_chain_In</span>' <span class="kwd">with</span> (1:=<span class="id">Hevals</span>) (2:=<span class="id">Hes</span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> (<span class="id">e</span> &amp; <span class="id">Hexp</span> &amp; <span class="id">Hty</span> &amp; <span class="id">Hxy</span> &amp; <span class="id">Hyv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">Hty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_combine_r">in_combine_r</a></span> <span class="kwd">in</span> <span class="id">Hxy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> <span class="id">es</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">H</span>) <span class="kwd">in</span> <span class="id">Hxy</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_expo">pres_sem_expo</a></span> <span class="kwd">in</span> <span class="id">Hxy</span>; <span class="tactic">eauto</span>; <span class="id">inv</span> <span class="id">WTm</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;extern&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Htys</span> <span class="id">Hevals</span> <span class="id">Hcall</span> * <span class="id">Hndups</span> <span class="id">Hndupm</span> <span class="id">Hndupi</span> <span class="id">WTp</span> <span class="id">WTm</span> <span class="id">WTe</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env_add">wt_env_add</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.pres_sem_extern">pres_sem_extern</a></span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">Hevals</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Htys</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_exp">pres_sem_exp</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. 2:<span class="id">now</span> <span class="tactic">destruct</span> <span class="id">WTm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;sequential&nbsp;composition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hstmt1</span> <span class="id">IH1</span> <span class="id">Hstmt2</span> <span class="id">IH2</span> <span class="id">mems</span> <span class="id">insts</span> Γ<span class="id">v</span> <span class="id">Hndups</span> <span class="id">Hndupm</span> <span class="id">Hndupi</span> <span class="id">WTp</span> <span class="id">WTm</span> <span class="id">Wte</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;match&nbsp;goal&nbsp;with&nbsp;WTstmt1:wt_stmt&nbsp;_&nbsp;_&nbsp;_&nbsp;_&nbsp;s1&nbsp;|-&nbsp;_&nbsp;=&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specialize&nbsp;(IH1&nbsp;_&nbsp;_&nbsp;Hndups&nbsp;WTp&nbsp;WTs&nbsp;WTstmt1)&nbsp;end.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IH1</span> <span class="kwd">with</span> (Γ<span class="id">v</span> := Γ<span class="id">v</span>) <span class="kwd">as</span> (<span class="id">WTm1</span> &amp; <span class="id">WTe1</span>); <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">cond</span> <span class="id">branches</span> <span class="id">d</span> <span class="id">c</span> <span class="id">s</span> <span class="id">me</span>' <span class="id">ve</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hexp</span> <span class="id">Nth</span> <span class="id">IH</span> <span class="id">mems</span> <span class="id">insts</span> Γ<span class="id">v</span> <span class="id">Hndups</span> <span class="id">Hndupm</span> <span class="id">Hndupi</span> <span class="id">WTp</span> <span class="id">WTm</span> <span class="id">WTe</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IH</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>; <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span> <span class="kwd">in</span> <span class="id">Nth</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;skip&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;call&nbsp;eval&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hfindc</span> <span class="id">Hfindm</span> <span class="id">Hlvos</span> <span class="id">Hstmt</span> <span class="id">IH</span> <span class="id">Hrvs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">p</span>'' <span class="id">cls</span>'' <span class="id">fm</span>'' <span class="id">WTp</span> <span class="id">Hfindc</span>' <span class="id">Hfindm</span>' <span class="id">WTmem</span> <span class="id">WTv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfindc</span> <span class="kwd">in</span> <span class="id">Hfindc</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">Hfindc</span>'; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">cls</span>'' <span class="id">p</span>''; <span class="tactic">clear</span> <span class="id">Hfindc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfindm</span> <span class="kwd">in</span> <span class="id">Hfindm</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">Hfindm</span>'; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">fm</span>''; <span class="tactic">clear</span> <span class="id">Hfindm</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonTyping.html#wt_program_find_unit">wt_program_find_unit</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">WTp</span> <span class="id">Hfindc</span>) <span class="kwd">as</span> (<span class="id">WTc</span> &amp; <span class="id">WTp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IH</span> <span class="kwd">with</span> (Γ<span class="id">v</span> := <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.meth_vars">meth_vars</a></span> <span class="id">fm</span>) (5 := <span class="id">WTmem</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_nodupvars">m_nodupvars</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_nodupmems">c_nodupmems</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_nodupobjs">c_nodupobjs</a></span> <span class="kwd">with</span> <span class="id">obctyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;In&nbsp;a&nbsp;well-typed&nbsp;class,&nbsp;method&nbsp;bodies&nbsp;are&nbsp;well-typed.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_class_find_method">wt_class_find_method</a></span> <span class="kwd">with</span> (1:=<span class="id">WTc</span>) (2:=<span class="id">Hfindm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Show&nbsp;that&nbsp;result&nbsp;values&nbsp;are&nbsp;well-typed.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span> <span class="kwd">in</span> <span class="id">Hrvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">Hrvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span> <span class="kwd">with</span> (2:=<span class="id">Hrvs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">v</span> <span class="id">x</span> <span class="id">Hvin</span> <span class="id">Hxin</span> <span class="id">Hxv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">ty</span>). <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.env_find_wt_value">env_find_wt_value</a></span> <span class="kwd">with</span> (3:=<span class="id">Hxv</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_stmt">pres_sem_stmt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">mems</span> <span class="id">insts</span> Γ<span class="id">v</span> <span class="id">stmt</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">me</span>' <span class="id">ve</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id">mems</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id">insts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span> <span class="id">p</span> <span class="id">mems</span> <span class="id">insts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> <span class="id">ve</span> Γ<span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id">p</span> <span class="id">insts</span> <span class="id">mems</span> Γ<span class="id">v</span> <span class="id">stmt</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval">stmt_eval</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">stmt</span> (<span class="id">me</span>', <span class="id">ve</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span>' <span class="id">p</span> <span class="id">mems</span> <span class="id">insts</span> /\ <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_env">wt_env</a></span> <span class="id">ve</span>' Γ<span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> ((<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">pres_sem_stmt</span>') <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">me</span>', <span class="id">ve</span>')); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_stmt_call">pres_sem_stmt_call</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">clsid</span> <span class="id">p</span>' <span class="id">cls</span> <span class="id">f</span> <span class="id">fm</span> <span class="id">me</span> <span class="id">vs</span> <span class="id">me</span>' <span class="id">rvs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">clsid</span> <span class="id">p</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">cls</span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id">f</span> <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fm</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span> <span class="id">p</span>' <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) <span class="id">vs</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">me</span>' <span class="id">rvs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span>' <span class="id">p</span>' <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">yt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">yt</span>)) <span class="id">rvs</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">pres_sem_stmt</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_loop_call_spec">pres_loop_call_spec</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">prog</span> <span class="id">cid</span> <span class="id">c</span> <span class="id">prog</span>' <span class="id">fid</span> <span class="id">f</span> <span class="id">ins</span> <span class="id">outs</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">prog</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">cid</span> <span class="id">prog</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id">fid</span> <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) (<span class="id">ins</span> <span class="id">n</span>) <span class="id">f</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span> <span class="id">prog</span>' <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.loop_call">loop_call</a></span> <span class="id">prog</span> <span class="id">cid</span> <span class="id">fid</span> <span class="id">ins</span> <span class="id">outs</span> 0 <span class="id">me</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">me_n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.loop_call">loop_call</a></span> <span class="id">prog</span> <span class="id">cid</span> <span class="id">fid</span> <span class="id">ins</span> <span class="id">outs</span> <span class="id">n</span> <span class="id">me_n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me_n</span> <span class="id">prog</span>' <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) (<span class="id">outs</span> <span class="id">n</span>) <span class="id">f</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * ????? <span class="id">Loop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id">me</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Loop</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_stmt_call">pres_sem_stmt_call</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">IHn</span> <span class="kwd">as</span> (<span class="id">me_n</span> &amp; <span class="id">Loop_n</span> &amp; ? &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Loop_n</span> <span class="kwd">as</span> [???? <span class="id">Loop_Sn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span>' <span class="id">prog</span>' <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>)) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_stmt_call">pres_sem_stmt_call</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Loop_Sn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_stmt_call">pres_sem_stmt_call</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.pres_loop_call">pres_loop_call</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">cid</span> <span class="id">c</span> <span class="id">prog</span>' <span class="id">fid</span> <span class="id">f</span> <span class="id">ins</span> <span class="id">outs</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">prog</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">cid</span> <span class="id">prog</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id">fid</span> <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) (<span class="id">ins</span> <span class="id">n</span>) <span class="id">f</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">me</span> <span class="id">prog</span>' <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.loop_call">loop_call</a></span> <span class="id">prog</span> <span class="id">cid</span> <span class="id">fid</span> <span class="id">ins</span> <span class="id">outs</span> 0 <span class="id">me</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_option_value">wt_option_value</a></span> <span class="id">vo</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xt</span>)) (<span class="id">outs</span> <span class="id">n</span>) <span class="id">f</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">edestruct</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_loop_call_spec">pres_loop_call_spec</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Remark</span> <span class="id"><a name="OBCTYPING.wt_program_not_class_in">wt_program_not_class_in</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pre</span> <span class="id">post</span> <span class="id">o</span> <span class="id">c</span> <span class="id">cid</span> <span class="id">prog</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.classes">classes</a></span> <span class="id">prog</span> = <span class="id">pre</span> ++ <span class="id">c</span> :: <span class="id">post</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">prog</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">o</span>, <span class="id">cid</span>) <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">cid</span> (<span class="kwd">Program</span> <span class="id">prog</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.types">types</a></span>) <span class="id">prog</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.externs">externs</a></span>) <span class="id">pre</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span>, <span class="id"><a href="Velus.Common.CommonTyping.html#wt_program">CommonTyping.wt_program</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">E</span> <span class="id">WT</span> <span class="id">Hin</span>; <span class="tactic">setoid_rewrite</span> <span class="id">E</span> <span class="kwd">in</span> <span class="id">WT</span>; <span class="tactic">clear</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">pre</span> <span class="kwd">as</span> [|<span class="id">k</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">WT</span>. <span class="tactic">inversion</span> <span class="id">WT</span> <span class="kwd">as</span> [|?? []]; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span>, <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit">find_unit</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app_weaken">Forall_app_weaken</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall_cons2">Forall_cons2</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">Hneq</span> &amp;?) <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_neq">ident_eqb_neq</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id">Forall</span>' <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">IHpre</span> <span class="id">H</span>); <span class="tactic">apply</span> <span class="id">Forall</span>'<span class="id">_app_r</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">H</span> <span class="kwd">as</span> [|?? [<span class="id">WTc</span> <span class="id">Hnodup</span>]] <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">k</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) <span class="id">cid</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTc</span> <span class="kwd">as</span> [<span class="id">Ho</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">Ho</span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#not_None_is_Some">not_None_is_Some</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> ((<span class="id">cls</span>, <span class="id">p</span>') &amp; <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_In">find_unit_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp; <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Remark</span> <span class="id"><a name="OBCTYPING.wt_program_not_same_name">wt_program_not_same_name</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">post</span> <span class="id">o</span> <span class="id">c</span> <span class="id">cid</span> <span class="id">enums</span> <span class="id">externs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> (<span class="kwd">Program</span> <span class="id">enums</span> <span class="id">externs</span> (<span class="id">c</span> :: <span class="id">post</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">o</span>, <span class="id">cid</span>) <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cid</span> &lt;&gt; <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">WTp</span> <span class="id">Hin</span> <span class="id">Hc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hc</span>' <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">clear</span> <span class="id">Hc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTp</span> <span class="kwd">as</span> [|?? [<span class="id">WTc</span> <span class="id">Hnodup</span>] <span class="id">WTp</span>']; <span class="tactic">clear</span> <span class="id">WTp</span>'; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTc</span> <span class="kwd">as</span> [<span class="id">Ho</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">Ho</span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#not_None_is_Some">not_None_is_Some</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> ((<span class="id">cls</span>, <span class="id">p</span>') &amp; <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_In">find_unit_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> [? <span class="id">Hin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_program_find_class_chained_in_objs">wt_program_find_class_chained_in_objs</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">f</span> <span class="id">i</span> <span class="id">g</span> <span class="id">cl</span> <span class="id">p</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">f</span> <span class="id">p</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">cl</span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">i</span>, <span class="id">g</span>) <span class="id">cl</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">g</span> <span class="id">p</span>' = <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">g</span> <span class="id">p</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">WTp</span> <span class="id">Hfc</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">g</span> <span class="id">p</span>) <span class="id">eqn</span>: <span class="id">Hfc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id"><a href="Velus.Common.CommonProgram.html#equiv_program">equiv_program</a></span> <span class="id">p</span> <span class="id">p</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_equiv_program">find_unit_equiv_program</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_spec">find_unit_spec</a></span> <span class="kwd">in</span> <span class="id">Hfc</span> <span class="kwd">as</span> (?&amp; <span class="id">cls</span> &amp; <span class="id">E</span> &amp;?); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">Hin</span> <span class="kwd">as</span> <span class="id">Hin</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program_not_class_in">wt_program_not_class_in</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program_not_same_name">wt_program_not_same_name</a></span> <span class="kwd">in</span> <span class="id">Hin</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonTyping.html#wt_program_app">wt_program_app</a></span> <span class="kwd">in</span> <span class="id">WTp</span> <span class="kwd">as</span> []; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_app">find_unit_app</a></span> <span class="kwd">in</span> <span class="id">Hfc</span>'; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">Hin</span> <span class="kwd">in</span> <span class="id">Hfc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> &lt;-<span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_other">find_unit_other</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_None">find_unit_None</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_None">find_unit_None</a></span> <span class="kwd">in</span> <span class="id">Hfc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_spec">find_unit_spec</a></span> <span class="kwd">in</span> <span class="id">Hfc</span> <span class="kwd">as</span> (?&amp; <span class="id">cls</span> &amp; <span class="id">E</span> &amp;?); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> <span class="id">Hfc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_app">Forall_app</a></span> <span class="kwd">in</span> <span class="id">Hfc</span>' <span class="kwd">as</span> [? <span class="id">Hfc</span>']; <span class="id">inv</span> <span class="id">Hfc</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_exp_suffix">wt_exp_suffix</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">prog</span>' Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">prog</span>' Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonProgram.html#suffix">suffix</a></span> <span class="id">prog</span>' <span class="id">prog</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">prog</span> Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">e</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> * <span class="id">Sub</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Sub</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Common.CommonProgram.html#equiv_program">equiv_program</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">specialize</span> (<span class="id">it</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>); <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_stmt_suffix">wt_stmt_suffix</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">prog</span>' <span class="id">insts</span> Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id">prog</span>' <span class="id">insts</span> Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">prog</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonProgram.html#suffix">suffix</a></span> <span class="id">prog</span>' <span class="id">prog</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id">prog</span> <span class="id">insts</span> Γ<span class="id">m</span> Γ<span class="id">v</span> <span class="id">s</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span> <span class="kwd">using</span> <span class="id">stmt_ind2</span>'; <span class="tactic">inversion_clear</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Sub</span>; <span class="tactic">econstructor</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp_suffix">wt_exp_suffix</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">take</span> (<span class="id"><a href="Velus.Common.CommonProgram.html#suffix">suffix</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Common.CommonProgram.html#equiv_program">equiv_program</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">specialize</span> (<span class="id">it</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>); <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonTyping.html#find_unit_suffix_same">find_unit_suffix_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">take</span> (<span class="id"><a href="Velus.Common.CommonProgram.html#suffix">suffix</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Common.CommonProgram.html#equiv_program">equiv_program</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">specialize</span> (<span class="id">it</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>); <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#suffix">suffix</a></span> : <span class="id">program</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.stmt_call_eval_suffix">stmt_call_eval_suffix</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">p</span>' <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">ome</span> <span class="id">rvs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">ome</span> <span class="id">rvs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonProgram.html#suffix">suffix</a></span> <span class="id">p</span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id">p</span>' <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">ome</span> <span class="id">rvs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Ev</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonTyping.html#find_unit_suffix_same">find_unit_suffix_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">stmt_call_eval_suffix</span> : <span class="id">obcsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.stmt_eval_suffix">stmt_eval_suffix</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">p</span>' <span class="id">me</span> <span class="id">ve</span> <span class="id">s</span> <span class="id">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval">stmt_eval</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">s</span> <span class="id">S</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonProgram.html#suffix">suffix</a></span> <span class="id">p</span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval">stmt_eval</a></span> <span class="id">p</span>' <span class="id">me</span> <span class="id">ve</span> <span class="id">s</span> <span class="id">S</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Ev</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Ev</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">obcsem</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">stmt_eval_suffix</span> : <span class="id">obcsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_skip">wt_mem_skip</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">p</span>' <span class="id">f</span> <span class="id">c</span> <span class="id">mem</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">f</span> <span class="id">p</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">mem</span> <span class="id">p</span> <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp.wt_memory">wt_memory</a></span> <span class="id">mem</span> <span class="id">p</span>' <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">WT</span> <span class="id">Find</span> <span class="id">WTm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pose&nbsp;proof&nbsp;Find&nbsp;as&nbsp;Eq;&nbsp;apply&nbsp;find_class_enums&nbsp;in&nbsp;Eq.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.types">types</a></span> <span class="id">p</span> = <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.types">types</a></span> <span class="id">p</span>') <span class="kwd">as</span> <span class="id">Enums</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_equiv_program">find_unit_equiv_program</a></span> <span class="kwd">in</span> <span class="id">Find</span>; <span class="tactic">specialize</span> (<span class="id">Find</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>); <span class="id">inv</span> <span class="id">Find</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.externs">externs</a></span> <span class="id">p</span> = <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.externs">externs</a></span> <span class="id">p</span>') <span class="kwd">as</span> <span class="id">Externs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_equiv_program">find_unit_equiv_program</a></span> <span class="kwd">in</span> <span class="id">Find</span>; <span class="tactic">specialize</span> (<span class="id">Find</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>); <span class="id">inv</span> <span class="id">Find</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTm</span> <span class="kwd">as</span> [????? <span class="id">WTinsts</span>]; <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span> (?&amp;?) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">WTinsts</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_spec">find_unit_spec</a></span> <span class="kwd">in</span> <span class="id">Find</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?); <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;find_class_app&nbsp;in&nbsp;Find&nbsp;as&nbsp;(prog''&nbsp;&amp;&nbsp;?&nbsp;&amp;?);&nbsp;simpl&nbsp;in&nbsp;*;&nbsp;subst.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">WT</span> <span class="kwd">as</span> <span class="id">WT</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program_not_class_in">wt_program_not_class_in</a></span> <span class="kwd">in</span> <span class="id">WT</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTinsts</span> <span class="kwd">as</span> [|???????? <span class="id">Find</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_app">find_unit_app</a></span> <span class="kwd">in</span> <span class="id">Find</span>; <span class="tactic">eauto</span>; <span class="tactic">setoid_rewrite</span> <span class="id">WT</span> <span class="kwd">in</span> <span class="id">Find</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonTyping.html#wt_program_app">wt_program_app</a></span> <span class="kwd">in</span> <span class="id">WT</span>' <span class="kwd">as</span> [? <span class="id">WT</span>']; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program_not_same_name">wt_program_not_same_name</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_cons">find_unit_cons</a></span> <span class="kwd">in</span> <span class="id">Find</span> <span class="kwd">as</span> [[]|[]]; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>'; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span>, <span class="id"><a href="Velus.Common.CommonTyping.html#wt_program">CommonTyping.wt_program</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_mem_skip</span> : <span class="id">obcsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.find_class_rev">find_class_rev</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">n</span> <span class="id">c</span> <span class="id">prog</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">prog</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">n</span> <span class="id">prog</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">prog</span>'', <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.rev_prog">rev_prog</a></span> <span class="id">prog</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">prog</span>'').<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.rev_prog">rev_prog</a></span>; <span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#rev_tr_spec">rev_tr_spec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">classes0</span> <span class="kwd">as</span> [|<span class="id">c</span>']; <span class="tactic">simpl</span>; <span class="tactic">intros</span> * <span class="id">WTP</span> <span class="id">Find</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTP</span> <span class="kwd">as</span> [|?? [<span class="id">Hwtc</span> <span class="id">Hndup</span>] <span class="id">Hwtp</span>]; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_app">find_unit_app</a></span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_cons">find_unit_cons</a></span> <span class="kwd">in</span> <span class="id">Find</span> <span class="kwd">as</span> [[<span class="id">E</span> <span class="id">Find</span>]|[]]; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Find</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Common.CommonProgram.html#find_unit">find_unit</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span> <span class="id">c</span>') (<span class="kwd">Program</span> <span class="id">types0</span> <span class="id">externs0</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id">classes0</span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="kwd">as</span> <span class="id">E</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_None">find_unit_None</a></span>; <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_rev">Forall_rev</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit">find_unit</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span> <span class="id">c</span>') (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span> <span class="id">c</span>')); <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">IHclasses0</span> <span class="kwd">as</span> (? &amp; <span class="id">Find</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">Find</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING">OBCTYPING</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="ObcTypingFun">ObcTypingFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span>    : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span>     : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span>  : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span>    : <span class="id"><a href="Velus.Obc.ObcSyntax.html#OBCSYNTAX">OBCSYNTAX</a></span>     <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ComTyp</span> : <span class="id"><a href="Velus.Common.CommonTyping.html#COMMONTYPING">COMMONTYPING</a></span>  <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sem</span>    : <span class="id"><a href="Velus.Obc.ObcSemantics.html#OBCSEMANTICS">OBCSEMANTICS</a></span>  <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;: <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING">OBCTYPING</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp">ComTyp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem">Sem</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING">OBCTYPING</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ComTyp">ComTyp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem">Sem</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ObcTypingFun">ObcTypingFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
