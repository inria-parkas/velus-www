
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module CompAuto</title>
<meta name="description" content="Documentation of Coq module CompAuto" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module CompAuto</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CommonTyping.html">CommonTyping</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Fresh.html">Fresh</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.StaticEnv.html">Lustre.StaticEnv</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.SubClock.SubClock.html">Lustre.SubClock.SubClock</a></span>.<br/>
<br/>
<h1> Remove State Machines </h1>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="COMPAUTO">COMPAUTO</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span> : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span> : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Senv</span> : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span> : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Senv">Senv</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Module</span> <span class="kwd">Import</span> <span class="id"><a name="COMPAUTO.SC">SC</a></span> := <span class="id"><a href="Velus.Lustre.SubClock.SubClock.html#SubClockFun">SubClockFun</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn">Syn</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Module</span> <span class="id"><a name="COMPAUTO.Fresh">Fresh</a></span> := <span class="id"><a href="Velus.Fresh.html#Fresh">Fresh.Fresh</a></span>(<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.Fresh">Fresh</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.Fresh.Notations">Notations</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.Fresh.Facts">Facts</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.Fresh.Tactics">Tactics</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">fresh_monad_scope</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COMPAUTO.FreshAnn">FreshAnn</a></span> <span class="id">A</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.Fresh">Fresh</a></span> <span class="tactic">auto</span> <span class="id">A</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op.type">type</a></span> * <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks.clock">clock</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COMPAUTO.fresh_ident">fresh_ident</a></span> : <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.FreshAnn">FreshAnn</a></span> <span class="id">_</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks.Cbase">Cbase</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="COMPAUTO.init_state_exp">init_state_exp</a></span> <span class="id">ty</span> <span class="id">ck</span> (<span class="id">ini</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.exp">exp</a></span> * <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op.enumtag">enumtag</a></span>)) <span class="id">oth</span> : <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.exp">exp</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ini</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.add_whens">add_whens</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Eenum">Eenum</a></span> <span class="id">oth</span> <span class="id">ty</span>) <span class="id">ty</span> <span class="id">ck</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">e</span>, <span class="id">k</span>)::<span class="id">ini</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Ecase">Ecase</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.subclock_exp">subclock_exp</a></span> <span class="id">ck</span> (@<span class="id"><a href="Velus.Environment.html#Env.empty">Env.empty</a></span> <span class="id">_</span>) <span class="id">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.true_tag">OpAux.true_tag</a></span>, [<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.add_whens">add_whens</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Eenum">Eenum</a></span> <span class="id">k</span> <span class="id">ty</span>) <span class="id">ty</span> <span class="id">ck</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.false_tag">OpAux.false_tag</a></span>, [<span class="id">init_state_exp</span> <span class="id">ty</span> <span class="id">ck</span> <span class="id">ini</span> <span class="id">oth</span>])]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> ([<span class="id">ty</span>], <span class="id">ck</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="COMPAUTO.trans_exp">trans_exp</a></span> <span class="id">ty</span> (<span class="id">trans</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.exp">exp</a></span> * (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>))) <span class="id">current</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.exp">exp</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">trans</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; [<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Eenum">Eenum</a></span> <span class="id">current</span> <span class="id">ty</span>; <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Eenum">Eenum</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.false_tag">OpAux.false_tag</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">e</span>, (<span class="id">k</span>, <span class="id">r</span>))::<span class="id">trans</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Ecase">Ecase</a></span> <span class="id">e</span> [(<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.true_tag">OpAux.true_tag</a></span>, [<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Eenum">Eenum</a></span> <span class="id">k</span> <span class="id">ty</span>; <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Eenum">Eenum</a></span> (<span class="kwd">if</span> <span class="id">r</span> <span class="kwd">then</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.true_tag">OpAux.true_tag</a></span> <span class="kwd">else</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.false_tag">OpAux.false_tag</a></span>) <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.false_tag">OpAux.false_tag</a></span>, <span class="id">trans_exp</span> <span class="id">ty</span> <span class="id">trans</span> <span class="id">current</span>)]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> ([<span class="id">ty</span>; <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>], <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks.Cbase">Cbase</a></span>)]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="COMPAUTO.auto_scope">auto_scope</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">A</span> : <span class="kwd">Type</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="COMPAUTO.auto_scope.f_auto">f_auto</a></span> : <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope.A">A</a></span> -&gt; <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.FreshAnn">FreshAnn</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op.type">type</a></span>)).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COMPAUTO.auto_scope">auto_scope</a></span> (<span class="id">s</span> : <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.scope">scope</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope.A">A</a></span>) : <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.FreshAnn">FreshAnn</a></span> (<span class="id">_</span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op.type">type</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> '<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span> := <span class="id">s</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">blks</span>', <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope.f_auto">f_auto</a></span> <span class="id">blks</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">tys</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="COMPAUTO.auto_block">auto_block</a></span> (<span class="id">blk</span> : <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.block">block</a></span>) : <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.FreshAnn">FreshAnn</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op.type">type</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">blk</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Beq">Beq</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> (<span class="id">blk</span>, [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Breset">Breset</a></span> <span class="id">blks</span> <span class="id">er</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">blks</span>', <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> <span class="id">auto_block</span> <span class="id">blks</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Breset">Breset</a></span> <span class="id">blks</span>' <span class="id">er</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">branches</span>', <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Branch">Branch</a></span> <span class="id">_</span> <span class="id">blks</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">blks</span>', <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> <span class="id">auto_block</span> <span class="id">blks</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> ((<span class="id">e</span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Branch">Branch</a></span> [] <span class="id">blks</span>'), <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">tys</span>)) <span class="id">branches</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Blocal">Blocal</a></span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">s</span>', <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> <span class="id">auto_block</span>) <span class="id">s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Blocal">Blocal</a></span> <span class="id">s</span>', <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Weak">Weak</a></span> <span class="id">ck</span> (<span class="id">ini</span>, <span class="id">oth</span>) <span class="id">states</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">tyid</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">xs</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ty</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op.Tenum">Tenum</a></span> <span class="id">tyid</span> <span class="id">xs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">st</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">pst</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">res</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">pres</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">stateq</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Beq">Beq</a></span> ([<span class="id">st</span>; <span class="id">res</span>],<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Efby">Efby</a></span> [ <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.init_state_exp">init_state_exp</a></span> <span class="id">ty</span> <span class="id">ck</span> <span class="id">ini</span> <span class="id">oth</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.add_whens">add_whens</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Eenum">Eenum</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.false_tag">OpAux.false_tag</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>) <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span> <span class="id">ck</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">pst</span> (<span class="id">ty</span>, <span class="id">ck</span>); <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">pres</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id">ck</span>)]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(<span class="id">ty</span>, <span class="id">ck</span>); (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id">ck</span>)]]) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">branches</span>, <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> (<span class="kwd">fun</span> '((<span class="id">e</span>, <span class="id">_</span>), <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Branch">Branch</a></span> <span class="id">_</span> (<span class="id">_</span>, <span class="id">s</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">s</span>', <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> '(<span class="id">blks</span>, <span class="id">trans</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">blks</span>', <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> <span class="id">auto_block</span> <span class="id">blks</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">transeq</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Beq">Beq</a></span> ([<span class="id">pst</span>; <span class="id">pres</span>], <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.trans_exp">trans_exp</a></span> <span class="id">ty</span> <span class="id">trans</span> <span class="id">e</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> (<span class="id">transeq</span>::<span class="id">blks</span>', <span class="id">tys</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> ((<span class="id">e</span>, (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Branch">Branch</a></span> [] [<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Breset">Breset</a></span> [<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Blocal">Blocal</a></span> <span class="id">s</span>'] (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">res</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks.Cbase">Cbase</a></span>))])), <span class="id">tys</span>)) <span class="id">states</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">switch</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Bswitch">Bswitch</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">st</span> (<span class="id">ty</span>, <span class="id">ck</span>)) <span class="id">branches</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> [(<span class="id">st</span>, (<span class="id">ty</span>, <span class="id">ck</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">pst</span>, (<span class="id">ty</span>, <span class="id">ck</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">res</span>, (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id">ck</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">pres</span>, (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id">ck</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>))]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">stateq</span>;<span class="id">switch</span>]), <span class="id">ty</span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> (<span class="id">_</span>, <span class="id">oth</span>) <span class="id">states</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">tyid</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">xs</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ty</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op.Tenum">Tenum</a></span> <span class="id">tyid</span> <span class="id">xs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">st</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">st1</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">res</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">res1</span> &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">stateq</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Beq">Beq</a></span> ([<span class="id">st</span>; <span class="id">res</span>],<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Efby">Efby</a></span> [ <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.add_whens">add_whens</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Eenum">Eenum</a></span> <span class="id">oth</span> <span class="id">ty</span>) <span class="id">ty</span> <span class="id">ck</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.add_whens">add_whens</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Eenum">Eenum</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.false_tag">OpAux.false_tag</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>) <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span> <span class="id">ck</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">st1</span> (<span class="id">ty</span>, <span class="id">ck</span>); <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">res1</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id">ck</span>)]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(<span class="id">ty</span>, <span class="id">ck</span>); (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id">ck</span>)]]) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">branches</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> '((<span class="id">e</span>, <span class="id">_</span>), <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Branch">Branch</a></span> <span class="id">_</span> (<span class="id">unl</span>, <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">transeq</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Beq">Beq</a></span> ([<span class="id">st1</span>; <span class="id">res1</span>], <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.trans_exp">trans_exp</a></span> (<span class="id">ty</span>) <span class="id">unl</span> <span class="id">e</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Branch">Branch</a></span> [] [<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Breset">Breset</a></span> [<span class="id">transeq</span>] (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">res</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks.Cbase">Cbase</a></span>))])) <span class="id">states</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">switch1</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Bswitch">Bswitch</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">st</span> (<span class="id">ty</span>, <span class="id">ck</span>)) <span class="id">branches</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">branches</span>, <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> (<span class="kwd">fun</span> '((<span class="id">e</span>, <span class="id">_</span>), <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Branch">Branch</a></span> <span class="id">_</span> (<span class="id">_</span>, <span class="id">s</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">s</span>', <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> '(<span class="id">blks</span>, <span class="id">trans</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">blks</span>', <span class="id">tys</span>) &lt;- <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> <span class="id">auto_block</span> <span class="id">blks</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> (<span class="id">blks</span>', <span class="id">tys</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> ((<span class="id">e</span>, (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Branch">Branch</a></span> [] [<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Breset">Breset</a></span> [<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Blocal">Blocal</a></span> <span class="id">s</span>'] (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">res1</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks.Cbase">Cbase</a></span>))])), <span class="id">tys</span>)) <span class="id">states</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">switch2</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Bswitch">Bswitch</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Evar">Evar</a></span> <span class="id">st1</span> (<span class="id">ty</span>, <span class="id">ck</span>)) <span class="id">branches</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.ret">ret</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> [(<span class="id">st</span>, (<span class="id">ty</span>, <span class="id">ck</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">st1</span>, (<span class="id">ty</span>, <span class="id">ck</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">res</span>, (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id">ck</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">res1</span>, (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux.bool_velus_type">OpAux.bool_velus_type</a></span>, <span class="id">ck</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>))]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">stateq</span>;<span class="id">switch1</span>;<span class="id">switch2</span>]), <span class="id">ty</span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Preservation of st_follows </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_block_st_follows">auto_block_st_follows</a></span> : <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">blk</span>' <span class="id">tys</span> <span class="id">st</span> <span class="id">st</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> <span class="id">blk</span> <span class="id">st</span> = ((<span class="id">blk</span>', <span class="id">tys</span>), <span class="id">st</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows">st_follows</a></span> <span class="id">st</span> <span class="id">st</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Haut</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">type0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_conjs</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b0</span>. <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(weak)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>. 2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">fresh</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b0</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]. <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(strong)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>. 2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">fresh</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b0</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]. <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Defined variables </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Permutation</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">auto_block_simpl_Forall</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Hmap</span>: <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = (?<span class="id">blks</span>', <span class="id">_</span>, <span class="id">_</span>) |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> ?<span class="id">blks</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values">mmap2_values</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">Hmap</span>; <span class="id">simpl_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_block_VarsDefinedComp">auto_block_VarsDefinedComp</a></span> : <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">xs</span> <span class="id">blk</span>' <span class="id">tys</span> <span class="id">st</span> <span class="id">st</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.VarsDefinedComp">VarsDefinedComp</a></span> <span class="id">blk</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> <span class="id">blk</span> <span class="id">st</span> = ((<span class="id">blk</span>', <span class="id">tys</span>), <span class="id">st</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.VarsDefinedComp">VarsDefinedComp</a></span> <span class="id">blk</span>' <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hvd</span> <span class="id">Haut</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">type0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hvd</span>; <span class="id">destruct_conjs</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values">mmap2_values</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore3">Forall3_ignore3</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values">mmap2_values</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore3">Forall3_ignore3</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b0</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.VarsDefinedCompBranch">VarsDefinedCompBranch</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'. <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values">mmap2_values</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore3">Forall3_ignore3</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(weak)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'). <span class="tactic">split</span>; [<span class="tactic">do</span> 2 <span class="tactic">constructor</span>; <span class="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_app_comm">Permutation_app_comm</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#perm_skip">perm_skip</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#perm_swap">perm_swap</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">Hmmap</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values">mmap2_values</a></span> <span class="kwd">in</span> <span class="id">Hmmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore3">Forall3_ignore3</a></span> <span class="kwd">in</span> <span class="id">Hmmap</span>; <span class="id">inv</span> <span class="id">Hmmap</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">Hmmap</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b0</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.VarsDefinedCompBranch">VarsDefinedCompBranch</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.VarsDefinedCompScope">VarsDefinedCompScope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values">mmap2_values</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore3">Forall3_ignore3</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>. <span class="tactic">repeat</span> <span class="tactic">constructor</span>. <span class="tactic">instantiate</span> (1:=<span class="id">x12</span>). <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">Hperm</span>. <span class="tactic">rewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_comm_cons">app_comm_cons</a></span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(strong)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'). <span class="tactic">split</span>; [<span class="tactic">do</span> 2 <span class="tactic">constructor</span>; <span class="tactic">eauto</span>; [|<span class="tactic">constructor</span>; <span class="tactic">eauto</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">states</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]. <span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="tactic">constructor</span>. <span class="tactic">instantiate</span> (1:=[<span class="id">x3</span>;<span class="id">x7</span>]). <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2">mmap2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">Hmmap</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values">mmap2_values</a></span> <span class="kwd">in</span> <span class="id">Hmmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore3">Forall3_ignore3</a></span> <span class="kwd">in</span> <span class="id">Hmmap</span>; <span class="id">inv</span> <span class="id">Hmmap</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">Hmmap</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b0</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.VarsDefinedCompBranch">VarsDefinedCompBranch</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.VarsDefinedCompScope">VarsDefinedCompScope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values">mmap2_values</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore3">Forall3_ignore3</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">repeat</span> <span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>. <span class="tactic">instantiate</span> (1:=<span class="id">x11</span>). <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">simpl</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_app_comm">Permutation_app_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#perm_skip">perm_skip</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#perm_swap">perm_swap</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">incl_nil</span>'. <span class="tactic">do</span> 2 <span class="id">esplit</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values">mmap2_values</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore3">Forall3_ignore3</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">NoDupLocals </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_not_in_last_prefs">auto_not_in_last_prefs</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~<span class="id"><a href="Velus.Common.Common.html#PS.In">PS.In</a></span> <span class="tactic">auto</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.elab_prefs">elab_prefs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#PSF.add_iff">PSF.add_iff</a></span>, <span class="id"><a href="Velus.Common.Common.html#PSF.singleton_iff">PSF.singleton_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.gensym_prefs_NoDup">gensym_prefs_NoDup</a></span> <span class="kwd">as</span> <span class="id">Hnd</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.gensym_prefs">gensym_prefs</a></span> <span class="kwd">in</span> <span class="id">Hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup_cons_iff">NoDup_cons_iff</a></span> <span class="kwd">in</span> <span class="id">Hnd</span>. <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">contra</span>|<span class="id">contra</span>]; <span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id">contra</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">datatypes</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.fresh_idents_NoDup">fresh_idents_NoDup</a></span> : <span class="kwd">forall</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">x3</span> <span class="id">x4</span> <span class="id">st</span> <span class="id">st1</span> <span class="id">st2</span> <span class="id">st3</span> <span class="id">st4</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">st</span> = (<span class="id">x1</span>, <span class="id">st1</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">st1</span> = (<span class="id">x2</span>, <span class="id">st2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">st2</span> = (<span class="id">x3</span>, <span class="id">st3</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">st3</span> = (<span class="id">x4</span>, <span class="id">st4</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> [<span class="id">x1</span>;<span class="id">x2</span>;<span class="id">x3</span>;<span class="id">x4</span>].<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hf1</span> <span class="id">Hf2</span> <span class="id">Hf3</span> <span class="id">Hf4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_valid_NoDup">st_valid_NoDup</a></span> <span class="id">st4</span>) <span class="kwd">as</span> <span class="id">Hvalid</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_vars_perm">fresh_ident_vars_perm</a></span> <span class="kwd">in</span> <span class="id">it</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span> <span class="kwd">in</span> <span class="id">Hvalid</span>'; <span class="tactic">clear</span> <span class="id">it</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hvalid</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_comm_cons">app_comm_cons</a></span> <span class="kwd">in</span> <span class="id">Hvalid</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_comm_cons">app_comm_cons</a></span> <span class="kwd">in</span> <span class="id">Hvalid</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id">_</span> :: <span class="id">_</span>)) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>; <span class="tactic">intros</span> <span class="id">Hin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>); <span class="tactic">subst</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">datatypes</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_scope_NoDupScope">auto_scope_NoDupScope</a></span> {<span class="id">A</span>} <span class="id">P_good</span> <span class="id">P_nd</span> <span class="id">f_auto</span> : <span class="kwd">forall</span> <span class="id">locs</span> (<span class="id">blk</span>: <span class="id">A</span>) <span class="id">xs</span> <span class="id">s</span>' <span class="id">tys</span> <span class="id">st</span> <span class="id">st</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span> <span class="id">f_auto</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blk</span>) <span class="id">st</span> = ((<span class="id">s</span>', <span class="id">tys</span>), <span class="id">st</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.AtomOrGensym">AtomOrGensym</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span> <span class="id">x</span> \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_ids">st_ids</a></span> <span class="id">st</span>)) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocalsScope">GoodLocalsScope</a></span> <span class="id">P_good</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blk</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupScope">NoDupScope</a></span> <span class="id">P_nd</span> <span class="id">xs</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blk</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">blks</span>' <span class="id">tys</span> <span class="id">st</span> <span class="id">st</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_auto</span> <span class="id">blk</span> <span class="id">st</span> = ((<span class="id">blks</span>', <span class="id">tys</span>), <span class="id">st</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.AtomOrGensym">AtomOrGensym</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span> <span class="id">x</span> \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_ids">st_ids</a></span> <span class="id">st</span>)) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_good</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_nd</span> <span class="id">xs</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupLocals">NoDupLocals</a></span> <span class="id">xs</span>) <span class="id">blks</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupScope">NoDupScope</a></span> (<span class="kwd">fun</span> <span class="id">xs</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupLocals">NoDupLocals</a></span> <span class="id">xs</span>)) <span class="id">xs</span> <span class="id">s</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Haut</span> <span class="id">Hat</span> <span class="id">Hgood</span> <span class="id">Hnd</span>; <span class="id">inv</span> <span class="id">Hgood</span>; <span class="id">inv</span> <span class="id">Hnd</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_block_NoDupLocals">auto_block_NoDupLocals</a></span> : <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">xs</span> <span class="id">blk</span>' <span class="id">tys</span> <span class="id">st</span> <span class="id">st</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> <span class="id">blk</span> <span class="id">st</span> = ((<span class="id">blk</span>', <span class="id">tys</span>), <span class="id">st</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.AtomOrGensym">AtomOrGensym</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span> <span class="id">x</span> \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_ids">st_ids</a></span> <span class="id">st</span>)) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocals">GoodLocals</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupLocals">NoDupLocals</a></span> <span class="id">xs</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupLocals">NoDupLocals</a></span> <span class="id">xs</span> <span class="id">blk</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Opaque</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Haut</span> <span class="id">Hat</span> <span class="id">Hgood</span> <span class="id">Hnd</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">type0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hgood</span>; <span class="id">inv</span> <span class="id">Hnd</span>; <span class="id">destruct_conjs</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values_follows">mmap2_values_follows</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_st_follows">auto_block_st_follows</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">Hat</span>; <span class="tactic">eauto</span>. <span class="tactic">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values_follows">mmap2_values_follows</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="tactic">intros</span>; <span class="id">destruct_conjs</span>; <span class="tactic">destruct</span> <span class="id">b0</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_st_follows">auto_block_st_follows</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupBranch">NoDupBranch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocalsBranch">GoodLocalsBranch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values_follows">mmap2_values_follows</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_st_follows">auto_block_st_follows</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">Hat</span>; <span class="tactic">eauto</span>. <span class="tactic">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>; <span class="id">etransitivity</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Transparent</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(weak)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values_follows">mmap2_values_follows</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">eauto</span> 6 <span class="kwd">with</span> <span class="tactic">fresh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intros</span>; <span class="id">destruct_conjs</span>; <span class="tactic">destruct</span> <span class="id">b0</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]; <span class="id">destruct_conjs</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_st_follows">auto_block_st_follows</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Opaque</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupBranch">NoDupBranch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocalsBranch">GoodLocalsBranch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="tactic">destruct</span> <span class="id">blks</span> <span class="kwd">as</span> (?&amp;[?(?&amp;?)]). <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope_NoDupScope">auto_scope_NoDupScope</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">Hat</span>; <span class="tactic">auto</span>. <span class="tactic">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>; <span class="tactic">repeat</span> (<span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">fresh</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_cons">Forall_cons</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="tactic">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_Inids">fresh_ident_Inids</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>; <span class="tactic">repeat</span> (<span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_st_follows">fresh_ident_st_follows</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id">NoDupScope_incl</span>' <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_not_in_last_prefs">auto_not_in_last_prefs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intros</span>; <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">NoDupLocals_incl</span>' <span class="kwd">in</span> <span class="id">H14</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_not_in_last_prefs">auto_not_in_last_prefs</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> [|]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_prefixed">fresh_ident_prefixed</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (?&amp;?&amp;?)); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x15</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values_follows">mmap2_values_follows</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">H11</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_st_follows">auto_block_st_follows</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>. <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">H14</span>; <span class="tactic">auto</span>. <span class="tactic">right</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_idents_NoDup">fresh_idents_NoDup</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">fresh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Heq</span> <span class="id">Hin</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_prefixed">fresh_ident_prefixed</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (?&amp;?&amp;?)); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Heq</span> <span class="kwd">as</span> [|[|[|[|]]]]; <span class="tactic">subst</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.contradict_AtomOrGensym">contradict_AtomOrGensym</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_not_in_last_prefs">auto_not_in_last_prefs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">Heq</span> <span class="kwd">as</span> [|[|[|[|]]]]; <span class="tactic">auto</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">_</span> = (<span class="id">x11</span>, <span class="id">_</span>)) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_nIn">fresh_ident_nIn</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">eauto</span> 7 <span class="kwd">with</span> <span class="tactic">fresh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">it</span>, <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>; <span class="tactic">repeat</span> (<span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">fresh</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Transparent</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(strong)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">constructor</span>; <span class="tactic">simpl</span>. <span class="tactic">do</span> 2 <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> <span class="tactic">constructor</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]. <span class="tactic">repeat</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values_follows">mmap2_values_follows</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">eauto</span> 7 <span class="kwd">with</span> <span class="tactic">fresh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intros</span>; <span class="id">destruct_conjs</span>; <span class="tactic">destruct</span> <span class="id">b0</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]; <span class="id">destruct_conjs</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_st_follows">mmap2_st_follows</a></span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_st_follows">auto_block_st_follows</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Opaque</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupBranch">NoDupBranch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocalsBranch">GoodLocalsBranch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="tactic">destruct</span> <span class="id">blks</span> <span class="kwd">as</span> (?&amp;[?(?&amp;?)]). <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope_NoDupScope">auto_scope_NoDupScope</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">Hat</span>; <span class="tactic">auto</span>. <span class="tactic">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>; <span class="tactic">repeat</span> (<span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">fresh</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_cons">Forall_cons</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="tactic">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_Inids">fresh_ident_Inids</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>; <span class="tactic">repeat</span> (<span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_st_follows">fresh_ident_st_follows</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id">NoDupScope_incl</span>' <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_not_in_last_prefs">auto_not_in_last_prefs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intros</span>; <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">NoDupLocals_incl</span>' <span class="kwd">in</span> <span class="id">H14</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_not_in_last_prefs">auto_not_in_last_prefs</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> [|]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_prefixed">fresh_ident_prefixed</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (?&amp;?&amp;?)); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values_follows">mmap2_values_follows</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">H11</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_st_follows">auto_block_st_follows</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>. <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">H14</span>; <span class="tactic">auto</span>. <span class="tactic">right</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_idents_NoDup">fresh_idents_NoDup</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">fresh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Heq</span> <span class="id">Hin</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_prefixed">fresh_ident_prefixed</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (?&amp;?&amp;?)); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Heq</span> <span class="kwd">as</span> [|[|[|[|]]]]; <span class="tactic">subst</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.contradict_AtomOrGensym">contradict_AtomOrGensym</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_not_in_last_prefs">auto_not_in_last_prefs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">Heq</span> <span class="kwd">as</span> [|[|[|[|]]]]; <span class="tactic">auto</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">_</span> = (<span class="id">x11</span>, <span class="id">_</span>)) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_nIn">fresh_ident_nIn</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">eauto</span> 7 <span class="kwd">with</span> <span class="tactic">fresh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">it</span>, <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>; <span class="tactic">repeat</span> (<span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">fresh</span>)).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope_NoDupScope">auto_scope_NoDupScope</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.mmap2_values_follows">mmap2_values_follows</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore13">Forall3_ignore13</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_st_follows">auto_block_st_follows</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_map">incl_map</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.st_follows_incl">st_follows_incl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Transparent</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_scope">auto_scope</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">GoodLocals </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_block_GoodLocals">auto_block_GoodLocals</a></span> : <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">blk</span>' <span class="id">tys</span> <span class="id">st</span> <span class="id">st</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocals">GoodLocals</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> <span class="id">blk</span> <span class="id">st</span> = ((<span class="id">blk</span>', <span class="id">tys</span>), <span class="id">st</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocals">GoodLocals</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.auto_prefs">auto_prefs</a></span> <span class="id">blk</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hgood</span> <span class="id">Haut</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">type0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hgood</span>; <span class="id">destruct_conjs</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b0</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocalsBranch">GoodLocalsBranch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Forall_AtomOrGensym_add">Forall_AtomOrGensym_add</a></span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(weak)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_prefixed">fresh_ident_prefixed</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (?&amp;?&amp;?)); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_cons">Forall_cons</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="tactic">right</span>; <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#PSF.add_1">PSF.add_1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> <span class="tactic">constructor</span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b0</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]; <span class="tactic">repeat</span> <span class="id">inv_bind</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocalsBranch">GoodLocalsBranch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocalsScope">GoodLocalsScope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Forall_AtomOrGensym_add">Forall_AtomOrGensym_add</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(strong)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">constructor</span>; <span class="tactic">simpl</span>. 2:<span class="tactic">do</span> 2 <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident">fresh_ident</a></span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.fresh_ident_prefixed">fresh_ident_prefixed</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (?&amp;?&amp;?)); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_cons">Forall_cons</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="tactic">right</span>; <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#PSF.add_1">PSF.add_1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>. <span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]; <span class="tactic">repeat</span> <span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> <span class="tactic">constructor</span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b0</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]; <span class="tactic">repeat</span> <span class="id">inv_bind</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocalsBranch">GoodLocalsBranch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.GoodLocalsScope">GoodLocalsScope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Forall_AtomOrGensym_add">Forall_AtomOrGensym_add</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">do</span> 2 <span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Forall_AtomOrGensym_add">Forall_AtomOrGensym_add</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">No more automaton </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_block_noauto">auto_block_noauto</a></span> : <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">blk</span>' <span class="id">tys</span> <span class="id">st</span> <span class="id">st</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.nolast_block">nolast_block</a></span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> <span class="id">blk</span> <span class="id">st</span> = ((<span class="id">blk</span>', <span class="id">tys</span>), <span class="id">st</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.noauto_block">noauto_block</a></span> <span class="id">blk</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hnl</span> <span class="id">Haut</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">type0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hnl</span>; <span class="id">destruct_conjs</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">repeat</span> <span class="id">inv_bind</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(weak)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.nolast_branch">nolast_branch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.nolast_scope">nolast_scope</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="tactic">destruct</span> <span class="id">blks</span> <span class="kwd">as</span> (?&amp;[?(?&amp;?)]). <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(strong)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]. <span class="tactic">repeat</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.nolast_branch">nolast_branch</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.nolast_scope">nolast_scope</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="tactic">destruct</span> <span class="id">blks</span> <span class="kwd">as</span> (?&amp;[?(?&amp;?)]). <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">repeat</span> <span class="tactic">constructor</span>; <span class="tactic">auto</span>. <span class="id">auto_block_simpl_Forall</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="COMPAUTO.auto_node">auto_node</a></span> (<span class="id">n</span>: @<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.node">node</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.nolast">nolast</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span>) : @<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.node">node</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.noauto">noauto</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.auto_prefs">auto_prefs</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op.type">type</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">res</span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_block">n_block</a></span> <span class="id">n</span>) <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.init_st">init_st</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;({| <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_name">n_name</a></span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_name">n_name</a></span> <span class="id">n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_hasstate">n_hasstate</a></span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_hasstate">n_hasstate</a></span> <span class="id">n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_in">n_in</a></span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_in">n_in</a></span> <span class="id">n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_out">n_out</a></span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_out">n_out</a></span> <span class="id">n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_block">n_block</a></span> := (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">res</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_ingt0">n_ingt0</a></span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_ingt0">n_ingt0</a></span> <span class="id">n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_outgt0">n_outgt0</a></span> := <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_outgt0">n_outgt0</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">res</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof9')">Next Obligation.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> ((?&amp;?)&amp;?) <span class="id">eqn</span>:<span class="id">Hauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_syn">n_syn</a></span> <span class="id">n</span>) <span class="kwd">as</span> <span class="id">Syn</span>. <span class="tactic">inversion_clear</span> <span class="id">Syn</span> <span class="kwd">as</span> [?? <span class="id">_</span> <span class="id">_</span> (?&amp;<span class="id">Vars</span>&amp;<span class="id">Perm</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_nodup">n_nodup</a></span> <span class="id">n</span>) <span class="kwd">as</span> (<span class="id">Hnd1</span>&amp;<span class="id">Hnd2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_good">n_good</a></span> <span class="id">n</span>) <span class="kwd">as</span> (<span class="id">Hgood1</span>&amp;<span class="id">Hgood2</span>&amp;<span class="id">Hgood3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_map_inv">Permutation_map_inv</a></span> <span class="kwd">in</span> <span class="id">Perm</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Perm</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; [|<span class="tactic">symmetry</span>; <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_map">Permutation_map</a></span>; <span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.VarsDefinedComp_VarsDefined">VarsDefinedComp_VarsDefined</a></span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_VarsDefinedComp">auto_block_VarsDefinedComp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">g</span>:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>), &lt;-<span class="id">Perm</span>; <span class="tactic">simpl</span>. 2:<span class="tactic">intros</span>; <span class="id">destruct_conjs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_NoDupLocals">auto_block_NoDupLocals</a></span>, <span class="id">Hnd2</span>; <span class="tactic">eauto</span>. 2:<span class="id">simpl_Forall</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_incl_app</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="id">destruct_conjs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof10')">Next Obligation.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> ((?&amp;?)&amp;?) <span class="id">eqn</span>:<span class="id">Hauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_nodup">n_nodup</a></span> <span class="id">n</span>) <span class="kwd">as</span> (<span class="id">Hnd1</span>&amp;<span class="id">Hnd2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_good">n_good</a></span> <span class="id">n</span>) <span class="kwd">as</span> (<span class="id">Hgood1</span>&amp;<span class="id">Hgood2</span>&amp;<span class="id">Hgood3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_NoDupLocals">auto_block_NoDupLocals</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_Forall</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof11')">Next Obligation.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> ((?&amp;?)&amp;?) <span class="id">eqn</span>:<span class="id">Hauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_good">n_good</a></span> <span class="id">n</span>) <span class="kwd">as</span> (<span class="id">Hgood1</span>&amp;<span class="id">Hgood2</span>&amp;<span class="id">Hgood3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.Forall_AtomOrGensym_add">Forall_AtomOrGensym_add</a></span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_GoodLocals">auto_block_GoodLocals</a></span>).<br/>
&nbsp;&nbsp;Qed.</div>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof12')">Next Obligation.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block">auto_block</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> ((?&amp;?)&amp;?) <span class="id">eqn</span>:<span class="id">Hauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.n_syn">n_syn</a></span> <span class="id">n</span>) <span class="kwd">as</span> <span class="id">Hsyn</span>. <span class="tactic">inversion_clear</span> <span class="id">Hsyn</span> <span class="kwd">as</span> [?? <span class="id">Syn1</span> <span class="id">Syn2</span> (?&amp;<span class="id">Vars</span>&amp;<span class="id">Perm</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_noauto">auto_block_noauto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_block_VarsDefinedComp">auto_block_VarsDefinedComp</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COMPAUTO.auto_global">auto_global</a></span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.nolast">nolast</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.last_prefs">last_prefs</a></span>) : @<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.noauto">noauto</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids.auto_prefs">auto_prefs</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ndstys</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_node">auto_node</a></span> <span class="id">G</span>.(<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.nodes">nodes</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Global</span> (<span class="id">G</span>.(<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.types">types</a></span>)++<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map">flat_map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">ndstys</span>) <span class="id">G</span>.(<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.externs">externs</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ndstys</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_node_iface_eq">auto_node_iface_eq</a></span> : <span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.node_iface_eq">node_iface_eq</a></span> <span class="id">n</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_node">auto_node</a></span> <span class="id">n</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> *; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_global_find_node">auto_global_find_node</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">f</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">n</span>', <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node">find_node</a></span> <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_global">auto_global</a></span> <span class="id">G</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span>' /\ <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.node_iface_eq">node_iface_eq</a></span> <span class="id">n</span> <span class="id">n</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> []. <span class="id">revert</span> <span class="id">types0</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_global">auto_global</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">nodes0</span>; <span class="tactic">intros</span> * <span class="id">Hfind</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node_cons">find_node_cons</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [(?&amp;?)|(<span class="id">Hneq</span>&amp;?)]; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">do</span> 2 <span class="id">esplit</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node_now">find_node_now</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_node_iface_eq">auto_node_iface_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">IHnodes0</span> <span class="kwd">as</span> (?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node_other">find_node_other</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node_change_types">find_node_change_types</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPAUTO.auto_global_iface_incl">auto_global_iface_incl</a></span> : <span class="kwd">forall</span> <span class="id">G</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.global_iface_incl">global_iface_incl</a></span> <span class="id">G</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_global">auto_global</a></span> <span class="id">G</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl_appl">incl_appl</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#incl_refl">incl_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_global_find_node">auto_global_find_node</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">auto_global_find_node</span>' : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">f</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node">find_node</a></span> <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_global">auto_global</a></span> <span class="id">G</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">n</span>', <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span>' /\ <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.node_iface_eq">node_iface_eq</a></span> <span class="id">n</span> <span class="id">n</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> []. <span class="id">revert</span> <span class="id">types0</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_global">auto_global</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">nodes0</span>; <span class="tactic">intros</span> * <span class="id">Hfind</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node_cons">find_node_cons</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [(?&amp;?)|(<span class="id">Hneq</span>&amp;?)]; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">do</span> 2 <span class="id">esplit</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node_now">find_node_now</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.node_iface_eq_sym">node_iface_eq_sym</a></span>, <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO.auto_node_iface_eq">auto_node_iface_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">IHnodes0</span> <span class="kwd">as</span> (?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node_other">find_node_other</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn.find_node_change_types">find_node_change_types</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO">COMPAUTO</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="CompAutoFun">CompAutoFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span> : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cks</span> : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Senv</span> : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span> : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;: <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO">COMPAUTO</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn">Syn</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#COMPAUTO">COMPAUTO</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#Syn">Syn</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.CompAuto.CompAuto.html#CompAutoFun">CompAutoFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
