
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module LSemantics</title>
<meta name="description" content="Documentation of Coq module LSemantics" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module LSemantics</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html">Streams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Sorting.Permutation</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Setoids.Setoid.html">Setoid</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FMapPositive.html">FSets.FMapPositive</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CommonProgram.html">CommonProgram</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CommonList.html">CommonList</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.FunctionalEnvironment.html">FunctionalEnvironment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.StaticEnv.html">Lustre.StaticEnv</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LOrdered.html">Lustre.LOrdered</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoindStreams.html">CoindStreams</a></span>.<br/>
<br/>
<h1> Lustre semantics </h1>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="LSEMANTICS">LSEMANTICS</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span>       <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span>      <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Str</span>   : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span>  <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="LSEMANTICS.fby1">fby1</a></span> {<span class="id">A</span> : <span class="kwd">Type</span>} : <span class="id">A</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> <span class="id">A</span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> <span class="id">A</span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> <span class="id">A</span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Fby1A">Fby1A</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fby1</span> <span class="id">v</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fby1</span> <span class="id">v</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">ys</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">rs</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Fby1P">Fby1P</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">s</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fby1</span> <span class="id">s</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fby1</span> <span class="id">v</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">w</span> ⋅ <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">s</span> ⋅ <span class="id">ys</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">v</span> ⋅ <span class="id">rs</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="LSEMANTICS.fby">fby</a></span> {<span class="id">A</span> : <span class="kwd">Type</span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> <span class="id">A</span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> <span class="id">A</span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> <span class="id">A</span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.FbyA">FbyA</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fby</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fby</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">ys</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">rs</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.FbyP">FbyP</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby1">fby1</a></span> <span class="id">y</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fby</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">x</span> ⋅ <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">y</span> ⋅ <span class="id">ys</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">x</span> ⋅ <span class="id">rs</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="LSEMANTICS.arrow1">arrow1</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Arrow1A">Arrow1A</a></span>: <span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">arrow1</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">arrow1</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">ys</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">rs</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Arrow1P">Arrow1P</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">arrow1</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">arrow1</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">x</span> ⋅ <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">y</span> ⋅ <span class="id">ys</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">y</span> ⋅ <span class="id">rs</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="LSEMANTICS.arrow">arrow</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.ArrowA">ArrowA</a></span>: <span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">arrow</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">arrow</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">ys</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> ⋅ <span class="id">rs</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.ArrowP">ArrowP</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.arrow1">arrow1</a></span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">arrow</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">x</span> ⋅ <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">y</span> ⋅ <span class="id">ys</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">x</span> ⋅ <span class="id">rs</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LSEMANTICS.lustre_var">lustre_var</a></span> := <span class="id"><a name="LSEMANTICS.Var">Var</a></span> (<span class="id">x</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) | <span class="id"><a name="LSEMANTICS.Last">Last</a></span> (<span class="id">x</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id"><a name="LSEMANTICS.var_eq_dec">var_eq_dec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#EqDec">EqDec</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.lustre_var">lustre_var</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof1')">Next Obligation.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2,3:<span class="tactic">right</span>; <span class="tactic">intros</span> <span class="id">Eq</span>; <span class="id">inv</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:(<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">x</span> <span class="id">x0</span>); <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">left</span>;<span class="tactic">reflexivity</span>|<span class="tactic">right</span>; <span class="tactic">intros</span> <span class="id">Eq</span>; <span class="id">inv</span> <span class="id">Eq</span>; <span class="tactic">congruence</span>]).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id"><a name="LSEMANTICS.var_fenv_key">var_fenv_key</a></span> : <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.fenv_key">FEnv.fenv_key</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.lustre_var">lustre_var</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.history">history</a></span> : <span class="kwd">Type</span> := @<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.history">history</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.lustre_var">lustre_var</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.var_history">var_history</a></span> (<span class="id">H</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.history">Str.history</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMANTICS.NodeSemantics">NodeSemantics</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">PSyn</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.decl">decl</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">prefs</span> : <span class="id"><a href="Velus.Common.Common.html#PS.t">PS.t</a></span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.G">G</a></span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.prefs">prefs</a></span>.<br/>
<br/>
<div class="doc">Inductive property on the branches of a merge / case </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.Forall2Brs">Forall2Brs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.Forall2Brs.P">P</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>) -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LSEMANTICS.Forall2Brs">Forall2Brs</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>)) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.F2Tnil">F2Tnil</a></span> : <span class="kwd">forall</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">vs</span> =&gt; <span class="id">vs</span> = []) <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Forall2Brs</span> [] <span class="id">vs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.F2Tcons">F2Tcons</a></span> : <span class="kwd">forall</span> <span class="id">c</span> <span class="id">es</span> <span class="id">brs</span> <span class="id">vs1</span> <span class="id">vs2</span> <span class="id">vs3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.Forall2Brs.P">P</a></span> <span class="id">es</span> <span class="id">vs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Forall2Brs</span> <span class="id">brs</span> <span class="id">vs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> (<span class="kwd">fun</span> <span class="id">v1</span> <span class="id">vs2</span> <span class="id">vs3</span> =&gt; <span class="id">vs3</span> = (<span class="id">c</span>, <span class="id">v1</span>)::<span class="id">vs2</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vs1</span>) <span class="id">vs2</span> <span class="id">vs3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Forall2Brs</span> ((<span class="id">c</span>, <span class="id">es</span>)::<span class="id">brs</span>) <span class="id">vs3</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.Forall2Brs">Forall2Brs</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.dom">dom</a></span> (<span class="id">H</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) Γ :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">H</span> &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span>) /\ (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>) <span class="id">H</span> &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast">IsLast</a></span> Γ <span class="id">x</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.dom_ub">dom_ub</a></span> (<span class="id">H</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) Γ :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">H</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span>) /\ (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>) <span class="id">H</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast">IsLast</a></span> Γ <span class="id">x</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.dom_lb">dom_lb</a></span> (<span class="id">H</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) Γ :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span> -&gt; <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">H</span>) /\ (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast">IsLast</a></span> Γ <span class="id">x</span> -&gt; <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>) <span class="id">H</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.sem_scope">sem_scope</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">A</span> : <span class="kwd">Type</span>}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.sem_scope.sem_exp">sem_exp</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>) -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LSEMANTICS.sem_last_decl">sem_last_decl</a></span> (<span class="id">Hi</span> <span class="id">Hi</span>' : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) (<span class="id">bs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) : (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.type">type</a></span> * <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks.clock">clock</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>))) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.sem_nolast">sem_nolast</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">ck</span> <span class="id">cx</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_last_decl</span> <span class="id">Hi</span> <span class="id">Hi</span>' <span class="id">bs</span> (<span class="id">x</span>, (<span class="id">ty</span>, <span class="id">ck</span>, <span class="id">cx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.sem_last">sem_last</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">ck</span> <span class="id">cx</span> <span class="id">e0</span> <span class="id">clx</span> <span class="id">vs0</span> <span class="id">vs1</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_scope.sem_exp">sem_exp</a></span> (<span class="id">Hi</span> + <span class="id">Hi</span>') <span class="id">bs</span> <span class="id">e0</span> [<span class="id">vs0</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi</span>' (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">vs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> <span class="id">vs0</span> <span class="id">vs1</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi</span>' (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>) <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_last_decl</span> <span class="id">Hi</span> <span class="id">Hi</span>' <span class="id">bs</span> (<span class="id">x</span>, (<span class="id">ty</span>, <span class="id">ck</span>, <span class="id">cx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">e0</span>, <span class="id">clx</span>))).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.sem_scope.sem_block">sem_block</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_scope.A">A</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LSEMANTICS.sem_scope">sem_scope</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.scope">scope</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_scope.A">A</a></span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sscope">Sscope</a></span> : <span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">Hi</span>' <span class="id">bs</span> <span class="id">locs</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">Hi</span>' (<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">locs</span>) -&gt;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">Hi</span> <span class="id">Hi</span>' <span class="id">bs</span>) <span class="id">locs</span> -&gt;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_scope.sem_block">sem_block</a></span> (<span class="id">Hi</span> + <span class="id">Hi</span>') <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_scope</span> <span class="id">Hi</span> <span class="id">bs</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_scope">sem_scope</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.sem_branch">sem_branch</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">A</span> : <span class="kwd">Type</span>}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.sem_branch.sem_block">sem_block</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_branch.A">A</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.sem_branch.must_def">must_def</a></span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.NodeSemantics.sem_branch.is_def">is_def</a></span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_branch.A">A</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LSEMANTICS.sem_branch">sem_branch</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.branch">branch</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_branch.A">A</a></span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sbranch">Sbranch</a></span> : <span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">caus</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_branch.sem_block">sem_block</a></span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_branch.must_def">must_def</a></span> <span class="id">x</span> -&gt; ~<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_branch.is_def">is_def</a></span> <span class="id">x</span> <span class="id">blks</span> -&gt; <span class="tactic">exists</span> <span class="id">vs</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>) <span class="id">vs</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">vs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_branch</span> <span class="id">Hi</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.sem_branch">sem_branch</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LSEMANTICS.sem_exp">sem_exp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sconst">Sconst</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">c</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cs</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const">const</a></span> <span class="id">b</span> <span class="id">c</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Econst">Econst</a></span> <span class="id">c</span>) [<span class="id">cs</span>]<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Senum">Senum</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">k</span> <span class="id">ty</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">es</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.enum">enum</a></span> <span class="id">b</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Eenum">Eenum</a></span> <span class="id">k</span> <span class="id">ty</span>) [<span class="id">es</span>]<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Svar">Svar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">s</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Evar">Evar</a></span> <span class="id">x</span> <span class="id">ann</span>) [<span class="id">s</span>]<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Slast">Slast</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">s</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>) <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Elast">Elast</a></span> <span class="id">x</span> <span class="id">ann</span>) [<span class="id">s</span>]<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sunop">Sunop</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">op</span> <span class="id">ty</span> <span class="id">s</span> <span class="id">o</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">s</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">e</span> = [<span class="id">ty</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.lift1">lift1</a></span> <span class="id">op</span> <span class="id">ty</span> <span class="id">s</span> <span class="id">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Eunop">Eunop</a></span> <span class="id">op</span> <span class="id">e</span> <span class="id">ann</span>) [<span class="id">o</span>]<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sbinop">Sbinop</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">op</span> <span class="id">ty1</span> <span class="id">ty2</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">o</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e1</span> [<span class="id">s1</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e2</span> [<span class="id">s2</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">e1</span> = [<span class="id">ty1</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">e2</span> = [<span class="id">ty2</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.lift2">lift2</a></span> <span class="id">op</span> <span class="id">ty1</span> <span class="id">ty2</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Ebinop">Ebinop</a></span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ann</span>) [<span class="id">o</span>]<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sextcall">Sextcall</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">f</span> <span class="id">es</span> <span class="id">tyout</span> <span class="id">ck</span> <span class="id">tyins</span> <span class="id">ss</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">ty</span> <span class="id">cty</span> =&gt; <span class="id">ty</span> = <span class="id"><a href="Velus.Lustre.LSemantics.html#Op.Tprimitive">Tprimitive</a></span> <span class="id">cty</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typesof">typesof</a></span> <span class="id">es</span>) <span class="id">tyins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.liftn">liftn</a></span> (<span class="kwd">fun</span> <span class="id">ss</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Op.sem_extern">sem_extern</a></span> <span class="id">f</span> <span class="id">tyins</span> <span class="id">ss</span> <span class="id">tyout</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>) <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Eextcall">Eextcall</a></span> <span class="id">f</span> <span class="id">es</span> (<span class="id">tyout</span>, <span class="id">ck</span>)) [<span class="id">vs</span>]<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sfby">Sfby</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">anns</span> <span class="id">s0ss</span> <span class="id">sss</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">e0s</span> <span class="id">s0ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">sss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">s0ss</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">sss</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Efby">Efby</a></span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">anns</span>) <span class="id">os</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sarrow">Sarrow</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">anns</span> <span class="id">s0ss</span> <span class="id">sss</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">e0s</span> <span class="id">s0ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">sss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.arrow">arrow</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">s0ss</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">sss</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Earrow">Earrow</a></span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">anns</span>) <span class="id">os</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Swhen">Swhen</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">tx</span> <span class="id">s</span> <span class="id">k</span> <span class="id">es</span> <span class="id">lann</span> <span class="id">ss</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">s</span>' =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.when">when</a></span> <span class="id">k</span> <span class="id">s</span>' <span class="id">s</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Ewhen">Ewhen</a></span> <span class="id">es</span> (<span class="id">x</span>, <span class="id">tx</span>) <span class="id">k</span> <span class="id">lann</span>) <span class="id">os</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Smerge">Smerge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">tx</span> <span class="id">s</span> <span class="id">es</span> <span class="id">lann</span> <span class="id">vs</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.merge">merge</a></span> <span class="id">s</span>) <span class="id">vs</span> <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Emerge">Emerge</a></span> (<span class="id">x</span>, <span class="id">tx</span>) <span class="id">es</span> <span class="id">lann</span>) <span class="id">os</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.ScaseTotal">ScaseTotal</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">s</span> <span class="id">es</span> <span class="id">tys</span> <span class="id">ck</span> <span class="id">vs</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">s</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> (<span class="tactic">case</span> <span class="id">s</span>) <span class="id">vs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">tys</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Ecase">Ecase</a></span> <span class="id">e</span> <span class="id">es</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id">tys</span>, <span class="id">ck</span>)) <span class="id">os</span><br/>
<br/>
<div class="doc">In the default case, we need to ensure that the values taken by the condition stream
        still corresponds to the constructors;
        otherwise, we could not prove that the NLustre program has a semantics.
        For instance, consider the program
        type t = A | B | C
        case e of
        | A -&gt; 1
        | B -&gt; 2
        | _ -&gt; 42
        its normalized form (in NLustre) is
        case e of <span class="bracket"><span class="id">Some</span> 1;<span class="id">Some</span> 2;<span class="id">None</span></span> 42
        If the condition `e` takes the value `3`, then the first program has a semantics
        (we take the default branch) but not the NLustre program (see NLCoindSemantics.v).
        We could prove that the stream produced by `e` being well-typed is a
        property of any well-typed, causal program, but the proof would be as
        hard as the alignment proof (see LClockSemantics.v).
        Instead we take this as an hypothesis, that will have to be filled when
        proving the existence of the semantics. This would be necessary to establish
        the semantics of operators anyway, so this shouldn't add any cost.
     </div>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.ScaseDefault">ScaseDefault</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">s</span> <span class="id">es</span> <span class="id">d</span> <span class="id">lann</span> <span class="id">vs</span> <span class="id">vd</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">s</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.wt_streams">wt_streams</a></span> [<span class="id">s</span>] (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">e</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">d</span> <span class="id">vd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> (<span class="tactic">case</span> <span class="id">s</span>) <span class="id">vs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vd</span>)) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Ecase">Ecase</a></span> <span class="id">e</span> <span class="id">es</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d</span>) <span class="id">lann</span>) <span class="id">os</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sapp">Sapp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">f</span> <span class="id">es</span> <span class="id">er</span> <span class="id">lann</span> <span class="id">ss</span> <span class="id">os</span> <span class="id">rs</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">r</span> =&gt; <span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">r</span>]) <span class="id">er</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.bools_ofs">bools_ofs</a></span> <span class="id">rs</span> <span class="id">bs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">sem_node</span> <span class="id">f</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskv">maskv</a></span> <span class="id">k</span> <span class="id">bs</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskv">maskv</a></span> <span class="id">k</span> <span class="id">bs</span>) <span class="id">os</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Eapp">Eapp</a></span> <span class="id">f</span> <span class="id">es</span> <span class="id">er</span> <span class="id">lann</span>) <span class="id">os</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="LSEMANTICS.sem_equation">sem_equation</a></span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.equation">equation</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="LSEMANTICS.Seq">Seq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">xs</span> <span class="id">es</span> <span class="id">ss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>)) <span class="id">xs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_equation</span> <span class="id">H</span> <span class="id">b</span> (<span class="id">xs</span>, <span class="id">es</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="LSEMANTICS.sem_transitions">sem_transitions</a></span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> * (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>)) -&gt; (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>)) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Stransdef">Stransdef</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">default</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">stres</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span> <span class="id">default</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_transitions</span> <span class="id">H</span> <span class="id">bs</span> [] <span class="id">default</span> <span class="id">stres</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Strans">Strans</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">C</span> <span class="id">r</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">vs</span> <span class="id">bs</span>' <span class="id">stres1</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">e</span> [<span class="id">vs</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.bools_of">bools_of</a></span> <span class="id">vs</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_transitions</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">stres</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.choose_first">choose_first</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span>' (<span class="id">C</span>, <span class="id">r</span>)) <span class="id">stres1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_transitions</span> <span class="id">H</span> <span class="id">bs</span> ((<span class="id">e</span>, (<span class="id">C</span>, <span class="id">r</span>))::<span class="id">trans</span>) <span class="id">default</span> <span class="id">stres</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="LSEMANTICS.sem_block">sem_block</a></span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sbeq">Sbeq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_equation</span> <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Beq">Beq</a></span> <span class="id">eq</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sreset">Sreset</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">blocks</span> <span class="id">er</span> <span class="id">sr</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">H</span> <span class="id">b</span> <span class="id">er</span> [<span class="id">sr</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.bools_of">bools_of</a></span> <span class="id">sr</span> <span class="id">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id">sem_block</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">r</span> <span class="id">H</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskb">maskb</a></span> <span class="id">k</span> <span class="id">r</span> <span class="id">b</span>)) <span class="id">blocks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block</span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Breset">Breset</a></span> <span class="id">blocks</span> <span class="id">er</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Sswitch">Sswitch</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">b</span> <span class="id">ec</span> <span class="id">branches</span> <span class="id">sc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_exp</span> <span class="id">Hi</span> <span class="id">b</span> <span class="id">ec</span> [<span class="id">sc</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.wt_streams">wt_streams</a></span> [<span class="id">sc</span>] (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">ec</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">Hi</span>', <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.when_hist">when_hist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">Hi</span> <span class="id">sc</span> <span class="id">Hi</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">let</span> <span class="id">bi</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fwhenb">fwhenb</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">b</span> <span class="id">sc</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id">sem_block</span> <span class="id">Hi</span>' <span class="id">bi</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hi</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>)) <span class="id">branches</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block</span> <span class="id">Hi</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.SautoWeak">SautoWeak</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">ini</span> <span class="id">oth</span> <span class="id">states</span> <span class="id">ck</span> <span class="id">bs</span>' <span class="id">stres0</span> <span class="id">stres1</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">H</span>) <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_transitions</span> <span class="id">H</span> <span class="id">bs</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, <span class="id">t</span>) =&gt; (<span class="id">e</span>, (<span class="id">t</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>))) <span class="id">ini</span>) (<span class="id">oth</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">stres0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> <span class="id">stres0</span> <span class="id">stres1</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">state</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tag</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">state</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="tactic">exists</span> <span class="id">Hik</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.select_hist">select_hist</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">H</span> <span class="id">Hik</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">let</span> <span class="id">bik</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselectb">fselectb</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">bs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">blks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> <span class="id">sem_exp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">Hi</span>' <span class="id">blks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id">sem_block</span> <span class="id">Hi</span>' <span class="id">bik</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">sem_transitions</span> <span class="id">Hi</span>' <span class="id">bik</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>) (<span class="id">tag</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id">Hik</span> <span class="id">bik</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Weak">Weak</a></span> <span class="id">ck</span> (<span class="id">ini</span>, <span class="id">oth</span>) <span class="id">states</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> '(<span class="id">_</span>, <span class="id">s</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in_scope">Is_defined_in_scope</a></span> (<span class="kwd">fun</span> '(<span class="id">blks</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>) <span class="id">blks</span>) <span class="id">x</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hik</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">state</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block</span> <span class="id">H</span> <span class="id">bs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Weak">Weak</a></span> <span class="id">ck</span> (<span class="id">ini</span>, <span class="id">oth</span>) <span class="id">states</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.SautoStrong">SautoStrong</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">ini</span> <span class="id">states</span> <span class="id">ck</span> <span class="id">bs</span>' <span class="id">stres</span> <span class="id">stres1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">H</span>) <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span>' (<span class="id">ini</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>)) <span class="id">stres1</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">state</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tag</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">state</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="tactic">exists</span> <span class="id">Hik</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.select_hist">select_hist</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">H</span> <span class="id">Hik</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">let</span> <span class="id">bik</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselectb">fselectb</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">bs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">blks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_transitions</span> <span class="id">Hik</span> <span class="id">bik</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) (<span class="id">tag</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> ([], <span class="id">ini</span>) <span class="id">states</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> '(<span class="id">_</span>, <span class="id">s</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in_scope">Is_defined_in_scope</a></span> (<span class="kwd">fun</span> '(<span class="id">blks</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>) <span class="id">blks</span>) <span class="id">x</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hik</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">state</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">state</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tag</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">state</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="tactic">exists</span> <span class="id">Hik</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.select_hist">select_hist</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres1</span> <span class="id">H</span> <span class="id">Hik</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">let</span> <span class="id">bik</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselectb">fselectb</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres1</span> <span class="id">bs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">blks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> <span class="id">sem_exp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">Hi</span>' <span class="id">blks</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id">sem_block</span> <span class="id">Hi</span>' <span class="id">bik</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hik</span> <span class="id">bik</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> ([], <span class="id">ini</span>) <span class="id">states</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> '(<span class="id">_</span>, <span class="id">s</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in_scope">Is_defined_in_scope</a></span> (<span class="kwd">fun</span> '(<span class="id">blks</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>) <span class="id">blks</span>) <span class="id">x</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hik</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">state</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block</span> <span class="id">H</span> <span class="id">bs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> ([], <span class="id">ini</span>) <span class="id">states</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Slocal">Slocal</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">scope</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> <span class="id">sem_exp</span> (<span class="kwd">fun</span> <span class="id">Hi</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id">sem_block</span> <span class="id">Hi</span>' <span class="id">bs</span>)) <span class="id">Hi</span> <span class="id">bs</span> <span class="id">scope</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block</span> <span class="id">Hi</span> <span class="id">bs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Blocal">Blocal</a></span> <span class="id">scope</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="LSEMANTICS.sem_node">sem_node</a></span>: <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMANTICS.Snode">Snode</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">ss</span> <span class="id">os</span> <span class="id">n</span> <span class="id">H</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics.G">G</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_in">n_in</a></span>)) <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_out">n_out</a></span>)) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">bs</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.clocks_of">clocks_of</a></span> <span class="id">ss</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">sem_exp</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.empty">FEnv.empty</a></span> <span class="id">_</span>) <span class="id">H</span> <span class="id">bs</span>) <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_out">n_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_block">n_block</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_node</span> <span class="id">f</span> <span class="id">ss</span> <span class="id">os</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.NodeSemantics">NodeSemantics</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_exp</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_scope</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_conjs</span>; <span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_branch</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_conjs</span>; <span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_block</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<h2> Some properties </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.var_history_In">var_history_In</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">H</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">H</span>) &lt;-&gt; <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">H</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_var_history">sem_var_history</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">x</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">H</span>) <span class="id">x</span> <span class="id">vs</span> &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hv</span>; <span class="id">inv</span> <span class="id">Hv</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.var_history_mask">var_history_mask</a></span> : <span class="kwd">forall</span> <span class="id">k</span> <span class="id">rs</span> <span class="id">H</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">rs</span> <span class="id">H</span>)) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">rs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">H</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * ?. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_hist">mask_hist</a></span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map">FEnv.map</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.dom_dom_ub">dom_dom_ub</a></span> : <span class="kwd">forall</span> <span class="id">H</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">H</span> Γ.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (<span class="id">D1</span>&amp;<span class="id">D2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>; [<span class="tactic">apply</span> <span class="id">D1</span>|<span class="tactic">apply</span> <span class="id">D2</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.dom_dom_lb">dom_dom_lb</a></span> : <span class="kwd">forall</span> <span class="id">H</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_lb">dom_lb</a></span> <span class="id">H</span> Γ.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (<span class="id">D1</span>&amp;<span class="id">D2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>; [<span class="tactic">apply</span> <span class="id">D1</span>|<span class="tactic">apply</span> <span class="id">D2</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.dom_map">dom_map</a></span> : <span class="kwd">forall</span> <span class="id">f</span> <span class="id">H</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map">FEnv.map</a></span> <span class="id">f</span> <span class="id">H</span>) Γ &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span> Γ.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map_in_iff">FEnv.map_in_iff</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.dom_ub_map">dom_ub_map</a></span> : <span class="kwd">forall</span> <span class="id">f</span> <span class="id">H</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map">FEnv.map</a></span> <span class="id">f</span> <span class="id">H</span>) Γ &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">H</span> Γ.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map_in_iff">FEnv.map_in_iff</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.dom_lb_map">dom_lb_map</a></span> : <span class="kwd">forall</span> <span class="id">f</span> <span class="id">H</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_lb">dom_lb</a></span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map">FEnv.map</a></span> <span class="id">f</span> <span class="id">H</span>) Γ &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_lb">dom_lb</a></span> <span class="id">H</span> Γ.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_lb">dom_lb</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map_in_iff">FEnv.map_in_iff</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.dom_ub_refines">dom_ub_refines</a></span> {<span class="id">R</span>} : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.refines">FEnv.refines</a></span> <span class="id">R</span> <span class="id">Hi1</span> <span class="id">Hi2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">Hi2</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">Hi1</span> <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Ref</span> <span class="id">Dom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> ? <span class="id">In</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In_refines">FEnv.In_refines</a></span>, <span class="id">Dom</span> <span class="kwd">in</span> <span class="id">In</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.dom_ub_incl">dom_ub_incl</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">xs1</span> <span class="id">xs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">List.incl</a></span> <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">H</span> <span class="id">xs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">H</span> <span class="id">xs2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hincl</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> * <span class="id">Hin</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar_incl">IsVar_incl</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast_incl">IsLast_incl</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">dom_ub_incl</span>' : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">xs1</span> <span class="id">xs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> <span class="id">xs1</span> <span class="id">x</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> <span class="id">xs2</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast">IsLast</a></span> <span class="id">xs1</span> <span class="id">x</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast">IsLast</a></span> <span class="id">xs2</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">H</span> <span class="id">xs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">H</span> <span class="id">xs2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">V</span> <span class="id">L</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> * <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.vars_of_senv">vars_of_senv</a></span> (Γ : <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.static_env">static_env</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map">flat_map</a></span> (<span class="kwd">fun</span> '(<span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.ann">ann</a></span>) =&gt; (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>)::<span class="kwd">if</span> <span class="id"><a href="Velus.Common.Common.html#isSome">isSome</a></span> <span class="id">ann</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.causl_last">causl_last</a></span>) <span class="kwd">then</span> [<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>] <span class="kwd">else</span> []) Γ.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.vars_of_senv_Var">vars_of_senv_Var</a></span> : <span class="kwd">forall</span> Γ <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv">vars_of_senv</a></span> Γ) &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv">vars_of_senv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> * <span class="id">In</span>; [<span class="tactic">econstructor</span>|<span class="id">inv</span> <span class="id">In</span>]; <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">Hinf</span> <span class="kwd">as</span> [<span class="id">Hinf</span>|<span class="id">Hinf</span>]; <span class="id">cases</span>; <span class="id">inv</span> <span class="id">Hinf</span>; <span class="tactic">try</span> <span class="id">now</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">solve_In</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.vars_of_senv_Last">vars_of_senv_Last</a></span> : <span class="kwd">forall</span> Γ <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv">vars_of_senv</a></span> Γ) &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast">IsLast</a></span> Γ <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv">vars_of_senv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> * <span class="id">In</span>; [|<span class="id">inv</span> <span class="id">In</span>]; <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">Hinf</span> <span class="kwd">as</span> [<span class="id">Hinf</span>|<span class="id">Hinf</span>]; <span class="id">cases_eqn</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span>; <span class="id">inv</span> <span class="id">Hinf</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#isSome_true">isSome_true</a></span> <span class="kwd">in</span> <span class="id">Eq</span>; <span class="id">destruct_conjs</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">solve_In</span>; <span class="tactic">simpl</span>. <span class="tactic">right</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.causl_last">causl_last</a></span> <span class="id">_</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">datatypes</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.vars_of_senv_NoLast">vars_of_senv_NoLast</a></span> : <span class="kwd">forall</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, ~<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast">IsLast</a></span> Γ <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv">vars_of_senv</a></span> Γ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">x</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) Γ.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> Γ <span class="kwd">as</span> [|(?&amp;?)]; <span class="tactic">intros</span> * <span class="id">NL</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IH</span>Γ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intros</span> * <span class="id">L</span>; <span class="id">inv</span> <span class="id">L</span>; <span class="tactic">eapply</span> <span class="id">NL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>. <span class="tactic">right</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">NL</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">datatypes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">contra</span>; <span class="tactic">rewrite</span> <span class="id">contra</span> <span class="kwd">in</span> <span class="id">Eq</span>; <span class="id">inv</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.dom_fenv_dom">dom_fenv_dom</a></span> : <span class="kwd">forall</span> <span class="id">H</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span> Γ &lt;-&gt; <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.dom">FEnv.dom</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv">vars_of_senv</a></span> Γ).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.dom">FEnv.dom</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intros</span> (<span class="id">Var</span>&amp;<span class="id">Last</span>)|<span class="tactic">intros</span> <span class="id">Eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">x</span>; [<span class="tactic">rewrite</span> <span class="id">Var</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Var">vars_of_senv_Var</a></span>|<span class="tactic">rewrite</span> <span class="id">Last</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Last">vars_of_senv_Last</a></span>]; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">setoid_rewrite</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Var">vars_of_senv_Var</a></span>. <span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Last">vars_of_senv_Last</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Properties of Forall2Brs </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span> (<span class="id">P1</span> <span class="id">P2</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) <span class="id">es</span> -&gt; <span class="id">P1</span> <span class="id">x</span> <span class="id">y</span> -&gt; <span class="id">P2</span> <span class="id">x</span> <span class="id">y</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">P1</span> <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">P2</span> <span class="id">es</span> <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">HP</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hf</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span> ?? <span class="id">Hin1</span> <span class="id">Hin2</span> <span class="id">HP1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">HP</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="id">P</span> : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">P</span> <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">vs</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">es</span>) <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hf</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore1">Forall3_ignore1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H0</span> <span class="id">IHHf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">IHHf</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?); <span class="tactic">subst</span>; <span class="tactic">simpl</span>. <span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.Forall2Brs_length1">Forall2Brs_length1</a></span> (<span class="id">P</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="kwd">forall</span> <span class="id">v</span>, <span class="id">P</span> <span class="id">e</span> <span class="id">v</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">v</span> = <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">P</span> <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.annots">annots</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">vs</span>) <span class="id">es</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hf</span> <span class="id">Hf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hf2</span>; <span class="id">inv</span> <span class="id">Hf</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_length">Forall3_length</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H1</span>, &lt;-<span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.annots">annots</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map_concat_map">flat_map_concat_map</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#concat_length_eq">concat_length_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span>, <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; [|<span class="tactic">eapply</span> <span class="id">IHHf2</span>; <span class="tactic">eauto</span>]; <span class="tactic">intros</span> (?&amp;?) <span class="id">Hlen</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hlen</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_length">Forall3_length</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.Forall2Brs_length2">Forall2Brs_length2</a></span> (<span class="id">P</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">P</span> <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">vs</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">vs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es</span>) <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hf</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">clear</span> - <span class="id">H0</span> <span class="id">IHHf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_ignore1">Forall3_ignore1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">IHHf</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?); <span class="tactic">subst</span>; <span class="tactic">simpl</span>. <span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.Forall2Brs_map_1">Forall2Brs_map_1</a></span> (<span class="id">P</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) <span class="id">f</span> : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="id">P</span> (<span class="id">f</span> <span class="id">e</span>)) <span class="id">es</span> <span class="id">vs</span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">P</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">i</span>, <span class="id">es</span>) =&gt; (<span class="id">i</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id">f</span> <span class="id">es</span>)) <span class="id">es</span>) <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">split</span>; <span class="tactic">intros</span> * <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>; <span class="tactic">simpl</span>. 1,2:<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">IHes</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHes</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.Forall2Brs_map_2">Forall2Brs_map_2</a></span> (<span class="id">P</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) <span class="id">f</span> : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">vs</span> =&gt; <span class="id">P</span> <span class="id">e</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id">f</span> <span class="id">vs</span>)) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">P</span> <span class="id">es</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">i</span>, <span class="id">v</span>) =&gt; (<span class="id">i</span>, <span class="id">f</span> <span class="id">v</span>))) <span class="id">vs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_map">Forall_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat_map">concat_map</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_map_1">Forall3_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_map_2">Forall3_map_2</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall3_map_3">Forall3_map_3</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_impl_In">Forall3_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> {<span class="id">A</span>} (<span class="id">v</span> : <span class="id">A</span>) : (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby1">fby1</a></span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">fby1_EqSt</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">v</span> <span class="id">cs</span> <span class="id">cs</span>' <span class="id">Ecs</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>' <span class="kwd">as</span> [[]], <span class="id">xs</span>' <span class="kwd">as</span> [[]], <span class="id">ys</span>' <span class="kwd">as</span> [[]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Ecs</span>; <span class="id">inv</span> <span class="id">Exs</span>; <span class="id">inv</span> <span class="id">Eys</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">econstructor</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>. <span class="id">now</span> <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> {<span class="id">A</span>} : (@<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> <span class="id">A</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">fby_EqSt</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">cs</span> <span class="id">cs</span>' <span class="id">Ecs</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>' <span class="kwd">as</span> [[]], <span class="id">xs</span>' <span class="kwd">as</span> [[]], <span class="id">ys</span>' <span class="kwd">as</span> [[]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Ecs</span>; <span class="id">inv</span> <span class="id">Exs</span>; <span class="id">inv</span> <span class="id">Eys</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>; <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H4</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">econstructor</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H5</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.arrow1">arrow1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">arrow1_EqSt</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">cs</span> <span class="id">cs</span>' <span class="id">Ecs</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>' <span class="kwd">as</span> [[]], <span class="id">xs</span>' <span class="kwd">as</span> [[]], <span class="id">ys</span>' <span class="kwd">as</span> [[]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Ecs</span>; <span class="id">inv</span> <span class="id">Exs</span>; <span class="id">inv</span> <span class="id">Eys</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>; <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.arrow">arrow</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">arrow_EqSt</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">cs</span> <span class="id">cs</span>' <span class="id">Ecs</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>' <span class="kwd">as</span> [[]], <span class="id">xs</span>' <span class="kwd">as</span> [[]], <span class="id">ys</span>' <span class="kwd">as</span> [[]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Ecs</span>; <span class="id">inv</span> <span class="id">Exs</span>; <span class="id">inv</span> <span class="id">Eys</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>; <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>, &lt;- <span class="id">H3</span>, &lt;- <span class="id">H5</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">k</span> : (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.when">when</a></span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">when_EqSt</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span> <span class="id">cs</span> <span class="id">cs</span>' <span class="id">Ecs</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>' <span class="kwd">as</span> [[]], <span class="id">xs</span>' <span class="kwd">as</span> [[]], <span class="id">ys</span>' <span class="kwd">as</span> [[]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Ecs</span>; <span class="id">inv</span> <span class="id">Exs</span>; <span class="id">inv</span> <span class="id">Eys</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>; <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">econstructor</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const">const</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">const_EqSt</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>; <span class="id">unfold_Stv</span> <span class="id">b</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">inv</span> <span class="id">Eb</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.enum">enum</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">enum_EqSt</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>; <span class="id">unfold_Stv</span> <span class="id">b</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">inv</span> <span class="id">Eb</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.lustre_var">lustre_var</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span>) ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sem_var_EqSt</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">EH</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">E</span>; <span class="tactic">intro</span> <span class="id">Sem</span>; <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">EH</span> <span class="id">x</span>). <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">EH</span>. <span class="id">inv</span> <span class="id">EH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">E</span>, <span class="id">H2</span>, <span class="id">H4</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.history_equiv">history_equiv</a></span> (<span class="id">Hi1</span> <span class="id">Hi2</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) : <span class="kwd">Prop</span> := <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span>) <span class="id">Hi1</span> <span class="id">Hi2</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="LSEMANTICS.history_equiv_refl">history_equiv_refl</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Reflexive">Reflexive</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history_equiv">history_equiv</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
 <span class="tactic">intros</span> ??. <span class="tactic">reflexivity</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) : (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history_equiv">history_equiv</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.EqSts">EqSts</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sem_exp_morph</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">EH</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">Eb</span> <span class="id">e</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span> <span class="id">Hsem</span>. <span class="id">revert</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Hsem</span> <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.EqSts">EqSts</a></span> <span class="kwd">in</span> *; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>, &lt;-<span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>, &lt;-<span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>.  <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHe</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">y</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHe1</span>; <span class="tactic">eauto</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHe2</span>; <span class="tactic">eauto</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">y</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Sextcall">Sextcall</a></span> <span class="kwd">with</span> (<span class="id">ss</span>:=<span class="id">ss</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">xs</span>', <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id">it</span>; <span class="tactic">eauto</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">y</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Sfby">Sfby</a></span> <span class="kwd">with</span> (<span class="id">s0ss</span>:=<span class="id">s0ss</span>) (<span class="id">sss</span>:=<span class="id">sss</span>); <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">take</span> (<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">xs</span>', <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id">it</span>; <span class="tactic">eauto</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.Forall3_EqSt">Forall3_EqSt</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_proper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Sarrow">Sarrow</a></span> <span class="kwd">with</span> (<span class="id">s0ss</span>:=<span class="id">s0ss</span>) (<span class="id">sss</span>:=<span class="id">sss</span>); <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">take</span> (<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">xs</span>', <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id">it</span>; <span class="tactic">eauto</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.Forall3_EqSt">Forall3_EqSt</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_proper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Swhen">Swhen</a></span> <span class="kwd">with</span> (<span class="id">ss</span>:=<span class="id">ss</span>); <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">take</span> (<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">xs</span>', <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id">it</span>; <span class="tactic">eauto</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.Forall2_EqSt">Forall2_EqSt</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_proper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">instantiate</span> (1:=<span class="id">vs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>. <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.Forall2_EqSt">Forall2_EqSt</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_proper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHe</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>. <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.Forall3_EqSt_Proper">Forall3_EqSt_Proper</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_proper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.ScaseDefault">ScaseDefault</a></span> <span class="kwd">with</span> (<span class="id">vd</span>:=<span class="id">vd</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHe</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>. <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.Forall3_EqSt_Proper">Forall3_EqSt_Proper</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_proper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Sapp">Sapp</a></span> <span class="kwd">with</span> (<span class="id">ss</span>:=<span class="id">ss</span>) (<span class="id">rs</span>:=<span class="id">rs</span>); <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">take</span> (<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">xs</span>', <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id">it</span>; <span class="tactic">eauto</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">k</span>; <span class="id">take</span> (<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">_</span>) <span class="id">and</span> <span class="tactic">specialize</span> (<span class="id">it</span> <span class="id">k</span>); <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.Forall2_EqSt">Forall2_EqSt</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_proper</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) : (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id">G</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history_equiv">history_equiv</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sem_equation_morph</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">EH</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exss</span> <span class="id">eq</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hsem</span> <span class="kwd">as</span> [????? <span class="id">Hseme</span> <span class="id">Hsemv</span>]. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">Exss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) : (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history_equiv">history_equiv</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sem_transitions_morph</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">EH</span> ?? <span class="id">Eb</span> ???? <span class="id">Estres</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">y3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hsem</span>; <span class="tactic">intros</span> * <span class="id">Heq</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;-<span class="id">Heq</span>, &lt;-<span class="id">Eb</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHHsem</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Heq</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) : (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history_equiv">history_equiv</a></span> ==&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history_equiv">history_equiv</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sem_last_decls_morph</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">EH</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>' <span class="id">EH</span>' ?? <span class="id">Eb</span> ? <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2-3:<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_morph">sem_exp_morph</a></span>; <span class="tactic">eauto</span>. 2:<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_Equiv">FEnv.union_Equiv</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history_equiv">history_equiv</a></span> ==&gt; <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">var_history_morph</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Eq</span> <span class="id">id</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) : (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history_equiv">history_equiv</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sem_block_morph</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">EH</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">Eb</span> <span class="id">blk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">b</span> <span class="id">b</span>' <span class="id">EH</span> <span class="id">Eb</span>; <span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">EH</span> <span class="id">Eb</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H8</span> <span class="id">k</span>); <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">EH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>. 2:<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">Eb</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H11</span> <span class="id">k</span>) <span class="kwd">as</span> (<span class="id">Hik</span>&amp;?). <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>. <span class="id">inv_scope</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">Hik</span>. <span class="tactic">split</span>; [|<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">repeat</span> <span class="tactic">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">Eb</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H10</span> <span class="id">k</span>) <span class="kwd">as</span> (<span class="id">Hik</span>&amp;?). <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">Hik</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inv_branch</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H11</span> <span class="id">k</span>) <span class="kwd">as</span> (<span class="id">Hik</span>&amp;?). <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>. <span class="id">inv_scope</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">Hik</span>. <span class="tactic">split</span>; [|<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">repeat</span> <span class="tactic">split</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>. <span class="id">inv_scope</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Sscope">Sscope</a></span> <span class="kwd">with</span> (<span class="id">Hi</span>':=<span class="id">Hi</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">EH</span>, &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_Equiv">FEnv.union_Equiv</a></span>; <span class="tactic">auto</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) : (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> <span class="id">G</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.EqSts">EqSts</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> ==&gt; @<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.EqSts">EqSts</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sem_node_morph</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>; <span class="tactic">intros</span> <span class="id">f</span> <span class="id">xss</span> <span class="id">xss</span>' <span class="id">Exss</span> <span class="id">yss</span> <span class="id">yss</span>' <span class="id">Eyss</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">eauto</span>. <span class="tactic">instantiate</span> (1 := <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Exss</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Eyss</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">bs</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Exss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Exss</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_scope</span>' := (<span class="id">Syn.inv_scope</span> || <span class="id">inv_scope</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_branch</span>' := (<span class="id">Syn.inv_branch</span> || <span class="id">inv_branch</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_block</span>' := (<span class="id">Syn.inv_block</span> || <span class="id">inv_block</span>).<br/>
<br/>
<div class="doc">Custom induction schemes </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2">sem_exp_ind2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">prefs</span> <span class="id">PSyn</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">prefs</span> <span class="id">PSyn</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>) -&gt; <span class="kwd">Prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.P_equation">P_equation</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.equation">equation</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.P_transitions">P_transitions</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> * (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>)) -&gt; (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>)) -&gt; <span class="kwd">Prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.P_node">P_node</a></span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>) -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.ConstCase">ConstCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">c</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cs</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const">const</a></span> <span class="id">b</span> <span class="id">c</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Econst">Econst</a></span> <span class="id">c</span>) [<span class="id">cs</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.EnumCase">EnumCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">k</span> <span class="id">ty</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">es</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.enum">enum</a></span> <span class="id">b</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Eenum">Eenum</a></span> <span class="id">k</span> <span class="id">ty</span>) [<span class="id">es</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.VarCase">VarCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">s</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Evar">Evar</a></span> <span class="id">x</span> <span class="id">ann</span>) [<span class="id">s</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.LastCase">LastCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">s</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>) <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Elast">Elast</a></span> <span class="id">x</span> <span class="id">ann</span>) [<span class="id">s</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.UnopCase">UnopCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">op</span> <span class="id">ty</span> <span class="id">s</span> <span class="id">o</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">s</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">s</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">e</span> = [<span class="id">ty</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.lift1">lift1</a></span> <span class="id">op</span> <span class="id">ty</span> <span class="id">s</span> <span class="id">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Eunop">Eunop</a></span> <span class="id">op</span> <span class="id">e</span> <span class="id">ann</span>) [<span class="id">o</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.BinopCase">BinopCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">op</span> <span class="id">ty1</span> <span class="id">ty2</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">o</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e1</span> [<span class="id">s1</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e1</span> [<span class="id">s1</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e2</span> [<span class="id">s2</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e2</span> [<span class="id">s2</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">e1</span> = [<span class="id">ty1</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">e2</span> = [<span class="id">ty2</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.lift2">lift2</a></span> <span class="id">op</span> <span class="id">ty1</span> <span class="id">ty2</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Ebinop">Ebinop</a></span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ann</span>) [<span class="id">o</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.ExtcallCase">ExtcallCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">f</span> <span class="id">es</span> <span class="id">tyout</span> <span class="id">ck</span> <span class="id">tyins</span> <span class="id">ss</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">cty</span> <span class="id">ty</span> =&gt; <span class="id">cty</span> = <span class="id"><a href="Velus.Lustre.LSemantics.html#Op.Tprimitive">Tprimitive</a></span> <span class="id">ty</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typesof">typesof</a></span> <span class="id">es</span>) <span class="id">tyins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.liftn">liftn</a></span> (<span class="kwd">fun</span> <span class="id">ss</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Op.sem_extern">sem_extern</a></span> <span class="id">f</span> <span class="id">tyins</span> <span class="id">ss</span> <span class="id">tyout</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>) <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span>  <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Eextcall">Eextcall</a></span> <span class="id">f</span> <span class="id">es</span> (<span class="id">tyout</span>, <span class="id">ck</span>)) [<span class="id">vs</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.FbyCase">FbyCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">anns</span> <span class="id">s0ss</span> <span class="id">sss</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">e0s</span> <span class="id">s0ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">e0s</span> <span class="id">s0ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">sss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">sss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">s0ss</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">sss</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Efby">Efby</a></span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">anns</span>) <span class="id">os</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.ArrowCase">ArrowCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">anns</span> <span class="id">s0ss</span> <span class="id">sss</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">e0s</span> <span class="id">s0ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">e0s</span> <span class="id">s0ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">sss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">sss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.arrow">arrow</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">s0ss</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">sss</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Earrow">Earrow</a></span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">anns</span>) <span class="id">os</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.WhenCase">WhenCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">tx</span> <span class="id">s</span> <span class="id">k</span> <span class="id">es</span> <span class="id">lann</span> <span class="id">ss</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">s</span>' =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.when">when</a></span> <span class="id">k</span> <span class="id">s</span>' <span class="id">s</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Ewhen">Ewhen</a></span> <span class="id">es</span> (<span class="id">x</span>, <span class="id">tx</span>) <span class="id">k</span> <span class="id">lann</span>) <span class="id">os</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.MergeCase">MergeCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">tx</span> <span class="id">s</span> <span class="id">es</span> <span class="id">lann</span> <span class="id">vs</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.merge">merge</a></span> <span class="id">s</span>) <span class="id">vs</span> <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Emerge">Emerge</a></span> (<span class="id">x</span>, <span class="id">tx</span>) <span class="id">es</span> <span class="id">lann</span>) <span class="id">os</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.CaseTotalCase">CaseTotalCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">s</span> <span class="id">es</span> <span class="id">tys</span> <span class="id">ck</span> <span class="id">vs</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">s</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">s</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> (<span class="tactic">case</span> <span class="id">s</span>) <span class="id">vs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">tys</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Ecase">Ecase</a></span> <span class="id">e</span> <span class="id">es</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id">tys</span>, <span class="id">ck</span>)) <span class="id">os</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.CaseDefaultCase">CaseDefaultCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">s</span> <span class="id">es</span> <span class="id">d</span> <span class="id">lann</span> <span class="id">vs</span> <span class="id">vd</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">s</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">s</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.wt_streams">wt_streams</a></span> [<span class="id">s</span>] (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">e</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">d</span> <span class="id">vd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">d</span> <span class="id">vd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> (<span class="tactic">case</span> <span class="id">s</span>) <span class="id">vs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vd</span>)) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Ecase">Ecase</a></span> <span class="id">e</span> <span class="id">es</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d</span>) <span class="id">lann</span>) <span class="id">os</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.AppCase">AppCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">f</span> <span class="id">es</span> <span class="id">er</span> <span class="id">lann</span> <span class="id">ss</span> <span class="id">os</span> <span class="id">sr</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">r</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">r</span>]) <span class="id">er</span> <span class="id">sr</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">r</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> [<span class="id">r</span>]) <span class="id">er</span> <span class="id">sr</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.bools_ofs">bools_ofs</a></span> <span class="id">sr</span> <span class="id">bs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">f</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskv">maskv</a></span> <span class="id">k</span> <span class="id">bs</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskv">maskv</a></span> <span class="id">k</span> <span class="id">bs</span>) <span class="id">os</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_node">P_node</a></span> <span class="id">f</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskv">maskv</a></span> <span class="id">k</span> <span class="id">bs</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskv">maskv</a></span> <span class="id">k</span> <span class="id">bs</span>) <span class="id">os</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Eapp">Eapp</a></span> <span class="id">f</span> <span class="id">es</span> <span class="id">er</span> <span class="id">lann</span>) <span class="id">os</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.Equation">Equation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">xs</span> <span class="id">es</span> <span class="id">ss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>)) <span class="id">xs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_equation">P_equation</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id">xs</span>, <span class="id">es</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.BeqCase">BeqCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_equation">P_equation</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Beq">Beq</a></span> <span class="id">eq</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.BresetCase">BresetCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">blocks</span> <span class="id">er</span> <span class="id">sr</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">er</span> [<span class="id">sr</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">er</span> [<span class="id">sr</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.bools_of">bools_of</a></span> <span class="id">sr</span> <span class="id">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">r</span> <span class="id">H</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskb">maskb</a></span> <span class="id">k</span> <span class="id">r</span> <span class="id">b</span>)) <span class="id">blocks</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">r</span> <span class="id">H</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskb">maskb</a></span> <span class="id">k</span> <span class="id">r</span> <span class="id">b</span>)) <span class="id">blocks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">H</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Breset">Breset</a></span> <span class="id">blocks</span> <span class="id">er</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.BswitchCase">BswitchCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">b</span> <span class="id">ec</span> <span class="id">branches</span> <span class="id">sc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span> <span class="id">b</span> <span class="id">ec</span> [<span class="id">sc</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">Hi</span> <span class="id">b</span> <span class="id">ec</span> [<span class="id">sc</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.wt_streams">wt_streams</a></span> [<span class="id">sc</span>] (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.typeof">typeof</a></span> <span class="id">ec</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> =&gt; <span class="tactic">exists</span> <span class="id">Hi</span>', <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.when_hist">when_hist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">Hi</span> <span class="id">sc</span> <span class="id">Hi</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">let</span> <span class="id">bi</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fwhenb">fwhenb</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">b</span> <span class="id">sc</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">blks</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span>' <span class="id">bi</span>) <span class="id">blks</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">Hi</span>' <span class="id">bi</span>) <span class="id">blks</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>)) <span class="id">Hi</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>)) <span class="id">branches</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">Hi</span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.TransDefCase">TransDefCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">default</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">stres</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span> <span class="id">default</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_transitions">P_transitions</a></span> <span class="id">Hi</span> <span class="id">bs</span> [] <span class="id">default</span> <span class="id">stres</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.TransCase">TransCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">C</span> <span class="id">r</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">vs</span> <span class="id">bs</span>' <span class="id">stres1</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> [<span class="id">vs</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> [<span class="id">vs</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.bools_of">bools_of</a></span> <span class="id">vs</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_transitions">P_transitions</a></span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">stres</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.choose_first">choose_first</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span>' (<span class="id">C</span>, <span class="id">r</span>)) <span class="id">stres1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_transitions">P_transitions</a></span> <span class="id">Hi</span> <span class="id">bs</span> ((<span class="id">e</span>, (<span class="id">C</span>, <span class="id">r</span>))::<span class="id">trans</span>) <span class="id">default</span> <span class="id">stres</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.BautoWeakCase">BautoWeakCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">ini</span> <span class="id">oth</span> <span class="id">states</span> <span class="id">ck</span> <span class="id">bs</span>' <span class="id">stres0</span> <span class="id">stres1</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">Hi</span>) <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span> <span class="id">bs</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, <span class="id">t</span>) =&gt; (<span class="id">e</span>, (<span class="id">t</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>))) <span class="id">ini</span>) (<span class="id">oth</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">stres0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_transitions">P_transitions</a></span> <span class="id">Hi</span> <span class="id">bs</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, <span class="id">t</span>) =&gt; (<span class="id">e</span>, (<span class="id">t</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>))) <span class="id">ini</span>) (<span class="id">oth</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">stres0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> <span class="id">stres0</span> <span class="id">stres1</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '((<span class="id">tag</span>, <span class="id">_</span>), <span class="id">br</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="tactic">exists</span> <span class="id">Hik</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.select_hist">select_hist</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">Hi</span> <span class="id">Hik</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">let</span> <span class="id">bik</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselectb">fselectb</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">bs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> '(<span class="id">_</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.scope">scope</a></span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">Hi</span>' <span class="id">bik</span> <span class="id">e</span> <span class="id">vs</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span>' <span class="id">bik</span> <span class="id">e</span> <span class="id">vs</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">Hi</span>' <span class="id">bik</span> <span class="id">e</span> <span class="id">vs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">Hi</span>' <span class="id">blks</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span>' <span class="id">bik</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">Hi</span>' <span class="id">bik</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span>' <span class="id">bik</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>) (<span class="id">tag</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_transitions">P_transitions</a></span> <span class="id">Hi</span>' <span class="id">bik</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>) (<span class="id">tag</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id">Hik</span> <span class="id">bik</span> <span class="id">scope</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Weak">Weak</a></span> <span class="id">ck</span> (<span class="id">ini</span>, <span class="id">oth</span>) <span class="id">states</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> '(<span class="id">_</span>, <span class="id">s</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in_scope">Is_defined_in_scope</a></span> (<span class="kwd">fun</span> '(<span class="id">blks</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>) <span class="id">blks</span>) <span class="id">x</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hik</span> <span class="id">br</span>) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">Hi</span> <span class="id">bs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Weak">Weak</a></span> <span class="id">ck</span> (<span class="id">ini</span>, <span class="id">oth</span>) <span class="id">states</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.BautoStrongCase">BautoStrongCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">ini</span> <span class="id">states</span> <span class="id">ck</span> <span class="id">bs</span>' <span class="id">stres0</span> <span class="id">stres1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">Hi</span>) <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span>' (<span class="id">ini</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>)) <span class="id">stres1</span> <span class="id">stres0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '((<span class="id">tag</span>, <span class="id">_</span>), <span class="id">br</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="tactic">exists</span> <span class="id">Hik</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.select_hist">select_hist</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres0</span> <span class="id">Hi</span> <span class="id">Hik</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">let</span> <span class="id">bik</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselectb">fselectb</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres0</span> <span class="id">bs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> '(<span class="id">unl</span>, <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hik</span> <span class="id">bik</span> <span class="id">unl</span> (<span class="id">tag</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres0</span> <span class="id">stres1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_transitions">P_transitions</a></span> <span class="id">Hik</span> <span class="id">bik</span> <span class="id">unl</span> (<span class="id">tag</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres0</span> <span class="id">stres1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> ([], <span class="id">ini</span>) <span class="id">states</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> '(<span class="id">_</span>, <span class="id">s</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in_scope">Is_defined_in_scope</a></span> (<span class="kwd">fun</span> '(<span class="id">blks</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>) <span class="id">blks</span>) <span class="id">x</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hik</span> <span class="id">br</span>) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '((<span class="id">tag</span>, <span class="id">_</span>), <span class="id">br</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="tactic">exists</span> <span class="id">Hik</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.select_hist">select_hist</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres1</span> <span class="id">Hi</span> <span class="id">Hik</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">let</span> <span class="id">bik</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselectb">fselectb</a></span> <span class="id">tag</span> <span class="id">k</span> <span class="id">stres1</span> <span class="id">bs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> '(<span class="id">_</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.scope">scope</a></span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">Hi</span>' <span class="id">bik</span> <span class="id">e</span> <span class="id">vs</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span>' <span class="id">bik</span> <span class="id">e</span> <span class="id">vs</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">Hi</span>' <span class="id">bik</span> <span class="id">e</span> <span class="id">vs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">Hi</span>' <span class="id">blks</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span>' <span class="id">bik</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">Hi</span>' <span class="id">bik</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id">Hik</span> <span class="id">bik</span> <span class="id">scope</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> ([], <span class="id">ini</span>) <span class="id">states</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> '(<span class="id">_</span>, <span class="id">s</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in_scope">Is_defined_in_scope</a></span> (<span class="kwd">fun</span> '(<span class="id">blks</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>) <span class="id">blks</span>) <span class="id">x</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hik</span> <span class="id">br</span>) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">Hi</span> <span class="id">bs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> ([], <span class="id">ini</span>) <span class="id">states</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.BlocalCase">BlocalCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">scope</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> (<span class="kwd">fun</span> <span class="id">Hi</span>' <span class="id">bs</span> <span class="id">e</span> <span class="id">vs</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span>' <span class="id">bs</span> <span class="id">e</span> <span class="id">vs</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">Hi</span>' <span class="id">bs</span> <span class="id">e</span> <span class="id">vs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">Hi</span>' <span class="id">blks</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span>' <span class="id">bs</span>) <span class="id">blks</span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">Hi</span>' <span class="id">bs</span>) <span class="id">blks</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hi</span> <span class="id">bs</span> <span class="id">scope</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">Hi</span> <span class="id">bs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Blocal">Blocal</a></span> <span class="id">scope</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2.Node">Node</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">ss</span> <span class="id">os</span> <span class="id">n</span> <span class="id">H</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_in">n_in</a></span>)) <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_out">n_out</a></span>)) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">bs</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.clocks_of">clocks_of</a></span> <span class="id">ss</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> (<span class="kwd">fun</span> <span class="id">Hi</span>' <span class="id">bs</span> <span class="id">e</span> <span class="id">vs</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">Hi</span>' <span class="id">bs</span> <span class="id">e</span> <span class="id">vs</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">Hi</span>' <span class="id">bs</span> <span class="id">e</span> <span class="id">vs</span>) (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.empty">FEnv.empty</a></span> <span class="id">_</span>) <span class="id">H</span> <span class="id">bs</span>) <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_out">n_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">bs</span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_block">n_block</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">H</span> <span class="id">bs</span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_block">n_block</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_node">P_node</a></span> <span class="id">f</span> <span class="id">ss</span> <span class="id">os</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Ltac</span> <span class="id">SolveForall</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> ?<span class="id">P1</span> ?<span class="id">l</span> |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> ?<span class="id">P2</span> ?<span class="id">l</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> ?<span class="id">P1</span> ?<span class="id">l1</span> ?<span class="id">l2</span> |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> ?<span class="id">P2</span> ?<span class="id">l1</span> ?<span class="id">l2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="LSEMANTICS.sem_exp_ind2">sem_exp_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) (<span class="id">b</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">e</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span>) (<span class="id">ss</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sem</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">ss</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">struct</span> <span class="id">Sem</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_exp">P_exp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">ss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="LSEMANTICS.sem_equation_ind2">sem_equation_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) (<span class="id">b</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">e</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.equation">equation</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sem</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">struct</span> <span class="id">Sem</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_equation">P_equation</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="LSEMANTICS.sem_transitions_ind2">sem_transitions_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) (<span class="id">b</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sem</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">struct</span> <span class="id">Sem</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_transitions">P_transitions</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="LSEMANTICS.sem_block_ind2">sem_block_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) (<span class="id">b</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">d</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block">block</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sem</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">struct</span> <span class="id">Sem</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_block">P_block</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="LSEMANTICS.sem_node_ind2">sem_node_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span>: <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) (<span class="id">ss</span> <span class="id">os</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sem</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.G">G</a></span> <span class="id">f</span> <span class="id">ss</span> <span class="id">os</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">struct</span> <span class="id">Sem</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.P_node">P_node</a></span> <span class="id">f</span> <span class="id">ss</span> <span class="id">os</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.ConstCase">ConstCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.EnumCase">EnumCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.VarCase">VarCase</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.LastCase">LastCase</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.UnopCase">UnopCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.BinopCase">BinopCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.ExtcallCase">ExtcallCase</a></span>; <span class="tactic">eauto</span>. <span class="tactic">clear</span> <span class="id">H1</span> <span class="id">H3</span>; <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.FbyCase">FbyCase</a></span>; <span class="tactic">eauto</span>; <span class="tactic">clear</span> <span class="id">H3</span>; <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.ArrowCase">ArrowCase</a></span>; <span class="tactic">eauto</span>; <span class="tactic">clear</span> <span class="id">H3</span>; <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.WhenCase">WhenCase</a></span>; <span class="tactic">eauto</span>; <span class="tactic">clear</span> <span class="id">H3</span>; <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.MergeCase">MergeCase</a></span>; <span class="tactic">eauto</span>; <span class="tactic">clear</span> <span class="id">H3</span>; <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H2</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">clear</span> <span class="id">IHForall2Brs</span> <span class="id">H2</span> <span class="id">H3</span>. <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.CaseTotalCase">CaseTotalCase</a></span>; <span class="tactic">eauto</span>; <span class="tactic">clear</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H2</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">clear</span> <span class="id">IHForall2Brs</span> <span class="id">H2</span> <span class="id">H3</span>. <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.CaseDefaultCase">CaseDefaultCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">clear</span> - <span class="id">sem_exp_ind2</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H3</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">clear</span> <span class="id">IHForall2Brs</span> <span class="id">H1</span> <span class="id">H3</span>. <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">clear</span> - <span class="id">sem_exp_ind2</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.AppCase">AppCase</a></span>; <span class="tactic">eauto</span>; <span class="tactic">clear</span> <span class="id">H3</span> <span class="id">H4</span>; <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.Equation">Equation</a></span> <span class="kwd">with</span> (<span class="id">ss</span>:=<span class="id">ss</span>); <span class="tactic">eauto</span>; <span class="tactic">clear</span> <span class="id">H2</span>; <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.TransDefCase">TransDefCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.TransCase">TransCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.BeqCase">BeqCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.BresetCase">BresetCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H3</span> <span class="id">k</span>). <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.BswitchCase">BswitchCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span>. <span class="tactic">generalize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>) <span class="kwd">as</span> <span class="id">blk</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SolveForall</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_conjs</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">clear</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.BautoWeakCase">BautoWeakCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H4</span>. <span class="tactic">generalize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Weak">Weak</a></span> <span class="id">ck</span> (<span class="id">ini</span>, <span class="id">oth</span>) <span class="id">states</span>) <span class="kwd">as</span> <span class="id">blk</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SolveForall</span>. <span class="id">destruct_conjs</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H0</span> <span class="id">k</span>). <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>'. <span class="id">inv_scope</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>). 2:<span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">clear</span> - <span class="id">sem_exp_ind2</span> <span class="id">H8</span>. <span class="id">SolveForall</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">clear</span> <span class="id">H7</span>. <span class="tactic">simpl</span>. <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.BautoStrongCase">BautoStrongCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">clear</span> - <span class="id">H3</span> <span class="id">sem_transitions_ind2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H3</span>. <span class="tactic">generalize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> ([], <span class="id">ini</span>) <span class="id">states</span>) <span class="kwd">as</span> <span class="id">blk</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SolveForall</span>. <span class="id">destruct_conjs</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H0</span> <span class="id">k</span>). <span class="id">destruct_conjs</span>. <span class="id">inv_branch</span>'. <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">clear</span> <span class="id">H3</span>. <span class="id">revert</span> <span class="id">H4</span>. <span class="tactic">generalize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> ([], <span class="id">ini</span>) <span class="id">states</span>) <span class="kwd">as</span> <span class="id">blk</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SolveForall</span>. <span class="id">destruct_conjs</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H0</span> <span class="id">k</span>). <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>'. <span class="id">inv_scope</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>. <span class="tactic">do</span> 2 (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="tactic">split</span>; <span class="tactic">auto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">clear</span> - <span class="id">sem_exp_ind2</span> <span class="id">H7</span>. <span class="id">SolveForall</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">clear</span> <span class="id">H6</span>. <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.BlocalCase">BlocalCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. 2:<span class="tactic">split</span>; <span class="tactic">auto</span>; <span class="id">SolveForall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">sem_exp_ind2</span> <span class="id">H2</span>. <span class="id">SolveForall</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2.Node">Node</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">sem_exp_ind2</span> <span class="id">H3</span>. <span class="id">SolveForall</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2">sem_exp_ind2</a></span>.<br/>
&nbsp;&nbsp;<br/>
<h2> properties of the <span class="bracket"><span class="id">global</span></span> environment </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">sem_cons</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">simpl_Forall</span>; <span class="id">solve_Exists</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_eq">Is_node_in_eq</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">_</span> ?<span class="id">l1</span> ?<span class="id">l2</span> |- <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">_</span> ?<span class="id">l1</span> ?<span class="id">l2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span>; <span class="id">sem_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">_</span> -&gt; ?<span class="id">R</span> |- ?<span class="id">R</span> =&gt; <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="kwd">forall</span> (<span class="id">_</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>)), <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_exp">Is_node_in_exp</a></span>; <span class="tactic">econstructor</span>; <span class="id">sem_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Hname</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span> ?<span class="id">nd</span> &lt;&gt; <span class="id">_</span>, <span class="id">Hfind</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.find_node">find_node</a></span> <span class="id">_</span> {| <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.types">types</a></span> := <span class="id">_</span>; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.nodes">nodes</a></span> := ?<span class="id">nd</span> :: <span class="id">_</span> |} = <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.find_node_other">find_node_other</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Hname</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span> ?<span class="id">nd</span> &lt;&gt; <span class="id">_</span> |- <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.find_node">find_node</a></span> <span class="id">_</span> {| <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.types">types</a></span> := <span class="id">_</span>; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.nodes">nodes</a></span> := ?<span class="id">nd</span> :: <span class="id">_</span> |} = <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.find_node_other">find_node_other</a></span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Hname</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span> ?<span class="id">nd</span> &lt;&gt; <span class="id">_</span> |- ~<span class="id">_</span> =&gt; <span class="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: ~<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_exp">Is_node_in_exp</a></span> <span class="id">_</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Eapp">Eapp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) |- <span class="id">_</span> &lt;&gt; <span class="id">_</span> =&gt; <span class="id">contradict</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.INEapp2">INEapp2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: ~<span class="id">_</span> |- ~<span class="id">_</span> =&gt; <span class="id">contradict</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">constructor</span>; <span class="id">sem_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">_</span> \/ <span class="id">_</span> =&gt; <span class="tactic">solve</span> [<span class="tactic">left</span>;<span class="id">sem_cons</span>|<span class="tactic">right</span>;<span class="id">sem_cons</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="tactic">exists</span> <span class="id">d</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d</span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> <span class="id">_</span> <span class="id">d</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; [<span class="tactic">reflexivity</span>|<span class="id">sem_cons</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">k</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>,<span class="id">H</span>: <span class="kwd">forall</span> (<span class="id">_</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>), <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">specialize</span> (<span class="id">H</span> <span class="id">k</span>); <span class="id">sem_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id">_</span> ?<span class="id">xs</span> <span class="id">_</span> |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id">_</span> ?<span class="id">xs</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span>; <span class="id">sem_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="tactic">exists</span> <span class="id">_</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.when_hist">when_hist</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /\ <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; [<span class="tactic">auto</span>|<span class="id">sem_cons</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="tactic">exists</span> <span class="id">_</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.select_hist">select_hist</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /\ <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; [<span class="tactic">auto</span>|<span class="id">sem_cons</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">destruct_conjs</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">destruct_conjs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_branch">Is_node_in_branch</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="tactic">econstructor</span>; <span class="id">sem_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">destruct_conjs</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_scope">Is_node_in_scope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="tactic">econstructor</span>; <span class="id">sem_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="tactic">split</span>; <span class="id">sem_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="tactic">exists</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> /\ <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">eauto</span>; <span class="id">sem_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.exp_cons1">exp_cons1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_exp">Is_node_in_exp</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) <span class="id">e</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">H</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.equation_cons1">equation_cons1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">equ</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_eq">Is_node_in_eq</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) <span class="id">equ</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">H</span> <span class="id">bs</span> <span class="id">equ</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.transitions_cons1">transitions_cons1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_exp">Is_node_in_exp</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) <span class="id">e</span>) <span class="id">trans</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">H</span> <span class="id">bs</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.block_cons1">block_cons1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">blk</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_block">Is_node_in_block</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) <span class="id">blk</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">H</span> <span class="id">bs</span> <span class="id">blk</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.node_cons1">node_cons1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) &lt;&gt; <span class="id">f</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons1">exp_cons1</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.equation_cons1">equation_cons1</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.transitions_cons1">transitions_cons1</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons1">block_cons1</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons1">node_cons1</a></span> : <span class="id">lsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_exp_cons1">sem_exp_cons1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">nds</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons1">exp_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hord</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2">sem_exp_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">P_exp</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons1">exp_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_equation</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.equation_cons1">equation_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_transitions</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.transitions_cons1">transitions_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_block</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons1">block_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_node</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons1">node_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>). 25:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">autounfold</span> <span class="kwd">with</span> <span class="id">lsem</span> <span class="kwd">in</span> *; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">repeat</span> <span class="id">sem_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">left</span>; <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">right</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_block_cons1">sem_block_cons1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">nds</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">blk</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">Hi</span> <span class="id">bs</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons1">block_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hord</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block_ind2">sem_block_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">P_exp</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons1">exp_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_equation</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.equation_cons1">equation_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_transitions</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.transitions_cons1">transitions_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_block</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons1">block_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_node</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons1">node_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>). 25:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">autounfold</span> <span class="kwd">with</span> <span class="id">lsem</span> <span class="kwd">in</span> *; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">repeat</span> <span class="id">sem_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">left</span>; <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">right</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_node_cons1">sem_node_cons1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">nds</span> <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons1">node_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span> <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hord</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node_ind2">sem_node_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">P_exp</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons1">exp_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_equation</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.equation_cons1">equation_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_transitions</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.transitions_cons1">transitions_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_block</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons1">block_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_node</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons1">node_cons1</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>). 25:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">autounfold</span> <span class="kwd">with</span> <span class="id">lsem</span> <span class="kwd">in</span> *; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">repeat</span> <span class="id">sem_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">left</span>; <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">right</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id">sem_node_cons1</span>' {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">n</span> <span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">nds</span> <span class="id">Hi</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in">Is_node_in</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">Hi</span> <span class="id">bs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_block">n_block</a></span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>))) (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.empty">FEnv.empty</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>)) <span class="id">Hi</span> <span class="id">bs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_out">n_out</a></span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">Hi</span> <span class="id">bs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_block">n_block</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>)) (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.empty">FEnv.empty</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>)) <span class="id">Hi</span> <span class="id">bs</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_out">n_out</a></span> <span class="id">n</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hord</span> <span class="id">Hnin</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block_cons1">sem_block_cons1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hnin</span>. <span class="id">now</span> <span class="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_Forall</span>. <span class="id">inv</span> <span class="id">Hsem2</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_cons1">sem_exp_cons1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hnin</span>. <span class="tactic">left</span>; <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.exp_cons2">exp_cons2</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_exp">Is_node_in_exp</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) <span class="id">e</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.equation_cons2">equation_cons2</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">equ</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_eq">Is_node_in_eq</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) <span class="id">equ</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">equ</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.transitions_cons2">transitions_cons2</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_exp">Is_node_in_exp</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) <span class="id">e</span>) <span class="id">trans</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.block_cons2">block_cons2</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">blk</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Is_node_in_block">Is_node_in_block</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) <span class="id">blk</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">H</span> <span class="id">bs</span> <span class="id">blk</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.node_cons2">node_cons2</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">nds</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>)) <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span>) &lt;&gt; <span class="id">f</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons2">exp_cons2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.equation_cons2">equation_cons2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.transitions_cons2">transitions_cons2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons2">block_cons2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons2">node_cons2</a></span> : <span class="id">lsem</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_exp_cons2">sem_exp_cons2</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">nds</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons2">exp_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hord</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_ind2">sem_exp_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">P_exp</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons2">exp_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_equation</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.equation_cons2">equation_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_transitions</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.transitions_cons2">transitions_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_block</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons2">block_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_node</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons2">node_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>). 25:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">autounfold</span> <span class="kwd">with</span> <span class="id">lsem</span> <span class="kwd">in</span> *; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">repeat</span> <span class="id">sem_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">left</span>; <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">right</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_block_cons2">sem_block_cons2</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">nds</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">blk</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">Hi</span> <span class="id">bs</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons2">block_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hord</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block_ind2">sem_block_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">P_exp</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons2">exp_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_equation</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.equation_cons2">equation_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_transitions</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.transitions_cons2">transitions_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_block</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons2">block_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_node</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons2">node_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>). 25:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">autounfold</span> <span class="kwd">with</span> <span class="id">lsem</span> <span class="kwd">in</span> *; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">repeat</span> <span class="id">sem_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">left</span>; <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">right</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_node_cons2">sem_node_cons2</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">nds</span> <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> (<span class="kwd">Global</span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons2">node_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span> <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hord</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node_ind2">sem_node_ind2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">P_exp</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.exp_cons2">exp_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_equation</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.equation_cons2">equation_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_transitions</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.transitions_cons2">transitions_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_block</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.block_cons2">block_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_node</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_cons2">node_cons2</a></span> <span class="id">typs</span> <span class="id">exts</span> <span class="id">nd</span> <span class="id">nds</span>). 25:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">autounfold</span> <span class="kwd">with</span> <span class="id">lsem</span> <span class="kwd">in</span> *; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">repeat</span> <span class="id">sem_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">left</span>; <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span>. <span class="tactic">right</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_node_cons_iff">sem_node_cons_iff</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">nds</span> <span class="id">types</span> <span class="id">externs</span> <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">types</span> <span class="id">externs</span> (<span class="id">n</span>::<span class="id">nds</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span> <span class="id">n</span> &lt;&gt; <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> (<span class="kwd">Global</span> <span class="id">types</span> <span class="id">externs</span> <span class="id">nds</span>) <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> (<span class="kwd">Global</span> <span class="id">types</span> <span class="id">externs</span> (<span class="id">n</span>::<span class="id">nds</span>)) <span class="id">f</span> <span class="id">xs</span> <span class="id">ys</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hord</span> <span class="id">Hname</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node_cons2">sem_node_cons2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node_cons1">sem_node_cons1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> All the defined variables have a semantic </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_var_In">sem_var_In</a></span> {<span class="id">K</span>} : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">x</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">K</span> <span class="id">H</span> <span class="id">x</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">H</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hv</span>. <span class="id">inv</span> <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_vars_In">sem_vars_In</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">xs</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>)) <span class="id">xs</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">H</span>) <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hvs</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_var_In">sem_var_In</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_block_defined">sem_block_defined</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) : <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">H</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hsem</span> <span class="id">Hdef</span>; <span class="tactic">repeat</span> <span class="id">inv_block</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> (?&amp;?&amp;?); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_var_In">sem_var_In</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">H9</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H9</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map_in_iff">FEnv.map_in_iff</a></span> <span class="kwd">in</span> <span class="id">H9</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_branch</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In_refines">FEnv.In_refines</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H12</span> 0); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_branch</span>'. <span class="tactic">repeat</span> <span class="id">inv_scope</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In_refines">FEnv.In_refines</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_In">FEnv.union_In</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [|<span class="id">Hin</span>']; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="id">take</span> (~ <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id">it</span> <span class="kwd">in</span> <span class="id">Hin</span>'. <span class="id">inv</span> <span class="id">Hin</span>'. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H12</span> 0); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_branch</span>'. <span class="tactic">repeat</span> <span class="id">inv_scope</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In_refines">FEnv.In_refines</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_In">FEnv.union_In</a></span> <span class="kwd">in</span> <span class="id">H15</span> <span class="kwd">as</span> [|<span class="id">Hin</span>']; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="id">take</span> (~ <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id">it</span> <span class="kwd">in</span> <span class="id">Hin</span>'. <span class="id">inv</span> <span class="id">Hin</span>'. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_scope</span>'. <span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_In">FEnv.union_In</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> [|<span class="id">Hin</span>']; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="id">take</span> (~ <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id">it</span> <span class="kwd">in</span> <span class="id">Hin</span>'. <span class="id">inv</span> <span class="id">Hin</span>'. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.Forall_sem_block_defined">Forall_sem_block_defined</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) : <span class="kwd">forall</span> <span class="id">blks</span> <span class="id">x</span> <span class="id">H</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">bs</span>) <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>) <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">H</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span> <span class="id">Hdef</span>; <span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block_defined">sem_block_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_scope_defined">sem_scope_defined</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) : <span class="kwd">forall</span> <span class="id">locs</span> <span class="id">blks</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span>) (<span class="kwd">fun</span> <span class="id">Hi</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">Hi</span> <span class="id">bs</span>)) <span class="id">Hi</span> <span class="id">bs</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in_scope">Is_defined_in_scope</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>)) <span class="id">x</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">Hi</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span> <span class="id">Hdef</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hdef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall_sem_block_defined">Forall_sem_block_defined</a></span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_In">FEnv.union_In</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [|<span class="id">Hin</span>']; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="id">take</span> (~ <span class="id">_</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id">it</span> <span class="kwd">in</span> <span class="id">Hin</span>'. <span class="id">inv</span> <span class="id">Hin</span>'. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_scope_defined1">sem_scope_defined1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">locs</span> <span class="id">blks</span> <span class="id">Hi</span> <span class="id">bs</span> Γ <span class="id">xs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span>) (<span class="kwd">fun</span> <span class="id">Hi</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">Hi</span> <span class="id">bs</span>)) <span class="id">Hi</span> <span class="id">bs</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompScope">VarsDefinedCompScope</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> <span class="id">ys</span> =&gt; <span class="tactic">exists</span> <span class="id">xs</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedComp">VarsDefinedComp</a></span> <span class="id">blks</span> <span class="id">xs</span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">xs</span>) <span class="id">ys</span>) (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupScope">NoDupScope</a></span> (<span class="kwd">fun</span> Γ =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals">NoDupLocals</a></span> Γ)) Γ (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">Hi</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span> <span class="id">Hdef</span> <span class="id">Hnd</span> <span class="id">Hincl</span> <span class="id">Hinxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope_defined">sem_scope_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompScope_Is_defined">VarsDefinedCompScope_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupScope_incl">NoDupScope_incl</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Forall_VarsDefinedComp_Is_defined">Forall_VarsDefinedComp_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. 1,2:<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_scope_defined2">sem_scope_defined2</a></span> {<span class="id">A</span>} {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">locs</span> (<span class="id">blks</span>: <span class="id">_</span> * <span class="id">A</span>) <span class="id">Hi</span> <span class="id">bs</span> Γ <span class="id">xs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span>) (<span class="kwd">fun</span> <span class="id">Hi</span> <span class="id">blks</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">Hi</span> <span class="id">bs</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>)) <span class="id">Hi</span> <span class="id">bs</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompScope">VarsDefinedCompScope</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> <span class="id">ys</span> =&gt; <span class="tactic">exists</span> <span class="id">xs</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedComp">VarsDefinedComp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">xs</span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">xs</span>) <span class="id">ys</span>) (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupScope">NoDupScope</a></span> (<span class="kwd">fun</span> Γ <span class="id">blks</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals">NoDupLocals</a></span> Γ) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>)) Γ (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">Hi</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span> <span class="id">Hdef</span> <span class="id">Hnd</span> <span class="id">Hincl</span> <span class="id">Hinxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope_defined1">sem_scope_defined1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hdef</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hnd</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_branch_defined">sem_branch_defined</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">must_def</span> <span class="id">is_def</span> : <span class="kwd">forall</span> <span class="id">caus</span> <span class="id">blks</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">Hi</span> <span class="id">bs</span>)) <span class="id">must_def</span> <span class="id">is_def</span> <span class="id">Hi</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in_branch">Is_defined_in_branch</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>)) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">Hi</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span> <span class="id">Hdef</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hdef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall_sem_block_defined">Forall_sem_block_defined</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_branch_defined1">sem_branch_defined1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">caus</span> <span class="id">ec</span> <span class="id">branches</span> <span class="id">blks</span> <span class="id">Hi</span> <span class="id">bs</span> Γ <span class="id">xs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">Hi</span> <span class="id">bs</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hi</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompBranch">VarsDefinedCompBranch</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> <span class="id">ys</span> =&gt; <span class="tactic">exists</span> <span class="id">xs</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedComp">VarsDefinedComp</a></span> <span class="id">blks</span> <span class="id">xs</span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">xs</span>) <span class="id">ys</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupBranch">NoDupBranch</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals">NoDupLocals</a></span> Γ)) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">Hi</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span> <span class="id">Hdef</span> <span class="id">Hnd</span> <span class="id">Hincl</span> <span class="id">Hinxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch_defined">sem_branch_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompBranch_Is_defined">VarsDefinedCompBranch_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Forall_VarsDefinedComp_Is_defined">Forall_VarsDefinedComp_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. 1,2:<span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_branch_defined2">sem_branch_defined2</a></span> {<span class="id">A</span>} {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">must_def</span> <span class="id">is_def</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">caus</span> (<span class="id">blks</span>: (<span class="id">A</span> * <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.scope">scope</a></span> (<span class="id">_</span> * <span class="id">A</span>))) <span class="id">Hi</span> <span class="id">bs</span> Γ <span class="id">xs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_branch">sem_branch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">blks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">Hi</span> <span class="id">blks</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">Hi</span> <span class="id">bs</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>)) <span class="id">Hi</span> <span class="id">bs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">must_def</span> <span class="id">is_def</span> <span class="id">Hi</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompBranch">VarsDefinedCompBranch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">blks</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompScope">VarsDefinedCompScope</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> <span class="id">ys</span> =&gt; <span class="tactic">exists</span> <span class="id">xs</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedComp">VarsDefinedComp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">xs</span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">xs</span>) <span class="id">ys</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupBranch">NoDupBranch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">blks</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupScope">NoDupScope</a></span> (<span class="kwd">fun</span> Γ <span class="id">blks</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals">NoDupLocals</a></span> Γ) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>)) Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">Hi</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span> <span class="id">Hdef</span> <span class="id">Hnd</span> <span class="id">Hincl</span> <span class="id">Hinxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">blks</span> <span class="kwd">as</span> [?(?&amp;?)]. <span class="id">inv</span> <span class="id">Hsem</span>. <span class="id">inv</span> <span class="id">Hdef</span>. <span class="id">inv</span> <span class="id">Hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope_defined2">sem_scope_defined2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Preservation of the semantics while refining an environment </h2>
<div class="doc">If a new environment <span class="bracket"><span class="id">refines</span></span> the previous one, it gives the same semantics
      to variables and therefore expressions, equations dans nodes </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.refines_eq_EqSt">refines_eq_EqSt</a></span> {<span class="id">K</span> <span class="id">A</span>} : <span class="kwd">forall</span> (<span class="id">H</span> <span class="id">H</span>': @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> <span class="id">K</span> <span class="id">_</span>) ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.refines">FEnv.refines</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id">H</span> <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.refines">FEnv.refines</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">A</span>) <span class="id">H</span> <span class="id">H</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Href</span> ?? <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Href</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hfind</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfind</span>. <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_var_refines">sem_var_refines</a></span> {<span class="id">K</span>} : <span class="kwd">forall</span> (<span class="id">H</span> <span class="id">H</span>' : @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> <span class="id">K</span> <span class="id">_</span>) <span class="id">id</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span> ⊑ <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> <span class="id">id</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span>' <span class="id">id</span> <span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">id</span> <span class="id">v</span> <span class="id">Href</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hsem</span>. <span class="tactic">eapply</span> <span class="id">Href</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hfind</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_var_refines_inv">sem_var_refines_inv</a></span> {<span class="id">K</span>} : <span class="kwd">forall</span> <span class="id">env</span> (<span class="id">Hi1</span> <span class="id">Hi2</span>: @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> <span class="id">K</span> <span class="id">_</span>) <span class="id">x</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">x</span> <span class="id">env</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.dom_lb">FEnv.dom_lb</a></span> <span class="id">Hi1</span> <span class="id">env</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">vs</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi1</span> <span class="id">x</span> <span class="id">vs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi2</span> <span class="id">x</span> <span class="id">vs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi2</span> <span class="id">x</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi1</span> <span class="id">x</span> <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span> <span class="id">Hdom</span> <span class="id">Href</span> <span class="id">Hvar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hdom</span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (<span class="id">vs</span>'&amp;<span class="id">Hfind</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi1</span> <span class="id">x</span> <span class="id">vs</span>') <span class="kwd">as</span> <span class="id">Hvar</span>' <span class="tactic">by</span> (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Href</span> <span class="id">_</span> <span class="id">Hvar</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">Href</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Href</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">sem_var_refines</span>' {<span class="id">K</span>} : <span class="kwd">forall</span> (<span class="id">Hi1</span> <span class="id">Hi2</span>: @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> <span class="id">K</span> <span class="id">_</span>) <span class="id">x</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">Hi1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hi1</span> ⊑ <span class="id">Hi2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi2</span> <span class="id">x</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi1</span> <span class="id">x</span> <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span> <span class="id">Href</span> <span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hin</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Href</span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;<span class="id">Heq</span>&amp;<span class="id">Hfind</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hv2</span>. <span class="tactic">rewrite</span> <span class="id">Hfind</span>' <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heq</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id">sem_var_refines</span>'' {<span class="id">K</span>} : <span class="kwd">forall</span> <span class="id">env</span> (<span class="id">Hi1</span> <span class="id">Hi2</span>: @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> <span class="id">K</span> <span class="id">_</span>) <span class="id">x</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">x</span> <span class="id">env</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.dom_lb">FEnv.dom_lb</a></span> <span class="id">Hi1</span> <span class="id">env</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hi1</span> ⊑ <span class="id">Hi2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi2</span> <span class="id">x</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi1</span> <span class="id">x</span> <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span> <span class="id">Hdom</span> <span class="id">Href</span> <span class="id">Hvar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">sem_var_refines</span>' <span class="kwd">in</span> <span class="id">Hvar</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_clock_refines">sem_clock_refines</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">ck</span> <span class="id">bs</span> <span class="id">bs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span> ⊑ <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> <span class="id">H</span> <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> <span class="id">H</span>' <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ck</span>; <span class="tactic">intros</span> * <span class="id">Href</span> <span class="id">Hck</span>; <span class="id">inv</span> <span class="id">Hck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_var_refines">sem_var_refines</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">sem_clock_refines</span>' : <span class="kwd">forall</span> <span class="id">vars</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">ck</span> <span class="id">bs</span> <span class="id">bs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wx_clock">wx_clock</a></span> <span class="id">vars</span> <span class="id">ck</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">vs</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> <span class="id">vars</span> <span class="id">x</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> <span class="id">x</span> <span class="id">vs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span>' <span class="id">x</span> <span class="id">vs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> <span class="id">H</span> <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> <span class="id">H</span>' <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ck</span>; <span class="tactic">intros</span> * <span class="id">Hwx</span> <span class="id">Href</span> <span class="id">Hck</span>; <span class="id">inv</span> <span class="id">Hwx</span>; <span class="id">inv</span> <span class="id">Hck</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_exp_refines">sem_exp_refines</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">b</span> <span class="id">e</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span> ⊑ <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span> <span class="id">H</span>' <span class="id">b</span> <span class="id">e</span> <span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof65')">Proof with</span></div>
<div class="proofscript" id="proof65">
 <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">datatypes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Href</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_var_refines">sem_var_refines</a></span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-3:(<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_equation_refines">sem_equation_refines</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">H</span> <span class="id">H</span>' <span class="id">b</span> <span class="id">equ</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span> ⊑ <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">equ</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id">G</span> <span class="id">H</span>' <span class="id">b</span> <span class="id">equ</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof66')">Proof with</span></div>
<div class="proofscript" id="proof66">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Href</span> <span class="id">Hsem</span>. <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Seq">Seq</a></span> <span class="kwd">with</span> (<span class="id">ss</span>:=<span class="id">ss</span>); <span class="id">simpl_Forall</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_refines">sem_exp_refines</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_var_refines">sem_var_refines</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_transitions_refines">sem_transitions_refines</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">H</span> <span class="id">H</span>' <span class="id">b</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span> ⊑ <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> <span class="id">H</span>' <span class="id">b</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof67')">Proof with</span></div>
<div class="proofscript" id="proof67">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">trans</span>; <span class="tactic">intros</span> * <span class="id">Href</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_refines">sem_exp_refines</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.var_history_refines">var_history_refines</a></span> : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hi1</span> ⊑ <span class="id">Hi2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">Hi1</span>) ⊑ (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">Hi2</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Ref</span> ?? <span class="id">Find</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">var_history_refines</span>' : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">vs</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi1</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">vs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi2</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">vs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">Hi1</span>) ⊑ (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">Hi2</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Ref</span> ?? <span class="id">Find</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi1</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">v</span>) <span class="kwd">as</span> <span class="id">Hv</span> <span class="tactic">by</span> (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Ref</span> <span class="kwd">in</span> <span class="id">Hv</span>. <span class="id">inv</span> <span class="id">Hv</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_block_refines">sem_block_refines</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">d</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span> ⊑ <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">d</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">H</span>' <span class="id">b</span> <span class="id">d</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">d</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Href</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation_refines">sem_equation_refines</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_refines">sem_exp_refines</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H8</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> *. <span class="tactic">intros</span> ? <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>. 1,3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.refines_map">FEnv.refines_map</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?? <span class="id">Heq</span>. <span class="tactic">rewrite</span> <span class="id">Heq</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_refines">sem_exp_refines</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">do</span> 2 <span class="id">esplit</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?? <span class="id">Hfind</span>. <span class="tactic">apply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hwhen</span>&amp;<span class="id">Hfind</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Href</span> <span class="kwd">in</span> <span class="id">Hfind</span>' <span class="kwd">as</span> (?&amp;?&amp;?). <span class="tactic">do</span> 2 <span class="id">esplit</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(weak&nbsp;transitions)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.SautoWeak">SautoWeak</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_clock_refines">sem_clock_refines</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history_refines">var_history_refines</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_refines">sem_transitions_refines</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H11</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>. <span class="id">inv_scope</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplit</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. 2:<span class="tactic">do</span> 2 (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>); <span class="tactic">repeat</span> (<span class="tactic">split</span>; <span class="tactic">eauto</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?? <span class="id">Hfind</span>. <span class="tactic">apply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hwhen</span>&amp;<span class="id">Hfind</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Href</span> <span class="kwd">in</span> <span class="id">Hfind</span>' <span class="kwd">as</span> (?&amp;?&amp;?). <span class="tactic">do</span> 2 <span class="id">esplit</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(strong&nbsp;transitions)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.SautoStrong">SautoStrong</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_clock_refines">sem_clock_refines</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history_refines">var_history_refines</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_refines">sem_transitions_refines</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H10</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplit</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?? <span class="id">Hfind</span>. <span class="tactic">apply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hwhen</span>&amp;<span class="id">Hfind</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Href</span> <span class="kwd">in</span> <span class="id">Hfind</span>' <span class="kwd">as</span> (?&amp;?&amp;?). <span class="tactic">do</span> 2 <span class="id">esplit</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H11</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>. <span class="id">inv_scope</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplit</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. 2:<span class="tactic">do</span> 2 (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>); <span class="tactic">repeat</span> (<span class="tactic">split</span>; <span class="tactic">eauto</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?? <span class="id">Hfind</span>. <span class="tactic">apply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hwhen</span>&amp;<span class="id">Hfind</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Href</span> <span class="kwd">in</span> <span class="id">Hfind</span>' <span class="kwd">as</span> (?&amp;?&amp;?). <span class="tactic">do</span> 2 <span class="id">esplit</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;locals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">econstructor</span>; [| |<span class="tactic">eauto</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_refines">sem_exp_refines</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_refines1">FEnv.union_refines1</a></span>, <span class="id"><a href="Velus.Common.CommonStreams.html#EqStrel_Reflexive">EqStrel_Reflexive</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_refines1">FEnv.union_refines1</a></span>, <span class="id"><a href="Velus.Common.CommonStreams.html#EqStrel_Reflexive">EqStrel_Reflexive</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMANTICS.props">props</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">PSyn</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.decl">decl</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">prefs</span> : <span class="id"><a href="Velus.Common.Common.html#PS.t">PS.t</a></span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="LSEMANTICS.props.G">G</a></span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.prefs">prefs</a></span>).<br/>
<br/>
<div class="doc">The number of streams generated by an expression <span class="bracket"><span class="id">e</span></span> equals <span class="bracket"><span class="id">numstreams</span> <span class="id">e</span></span> </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_exp_numstreams">sem_exp_numstreams</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.G">G</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">v</span> = <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof71')">Proof with</span></div>
<div class="proofscript" id="proof71">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="tactic">intros</span> <span class="id">v</span> <span class="id">Hsem</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.annots">annots</a></span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map_concat_map">flat_map_concat_map</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="kwd">forall</span> <span class="id">_</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> -&gt; <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">specialize</span> (<span class="id">H</span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> ?<span class="id">v</span> |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> ?<span class="id">v</span> = <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_length">Forall3_length</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">Hlen1</span>&amp;<span class="id">Hlen2</span>); <span class="tactic">setoid_rewrite</span> &lt;-<span class="id">Hlen2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id">_</span> <span class="id">_</span> ?<span class="id">v</span> |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> ?<span class="id">v</span> = <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">Hlen1</span>; <span class="tactic">setoid_rewrite</span> &lt;-<span class="id">Hlen1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs">Forall2Brs</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_length1">Forall2Brs_length1</a></span> <span class="kwd">in</span> <span class="id">H</span>; [|<span class="id">now</span> <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span> = ?<span class="id">l</span> |- <span class="id">_</span> = ?<span class="id">l</span> =&gt; <span class="tactic">rewrite</span> &lt;-<span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">l</span> = <span class="id">_</span> |- <span class="id">_</span> = ?<span class="id">l</span> =&gt; <span class="tactic">rewrite</span> &lt;-<span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">es</span> &lt;&gt; [] |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">es</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">simpl_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id">_</span> <span class="id">_</span>) = <span class="id">_</span> =&gt; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">_</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">_</span>) =&gt; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#concat_length_eq">concat_length_eq</a></span>; <span class="id">simpl_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-3:<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>; <span class="id">simpl_Forall</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;case&nbsp;default&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map_concat_map">flat_map_concat_map</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#concat_length_eq">concat_length_eq</a></span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>; <span class="id">simpl_Forall</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">_</span>) <span class="id">and</span> <span class="tactic">specialize</span> (<span class="id">it</span> 0). <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">v</span>) <span class="id">and</span> (<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">it</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H14</span>; <span class="id">inv</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> *. <span class="tactic">setoid_rewrite</span> <span class="id">H16</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_exps_numstreams">sem_exps_numstreams</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">es</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.G">G</a></span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vs</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.annots">annots</a></span> <span class="id">es</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwt</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">v</span> <span class="id">e</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">v</span> = <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>) <span class="id">vs</span> <span class="id">es</span>) <span class="kwd">as</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_numstreams">sem_exp_numstreams</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hwt</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hf</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_exp_sem_var">sem_exp_sem_var</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.G">G</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> '(<span class="id">_</span>, <span class="id">o</span>) <span class="id">s</span> =&gt; <span class="id"><a href="Velus.Common.CommonList.html#LiftO">LiftO</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">s</span>) <span class="id">o</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.nclockof">nclockof</a></span> <span class="id">e</span>) <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">vs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.annot">annot</a></span> <span class="id">e</span>)) <span class="kwd">as</span> <span class="id">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_numstreams">sem_exp_numstreams</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">repeat</span> <span class="tactic">constructor</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">simpl_Forall</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall">Forall2_forall</a></span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_exps_sem_var">sem_exps_sem_var</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">es</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.G">G</a></span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.G">G</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> '(<span class="id">_</span>, <span class="id">o</span>) <span class="id">s</span> =&gt; <span class="id"><a href="Velus.Common.CommonList.html#LiftO">LiftO</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">s</span>) <span class="id">o</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.nclocksof">nclocksof</a></span> <span class="id">es</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vs</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hwc</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hwc</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2_app">Forall2_app</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_sem_var">sem_exp_sem_var</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_vars_mask_inv">sem_vars_mask_inv</a></span> {<span class="id">K</span>} : <span class="kwd">forall</span> <span class="id">k</span> <span class="id">r</span> (<span class="id">H</span>: @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> <span class="id">K</span> <span class="id">_</span>) <span class="id">xs</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_hist">Str.mask_hist</a></span> <span class="id">k</span> <span class="id">r</span> <span class="id">H</span>)) <span class="id">xs</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">vs</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span>) <span class="id">xs</span> <span class="id">vs</span>' /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.EqSts">EqSts</a></span> <span class="id">vs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskv">maskv</a></span> <span class="id">k</span> <span class="id">r</span>) <span class="id">vs</span>').<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hvars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hvars</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> []; <span class="tactic">simpl</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">IHHvars</span> <span class="kwd">as</span> (<span class="id">vs</span>'&amp;<span class="id">Hvars</span>'&amp;<span class="id">Heqs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var_mask_inv">sem_var_mask_inv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">v</span>'&amp;<span class="id">Hvar</span>'&amp;<span class="id">Heq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> (<span class="id">v</span>'::<span class="id">vs</span>'). <span class="tactic">split</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_block_sem_var">sem_block_sem_var</a></span> : <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">x</span> <span class="id">Hi</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Is_defined_in">Is_defined_in</a></span> <span class="id">x</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props.G">G</a></span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">vs</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">Hi</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdef</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block_defined">sem_block_defined</a></span> <span class="kwd">in</span> <span class="id">Hsem</span> <span class="kwd">as</span> (?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.props">props</a></span>.<br/>
<br/>
<h2> Restriction </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.restrict">restrict</a></span> (<span class="id">H</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.history">history</a></span>) Γ :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict">FEnv.restrict</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv">vars_of_senv</a></span> Γ).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.restrict_dom_ub">restrict_dom_ub</a></span> : <span class="kwd">forall</span> <span class="id">H</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">H</span> Γ) Γ.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> *; <span class="tactic">split</span>; <span class="tactic">intros</span> * <span class="id">In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_In">FEnv.restrict_In</a></span> <span class="kwd">in</span> <span class="id">In</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">In</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Var">vars_of_senv_Var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Last">vars_of_senv_Last</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_var_restrict">sem_var_restrict</a></span> {<span class="id">K</span>} `{<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.fenv_key">FEnv.fenv_key</a></span> <span class="id">K</span>} : <span class="kwd">forall</span> <span class="id">vars</span> (<span class="id">H</span>: @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> <span class="id">K</span> <span class="id">_</span>) <span class="id">id</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">id</span> <span class="id">vars</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> <span class="id">id</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict">FEnv.restrict</a></span> <span class="id">H</span> <span class="id">vars</span>) <span class="id">id</span> <span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">HIn</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_find">FEnv.restrict_find</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_var_restrict_inv">sem_var_restrict_inv</a></span> {<span class="id">K</span>} `{<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.fenv_key">FEnv.fenv_key</a></span> <span class="id">K</span>} : <span class="kwd">forall</span> <span class="id">vars</span> (<span class="id">H</span>: @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> <span class="id">K</span> <span class="id">_</span>) <span class="id">id</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict">FEnv.restrict</a></span> <span class="id">H</span> <span class="id">vars</span>) <span class="id">id</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">id</span> <span class="id">vars</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_var">sem_var</a></span> <span class="id">H</span> <span class="id">id</span> <span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hvar</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_dom_ub">FEnv.restrict_dom_ub</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hvar</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_var_refines">sem_var_refines</a></span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_refines">FEnv.restrict_refines</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonStreams.html#EqStrel_Transitive">EqStrel_Transitive</a></span>, <span class="id"><a href="Velus.Common.CommonStreams.html#EqStrel_Reflexive">EqStrel_Reflexive</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_clock_restrict">sem_clock_restrict</a></span> : <span class="kwd">forall</span> Γ <span class="id">xs</span> <span class="id">ck</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">bs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wx_clock">wx_clock</a></span> Γ <span class="id">ck</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> <span class="id">H</span> <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict">FEnv.restrict</a></span> <span class="id">H</span> <span class="id">xs</span>) <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Var</span> <span class="id">Hwx</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">sem_clock_refines</span>'; [<span class="tactic">eauto</span>| |<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?? <span class="id">Hinm</span> <span class="id">Hvar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_var_restrict">sem_var_restrict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.var_history_restrict">var_history_restrict</a></span> : <span class="kwd">forall</span> <span class="id">H</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">H</span> Γ))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict">FEnv.restrict</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">H</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict">FEnv.restrict</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:(<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb_exists">existsb_exists</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (?&amp;<span class="id">In</span>&amp;<span class="id">Eq1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#equiv_decb_equiv">equiv_decb_equiv</a></span> <span class="kwd">in</span> <span class="id">Eq1</span>; <span class="id">inv</span> <span class="id">Eq1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:(<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_Forall">existsb_Forall</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#forallb_Forall">forallb_Forall</a></span> <span class="kwd">in</span> <span class="id">it</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Var">vars_of_senv_Var</a></span> <span class="kwd">in</span> <span class="id">In</span>. <span class="id">inv</span> <span class="id">In</span>; <span class="id">simpl_In</span>. <span class="id">simpl_Forall</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#equiv_decb_refl">equiv_decb_refl</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_In</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">it</span>. 2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Var">vars_of_senv_Var</a></span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#equiv_decb_refl">equiv_decb_refl</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_clock_var_history_restrict">sem_clock_var_history_restrict</a></span> : <span class="kwd">forall</span> Γ <span class="id">ck</span> <span class="id">H</span> <span class="id">bs</span> <span class="id">bs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wx_clock">wx_clock</a></span> Γ <span class="id">ck</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> <span class="id">H</span>) <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history">var_history</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">H</span> Γ)) <span class="id">bs</span> <span class="id">ck</span> <span class="id">bs</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Var</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.var_history_restrict">var_history_restrict</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_clock_restrict">sem_clock_restrict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">V</span>. <span class="id">inv</span> <span class="id">V</span>. <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_exp_restrict">sem_exp_restrict</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) Γ <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wx_exp">wx_exp</a></span> Γ <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">H</span> Γ) <span class="id">b</span> <span class="id">e</span> <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof83')">Proof with</span></div>
<div class="proofscript" id="proof83">
 <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">datatypes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="tactic">intros</span> <span class="id">vs</span> <span class="id">Hwt</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-4:(<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_var_restrict">sem_var_restrict</a></span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Var">vars_of_senv_Var</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Last">vars_of_senv_Last</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-3:(<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span> ?? <span class="id">Hin</span> <span class="id">Hse</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">H8</span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>). <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_equation_restrict">sem_equation_restrict</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) Γ <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wx_equation">wx_equation</a></span> Γ <span class="id">eq</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id">G</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">H</span> Γ) <span class="id">b</span> <span class="id">eq</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof84')">Proof with</span></div>
<div class="proofscript" id="proof84">
 <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">datatypes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ???? [<span class="id">xs</span> <span class="id">es</span>] <span class="id">Hwc</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hwc</span> <span class="kwd">as</span> (?&amp;?). <span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>. <span class="tactic">instantiate</span> (1:=<span class="id">ss</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_restrict">sem_exp_restrict</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_var_restrict">sem_var_restrict</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Var">vars_of_senv_Var</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_transitions_restrict">sem_transitions_restrict</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) Γ <span class="id">H</span> <span class="id">b</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wx_exp">wx_exp</a></span> Γ <span class="id">e</span>) <span class="id">trans</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">H</span> Γ) <span class="id">b</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof85')">Proof with</span></div>
<div class="proofscript" id="proof85">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">trans</span>; <span class="tactic">intros</span> * <span class="id">Hwx</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hwx</span>; <span class="id">inv</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_restrict">sem_exp_restrict</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.vars_of_locs">vars_of_locs</a></span> (<span class="id">locs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * (<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.type">type</a></span> * <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks.clock">clock</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>)))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv">vars_of_senv</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">locs</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.vars_of_locs_Var">vars_of_locs_Var</a></span> : <span class="kwd">forall</span> <span class="id">locs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Var">Var</a></span> <span class="id">x</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_locs">vars_of_locs</a></span> <span class="id">locs</span>) &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">locs</span>) <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Var">vars_of_senv_Var</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.vars_of_locs_Last">vars_of_locs_Last</a></span> : <span class="kwd">forall</span> <span class="id">locs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Last">Last</a></span> <span class="id">x</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_locs">vars_of_locs</a></span> <span class="id">locs</span>) &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast">IsLast</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">locs</span>) <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv_Last">vars_of_senv_Last</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_scope_restrict">sem_scope_restrict</a></span> {<span class="id">A</span>} (<span class="id">wx_block</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">sem_block</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">P_vd</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">P_nd</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">xs</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">locs</span> (<span class="id">blks</span> : <span class="id">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> Γ <span class="id">xs</span> <span class="id">Hi</span> <span class="id">Hi</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_vd</span> <span class="id">blks</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_nd</span> <span class="id">xs</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wx_block</span> Γ <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block</span> <span class="id">Hi</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span>) <span class="id">Hi</span>' (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">Hi</span> Γ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block</span> <span class="id">Hi</span>' <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompScope">VarsDefinedCompScope</a></span> <span class="id">P_vd</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupScope">NoDupScope</a></span> <span class="id">P_nd</span> <span class="id">xs</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wx_scope">wx_scope</a></span> <span class="id">wx_block</span> Γ (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span>) <span class="id">sem_block</span> <span class="id">Hi</span> <span class="id">bs</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope">sem_scope</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span>) <span class="id">sem_block</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">Hi</span> Γ) <span class="id">bs</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hp</span> <span class="id">VD</span> <span class="id">ND</span> <span class="id">Hwx</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">VD</span>; <span class="id">inv</span> <span class="id">ND</span>; <span class="id">inv</span> <span class="id">Hwx</span>; <span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id">_</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> (<span class="id">Hi</span> + <span class="id">Hi</span>') (Γ ++ <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">locs</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">Hi</span> Γ + <span class="id">Hi</span>')) <span class="kwd">as</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">simpl</span>. <span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?. <span class="tactic">unfold</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union">FEnv.union</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict">FEnv.restrict</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_senv">vars_of_senv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Common.CommonList.html#flat_map_app">flat_map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb_app">existsb_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Hi</span>' <span class="id">x</span>) <span class="id">eqn</span>:<span class="id">HHi</span>', (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">eqn</span>:<span class="id">Hex</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>; [<span class="tactic">constructor</span>; <span class="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb_exists">existsb_exists</a></span>. <span class="tactic">do</span> 2 <span class="id">esplit</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.Common.html#equiv_decb_refl">equiv_decb_refl</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.find_In">FEnv.find_In</a></span> <span class="kwd">in</span> <span class="id">HHi</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; [<span class="tactic">apply</span> <span class="id">H3</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_locs_Var">vars_of_locs_Var</a></span> <span class="kwd">in</span> <span class="id">HHi</span>'|<span class="tactic">apply</span> <span class="id">H3</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_locs_Last">vars_of_locs_Last</a></span> <span class="kwd">in</span> <span class="id">HHi</span>']; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_Forall">existsb_Forall</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#forallb_Forall">forallb_Forall</a></span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_true_iff">Bool.negb_true_iff</a></span>, <span class="id"><a href="Velus.Common.Common.html#not_equiv_decb_equiv">not_equiv_decb_equiv</a></span>. <span class="tactic">intros</span> <span class="id">Eq</span>; <span class="id">inv</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.not_find_In">FEnv.not_find_In</a></span> <span class="kwd">in</span> <span class="id">HHi</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; [<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_locs_Var">vars_of_locs_Var</a></span>, <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>|<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.vars_of_locs_Last">vars_of_locs_Last</a></span>, <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Sscope">Sscope</a></span> <span class="kwd">with</span> (<span class="id">Hi</span>':=<span class="id">Hi</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_morph">sem_exp_morph</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_restrict">sem_exp_restrict</a></span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">Hp</span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">eauto</span>. <span class="id">now</span> <span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_block_restrict">sem_block_restrict</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">blk</span> Γ <span class="id">xs</span> <span class="id">H</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedComp">VarsDefinedComp</a></span> <span class="id">blk</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals">NoDupLocals</a></span> <span class="id">xs</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.wx_block">wx_block</a></span> Γ <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.restrict">restrict</a></span> <span class="id">H</span> Γ) <span class="id">b</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">VD</span> <span class="id">ND</span> <span class="id">Hwc</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hwx</span>:=<span class="id">Hwc</span>); <span class="tactic">assert</span> (<span class="id">VD</span>':=<span class="id">VD</span>); <span class="tactic">assert</span> (<span class="id">ND</span>':=<span class="id">ND</span>); <span class="id">inv</span> <span class="id">VD</span>'; <span class="id">inv</span> <span class="id">ND</span>'; <span class="id">inv</span> <span class="id">Hwc</span>; <span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation_restrict">sem_equation_restrict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_restrict">sem_exp_restrict</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>; <span class="tactic">specialize</span> (<span class="id">H12</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block_refines">sem_block_refines</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_concat">incl_concat</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> &lt;-<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_map">FEnv.restrict_map</a></span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonStreams.html#EqStrel_Reflexive">EqStrel_Reflexive</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp_restrict">sem_exp_restrict</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">do</span> 2 <span class="id">esplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> ?? <span class="id">Hfind</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_find_inv">FEnv.restrict_find_inv</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (<span class="id">Hin</span>&amp;<span class="id">Hfind</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hwhen</span>&amp;<span class="id">Hfind</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_find">FEnv.restrict_find</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">b0</span>. <span class="tactic">repeat</span> <span class="id">inv_branch</span>'. <span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>; <span class="id">inv_VarsDefined</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; [|<span class="tactic">eauto</span>]; <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_concat">incl_concat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> * <span class="id">Hdef</span> <span class="id">Hndef</span>. <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hndef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">VarsDefinedComp_Is_defined</span>' <span class="kwd">in</span> <span class="id">Hdef</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Forall_VarsDefinedComp_Is_defined">Forall_VarsDefinedComp_Is_defined</a></span>; <span class="tactic">eauto</span>. 2:<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; [|<span class="tactic">eauto</span>]; <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(weak&nbsp;transitions)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_clock_var_history_restrict">sem_clock_var_history_restrict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_restrict">sem_transitions_restrict</a></span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H19</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplit</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> ?? <span class="id">Hfind</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_find_inv">FEnv.restrict_find_inv</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (<span class="id">Hin</span>&amp;<span class="id">Hfind</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hwhen</span>&amp;<span class="id">Hfind</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_find">FEnv.restrict_find</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="id">inv_branch</span>'. <span class="tactic">destruct</span> <span class="id">s</span>; <span class="id">destruct_conjs</span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intros</span> * <span class="id">Def</span> <span class="id">NDef</span>. <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">NDef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">VarsDefinedComp_Is_defined</span>' <span class="kwd">in</span> <span class="id">Def</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompScope_Is_defined">VarsDefinedCompScope_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">destruct_conjs</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Forall_VarsDefinedComp_Is_defined">Forall_VarsDefinedComp_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">simpl_Forall</span>; <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> <span class="id">it</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope_restrict">sem_scope_restrict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">split</span>; <span class="id">simpl_Forall</span>; <span class="id">inv_VarsDefined</span>; <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block_morph">sem_block_morph</a></span>, <span class="id">H</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>. <span class="id">now</span> <span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; [|<span class="tactic">eauto</span>]; <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_concat">incl_concat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_morph">sem_transitions_morph</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_restrict">sem_transitions_restrict</a></span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(strong&nbsp;transitions)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_clock_var_history_restrict">sem_clock_var_history_restrict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H18</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplit</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> ?? <span class="id">Hfind</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_find_inv">FEnv.restrict_find_inv</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (<span class="id">Hin</span>&amp;<span class="id">Hfind</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hwhen</span>&amp;<span class="id">Hfind</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_find">FEnv.restrict_find</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="id">inv_branch</span>'. <span class="tactic">destruct</span> <span class="id">s</span>; <span class="id">destruct_conjs</span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intros</span> * <span class="id">Def</span> <span class="id">NDef</span>. <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">NDef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">VarsDefinedComp_Is_defined</span>' <span class="kwd">in</span> <span class="id">Def</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompScope_Is_defined">VarsDefinedCompScope_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">destruct_conjs</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Forall_VarsDefinedComp_Is_defined">Forall_VarsDefinedComp_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">simpl_Forall</span>; <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> <span class="id">it</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_restrict">sem_transitions_restrict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H19</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplit</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> ?? <span class="id">Hfind</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_find_inv">FEnv.restrict_find_inv</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (<span class="id">Hin</span>&amp;<span class="id">Hfind</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hwhen</span>&amp;<span class="id">Hfind</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.restrict_find">FEnv.restrict_find</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="id">inv_branch</span>'. <span class="tactic">destruct</span> <span class="id">s</span>; <span class="id">destruct_conjs</span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intros</span> * <span class="id">Def</span> <span class="id">NDef</span>. <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">NDef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">VarsDefinedComp_Is_defined</span>' <span class="kwd">in</span> <span class="id">Def</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.VarsDefinedCompScope_Is_defined">VarsDefinedCompScope_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">destruct_conjs</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Forall_VarsDefinedComp_Is_defined">Forall_VarsDefinedComp_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">simpl_Forall</span>; <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> <span class="id">it</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope_restrict">sem_scope_restrict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">simpl_Forall</span>; <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block_morph">sem_block_morph</a></span>, <span class="id">H</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>. <span class="id">now</span> <span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; [|<span class="tactic">eauto</span>]; <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_concat">incl_concat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;locals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_scope_restrict">sem_scope_restrict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">simpl_Forall</span>; <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block_morph">sem_block_morph</a></span>, <span class="id">H</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>. <span class="id">now</span> <span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; [|<span class="tactic">eauto</span>]; <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_concat">incl_concat</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">dom and co </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.local_hist_dom">local_hist_dom</a></span> : <span class="kwd">forall</span> Γ <span class="id">locs</span> (<span class="id">H</span> <span class="id">H</span>' : <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span>' (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> <span class="id">locs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> (<span class="id">H</span> + <span class="id">H</span>') (Γ ++ <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">locs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (<span class="id">D1</span>&amp;<span class="id">DL1</span>) (<span class="id">D2</span>&amp;<span class="id">DL2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_In">FEnv.union_In</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar_app">IsVar_app</a></span>, <span class="id">D1</span>, <span class="id">D2</span>|<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast_app">IsLast_app</a></span>, <span class="id">DL1</span>, <span class="id">DL2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.local_hist_dom_ub">local_hist_dom_ub</a></span> : <span class="kwd">forall</span> Γ <span class="id">locs</span> (<span class="id">H</span> <span class="id">H</span>' : <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">H</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span>' (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> <span class="id">locs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> (<span class="id">H</span> + <span class="id">H</span>') (Γ ++ <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">locs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (<span class="id">D1</span>&amp;<span class="id">DL1</span>) (<span class="id">D2</span>&amp;<span class="id">DL2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> ?; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_In">FEnv.union_In</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar_app">IsVar_app</a></span>, &lt;-<span class="id">D2</span>|<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast_app">IsLast_app</a></span>, &lt;-<span class="id">DL2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [|]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.local_hist_dom_lb">local_hist_dom_lb</a></span> : <span class="kwd">forall</span> Γ <span class="id">locs</span> (<span class="id">H</span> <span class="id">H</span>' : <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_lb">dom_lb</a></span> <span class="id">H</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span>' (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> <span class="id">locs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_lb">dom_lb</a></span> (<span class="id">H</span> + <span class="id">H</span>') (Γ ++ <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">locs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (<span class="id">D1</span>&amp;<span class="id">DL1</span>) (<span class="id">D2</span>&amp;<span class="id">DL2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> ?; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union_In">FEnv.union_In</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar_app">IsVar_app</a></span>, &lt;-<span class="id">D2</span>|<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast_app">IsLast_app</a></span>, &lt;-<span class="id">DL2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [|]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.local_hist_dom_ub_refines">local_hist_dom_ub_refines</a></span> : <span class="kwd">forall</span> Γ <span class="id">locs</span> (<span class="id">H</span> <span class="id">H</span>': <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">x</span> <span class="id">locs</span> -&gt; ~<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_ub">dom_ub</a></span> <span class="id">H</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span>' (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> <span class="id">locs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span> ⊑ <span class="id">H</span> + <span class="id">H</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hnd</span> (<span class="id">D1</span>&amp;<span class="id">DL1</span>) (<span class="id">D2</span>&amp;<span class="id">DL2</span>) ?? <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; [<span class="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.union2">FEnv.union2</a></span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.not_find_In">FEnv.not_find_In</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> <span class="id">D2</span>|<span class="tactic">rewrite</span> <span class="id">DL2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">contra</span>; [<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar_senv_of_decls">IsVar_senv_of_decls</a></span> <span class="kwd">in</span> <span class="id">contra</span>|<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast_senv_of_decls">IsLast_senv_of_decls</a></span> <span class="kwd">in</span> <span class="id">contra</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hnd</span>; <span class="tactic">eauto</span>; [<span class="tactic">eapply</span> <span class="id">D1</span>|<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsLast_IsVar">IsLast_IsVar</a></span>, <span class="id">DL1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.local_hist_dom_refines">local_hist_dom_refines</a></span> : <span class="kwd">forall</span> Γ <span class="id">locs</span> (<span class="id">H</span> <span class="id">H</span>': <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.t">FEnv.t</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.svalue">svalue</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">x</span> <span class="id">locs</span> -&gt; ~<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom">dom</a></span> <span class="id">H</span>' (@<span class="id"><a href="Velus.Lustre.LSemantics.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp">exp</a></span> <span class="id">locs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span> ⊑ <span class="id">H</span> + <span class="id">H</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hnd</span> <span class="id">Hdom1</span> <span class="id">Hdom2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.local_hist_dom_ub_refines">local_hist_dom_ub_refines</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.dom_dom_ub">dom_dom_ub</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Alignment </h2>
<br/>
<div class="doc">fby keeps the synchronization </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.ac_fby1">ac_fby1</a></span> {<span class="id">A</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> <span class="id">A</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> <span class="id">xs</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> <span class="id">rs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">inv</span> <span class="id">Hfby</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H3</span>. <span class="id">revert</span> <span class="id">H3</span>. <span class="id">revert</span> <span class="id">y</span> <span class="id">xs</span> <span class="id">ys0</span> <span class="id">rs0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hfby1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">inv</span> <span class="id">Hfby1</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.ac_fby2">ac_fby2</a></span> {<span class="id">A</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> <span class="id">A</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> <span class="id">ys</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> <span class="id">rs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>. <span class="tactic">intros</span> * <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">ys</span>; <span class="id">inv</span> <span class="id">Hfby</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H3</span>. <span class="id">revert</span> <span class="id">H3</span>. <span class="id">revert</span> <span class="id">v</span> <span class="id">ys</span> <span class="id">xs0</span> <span class="id">rs0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>. <span class="tactic">intros</span> * <span class="id">Hfby1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">ys</span>; <span class="id">inv</span> <span class="id">Hfby1</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.fby_aligned">fby_aligned</a></span> {<span class="id">A</span>} : <span class="kwd">forall</span> <span class="id">bs</span> (<span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> <span class="id">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">xs</span> <span class="id">bs</span> \/ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">ys</span> <span class="id">bs</span> \/ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">zs</span> <span class="id">bs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">xs</span> <span class="id">bs</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">ys</span> <span class="id">bs</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">zs</span> <span class="id">bs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof98')">Proof with</span></div>
<div class="proofscript" id="proof98">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">bs</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.ac_fby1">ac_fby1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hfby</span>) <span class="kwd">as</span> <span class="id">Hac1</span>. <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.ac_fby2">ac_fby2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hfby</span>) <span class="kwd">as</span> <span class="id">Hac2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.ac_aligned">ac_aligned</a></span> <span class="id">xs</span>) <span class="kwd">as</span> <span class="id">Hs1</span>. <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.ac_aligned">ac_aligned</a></span> <span class="id">ys</span>) <span class="kwd">as</span> <span class="id">Hs2</span>. <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.ac_aligned">ac_aligned</a></span> <span class="id">zs</span>) <span class="kwd">as</span> <span class="id">Hs3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">Hsync</span>|[<span class="id">Hsync</span>|<span class="id">Hsync</span>]]; <span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Hal</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> ?<span class="id">xs</span> <span class="id">bs</span>, <span class="id">Hal2</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> ?<span class="id">xs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> ?<span class="id">xs</span>) |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned_EqSt">aligned_EqSt</a></span> <span class="kwd">in</span> <span class="id">Hal2</span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id">Hal2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">rewrite</span> <span class="id">Hac1</span>||<span class="tactic">rewrite</span> <span class="id">Hac2</span>||<span class="tactic">idtac</span>); <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hac1</span>)||(<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hac2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.ac_arrow1">ac_arrow1</a></span> : <span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.arrow">arrow</a></span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> <span class="id">xs</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> <span class="id">rs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Harrow</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">inv</span> <span class="id">Harrow</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H3</span>. <span class="id">revert</span> <span class="id">H3</span>. <span class="id">revert</span> <span class="id">xs</span> <span class="id">ys0</span> <span class="id">rs0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Harrow1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">inv</span> <span class="id">Harrow1</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.ac_arrow2">ac_arrow2</a></span> : <span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.arrow">arrow</a></span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> <span class="id">ys</span> ≡ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> <span class="id">rs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Harrow</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">ys</span>; <span class="id">inv</span> <span class="id">Harrow</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H3</span>. <span class="id">revert</span> <span class="id">H3</span>. <span class="id">revert</span> <span class="id">xs0</span> <span class="id">ys</span> <span class="id">rs0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Harrow1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">ys</span>; <span class="id">inv</span> <span class="id">Harrow1</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.arrow_aligned">arrow_aligned</a></span> : <span class="kwd">forall</span> <span class="id">bs</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.arrow">arrow</a></span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">xs</span> <span class="id">bs</span> \/ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">ys</span> <span class="id">bs</span> \/ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">zs</span> <span class="id">bs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">xs</span> <span class="id">bs</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">ys</span> <span class="id">bs</span> /\ <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> <span class="id">zs</span> <span class="id">bs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof101')">Proof with</span></div>
<div class="proofscript" id="proof101">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">bs</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.ac_arrow1">ac_arrow1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hfby</span>) <span class="kwd">as</span> <span class="id">Hac1</span>. <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.ac_arrow2">ac_arrow2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hfby</span>) <span class="kwd">as</span> <span class="id">Hac2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.ac_aligned">ac_aligned</a></span> <span class="id">xs</span>) <span class="kwd">as</span> <span class="id">Hs1</span>. <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.ac_aligned">ac_aligned</a></span> <span class="id">ys</span>) <span class="kwd">as</span> <span class="id">Hs2</span>. <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.ac_aligned">ac_aligned</a></span> <span class="id">zs</span>) <span class="kwd">as</span> <span class="id">Hs3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">Hsync</span>|[<span class="id">Hsync</span>|<span class="id">Hsync</span>]]; <span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Hal</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> ?<span class="id">xs</span> <span class="id">bs</span>, <span class="id">Hal2</span>: <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned">aligned</a></span> ?<span class="id">xs</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.abstract_clock">abstract_clock</a></span> ?<span class="id">xs</span>) |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.aligned_EqSt">aligned_EqSt</a></span> <span class="kwd">in</span> <span class="id">Hal2</span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id">Hal2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">rewrite</span> <span class="id">Hac1</span>||<span class="tactic">rewrite</span> <span class="id">Hac2</span>||<span class="tactic">idtac</span>); <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hac1</span>)||(<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hac2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Typing of the state machines state stream </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMANTICS.sem_transitions_wt_state">sem_transitions_wt_state</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span> <span class="id">A</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">states</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> ((<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) * <span class="id">A</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">states</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">_</span>, (<span class="id">t</span>, <span class="id">_</span>)) =&gt; <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">t</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>)) <span class="id">trans</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">default</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">states</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">trans</span> <span class="id">default</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id">e</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">states</span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span>) <span class="id">stres</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">trans</span>; <span class="tactic">intros</span> * <span class="id">Hperm</span> <span class="id">Hwt1</span> <span class="id">Hwt2</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hwt1</span>; <span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#eqst_ntheq">eqst_ntheq</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">setoid_rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_map">Str_nth_map</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_ind">eq_ind</a></span> <span class="kwd">with</span> (<span class="id">P</span>:=<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> | <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e0</span>, <span class="id">_</span>) =&gt; <span class="id">_</span> <span class="kwd">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="tactic">symmetry</span>; <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id">bs</span> # <span class="id">n</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">default0</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_seq">in_seq</a></span> <span class="kwd">in</span> <span class="id">Hwt2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHtrans</span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#eqst_ntheq">eqst_ntheq</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">H11</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.choose_first_nth">choose_first_nth</a></span> <span class="kwd">in</span> <span class="id">H11</span>. <span class="tactic">setoid_rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_map">Str_nth_map</a></span> <span class="kwd">in</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_ind">eq_ind</a></span> <span class="kwd">with</span> (<span class="id">P</span>:=<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> | <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e0</span>, <span class="id">_</span>) =&gt; <span class="id">_</span> <span class="kwd">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="tactic">symmetry</span>; <span class="tactic">apply</span> <span class="id">H11</span>. <span class="tactic">destruct</span> (<span class="id">bs</span>' # <span class="id">n</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>, <span class="id">Hperm</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_seq">in_seq</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.fby1_SForall">fby1_SForall</a></span> {<span class="id">A</span>} (<span class="id">P</span> : <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">v</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby1">fby1</a></span> <span class="id">A</span> <span class="id">v</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> <span class="id">v</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> <span class="id">P</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">m</span> &lt; <span class="id">n</span> -&gt; <span class="id">P</span> (<span class="id">ys</span> # <span class="id">m</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id">zs</span> # <span class="id">n</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Hfby</span> <span class="id">Hp</span> <span class="id">Hf</span> <span class="id">Hlt</span>; <span class="id">inv</span> <span class="id">Hfby</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S_tl">Str_nth_S_tl</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHn</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m</span> <span class="id">Hlt</span>'. <span class="tactic">specialize</span> (<span class="id">Hlt</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S_tl">Str_nth_S_tl</a></span> <span class="kwd">in</span> <span class="id">Hlt</span>. <span class="tactic">apply</span> <span class="id">Hlt</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHn</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">specialize</span> (<span class="id">Hlt</span> 0). <span class="tactic">apply</span> <span class="id">Hlt</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">m</span> <span class="id">Hlt</span>'. <span class="tactic">specialize</span> (<span class="id">Hlt</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S_tl">Str_nth_S_tl</a></span> <span class="kwd">in</span> <span class="id">Hlt</span>. <span class="tactic">apply</span> <span class="id">Hlt</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.fby_SForall">fby_SForall</a></span> {<span class="id">A</span>} (<span class="id">P</span> : <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> <span class="id">A</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> <span class="id">P</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">m</span> &lt; <span class="id">n</span> -&gt; <span class="id">P</span> (<span class="id">ys</span> # <span class="id">m</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id">zs</span> # <span class="id">n</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Hfby</span> <span class="id">Hf</span> <span class="id">Hlt</span>; <span class="id">inv</span> <span class="id">Hfby</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S_tl">Str_nth_S_tl</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHn</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m</span> <span class="id">Hlt</span>'. <span class="tactic">specialize</span> (<span class="id">Hlt</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S_tl">Str_nth_S_tl</a></span> <span class="kwd">in</span> <span class="id">Hlt</span>. <span class="tactic">apply</span> <span class="id">Hlt</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby1_SForall">fby1_SForall</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">specialize</span> (<span class="id">Hlt</span> 0). <span class="tactic">apply</span> <span class="id">Hlt</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">m</span> <span class="id">Hlt</span>'. <span class="tactic">specialize</span> (<span class="id">Hlt</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S_tl">Str_nth_S_tl</a></span> <span class="kwd">in</span> <span class="id">Hlt</span>. <span class="tactic">apply</span> <span class="id">Hlt</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_automaton_wt_state1">sem_automaton_wt_state1</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span> <span class="id">A</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">states</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> ((<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) * <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.branch">branch</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.transition">transition</a></span> * <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.scope">scope</a></span> (<span class="id">A</span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.transition">transition</a></span>)))) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">bs</span>' <span class="id">ini</span> <span class="id">oth</span> <span class="id">stres0</span> <span class="id">stres1</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">states</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">_</span>, <span class="id">t</span>) =&gt; <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">t</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>)) <span class="id">ini</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">oth</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">states</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">_</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">_</span> (<span class="id">_</span>, <span class="kwd">Scope</span> <span class="id">_</span> (<span class="id">_</span>, <span class="id">trans</span>))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, (<span class="id">t</span>, <span class="id">_</span>)) =&gt; <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">t</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>)) <span class="id">trans</span>) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> <span class="id">Hi</span> <span class="id">bs</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, <span class="id">t</span>) =&gt; (<span class="id">e</span>, (<span class="id">t</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>))) <span class="id">ini</span>) (<span class="id">oth</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">stres0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> <span class="id">stres0</span> <span class="id">stres1</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '((<span class="id">sel</span>, <span class="id">_</span>), <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">_</span> (<span class="id">_</span>, <span class="kwd">Scope</span> <span class="id">_</span> (<span class="id">_</span>, <span class="id">trans</span>))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="tactic">exists</span> <span class="id">Hik</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">let</span> <span class="id">bik</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselectb">fselectb</a></span> <span class="id">sel</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">bs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> <span class="id">Hik</span> <span class="id">bik</span> <span class="id">trans</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sel</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> <span class="id">sel</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>))) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id">e</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">states</span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span>) <span class="id">stres</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof105')">Proof.</span></div>
<div class="proofscript" id="proof105">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hperm</span> <span class="id">Hwtini</span> <span class="id">Hwtoth</span> <span class="id">Hwtst</span> <span class="id">Hsemini</span> <span class="id">Hfby</span> <span class="id">Hsemst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_wt_state">sem_transitions_wt_state</a></span> <span class="kwd">in</span> <span class="id">Hsemini</span> <span class="kwd">as</span> <span class="id">Hwt0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">simpl_Forall</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">state</span> =&gt; <span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id">e</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">states</span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">state</span>)) <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>)) <span class="id">states</span>) <span class="kwd">as</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]. <span class="tactic">specialize</span> (<span class="id">Hsemst</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_wt_state">sem_transitions_wt_state</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">Hperm</span>; <span class="tactic">auto</span>. <span class="id">solve_In</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hperm</span> <span class="id">Hwt0</span> <span class="id">Hwt1</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span>; <span class="tactic">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf_ind">Wf_nat.lt_wf_ind</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf_ind">Wf_nat.lt_wf_ind</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">n</span>' <span class="id">Hrec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby_SForall">fby_SForall</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hlt</span>. <span class="tactic">specialize</span> (<span class="id">Hrec</span> <span class="id">_</span> <span class="id">Hlt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">stres</span> # <span class="id">m</span>) <span class="kwd">as</span> [|(?&amp;?)] <span class="id">eqn</span>:<span class="id">Hres</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.ac_fby2">ac_fby2</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#eqst_ntheq">eqst_ntheq</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">m</span>) <span class="kwd">in</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.ac_nth">ac_nth</a></span> <span class="kwd">in</span> <span class="id">Hfby</span>. <span class="tactic">rewrite</span> <span class="id">Hres</span> <span class="kwd">in</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">stres1</span> # <span class="id">m</span>) <span class="id">eqn</span>:<span class="id">Hres1</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_ind">eq_ind</a></span> <span class="kwd">with</span> (<span class="id">P</span>:=<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> | <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e0</span>, <span class="id">_</span>) =&gt; <span class="id">_</span> <span class="kwd">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="tactic">symmetry</span>; <span class="tactic">apply</span> <span class="id">Hres1</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_ind">eq_ind</a></span> <span class="kwd">with</span> (<span class="id">P</span>:=<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> | <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e0</span>, <span class="id">_</span>) =&gt; <span class="id">_</span> <span class="kwd">end</span>) <span class="kwd">in</span> <span class="id">Hrec</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">e</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>))) <span class="kwd">as</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Hperm</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_seq">in_seq</a></span>. <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_In</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Hwt1</span> ((<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.count">count</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fwhenb">fwhenb</a></span> <span class="id">e</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.stres_res">stres_res</a></span> <span class="id">stres</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.stres_st">stres_st</a></span> <span class="id">stres</span>))) # <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">m</span>) <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="kwd">in</span> <span class="id">Hwt1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_nth">mask_nth</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_refl">Nat.eqb_refl</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fwhen_nth">fwhen_nth</a></span> <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.stres_st">stres_st</a></span> <span class="kwd">in</span> <span class="id">Hwt1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_map">Str_nth_map</a></span>, <span class="id">Hres</span>, <span class="id"><a href="Velus.Common.Common.html#equiv_decb_refl">equiv_decb_refl</a></span> <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_automaton_wt_state2">sem_automaton_wt_state2</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span> <span class="id">A</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">states</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> ((<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) * <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.branch">branch</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.transition">transition</a></span> * <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.scope">scope</a></span> (<span class="id">A</span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.transition">transition</a></span>)))) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bs</span> <span class="id">bs</span>' <span class="id">ini</span> <span class="id">stres1</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">states</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">ini</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">states</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">_</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">_</span> (<span class="id">trans</span>, <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, (<span class="id">t</span>, <span class="id">_</span>)) =&gt; <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">t</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>)) <span class="id">trans</span>) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span>' (<span class="id">ini</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>)) <span class="id">stres1</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '((<span class="id">sel</span>, <span class="id">_</span>), <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">_</span> (<span class="id">trans</span>, <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="tactic">exists</span> <span class="id">Hik</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">let</span> <span class="id">bik</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselectb">fselectb</a></span> <span class="id">sel</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">bs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> <span class="id">Hik</span> <span class="id">bik</span> <span class="id">trans</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sel</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> <span class="id">sel</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>))) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id">e</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">states</span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span>) <span class="id">stres</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hperm</span> <span class="id">Hwtoth</span> <span class="id">Hwtst</span> <span class="id">Hfby</span> <span class="id">Hsemst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> (<span class="kwd">fun</span> <span class="id">s</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) =&gt; <span class="kwd">match</span> <span class="id">s</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id">e</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">states</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span>' (<span class="id">ini</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>))) <span class="kwd">as</span> <span class="id">Hwt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_map">Str_nth_map</a></span>. <span class="tactic">destruct</span> (<span class="id">bs</span>' # <span class="id">n</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_seq">in_seq</a></span> <span class="kwd">in</span> <span class="id">Hwtoth</span>. <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">state</span> =&gt; <span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id">e</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">states</span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">state</span>)) <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>)) <span class="id">states</span>) <span class="kwd">as</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]. <span class="tactic">specialize</span> (<span class="id">Hsemst</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_wt_state">sem_transitions_wt_state</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">Hperm</span>; <span class="tactic">auto</span>. <span class="id">solve_In</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hperm</span> <span class="id">Hwt0</span> <span class="id">Hwt1</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span>; <span class="tactic">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf_ind">Wf_nat.lt_wf_ind</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf_ind">Wf_nat.lt_wf_ind</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">n</span>' <span class="id">Hrec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby_SForall">fby_SForall</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hlt</span>. <span class="tactic">specialize</span> (<span class="id">Hrec</span> <span class="id">_</span> <span class="id">Hlt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">stres</span> # <span class="id">m</span>) <span class="kwd">as</span> [|(?&amp;?)] <span class="id">eqn</span>:<span class="id">Hres</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.ac_fby2">ac_fby2</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#eqst_ntheq">eqst_ntheq</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">m</span>) <span class="kwd">in</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.ac_nth">ac_nth</a></span> <span class="kwd">in</span> <span class="id">Hfby</span>. <span class="tactic">rewrite</span> <span class="id">Hres</span> <span class="kwd">in</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">stres1</span> # <span class="id">m</span>) <span class="id">eqn</span>:<span class="id">Hres1</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">n0</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>))) <span class="kwd">as</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Hperm</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_seq">in_seq</a></span>. <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_In</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Hwt1</span> ((<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.count">count</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fwhenb">fwhenb</a></span> <span class="id">n0</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.stres_res">stres_res</a></span> <span class="id">stres</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.stres_st">stres_st</a></span> <span class="id">stres</span>))) # <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">m</span>) <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="kwd">in</span> <span class="id">Hwt1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_nth">mask_nth</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_refl">Nat.eqb_refl</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fwhen_nth">fwhen_nth</a></span> <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_ind">eq_ind</a></span> <span class="kwd">with</span> (<span class="id">P</span>:=<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> | <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e0</span>, <span class="id">_</span>) =&gt; <span class="id">_</span> <span class="kwd">end</span>) <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.stres_st">stres_st</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_map">Str_nth_map</a></span>. <span class="tactic">setoid_rewrite</span> <span class="id">Hres</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#equiv_decb_refl">equiv_decb_refl</a></span>. <span class="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMANTICS.sem_automaton_wt_state3">sem_automaton_wt_state3</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span> <span class="id">A</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) (<span class="id">states</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> ((<span class="id"><a href="Velus.Lustre.LSemantics.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) * <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.branch">branch</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.transition">transition</a></span> * <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.scope">scope</a></span> (<span class="id">A</span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.transition">transition</a></span>)))) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bs</span> <span class="id">bs</span>' <span class="id">ini</span> <span class="id">stres1</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">states</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">ini</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">states</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">_</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">_</span> (<span class="id">trans</span>, <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">e</span>, (<span class="id">t</span>, <span class="id">_</span>)) =&gt; <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">t</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>)) <span class="id">trans</span>) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span>' (<span class="id">ini</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>)) <span class="id">stres1</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '((<span class="id">sel</span>, <span class="id">_</span>), <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.Branch">Branch</a></span> <span class="id">_</span> (<span class="id">trans</span>, <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="tactic">exists</span> <span class="id">Hik</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">let</span> <span class="id">bik</span> := <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselectb">fselectb</a></span> <span class="id">sel</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">bs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> <span class="id">Hik</span> <span class="id">bik</span> <span class="id">trans</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sel</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> <span class="id">sel</span> <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>))) <span class="id">states</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id">e</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">states</span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span>) <span class="id">stres1</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hperm</span> <span class="id">Hwtoth</span> <span class="id">Hwtst</span> <span class="id">Hfby</span> <span class="id">Hsemst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> (<span class="kwd">fun</span> <span class="id">s</span> : <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.synchronous">synchronous</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) =&gt; <span class="kwd">match</span> <span class="id">s</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id">e</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">states</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span> <span class="id">bs</span>' (<span class="id">ini</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>))) <span class="kwd">as</span> <span class="id">Hwt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.const_stres">const_stres</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_map">Str_nth_map</a></span>. <span class="tactic">destruct</span> (<span class="id">bs</span>' # <span class="id">n</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_seq">in_seq</a></span> <span class="kwd">in</span> <span class="id">Hwtoth</span>. <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">state</span> =&gt; <span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Common.CommonStreams.html#SForall">SForall</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e</span>, <span class="id">_</span>) =&gt; <span class="id">e</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">states</span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">state</span>)) <span class="id">k</span> <span class="id">stres</span> <span class="id">stres1</span>)) <span class="id">states</span>) <span class="kwd">as</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b</span> <span class="kwd">as</span> [?(?&amp;[?(?&amp;?)])]; <span class="id">destruct_conjs</span>. <span class="tactic">specialize</span> (<span class="id">Hsemst</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions_wt_state">sem_transitions_wt_state</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">Hperm</span>; <span class="tactic">auto</span>. <span class="id">solve_In</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_automaton_wt_state2">sem_automaton_wt_state2</a></span> <span class="kwd">in</span> <span class="id">Hfby</span> <span class="kwd">as</span> <span class="id">Hwt2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span>; <span class="tactic">intros</span> <span class="id">n</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Hwt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.ac_fby2">ac_fby2</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#eqst_ntheq">eqst_ntheq</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Hfby</span>. <span class="tactic">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.ac_nth">ac_nth</a></span> <span class="kwd">in</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">stres1</span> # <span class="id">n</span>) <span class="id">eqn</span>:<span class="id">Hstres1</span>, (<span class="id">stres</span> # <span class="id">n</span>) <span class="id">eqn</span>:<span class="id">Hstres</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v0</span>, <span class="id">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">n0</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">states</span>))) <span class="kwd">as</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Hperm</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_seq">in_seq</a></span>. <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_In</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Hwt1</span> ((<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.count">count</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fwhenb">fwhenb</a></span> <span class="id">n0</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.stres_res">stres_res</a></span> <span class="id">stres</span>) (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.stres_st">stres_st</a></span> <span class="id">stres</span>))) # <span class="id">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fselect">fselect</a></span> <span class="kwd">in</span> <span class="id">Hwt1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.mask_nth">mask_nth</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_refl">Nat.eqb_refl</a></span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.fwhen_nth">fwhen_nth</a></span> <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_ind">eq_ind</a></span> <span class="kwd">with</span> (<span class="id">P</span>:=<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> | <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux.present">present</a></span> (<span class="id">e0</span>, <span class="id">_</span>) =&gt; <span class="id">_</span> <span class="kwd">end</span>) <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str.stres_st">stres_st</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_map">Str_nth_map</a></span>. <span class="tactic">setoid_rewrite</span> <span class="id">Hstres</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#equiv_decb_refl">equiv_decb_refl</a></span>. <span class="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hstres1</span> <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Semantic inclusion </h2>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMANTICS.sem_ref">sem_ref</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">PSyn1</span> <span class="id">PSyn2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.decl">decl</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">pref1</span> <span class="id">pref2</span> : <span class="id"><a href="Velus.Common.Common.html#PS.t">PS.t</a></span>}.<br/>
<br/>
<div class="doc">We develop a notion of refinement over globals :
        <span class="bracket"><span class="id">node_sem_refines</span> <span class="id">G</span> <span class="id">G</span>' <span class="id">f</span></span> means that if <span class="bracket"><span class="id">f</span></span> exists and has a given semantic in <span class="bracket"><span class="id">G</span></span>,
        then it also exists and has the same semantic in <span class="bracket"><span class="id">G</span>'</span>.
        This is just a shorthand definition, but is useful when proving the correctness
        of transformation passes over the Lustre AST.
     </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.node_sem_refines">node_sem_refines</a></span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref.PSyn1">PSyn1</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref.pref1">pref1</a></span>) (<span class="id">G</span>' : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref.PSyn2">PSyn2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref.pref2">pref2</a></span>) <span class="id">f</span> : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">outs</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">ins</span> <span class="id">outs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node">sem_node</a></span> <span class="id">G</span>' <span class="id">f</span> <span class="id">ins</span> <span class="id">outs</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMANTICS.global_sem_refines">global_sem_refines</a></span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref.PSyn1">PSyn1</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref.pref1">pref1</a></span>) (<span class="id">G</span>' : @<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref.PSyn2">PSyn2</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref.pref2">pref2</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_sem_refines">node_sem_refines</a></span> <span class="id">G</span> <span class="id">G</span>' <span class="id">f</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#sem_exp">sem_exp</a></span> : <span class="id">core</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_ref_sem_exp">sem_ref_sem_exp</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">G</span>' <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.global_sem_refines">global_sem_refines</a></span> <span class="id">G</span> <span class="id">G</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">vs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_exp">sem_exp</a></span> <span class="id">G</span>' <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">vs</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof108')">Proof with</span></div>
<div class="proofscript" id="proof108">
 <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">datatypes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Href</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;extcall&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;arrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span> ?? <span class="id">Hin</span> <span class="id">Hse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span> ?? <span class="id">Hin</span> <span class="id">Hse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;case&nbsp;(default)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.Forall2Brs_impl_In">Forall2Brs_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span> ?? <span class="id">Hin</span> <span class="id">Hse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span> ?? <span class="id">Hin1</span> <span class="id">Hin2</span> <span class="id">Hse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>... <span class="tactic">instantiate</span> (1:=<span class="id">ss</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H13</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Href</span> <span class="id">f</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskv">maskv</a></span> <span class="id">k</span> <span class="id">bs</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Str.maskv">maskv</a></span> <span class="id">k</span> <span class="id">bs</span>) <span class="id">vs</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Href</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_ref_sem_equation">sem_ref_sem_equation</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">G</span>' <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.global_sem_refines">global_sem_refines</a></span> <span class="id">G</span> <span class="id">G</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_equation">sem_equation</a></span> <span class="id">G</span>' <span class="id">H</span> <span class="id">b</span> <span class="id">eq</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">G</span> <span class="id">G</span>' <span class="id">H</span> <span class="id">b</span> [<span class="id">xs</span> <span class="id">es</span>] <span class="id">Href</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_exp">sem_ref_sem_exp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_ref_sem_transitions">sem_ref_sem_transitions</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">G</span>' <span class="id">H</span> <span class="id">b</span> <span class="id">trans</span> <span class="id">def</span> <span class="id">stres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.global_sem_refines">global_sem_refines</a></span> <span class="id">G</span> <span class="id">G</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">trans</span> <span class="id">def</span> <span class="id">stres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_transitions">sem_transitions</a></span> <span class="id">G</span>' <span class="id">H</span> <span class="id">b</span> <span class="id">trans</span> <span class="id">def</span> <span class="id">stres</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">trans</span>; <span class="tactic">intros</span> * <span class="id">Href</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_exp">sem_ref_sem_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.sem_ref_sem_block">sem_ref_sem_block</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">G</span>' <span class="id">blk</span> <span class="id">H</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.global_sem_refines">global_sem_refines</a></span> <span class="id">G</span> <span class="id">G</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span> <span class="id">H</span> <span class="id">b</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_block">sem_block</a></span> <span class="id">G</span>' <span class="id">H</span> <span class="id">b</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Href</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_equation">sem_ref_sem_equation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_exp">sem_ref_sem_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H8</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_exp">sem_ref_sem_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>; <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>'; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(weak)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_transitions">sem_ref_sem_transitions</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H11</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>'; <span class="id">inv_scope</span>'; <span class="tactic">do</span> 2 (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_exp">sem_ref_sem_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct_conjs</span>. <span class="tactic">split</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_transitions">sem_ref_sem_transitions</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;automaton&nbsp;(strong)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H10</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>'. <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_transitions">sem_ref_sem_transitions</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="tactic">specialize</span> (<span class="id">H11</span> <span class="id">k</span>); <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_branch</span>'; <span class="id">inv_scope</span>'; <span class="tactic">do</span> 2 (<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_exp">sem_ref_sem_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct_conjs</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">inv_scope</span>'; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_last_decl">sem_last_decl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref_sem_exp">sem_ref_sem_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.global_sem_ref_nil">global_sem_ref_nil</a></span> : <span class="kwd">forall</span> <span class="id">enms1</span> <span class="id">enms2</span> <span class="id">exts1</span> <span class="id">exts2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.global_sem_refines">global_sem_refines</a></span> (<span class="kwd">Global</span> <span class="id">enms1</span> <span class="id">exts1</span> []) (<span class="kwd">Global</span> <span class="id">enms2</span> <span class="id">exts2</span> []).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">f</span> <span class="id">ins</span> <span class="id">outs</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.find_node">find_node</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMANTICS.global_sem_ref_cons">global_sem_ref_cons</a></span> : <span class="kwd">forall</span> <span class="id">enms1</span> <span class="id">enms2</span> <span class="id">exts1</span> <span class="id">exts2</span> <span class="id">nds</span> <span class="id">nds</span>' <span class="id">n</span> <span class="id">n</span>' <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">enms1</span> <span class="id">exts1</span> (<span class="id">n</span>::<span class="id">nds</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Lord.Ordered_nodes">Ordered_nodes</a></span> (<span class="kwd">Global</span> <span class="id">enms2</span> <span class="id">exts2</span> (<span class="id">n</span>'::<span class="id">nds</span>')) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span> <span class="id">n</span> = <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span> <span class="id">n</span>' = <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.global_sem_refines">global_sem_refines</a></span> (<span class="kwd">Global</span> <span class="id">enms1</span> <span class="id">exts1</span> <span class="id">nds</span>) (<span class="kwd">Global</span> <span class="id">enms2</span> <span class="id">exts2</span> <span class="id">nds</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.node_sem_refines">node_sem_refines</a></span> (<span class="kwd">Global</span> <span class="id">enms1</span> <span class="id">exts1</span> (<span class="id">n</span>::<span class="id">nds</span>)) (<span class="kwd">Global</span> <span class="id">enms2</span> <span class="id">exts2</span> (<span class="id">n</span>'::<span class="id">nds</span>')) <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.global_sem_refines">global_sem_refines</a></span> (<span class="kwd">Global</span> <span class="id">enms1</span> <span class="id">exts1</span> (<span class="id">n</span>::<span class="id">nds</span>)) (<span class="kwd">Global</span> <span class="id">enms2</span> <span class="id">exts2</span> (<span class="id">n</span>'::<span class="id">nds</span>')).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof113')">Proof with</span></div>
<div class="proofscript" id="proof113">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hord1</span> <span class="id">Hord2</span> <span class="id">Hname1</span> <span class="id">Hname2</span> <span class="id">Hglob</span> <span class="id">Hnode</span> <span class="id">f0</span> <span class="id">ins</span> <span class="id">outs</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> (<span class="id"><a href="Velus.Lustre.LSemantics.html#Syn.n_name">n_name</a></span> <span class="id">n</span>) <span class="id">f0</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">specialize</span> (<span class="id">Hnode</span> <span class="id">ins</span> <span class="id">outs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hnode</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">setoid_rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node_cons_iff">sem_node_cons_iff</a></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hglob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_node_cons_iff">sem_node_cons_iff</a></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS.sem_ref">sem_ref</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS">LSEMANTICS</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="LSemanticsFun">LSemanticsFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span>       <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span>      <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Str</span>   : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span>  <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span>)<br/>
&lt;: <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS">LSEMANTICS</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str">Str</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS">LSEMANTICS</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html#Str">Str</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemantics.html#LSemanticsFun">LSemanticsFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
