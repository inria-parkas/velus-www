
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Generation</title>
<meta name="description" content="Documentation of Coq module Generation" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Generation</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html">ZArith.BinInt</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html">cfrontend.Clight</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html">lib.Integers</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html">common.Errors</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html">lib.Maps</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CompCertLib.html">Common.CompCertLib</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ObcToClight.Interface.html">ObcToClight.Interface</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Ident.html">Ident</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Obc.Syn</span>.<br/>
<span class="kwd">Import</span> <span class="id">Obc.Typ</span>.<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">Z</span>.<br/>
<span class="kwd">Import</span> <span class="id">List.ListNotations</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FMapAVL.html">FMapAVL</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedTypeEx.html">Structures.OrderedTypeEx</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="IdentPair">IdentPair</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedTypeEx.html#PairOrderedType">PairOrderedType</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedTypeEx.html#Positive_as_OT">Positive_as_OT</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedTypeEx.html#Positive_as_OT">Positive_as_OT</a></span>.<br/>
<span class="kwd">Module</span> <span class="id"><a name="M">M</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FMapAVL.html#Make">FMapAVL.Make</a></span>(<span class="id"><a href="Velus.ObcToClight.Generation.html#IdentPair">IdentPair</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="type_of_inst">type_of_inst</a></span> (<span class="id">o</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tstruct">Ctypes.Tstruct</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#o">o</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#noattr">Ctypes.noattr</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pointer_of">pointer_of</a></span> (<span class="id">ty</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tpointer">Ctypes.Tpointer</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#noattr">Ctypes.noattr</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="type_of_inst_p">type_of_inst_p</a></span> (<span class="id">o</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#pointer_of">pointer_of</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#o">o</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="deref_field">deref_field</a></span> (<span class="id">id</span> <span class="id">cls</span> <span class="id">x</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">xty</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ty_deref</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ty_ptr</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#pointer_of">pointer_of</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty_deref">ty_deref</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Efield">Clight.Efield</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ederef">Clight.Ederef</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Etempvar">Clight.Etempvar</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#id">id</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty_ptr">ty_ptr</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#ty_deref">ty_deref</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#xty">xty</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="translate_const">translate_const</a></span> (<span class="id">c</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.const">const</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> :=<br/>
&nbsp;&nbsp;(<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.Cint">Cint</a></span> <span class="id">i</span> <span class="id">sz</span> <span class="id">sg</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Econst_int">Clight.Econst_int</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cop.html#cast_int_int">Cop.cast_int_int</a></span> <span class="id">sz</span> <span class="id">sg</span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.Clong">Clong</a></span> <span class="id">l</span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Econst_long">Clight.Econst_long</a></span> <span class="id">l</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.Cfloat">Cfloat</a></span> <span class="id">f</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Econst_float">Clight.Econst_float</a></span> <span class="id">f</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.Csingle">Csingle</a></span> <span class="id">s</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Econst_single">Clight.Econst_single</a></span> <span class="id">s</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type_const">type_const</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="translate_unop">translate_unop</a></span> (<span class="id">op</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.unop">unop</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.UnaryOp">UnaryOp</a></span> <span class="id">cop</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eunop">Clight.Eunop</a></span> <span class="id">cop</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.CastOp">CastOp</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ecast">Clight.Ecast</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="translate_binop">translate_binop</a></span> (<span class="id">op</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.binop">binop</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ebinop">Clight.Ebinop</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#op">op</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Translate">Translate</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="Translate.prog">prog</a></span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>) (<span class="id"><a name="Translate.owner">owner</a></span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>) (<span class="id"><a name="Translate.caller">caller</a></span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="translate_var">translate_var</a></span> (<span class="id">x</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">ty</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ty</span> := <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [] | [<span class="id">_</span>] =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Etempvar">Clight.Etempvar</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">xs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Velus.Common.Common.html#mem_assoc_ident">mem_assoc_ident</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> <span class="id">xs</span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#deref_field">deref_field</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.out">out</a></span>) (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_name">m_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>)) <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Etempvar">Clight.Etempvar</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Straightforward expression translation </div>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="translate_exp">translate_exp</a></span> (<span class="id">e</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.exp">exp</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Var">Var</a></span> <span class="id">x</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_var">translate_var</a></span> <span class="id">x</span> <span class="id">ty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Valid">Valid</a></span> <span class="id">x</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_var">translate_var</a></span> <span class="id">x</span> <span class="id">ty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.State">State</a></span> <span class="id">x</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#deref_field">deref_field</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id">x</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Const">Const</a></span> <span class="id">c</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_const">translate_const</a></span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Unop">Unop</a></span> <span class="id">op</span> <span class="id">e</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_unop">translate_unop</a></span> <span class="id">op</span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#e">e</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Binop">Binop</a></span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_binop">translate_binop</a></span> <span class="id">op</span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id">e1</span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id">e2</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="list_type_to_typelist">list_type_to_typelist</a></span> (<span class="id">tys</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#typelist">Ctypes.typelist</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#tys">tys</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tnil">Ctypes.Tnil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">ty</span> :: <span class="id">tys</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Ctypes.Tcons</a></span> <span class="id">ty</span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#list_type_to_typelist">list_type_to_typelist</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#tys">tys</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="funcall">funcall</a></span> (<span class="id">y</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">f</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">tret</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tys</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tret</span> := <span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#tret">tret</a></span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> =&gt; <span class="id">t</span> | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tvoid">Ctypes.Tvoid</a></span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">sig</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tfunction">Ctypes.Tfunction</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#list_type_to_typelist">list_type_to_typelist</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#tys">tys</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#tret">tret</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#cc_default">AST.cc_default</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Scall">Clight.Scall</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#y">y</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#sig">sig</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="assign">assign</a></span> (<span class="id">x</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">ty</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [] | [<span class="id">_</span>] =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sset">Clight.Sset</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">xs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Velus.Common.Common.html#mem_assoc_ident">mem_assoc_ident</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> <span class="id">xs</span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sassign">Clight.Sassign</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#deref_field">deref_field</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.out">out</a></span>) (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_name">m_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>)) <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sset">Clight.Sset</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="ptr_obj">ptr_obj</a></span> (<span class="id">cls</span> <span class="id">obj</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Clight.Eaddrof</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#deref_field">deref_field</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#obj">obj</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span>)) (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="funcall_assign">funcall_assign</a></span> (<span class="id">ys</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">obj</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">tyout</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>) (<span class="id">outs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>)) : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_right">fold_right</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> '(<span class="id">y</span>, (<span class="id">y</span>', <span class="id">ty</span>)) <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ty</span> := <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">assign_out</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#assign">assign</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#y">y</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Efield">Clight.Efield</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#obj">obj</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#tyout">tyout</a></span>) <span class="id">y</span>' <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#assign_out">assign_out</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#s">s</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sskip">Clight.Sskip</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine">combine</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ys">ys</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#outs">outs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="binded_funcall">binded_funcall</a></span> (<span class="id">ys</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">cls</span> <span class="id">obj</span> <span class="id">f</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.prog">prog</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id">c</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ys">ys</a></span>, <span class="id">m</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [], [] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#ptr_obj">ptr_obj</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#obj">obj</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">y</span>], [(<span class="id">y</span>', <span class="id">t</span>)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#ptr_obj">ptr_obj</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#obj">obj</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">c_t</span> := <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_temp">prefix_temp</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id">y</span>')) (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c_t">c_t</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#assign">assign</a></span> <span class="id">y</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c_t">c_t</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Etempvar">Clight.Etempvar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_temp">prefix_temp</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id">y</span>') <span class="id"><a href="Velus.ObcToClight.Generation.html#c_t">c_t</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">outs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tyout</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">out</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Clight.Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_out">prefix_out</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#obj">obj</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#tyout">tyout</a></span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#pointer_of">pointer_of</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#tyout">tyout</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#ptr_obj">ptr_obj</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#obj">obj</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#out">out</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cls">cls</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall_assign">funcall_assign</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ys">ys</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_out">prefix_out</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#obj">obj</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#tyout">tyout</a></span> <span class="id">outs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sskip">Clight.Sskip</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sskip">Clight.Sskip</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="translate_param">translate_param</a></span> '((<span class="id">y</span>, <span class="id">t</span>): <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>): <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> := (<span class="id"><a href="Velus.ObcToClight.Generation.html#y">y</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t">t</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="translate_stmt">translate_stmt</a></span> (<span class="id">s</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.stmt">stmt</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#s">s</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Assign">Assign</a></span> <span class="id">x</span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#assign">assign</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.typeof">typeof</a></span> <span class="id">e</span>)) (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.AssignSt">AssignSt</a></span> <span class="id">x</span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sassign">Clight.Sassign</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#deref_field">deref_field</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate.owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id">x</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.typeof">typeof</a></span> <span class="id">e</span>))) (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Ifte">Ifte</a></span> <span class="id">e</span> <span class="id">s1</span> <span class="id">s2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sifthenelse">Clight.Sifthenelse</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id">e</span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_stmt">translate_stmt</a></span> <span class="id">s1</span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_stmt">translate_stmt</a></span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Comp">Comp</a></span> <span class="id">s1</span> <span class="id">s2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_stmt">translate_stmt</a></span> <span class="id">s1</span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_stmt">translate_stmt</a></span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Call">Call</a></span> <span class="id">ys</span> <span class="id">cls</span> <span class="id">o</span> <span class="id">f</span> <span class="id">es</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#binded_funcall">binded_funcall</a></span> <span class="id">ys</span> <span class="id">cls</span> <span class="id">o</span> <span class="id">f</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id">es</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Skip">Skip</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sskip">Clight.Sskip</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#Translate">Translate</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="return_with">return_with</a></span> (<span class="id">s</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span>) (<span class="id">e</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#s">s</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sreturn">Clight.Sreturn</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#e">e</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cl_zero">cl_zero</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Econst_int">Clight.Econst_int</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Int.zero">Int.zero</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type_int32s">Ctypes.type_int32s</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="fundef">fundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ins</span> <span class="id">vars</span> <span class="id">temps</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ty</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>) (<span class="id">body</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span>)<br/>
&nbsp;&nbsp;: <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">f</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#mkfunction">Clight.mkfunction</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#cc_default">AST.cc_default</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#vars">vars</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#temps">temps</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#body">body</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#Gfun">AST.Gfun</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Ctypes.Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span>).<br/>
<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="rec_instance_methods">rec_instance_methods</a></span> (<span class="id">s</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.stmt">stmt</a></span>) (<span class="id">m</span>: <span class="id"><a href="Velus.ObcToClight.Generation.html#t">M.t</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>): <span class="id"><a href="Velus.ObcToClight.Generation.html#t">M.t</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#s">s</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Ifte">Ifte</a></span> <span class="id">_</span> <span class="id">s1</span> <span class="id">s2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Comp">Comp</a></span> <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#rec_instance_methods">rec_instance_methods</a></span> <span class="id">s2</span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#rec_instance_methods">rec_instance_methods</a></span> <span class="id">s1</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Call">Call</a></span> <span class="id">ys</span> <span class="id">cls</span> <span class="id">o</span> <span class="id">f</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ys</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [] | [<span class="id">_</span>] =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#add">M.add</a></span> (<span class="id">o</span>, <span class="id">f</span>) <span class="id">cls</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="instance_methods">instance_methods</a></span> (<span class="id">m</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>): <span class="id"><a href="Velus.ObcToClight.Generation.html#t">M.t</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#rec_instance_methods">rec_instance_methods</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span>) (@<span class="id"><a href="Velus.ObcToClight.Generation.html#empty">M.empty</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_out_vars">make_out_vars</a></span> (<span class="id">out_vars</span>: <span class="id"><a href="Velus.ObcToClight.Generation.html#t">M.t</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">ofc</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> '(<span class="id">o</span>, <span class="id">f</span>, <span class="id">cid</span>) := <span class="id"><a href="Velus.ObcToClight.Generation.html#ofc">ofc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Ident.html#Ids.prefix_out">prefix_out</a></span> <span class="id">f</span> <span class="id">o</span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id">f</span> <span class="id">cid</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) (<span class="id"><a href="Velus.ObcToClight.Generation.html#elements">M.elements</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#out_vars">out_vars</a></span>).<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="rec_instance_methods_temp">rec_instance_methods_temp</a></span> (<span class="id">prog</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>) (<span class="id">s</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.stmt">stmt</a></span>) (<span class="id">m</span>: <span class="id"><a href="Velus.Environment.html#Env.t">Env.t</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>): <span class="id"><a href="Velus.Environment.html#Env.t">Env.t</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#s">s</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Ifte">Ifte</a></span> <span class="id">_</span> <span class="id">s1</span> <span class="id">s2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Comp">Comp</a></span> <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#rec_instance_methods_temp">rec_instance_methods_temp</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="id">s2</span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#rec_instance_methods_temp">rec_instance_methods_temp</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="id">s1</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Call">Call</a></span> <span class="id">ys</span> <span class="id">cls</span> <span class="id">o</span> <span class="id">f</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id">cls</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id">f</span> <span class="id">c</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ys</span>, <span class="id">m</span>'.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">_</span>], [(<span class="id">y</span>', <span class="id">t</span>)] =&gt; <span class="id"><a href="Velus.Environment.html#Env.add">Env.add</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_temp">prefix_temp</a></span> <span class="id">f</span> <span class="id">y</span>') <span class="id">t</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="instance_methods_temp">instance_methods_temp</a></span> (<span class="id">prog</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>) (<span class="id">m</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>): <span class="id"><a href="Velus.Environment.html#Env.t">Env.t</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#rec_instance_methods_temp">rec_instance_methods_temp</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span>) (<span class="id"><a href="Velus.Environment.html#Env.empty">Env.empty</a></span> <span class="id">_</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_out_temps">make_out_temps</a></span> (<span class="id">out_temps</span>: <span class="id"><a href="Velus.Environment.html#Env.t">Env.t</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_param">translate_param</a></span> (<span class="id"><a href="Velus.Environment.html#Env.elements">Env.elements</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#out_temps">out_temps</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_in_arg">make_in_arg</a></span> (<span class="id">arg</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">x</span>, <span class="id">ty</span>) := <span class="id"><a href="Velus.ObcToClight.Generation.html#arg">arg</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Etempvar">Clight.Etempvar</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="translate_method">translate_method</a></span> (<span class="id">prog</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>) (<span class="id">c</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>) (<span class="id">m</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>)<br/>
&nbsp;&nbsp;: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">body</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_stmt">translate_stmt</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">out_vars</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#make_out_vars">make_out_vars</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#instance_methods">instance_methods</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">out_temps</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#make_out_temps">make_out_temps</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#instance_methods_temp">instance_methods_temp</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">self</span> := (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ins</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_param">translate_param</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">out</span> := (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.out">out</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_name">m_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>))) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">vars</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_param">translate_param</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_vars">m_vars</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_name">m_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#self">self</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#ins">ins</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#fundef">fundef</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#out_vars">out_vars</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#out_temps">out_temps</a></span> ++ <span class="id"><a href="Velus.ObcToClight.Generation.html#vars">vars</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tvoid">Ctypes.Tvoid</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#return_with">return_with</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#body">body</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;| [(<span class="id">y</span>, <span class="id">t</span>) <span class="kwd">as</span> <span class="id">yt</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#self">self</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#ins">ins</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">c_t</span> := <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#fundef">fundef</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#out_vars">out_vars</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_param">translate_param</a></span> <span class="id">yt</span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#out_temps">out_temps</a></span> ++ <span class="id"><a href="Velus.ObcToClight.Generation.html#vars">vars</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#c_t">c_t</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#return_with">return_with</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#body">body</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#make_in_arg">make_in_arg</a></span> <span class="id">yt</span>)))<br/>
&nbsp;&nbsp;| <span class="id">_</span> :: <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#self">self</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#out">out</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#ins">ins</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#fundef">fundef</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#out_vars">out_vars</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#out_temps">out_temps</a></span> ++ <span class="id"><a href="Velus.ObcToClight.Generation.html#vars">vars</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tvoid">Ctypes.Tvoid</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#return_with">return_with</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#body">body</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_methods">make_methods</a></span> (<span class="id">prog</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>) (<span class="id">c</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>)<br/>
&nbsp;&nbsp;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_method">translate_method</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="translate_obj">translate_obj</a></span> (<span class="id">obj</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>): (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">o</span>, <span class="id">c</span>) := <span class="id"><a href="Velus.ObcToClight.Generation.html#obj">obj</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#o">o</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_members">make_members</a></span> (<span class="id">c</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#members">Ctypes.members</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_param">translate_param</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_mems">c_mems</a></span>) ++ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_obj">translate_obj</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_objs">c_objs</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_struct">make_struct</a></span> (<span class="id">c</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_definition">Ctypes.composite_definition</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Composite">Ctypes.Composite</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Struct">Ctypes.Struct</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#make_members">make_members</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#noattr">Ctypes.noattr</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="translate_out">translate_out</a></span> (<span class="id">c</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>) (<span class="id">m</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_definition">Ctypes.composite_definition</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Composite">Ctypes.Composite</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_name">m_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Struct">Ctypes.Struct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_param">translate_param</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#noattr">Ctypes.noattr</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="filter_out">filter_out</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_definition">Ctypes.composite_definition</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_definition">Ctypes.composite_definition</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter">filter</a></span> (<span class="kwd">fun</span> <span class="id">co</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#co">co</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Composite">Ctypes.Composite</a></span> <span class="id">_</span> <span class="id">_</span> [] <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Composite">Ctypes.Composite</a></span> <span class="id">_</span> <span class="id">_</span> [<span class="id">_</span>] <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_out">make_out</a></span> (<span class="id">c</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_definition">Ctypes.composite_definition</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#filter_out">filter_out</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_out">translate_out</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="translate_class">translate_class</a></span> (<span class="id">prog</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>) (<span class="id">c</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>)<br/>
&nbsp;&nbsp;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_definition">Ctypes.composite_definition</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">methods</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#make_methods">make_methods</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">class_struct</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#make_struct">make_struct</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">out_structs</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#make_out">make_out</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#class_struct">class_struct</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#out_structs">out_structs</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#methods">methods</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="glob_bind">glob_bind</a></span> (<span class="id">bind</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>): <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">x</span>, <span class="id">ty</span>) := <span class="id"><a href="Velus.ObcToClight.Generation.html#bind">bind</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="load_in">load_in</a></span> (<span class="id">ins</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>)): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_right">fold_right</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> (<span class="id">xt</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>) <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">x</span>, <span class="id">t</span>) := <span class="id"><a href="Velus.ObcToClight.Generation.html#xt">xt</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">typtr</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tpointer">Ctypes.Tpointer</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t">t</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#noattr">Ctypes.noattr</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">load</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sbuiltin">Clight.Sbuiltin</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#EF_vload">AST.EF_vload</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type_chunk">type_chunk</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t">t</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Ctypes.Tcons</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#typtr">typtr</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tnil">Ctypes.Tnil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Clight.Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t">t</a></span>)) <span class="id"><a href="Velus.ObcToClight.Generation.html#typtr">typtr</a></span>] <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#load">load</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#s">s</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sskip">Clight.Sskip</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ins">ins</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="write_multiple_outs">write_multiple_outs</a></span> (<span class="id">node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">outs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>))<br/>
&nbsp;&nbsp;: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">out_struct</span> := <span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.out">out</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">t_struct</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_right">fold_right</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> (<span class="id">xt</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>) <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">x</span>, <span class="id">t</span>) := <span class="id"><a href="Velus.ObcToClight.Generation.html#xt">xt</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">typtr</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tpointer">Ctypes.Tpointer</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t">t</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#noattr">Ctypes.noattr</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">write</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sbuiltin">Clight.Sbuiltin</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#EF_vstore">AST.EF_vstore</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type_chunk">type_chunk</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t">t</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Ctypes.Tcons</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#typtr">typtr</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Ctypes.Tcons</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t">t</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tnil">Ctypes.Tnil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Clight.Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t">t</a></span>)) <span class="id"><a href="Velus.ObcToClight.Generation.html#typtr">typtr</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Efield">Clight.Efield</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#out_struct">out_struct</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t_struct">t_struct</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t">t</a></span>)] <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#write">write</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#s">s</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sskip">Clight.Sskip</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#outs">outs</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="write_out">write_out</a></span> (<span class="id">node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">outs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>))<br/>
&nbsp;&nbsp;: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#outs">outs</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [] =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sskip">Clight.Sskip</a></span><br/>
&nbsp;&nbsp;| [(<span class="id">x</span>, <span class="id">t</span>)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">typtr</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tpointer">Ctypes.Tpointer</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#noattr">Ctypes.noattr</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sbuiltin">Clight.Sbuiltin</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#EF_vstore">AST.EF_vstore</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type_chunk">type_chunk</a></span> <span class="id">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Ctypes.Tcons</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#typtr">typtr</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Ctypes.Tcons</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tnil">Ctypes.Tnil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Clight.Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> <span class="id">x</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span>)) <span class="id"><a href="Velus.ObcToClight.Generation.html#typtr">typtr</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Etempvar">Clight.Etempvar</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span>))]<br/>
&nbsp;&nbsp;| <span class="id">outs</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#write_multiple_outs">write_multiple_outs</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#outs">outs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="reset_call">reset_call</a></span> (<span class="id">node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">p_self</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Clight.Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span> <span class="id"><a href="Velus.Ident.html#Ids.main_id">main_id</a></span>)) (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>)) (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.reset">reset</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> [<span class="id"><a href="Velus.ObcToClight.Generation.html#p_self">p_self</a></span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="step_call">step_call</a></span> (<span class="id">node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">Clight.expr</a></span>) (<span class="id">m_out</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>)): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">p_self</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Clight.Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span> <span class="id"><a href="Velus.Ident.html#Ids.main_id">main_id</a></span>)) (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>)) (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m_out">m_out</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#p_self">p_self</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span><br/>
&nbsp;&nbsp;| [(<span class="id">y</span>, <span class="id">t</span>)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#p_self">p_self</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y</span>) (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span>)) <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">out_struct</span> := <span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.out">out</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">t_struct</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">p_out</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Clight.Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#out_struct">out_struct</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t_struct">t_struct</a></span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#pointer_of">pointer_of</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#t_struct">t_struct</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#p_self">p_self</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#p_out">p_out</a></span> :: <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="main_loop_body">main_loop_body</a></span> (<span class="id">do_sync</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">m</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#make_in_arg">make_in_arg</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">body</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#load_in">load_in</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#step_call">step_call</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#args">args</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#write_out">write_out</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)))<br/>
&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#do_sync">do_sync</a></span><br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="Velus.Ident.html#Ids.sync_id">sync_id</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> []) <span class="id"><a href="Velus.ObcToClight.Generation.html#body">body</a></span><br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#body">body</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="main_loop">main_loop</a></span> (<span class="id">do_sync</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">m</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sloop">Clight.Sloop</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#main_loop_body">main_loop_body</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#do_sync">do_sync</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sskip">Clight.Sskip</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="main_body">main_body</a></span> (<span class="id">do_sync</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">m</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#statement">Clight.statement</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Ssequence">Clight.Ssequence</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#reset_call">reset_call</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#main_loop">main_loop</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#do_sync">do_sync</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_main">make_main</a></span> (<span class="id">do_sync</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">m</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">vars</span> :=  <span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] | [<span class="id">_</span>] =&gt; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; [(<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.out">out</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span>))]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">temp</span> := <span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">yt</span>] =&gt; [<span class="id">yt</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#fundef">fundef</a></span> [] <span class="id"><a href="Velus.ObcToClight.Generation.html#vars">vars</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_param">translate_param</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#temp">temp</a></span> ++ <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>))) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type_int32s">Ctypes.type_int32s</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#main_body">main_body</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#do_sync">do_sync</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#node">node</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#m">m</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_entry_point">make_entry_point</a></span> (<span class="id">do_sync</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">sig</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tfunction">Ctypes.Tfunction</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tnil">Ctypes.Tnil</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tvoid">Ctypes.Tvoid</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#cc_default">AST.cc_default</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">main</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Clight.Evar</a></span> (<span class="kwd">if</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#do_sync">do_sync</a></span> <span class="kwd">then</span> <span class="id"><a href="Velus.Ident.html#Ids.main_sync_id">main_sync_id</a></span> <span class="kwd">else</span> <span class="id"><a href="Velus.Ident.html#Ids.main_proved_id">main_proved_id</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#sig">sig</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">body</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Scall">Clight.Scall</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#main">main</a></span> [] <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#fundef">fundef</a></span> [] [] [] <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type_int32s">Ctypes.type_int32s</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#body">body</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ef_sync">ef_sync</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">sg</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#mksignature">AST.mksignature</a></span> [] <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#Tvoid">AST.Tvoid</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#cc_default">AST.cc_default</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ef</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#EF_external">AST.EF_external</a></span> "<span class="id">sync</span>" <span class="id"><a href="Velus.ObcToClight.Generation.html#sg">sg</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#External">Ctypes.External</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ef">ef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tnil">Ctypes.Tnil</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tvoid">Ctypes.Tvoid</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#cc_default">AST.cc_default</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="make_sync">make_sync</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#Gfun">AST.Gfun</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ef_sync">ef_sync</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vardef">vardef</a></span> (<span class="id">env</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_env">Ctypes.composite_env</a></span>) (<span class="id">volatile</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">x</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>)<br/>
&nbsp;&nbsp;: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">x</span>, <span class="id">ty</span>) := <span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ty</span>' := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#merge_attributes">Ctypes.merge_attributes</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ty">ty</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#mk_attr">Ctypes.mk_attr</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#volatile">volatile</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#x">x</a></span>, @<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#Gvar">AST.Gvar</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#mkglobvar">AST.mkglobvar</a></span> <span class="id">ty</span>' [<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#Init_space">AST.Init_space</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof">Ctypes.sizeof</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#env">env</a></span> <span class="id">ty</span>')] <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#volatile">volatile</a></span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">build_composite_env</span>' (<span class="id">types</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_definition">Ctypes.composite_definition</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> { <span class="id">ce</span> | <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#build_composite_env">Ctypes.build_composite_env</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#types">types</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#ce">ce</a></span> }.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#build_composite_env">Ctypes.build_composite_env</a></span> <span class="id">types</span>) <span class="kwd">as</span> [<span class="id">ce</span>|<span class="id">msg</span>].<br/>
&nbsp;&nbsp;- <span class="tactic">left</span>. <span class="tactic">exists</span> <span class="id">ce</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">right</span>. <span class="tactic">exact</span> <span class="id">msg</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="check_size">check_size</a></span> (<span class="id">env</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_env">Ctypes.composite_env</a></span>) (<span class="id">id</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#ident">AST.ident</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#env">env</a></span> ! <span class="id"><a href="Velus.ObcToClight.Generation.html#id">id</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">co</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_sizeof">Ctypes.co_sizeof</a></span> <span class="id">co</span>) &lt;=? <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> [<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> "<span class="id">ObcToClight</span>: <span class="id">structure</span> <span class="kwd">is</span> <span class="id">too</span> <span class="id">big</span>: '"; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#CTX">CTX</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#id">id</a></span>; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> "'." ]<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> [<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> "<span class="id">ObcToClight</span>: <span class="id">structure</span> <span class="kwd">is</span> <span class="id">undefined</span>: '"; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#CTX">CTX</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#id">id</a></span>; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> "'." ]<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="check_size_env">check_size_env</a></span> (<span class="id">env</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_env">Ctypes.composite_env</a></span>) (<span class="id">types</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_definition">Ctypes.composite_definition</a></span>)<br/>
&nbsp;&nbsp;: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#types">types</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Composite">Ctypes.Composite</a></span> <span class="id">id</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> :: <span class="id">types</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">_</span> &lt;- <span class="id"><a href="Velus.ObcToClight.Generation.html#check_size">check_size</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#env">env</a></span> <span class="id">id</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#check_size_env">check_size_env</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#env">env</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#types">types</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">make_program</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">types</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_definition">Ctypes.composite_definition</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">gvars</span> <span class="id">gvars_vol</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">defs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">Clight.fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">Ctypes.type</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">public</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">main</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#program">Ctypes.program</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function">Clight.function</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">build_composite_env</span>' <span class="id"><a href="Velus.ObcToClight.Generation.html#types">types</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">ce</span> <span class="id">P</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">_</span> &lt;- <span class="id"><a href="Velus.ObcToClight.Generation.html#check_size_env">check_size_env</a></span> <span class="id">ce</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#types">types</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> {| <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Build_program">Ctypes.prog_defs</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#vardef">vardef</a></span> <span class="id">ce</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#gvars">gvars</a></span> ++<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#vardef">vardef</a></span> <span class="id">ce</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#gvars_vol">gvars_vol</a></span> ++<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#defs">defs</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Ctypes.prog_public</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#public">public</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Ctypes.prog_main</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#main">main</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Ctypes.prog_types</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#types">types</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Ctypes.prog_comp_env</span> := <span class="id">ce</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Ctypes.prog_comp_env_eq</span> := <span class="id">P</span> |}<br/>
&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> <span class="id">msg</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> <span class="id">msg</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="translate">translate</a></span> (<span class="id">do_sync</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">all_public</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">main_node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">prog</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#program">Clight.program</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id">c</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Ident.html#Ids.reset">reset</a></span> <span class="id">c</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">f</span> := <span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span> <span class="id"><a href="Velus.Ident.html#Ids.main_id">main_id</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">f_gvar</span> := (<span class="id"><a href="Velus.ObcToClight.Generation.html#f">f</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#main_node">main_node</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ins</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#glob_bind">glob_bind</a></span> <span class="id">m</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">outs</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#glob_bind">glob_bind</a></span> <span class="id">m</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">prog</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">cs</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_class">translate_class</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span>) <span class="id"><a href="Velus.ObcToClight.Generation.html#prog">prog</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">structs</span>, <span class="id">funs</span>) := <span class="tactic">split</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#cs">cs</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">main_proved</span> := (<span class="id"><a href="Velus.Ident.html#Ids.main_proved_id">main_proved_id</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#make_main">make_main</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#main_node">main_node</a></span> <span class="id">m</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">entry_point</span> := (<span class="id"><a href="Velus.Ident.html#Ids.main_id">main_id</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#make_entry_point">make_entry_point</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#do_sync">do_sync</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">gdefs</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#funs">funs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ (<span class="kwd">if</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#do_sync">do_sync</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> [(<span class="id"><a href="Velus.Ident.html#Ids.sync_id">sync_id</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#make_sync">make_sync</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Ident.html#Ids.main_sync_id">main_sync_id</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#make_main">make_main</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#main_node">main_node</a></span> <span class="id">m</span>)]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ [<span class="id"><a href="Velus.ObcToClight.Generation.html#main_proved">main_proved</a></span>; <span class="id"><a href="Velus.ObcToClight.Generation.html#entry_point">entry_point</a></span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">make_program</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#structs">structs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="Velus.ObcToClight.Generation.html#f_gvar">f_gvar</a></span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#outs">outs</a></span> ++ <span class="id"><a href="Velus.ObcToClight.Generation.html#ins">ins</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#gdefs">gdefs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Ident.html#Ids.main_id">main_id</a></span> ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">if</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#do_sync">do_sync</a></span> <span class="kwd">then</span> [<span class="id"><a href="Velus.Ident.html#Ids.main_sync_id">main_sync_id</a></span>] <span class="kwd">else</span> [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ (<span class="kwd">if</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#all_public">all_public</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#funs">funs</a></span>) <span class="kwd">else</span> []))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Ident.html#Ids.main_proved_id">main_proved_id</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">ObcToClight</span>: <span class="id">reset</span> <span class="id">function</span> <span class="id">not</span> <span class="id">found</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">ObcToClight</span>: <span class="id">step</span> <span class="id">function</span> <span class="id">not</span> <span class="id">found</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> [<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> "<span class="id">ObcToClight</span>: <span class="id">undefined</span> <span class="id">node</span>: '"; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#CTX">CTX</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#main_node">main_node</a></span>; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> "'." ]<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
