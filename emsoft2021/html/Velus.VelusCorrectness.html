
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module VelusCorrectness</title>
<meta name="description" content="Documentation of Coq module VelusCorrectness" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module VelusCorrectness</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Ident.html">Ident</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoindStreams.html">CoindStreams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ObcToClight.Generation.html">ObcToClight.Generation</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Traces.html">Traces</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ClightToAsm.html">ClightToAsm</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html">common.Errors</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html">common.Events</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html">common.Behaviors</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html">cfrontend.Clight</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html">cfrontend.ClightBigstep</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html">lib.Integers</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html">driver.Compiler</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ObcToClight.Interface.html">Interface</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Instantiator.html">Instantiator</a></span>.<br/>
<span class="kwd">Import</span> <span class="id">Stc.Syn</span>.<br/>
<span class="kwd">Import</span> <span class="id">NL</span>.<br/>
<span class="kwd">Import</span> <span class="id">L</span>.<br/>
<span class="kwd">Import</span> <span class="id">Obc.Syn</span>.<br/>
<span class="kwd">Import</span> <span class="id">Obc.Sem</span>.<br/>
<span class="kwd">Import</span> <span class="id">Obc.Typ</span>.<br/>
<span class="kwd">Import</span> <span class="id">Obc.Equ</span>.<br/>
<span class="kwd">Import</span> <span class="id">Obc.Def</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fusion</span>.<br/>
<span class="kwd">Import</span> <span class="id">Stc2ObcInvariants</span>.<br/>
<span class="kwd">Import</span> <span class="id">IStr</span>.<br/>
<span class="kwd">Import</span> <span class="id">CStr</span>.<br/>
<span class="kwd">Import</span> <span class="id">CIStr</span>.<br/>
<span class="kwd">Import</span> <span class="id">OpAux</span>.<br/>
<span class="kwd">Import</span> <span class="id">Op</span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLCorrectness.html">NLCorrectness</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html">ObcToClight.Correctness</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LustreElab.html">Lustre.LustreElab</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id">List.ListNotations</span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.omega.Omega.html">Omega</a></span>.<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">stream_scope</span>.<br/>
<br/>
<span class="kwd">Parameter</span> <span class="id"><a name="print_lustre">print_lustre</a></span>  : <span class="id"><a href="Velus.Instantiator.html#L.Syn.global">global</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="l_to_nl">l_to_nl</a></span> (<span class="id">g</span> : {<span class="id">G</span> : <span class="id"><a href="Velus.Instantiator.html#L.Syn.global">global</a></span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#L.Typ.wt_global">wt_global</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> /\ <span class="id"><a href="Velus.Instantiator.html#L.Clo.wc_global">wc_global</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Instantiator.html#L.Syn.n_prefixes">L.Syn.n_prefixes</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span> = <span class="id"><a href="Velus.Lustre.LustreElab.html#elab_prefs">elab_prefs</a></span>) <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span>}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="Velus.Instantiator.html#NL.Syn.global">NL.Syn.global</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">g</span> <span class="kwd">as</span> (<span class="id">g</span>&amp;<span class="id">Hwt</span>&amp;<span class="id">_</span>&amp;<span class="id">Hprefs</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#L.Typ.wt_global_wl_global">L.Typ.wt_global_wl_global</a></span> <span class="kwd">in</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Norm.Norm.normalize_global</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id">g</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hwt</span> <span class="id">Hprefs</span>))) <span class="kwd">as</span> ([<span class="id">g</span>'|<span class="id">err</span>]&amp;<span class="id">Hprefs</span>'); <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id"><a href="Velus.Instantiator.html#TR.Tr.to_global">TR.Tr.to_global</a></span> <span class="id">g</span>' <span class="id">Hprefs</span>').<br/>
&nbsp;&nbsp;- <span class="tactic">right</span>. <span class="tactic">exact</span> <span class="id">err</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="compile">compile</a></span> (<span class="id">D</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Parser.LustreAst.html#declaration">LustreAst.declaration</a></span>) (<span class="id">main_node</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#program">Asm.program</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LustreElab.html#elab_declarations">elab_declarations</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#D">D</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@@ <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#print">print</a></span> (<span class="kwd">fun</span> <span class="id">g</span> =&gt; <span class="id"><a href="Velus.VelusCorrectness.html#print_lustre">print_lustre</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#g">g</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@@@ <span class="id"><a href="Velus.VelusCorrectness.html#l_to_nl">l_to_nl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@@@ <span class="id"><a href="Velus.NLCorrectness.html#nl_to_asm">nl_to_asm</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#main_node">main_node</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="WtStream">WtStream</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="WtStream.G">G</a></span>: <span class="id"><a href="Velus.Instantiator.html#L.Syn.global">global</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="WtStream.main">main</a></span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="WtStream.ins">ins</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.val">val</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="WtStream.outs">outs</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.val">val</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="wt_ins">wt_ins</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">node</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#L.Syn.find_node">find_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#WtStream.main">main</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#WtStream.G">G</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLCorrectness.html#wt_streams">wt_streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#WtStream.ins">ins</a></span> (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="wt_outs">wt_outs</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">node</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#L.Syn.find_node">find_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#WtStream.main">main</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#WtStream.G">G</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLCorrectness.html#wt_streams">wt_streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#WtStream.outs">outs</a></span> (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span>)).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.VelusCorrectness.html#WtStream">WtStream</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="wc_ins">wc_ins</a></span> <span class="id">G</span> <span class="id">main</span> <span class="id">ins</span> := <span class="id"><a href="Velus.Instantiator.html#L.ClSem.sem_clock_inputs">sem_clock_inputs</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#main">main</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span>.<br/>
<br/>
<div class="doc">The trace of a Lustre node </div>
<span class="kwd">Section</span> <span class="id"><a name="LTrace">LTrace</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="LTrace.node">node</a></span>: <span class="id"><a href="Velus.Instantiator.html#L.Syn.node">node</a></span>) (<span class="id"><a name="LTrace.ins">ins</a></span> <span class="id"><a name="LTrace.outs">outs</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.val">val</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LTrace.Spec_in_out">Spec_in_out</a></span> : <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span>) &lt;&gt; [] \/ <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span>) &lt;&gt; [].<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LTrace.Len_ins">Len_ins</a></span>     : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.ins">ins</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LTrace.Len_outs">Len_outs</a></span>    : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.outs">outs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="trace_node">trace_node</a></span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#traceinf">traceinf</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">traceinf_of_traceinf</span>' (<span class="id"><a href="Velus.Traces.html#mk_trace">mk_trace</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.ins">ins</a></span>) (<span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.outs">outs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span>)) (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2')">Next Obligation.</div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.Spec_in_out">Spec_in_out</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">left</span>; <span class="tactic">intro</span> <span class="id">E</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_eq_nil">map_eq_nil</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">right</span>; <span class="tactic">intro</span> <span class="id">E</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_eq_nil">map_eq_nil</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3')">Next Obligation.</div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span>, <span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span>; <span class="tactic">rewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof4')">Next Obligation.</div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span>, <span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span>; <span class="tactic">rewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Simply link the trace of a Lustre node with the trace of an NLustre node with the same parameters </div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="trace_inf_sim_node">trace_inf_sim_node</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">n</span>' <span class="id">Spec_in_out_n</span>' <span class="id">Len_ins_n</span>' <span class="id">Len_outs_n</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_in">NL.Syn.n_in</a></span> <span class="id">n</span>') = <span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_out">NL.Syn.n_out</a></span> <span class="id">n</span>') = <span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> (<span class="id"><a href="Velus.NLCorrectness.html#trace_node">NLCorrectness.trace_node</a></span> <span class="id">n</span>' <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.ins">ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.outs">outs</a></span> <span class="id">Spec_in_out_n</span>' <span class="id">Len_ins_n</span>' <span class="id">Len_outs_n</span>' <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.VelusCorrectness.html#trace_node">trace_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.NLCorrectness.html#trace_node">NLCorrectness.trace_node</a></span>, <span class="id"><a href="Velus.VelusCorrectness.html#trace_node">trace_node</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">traceinf_sim</span>'<span class="id">_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">n</span>; <span class="kwd">cofix</span> <span class="id">COFIX</span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Traces.html#unfold_mk_trace">unfold_mk_trace</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Traces.html#unfold_mk_trace">unfold_mk_trace</a></span> <span class="kwd">with</span> (<span class="id">xs</span> := <span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="Velus.Traces.html#load_events">load_events</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.ins">ins</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>)) ** <span class="id"><a href="Velus.Traces.html#store_events">store_events</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.outs">outs</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.node">node</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id"><a href="Velus.Traces.html#load_events">load_events</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.ins">ins</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_in">NL.Syn.n_in</a></span> <span class="id">n</span>')) ** <span class="id"><a href="Velus.Traces.html#store_events">store_events</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.outs">outs</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_out">NL.Syn.n_out</a></span> <span class="id">n</span>')));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intro</span> <span class="id">E</span>; <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp_E0_inv">Eapp_E0_inv</a></span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.ins">ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_in">NL.Syn.n_in</a></span> <span class="id">n</span>'))) <span class="kwd">as</span> <span class="id">Len_ins_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="Velus.Common.Common.html#length_idty">length_idty</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace.outs">outs</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_out">NL.Syn.n_out</a></span> <span class="id">n</span>'))) <span class="kwd">as</span> <span class="id">Len_outs_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Instantiator.html#L.Norm.Correct.CIStr.CIStr.tr_Streams">tr_Streams</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="Velus.Common.Common.html#length_idty">length_idty</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_in">NL.Syn.n_in</a></span> <span class="id">n</span>') &lt;&gt; [] \/ <span class="id"><a href="Velus.Common.Common.html#idty">idty</a></span> (<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_out">NL.Syn.n_out</a></span> <span class="id">n</span>') &lt;&gt; []) <span class="kwd">as</span> <span class="id">Spec_in_out_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span> - <span class="id">Spec_in_out_n</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Spec_in_out_n</span>'; [<span class="tactic">left</span>|<span class="tactic">right</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">intro</span> <span class="id">contra</span>; <span class="tactic">eapply</span> <span class="id">H</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_eq_nil">map_eq_nil</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Traces.html#load_store_events_not_E0">load_store_events_not_E0</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Spec_in_out_2</span> <span class="id">Len_ins_2</span> <span class="id">Len_outs_2</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">COFIX</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.VelusCorrectness.html#LTrace">LTrace</a></span>.<br/>
<br/>
<div class="doc">A bisimulation relation between a declared node's trace and a given trace </div>
<span class="kwd">Inductive</span> <span class="id"><a name="bisim_IO">bisim_IO</a></span> (<span class="id">G</span>: <span class="id"><a href="Velus.Instantiator.html#L.Syn.global">global</a></span>) (<span class="id">f</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">ins</span> <span class="id">outs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.val">val</a></span>)): <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="IOStep">IOStep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">node</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Spec_in_out</span> : <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span>) &lt;&gt; [] \/ <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span>) &lt;&gt; [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Len_ins</span>     : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Len_outs</span>    : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#outs">outs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span>.(<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#L.Syn.find_node">find_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#f">f</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#T">T</a></span> (<span class="id"><a href="Velus.VelusCorrectness.html#trace_node">trace_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#node">node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#outs">outs</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#Spec_in_out">Spec_in_out</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#Len_ins">Len_ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#Len_outs">Len_outs</a></span> 0) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusCorrectness.html#bisim_IO">bisim_IO</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#f">f</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#outs">outs</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#T">T</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">normalize_global_normalized_global</span> <span class="id">normalized_global_unnested_global</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">normalize_global_causal</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Typing.normalize_global_wt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Clocking.normalize_global_wc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">normalize_global_sem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">normalize_global_sem_clock_inputs</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Ltac</span> <span class="id">unfold_l_to_nl</span> <span class="id">Hltonl</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.VelusCorrectness.html#l_to_nl">l_to_nl</a></span> <span class="kwd">in</span> <span class="id">Hltonl</span>;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">normalize_global</span>' <span class="id">_</span>) <span class="kwd">as</span> ([<span class="id">g</span>'|?]&amp;?) <span class="id">eqn</span>:<span class="id">Hnorm</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">normalize_global</span>' <span class="kwd">in</span> <span class="id">Hnorm</span>; <span class="id">inv</span> <span class="id">Hnorm</span>.<br/>
<br/>
<div class="doc">Correctness from Lustre to NLustre </div>
<span class="kwd">Lemma</span> <span class="id"><a name="behavior_l_to_nl">behavior_l_to_nl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">G</span> <span class="id">G</span>' <span class="id">main</span> <span class="id">ins</span> <span class="id">outs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#L.Sem.sem_node">sem_node</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span>) <span class="id"><a href="Velus.VelusCorrectness.html#main">main</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#outs">outs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusCorrectness.html#wc_ins">wc_ins</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span>) <span class="id"><a href="Velus.VelusCorrectness.html#main">main</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusCorrectness.html#l_to_nl">l_to_nl</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">G</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#NL.CoindSem.sem_node">CoindSem.sem_node</a></span> <span class="id">G</span>' <span class="id"><a href="Velus.VelusCorrectness.html#main">main</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#outs">outs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">g</span>&amp;<span class="id">Hwt</span>&amp;<span class="id">Hwc</span>&amp;<span class="id">Hprefs</span>) * <span class="id">Hsem</span> <span class="id">Hwcins</span> <span class="id">Hltonl</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold_l_to_nl</span> <span class="id">Hltonl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#TR.Correctness.sem_l_nl">TR.Correctness.sem_l_nl</a></span> <span class="kwd">in</span> <span class="id">Hltonl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fact</span> <span class="id"><a name="l_to_nl_find_node">l_to_nl_find_node</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">G</span>' <span class="id">f</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#L.Syn.find_node">find_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#f">f</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusCorrectness.html#l_to_nl">l_to_nl</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">G</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">n</span>', <span class="id"><a href="Velus.Instantiator.html#NL.Syn.find_node">NL.Syn.find_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#f">f</a></span> <span class="id">G</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_in">NL.Syn.n_in</a></span> <span class="id">n</span>' = <span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span> /\ <span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_out">NL.Syn.n_out</a></span> <span class="id">n</span>' = <span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">g</span>&amp;<span class="id">Hwt</span>&amp;<span class="id">Hwc</span>&amp;<span class="id">Hprefs</span>) * <span class="id">Hfind</span> <span class="id">Hltonl</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold_l_to_nl</span> <span class="id">Hltonl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#L.Norm.Norm.normalize_global_iface_eq">normalize_global_iface_eq</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#L.Syn.global_iface_eq_find">global_iface_eq_find</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (<span class="id">n</span>'&amp;<span class="id">Hfind</span>&amp;(<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">Hin</span>&amp;<span class="id">Hout</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#TR.Tr.find_node_global">TR.Tr.find_node_global</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (<span class="id">n</span>''&amp;?&amp;<span class="id">Hfind</span>&amp;<span class="id">Htonode</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">n</span>''. <span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#TR.Tr.to_node_in">TR.Tr.to_node_in</a></span> <span class="kwd">in</span> <span class="id">Htonode</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#TR.Tr.to_node_out">TR.Tr.to_node_out</a></span> <span class="kwd">in</span> <span class="id">Htonode</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fact</span> <span class="id">l_to_nl_find_node</span>' : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">G</span>' <span class="id">f</span> <span class="id">n</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#NL.Syn.find_node">NL.Syn.find_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#f">f</a></span> <span class="id">G</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusCorrectness.html#l_to_nl">l_to_nl</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">G</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">n</span>, <span class="id"><a href="Velus.Instantiator.html#L.Syn.find_node">find_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#f">f</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_in">NL.Syn.n_in</a></span> <span class="id">n</span>' = <span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span> /\ <span class="id"><a href="Velus.Instantiator.html#NL.Syn.n_out">NL.Syn.n_out</a></span> <span class="id">n</span>' = <span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">g</span>&amp;<span class="id">Hwt</span>&amp;<span class="id">Hwc</span>&amp;<span class="id">Hprefs</span>) * <span class="id">Hfind</span> <span class="id">Hltonl</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold_l_to_nl</span> <span class="id">Hltonl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#L.Norm.Norm.normalize_global_iface_eq">normalize_global_iface_eq</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">TR.Tr.find_node_global</span>' <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (<span class="id">n</span>''&amp;?&amp;<span class="id">Hfind</span>&amp;<span class="id">Htonode</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#L.Syn.global_iface_eq_find">global_iface_eq_find</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (<span class="id">n</span>&amp;<span class="id">Hfind</span>&amp;(<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">Hin</span>&amp;<span class="id">Hout</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">n</span>. <span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#TR.Tr.to_node_in">TR.Tr.to_node_in</a></span> <span class="kwd">in</span> <span class="id">Htonode</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#TR.Tr.to_node_out">TR.Tr.to_node_out</a></span> <span class="kwd">in</span> <span class="id">Htonode</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The ultimate lemma states that, if
    - the parsed declarations <span class="bracket"><span class="id">D</span></span> elaborate to a dataflow program <span class="bracket"><span class="id">G</span></span> and
      a proof <span class="bracket"><span class="id">Gp</span></span> that it satisfies <span class="bracket"><span class="id">wt_global</span> <span class="id">G</span></span> and <span class="bracket"><span class="id">wc_global</span> <span class="id">G</span></span>,
    - the values on input streams <span class="bracket"><span class="id">ins</span></span> are well-typed according to the
      interface of the <span class="bracket"><span class="id">main</span></span> node,
    - the inputs of the <span class="bracket"><span class="id">main</span></span> node are all on the base clock
    - the input and output streams are related by the dataflow semantics
      of the node <span class="bracket"><span class="id">main</span></span> in <span class="bracket"><span class="id">G</span></span>, and
    - compilation succeeds in generating an assembler program <span class="bracket"><span class="id">P</span></span>,
    then the assembler program generates an infinite sequence of volatile
    reads and writes that correspond to the successive values on the
    input and output streams. </div>
<span class="kwd">Theorem</span> <span class="id"><a name="behavior_asm">behavior_asm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">D</span> <span class="id">G</span> <span class="id">Gp</span> <span class="id">P</span> <span class="id">main</span> <span class="id">ins</span> <span class="id">outs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LustreElab.html#elab_declarations">elab_declarations</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#D">D</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#Gp">Gp</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusCorrectness.html#wt_ins">wt_ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#main">main</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusCorrectness.html#wc_ins">wc_ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#main">main</a></span> (<span class="id"><a href="Velus.NLCorrectness.html#pStr">pStr</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Instantiator.html#L.Sem.sem_node">sem_node</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#main">main</a></span> (<span class="id"><a href="Velus.NLCorrectness.html#pStr">pStr</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span>) (<span class="id"><a href="Velus.NLCorrectness.html#pStr">pStr</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#outs">outs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusCorrectness.html#compile">compile</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#D">D</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#main">main</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#P">P</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">T</span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#program_behaves">program_behaves</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#semantics">Asm.semantics</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#P">P</a></span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#Reacts">Reacts</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#T">T</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.VelusCorrectness.html#bisim_IO">bisim_IO</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#G">G</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#main">main</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#ins">ins</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#outs">outs</a></span> <span class="id"><a href="Velus.VelusCorrectness.html#T">T</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Elab</span> <span class="id">Hwti</span> <span class="id">Hwci</span> <span class="id">Hsem</span> <span class="id">Comp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.VelusCorrectness.html#compile">compile</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#print">print</a></span> <span class="kwd">in</span> <span class="id">Comp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Elab</span> <span class="kwd">in</span> <span class="id">Comp</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Comp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="kwd">match</span> <span class="id">Gp</span> <span class="kwd">with</span> | <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>) <span class="kwd">with</span> (<span class="id"><a href="Velus.VelusCorrectness.html#l_to_nl">l_to_nl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id">G</span> <span class="id">Gp</span>)) <span class="kwd">in</span> <span class="id">Comp</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.VelusCorrectness.html#l_to_nl">l_to_nl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id">G</span> <span class="id">Gp</span>)) <span class="kwd">as</span> [<span class="id">G</span>'|] <span class="id">eqn</span>: <span class="id">Comp</span>'; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Comp</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.NLCorrectness.html#nl_to_asm">nl_to_asm</a></span> <span class="id">main</span> <span class="id">G</span>') <span class="kwd">as</span> [<span class="id">p</span>|] <span class="id">eqn</span>: <span class="id">Comp</span>''; <span class="id">inv</span> <span class="id">Comp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Gp</span> <span class="kwd">as</span> (<span class="id">Hwc</span>&amp;<span class="id">Hwt</span>&amp;<span class="id">Hprefs</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.NLCorrectness.html#behavior_nl_to_asm">behavior_nl_to_asm</a></span> <span class="kwd">with</span> (<span class="id">ins</span>:=<span class="id">ins</span>) (<span class="id">outs</span>:=<span class="id">outs</span>) <span class="kwd">in</span> <span class="id">Comp</span>'' <span class="kwd">as</span> (<span class="id">T</span>&amp;<span class="id">Hbeh</span>&amp;<span class="id">Hbisim</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id">T</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hbisim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">l_to_nl_find_node</span>' <span class="kwd">in</span> <span class="id">Comp</span>' <span class="kwd">as</span> (?&amp;<span class="id">Hfind</span>'&amp;<span class="id">Hin</span>&amp;<span class="id">Hout</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span> <span class="id">x</span> &lt;&gt; []) <span class="kwd">as</span> <span class="id">Hnnul</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_ingt0">n_ingt0</a></span> <span class="id">x</span>) <span class="kwd">as</span> <span class="id">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>. <span class="tactic">rewrite</span> <span class="id">contra</span> <span class="kwd">in</span> <span class="id">Hlt</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Lt.html#lt_irrefl">Lt.lt_irrefl</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">ins</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_in">n_in</a></span> <span class="id">x</span>)) <span class="kwd">as</span> <span class="id">Hlenin</span> <span class="tactic">by</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">outs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.Instantiator.html#L.Syn.n_out">n_out</a></span> <span class="id">x</span>)) <span class="kwd">as</span> <span class="id">Hlenout</span> <span class="tactic">by</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.VelusCorrectness.html#IOStep">IOStep</a></span> <span class="kwd">with</span> (<span class="id">Spec_in_out</span>:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#or_introl">or_introl</a></span> <span class="id">Hnnul</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Len_ins</span>:=<span class="id">Hlenin</span>) (<span class="id">Len_outs</span>:=<span class="id">Hlenout</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#traceinf_sim_trans">traceinf_sim_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.VelusCorrectness.html#trace_inf_sim_node">trace_inf_sim_node</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">clear</span> - <span class="id">Comp</span>'. <span class="id">unfold_l_to_nl</span> <span class="id">Comp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#TR.Clocking.wc_transcription">TR.Clocking.wc_transcription</a></span> <span class="kwd">in</span> <span class="id">Comp</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">clear</span> - <span class="id">Comp</span>'. <span class="id">unfold_l_to_nl</span> <span class="id">Comp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#TR.Typing.wt_transcription">TR.Typing.wt_transcription</a></span> <span class="kwd">in</span> <span class="id">Comp</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">clear</span> - <span class="id">Hwti</span> <span class="id">Comp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">l_to_nl_find_node</span>' <span class="kwd">in</span> <span class="id">Comp</span>' <span class="kwd">as</span> (?&amp;<span class="id">Hfind</span>'&amp;<span class="id">Hin</span>&amp;<span class="id">_</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hwti</span> <span class="kwd">in</span> <span class="id">Hfind</span>'. <span class="tactic">rewrite</span> <span class="id">Hin</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">clear</span> - <span class="id">Comp</span>'. <span class="id">unfold_l_to_nl</span> <span class="id">Comp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Instantiator.html#TR.NormalArgs.to_global_normal_args">TR.NormalArgs.to_global_normal_args</a></span> <span class="kwd">in</span> <span class="id">Comp</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.VelusCorrectness.html#behavior_l_to_nl">behavior_l_to_nl</a></span> <span class="kwd">in</span> <span class="id">Comp</span>'; <span class="tactic">eauto</span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
