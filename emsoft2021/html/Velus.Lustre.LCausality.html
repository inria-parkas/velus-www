
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module LCausality</title>
<meta name="description" content="Documentation of Coq module LCausality" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module LCausality</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id">List.ListNotations</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Permutation</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Setoids.Setoid.html">Setoid</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html">common.Errors</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.AcyGraph.html">AcyGraph</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span>.<br/>
<br/>
<h1> Lustre causality </h1>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="LCAUSALITY">LCAUSALITY</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span> : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span> : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Op">Op</a></span>).<br/>
<br/>
<h2> Causality definition </h2>
<br/>
<div class="doc">Variables that appear in the nth stream of an expression, to the left of fbys. </div>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LCAUSALITY.Is_free_left">Is_free_left</a></span> (<span class="id">x</span> : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp">exp</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLvar">IFLvar</a></span> : <span class="kwd">forall</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> 0 (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Evar">Evar</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLunop">IFLunop</a></span> : <span class="kwd">forall</span> <span class="id">op</span> <span class="id">e</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> 0 <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> 0 (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eunop">Eunop</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#op">op</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLbinop">IFLbinop</a></span> : <span class="kwd">forall</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> 0 <span class="id"><a href="Velus.Lustre.LCausality.html#e1">e1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> 0 <span class="id"><a href="Velus.Lustre.LCausality.html#e2">e2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> 0 (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Ebinop">Ebinop</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#op">op</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e1">e1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e2">e2</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLfby">IFLfby</a></span> : <span class="kwd">forall</span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">a</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e0s">e0s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Efby">Efby</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e0s">e0s</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLarrow">IFLarrow</a></span> : <span class="kwd">forall</span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">a</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e0s">e0s</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Earrow">Earrow</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e0s">e0s</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLwhen">IFLwhen</a></span> : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">y</span> <span class="id">b</span> <span class="id">a</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>) /\ <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> = <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Ewhen">Ewhen</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#b">b</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLmerge">IFLmerge</a></span> : <span class="kwd">forall</span> <span class="id">ets</span> <span class="id">efs</span> <span class="id">y</span> <span class="id">a</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>) /\ <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> = <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ets">ets</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#efs">efs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Emerge">Emerge</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ets">ets</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#efs">efs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLite">IFLite</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">ets</span> <span class="id">efs</span> <span class="id">a</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>) /\ <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> 0 <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ets">ets</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#efs">efs</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eite">Eite</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ets">ets</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#efs">efs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLapp">IFLapp</a></span> : <span class="kwd">forall</span> <span class="id">f</span> <span class="id">es</span> <span class="id">a</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">k</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">Exists</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id">k</span>') <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eapp">Eapp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#f">f</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLreset">IFLreset</a></span> : <span class="kwd">forall</span> <span class="id">f</span> <span class="id">es</span> <span class="id">r</span> <span class="id">a</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">k</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">Exists</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id">k</span>') <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> 0 <span class="id"><a href="Velus.Lustre.LCausality.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eapp">Eapp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#f">f</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#r">r</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>)<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="LCAUSALITY.Is_free_left_list">Is_free_left_list</a></span> (<span class="id">x</span> : <span class="id">ident</span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp">exp</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLLnow">IFLLnow</a></span> : <span class="kwd">forall</span> <span class="id">k</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>::<span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.IFLLlater">IFLLlater</a></span> : <span class="kwd">forall</span> <span class="id">k</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &gt;= <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> - <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>::<span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_left_list">Is_free_left_list</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LCAUSALITY.depends_on">depends_on</a></span> (<span class="id">eqs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.equation">equation</a></span>) (<span class="id">x</span> : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">y</span> : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">Exists</a></span> (<span class="kwd">fun</span> '(<span class="id">xs</span>, <span class="id">es</span>) =&gt; <span class="tactic">exists</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#xs">xs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#eqs">eqs</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LCAUSALITY.depends_on_ck">depends_on_ck</a></span> <span class="id">vars</span> (<span class="id">eqs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.equation">equation</a></span>) (<span class="id">x</span> : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id">y</span> : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.depends_on">depends_on</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#eqs">eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> \/ (<span class="tactic">exists</span> <span class="id">ck</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span>, <span class="id"><a href="Velus.Lustre.LCausality.html#ck">ck</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#vars">vars</a></span> /\ <span class="id"><a href="Velus.Clocks.html#Is_free_in_clock">Is_free_in_clock</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ck">ck</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LCAUSALITY.graph_of_eqs">graph_of_eqs</a></span> {<span class="id">v</span> <span class="id">a</span>} <span class="id">vars</span> <span class="id">eqs</span> (<span class="id">g</span> : <span class="id"><a href="Velus.AcyGraph.html#AcyGraph">AcyGraph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#v">v</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonPS.html#PS.Equal">PS.Equal</a></span> (<span class="id"><a href="Velus.AcyGraph.html#vertices">vertices</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#g">g</a></span>) (<span class="id"><a href="Velus.Common.CommonPS.html#PSP.of_list">PSP.of_list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#vars">vars</a></span>)) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.depends_on_ck">depends_on_ck</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#vars">vars</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#eqs">eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> -&gt; <span class="id"><a href="Velus.AcyGraph.html#is_arc">is_arc</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#g">g</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LCAUSALITY.graph_of_node">graph_of_node</a></span> {<span class="id">v</span> <span class="id">a</span>} (<span class="id">n</span> : <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.node">node</a></span>) (<span class="id">g</span> : <span class="id"><a href="Velus.AcyGraph.html#AcyGraph">AcyGraph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#v">v</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.graph_of_eqs">graph_of_eqs</a></span> (<span class="id"><a href="Velus.Common.Common.html#idck">idck</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>)) (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#g">g</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LCAUSALITY.node_causal">node_causal</a></span> (<span class="id">n</span> : <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.node">node</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> {<span class="id">v</span> <span class="id">a</span>} (<span class="id">g</span> : <span class="id"><a href="Velus.AcyGraph.html#AcyGraph">AcyGraph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#v">v</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>), <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.graph_of_node">graph_of_node</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#g">g</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id"><a name="LCAUSALITY.graph_of_eqs_Proper">graph_of_eqs_Proper</a></span> {<span class="id">v</span> <span class="id">a</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="Velus.AcyGraph.html#AcyGraph">AcyGraph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#v">v</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>) ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.graph_of_eqs">graph_of_eqs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">vars</span> <span class="id">vars</span>' <span class="id">Hp1</span> <span class="id">eqs</span> <span class="id">eqs</span>' <span class="id">Hp2</span> ? <span class="id">xs</span> ? (<span class="id">Hv</span>&amp;<span class="id">Ha</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Common.CommonPS.html#ps_from_list_ps_of_list">ps_from_list_ps_of_list</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Hp1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hdep</span>. <span class="tactic">apply</span> <span class="id">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hdep</span> <span class="kwd">as</span> [?|(<span class="id">ck</span>&amp;?&amp;?)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">left</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.depends_on">depends_on</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hp2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">right</span>. <span class="tactic">exists</span> <span class="id">ck</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hp1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">Is_free_left_list_length</span>' : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">x</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annot">annot</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>)) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annots">annots</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hf</span> <span class="id">Hfree</span>; <span class="id">inv</span> <span class="id">Hfree</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>, <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;now&nbsp;!&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_lt_add_r">PeanoNat.Nat.lt_lt_add_r</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;later&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">IHes</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span> <span class="id">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_sub_lt_add_l">PeanoNat.Nat.lt_sub_lt_add_l</a></span> <span class="kwd">in</span> <span class="id">IHes</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.Is_free_left_length">Is_free_left_length</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">e</span> <span class="id">x</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annot">annot</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Ltac</span> <span class="id">solve_forall2</span> <span class="id">Ha</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> &lt;- <span class="id">Ha</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Is_free_left_list_length</span>'; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_Forall">Forall_Forall</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span> ? [? ?] ? ? ?; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hfree</span>; <span class="id">inv</span> <span class="id">Hfree</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;fby&nbsp;*)</span> <span class="id">solve_forall2</span> <span class="id">H8</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;arrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>. <span class="id">solve_forall2</span> <span class="id">H8</span> <span class="id">H</span>. <span class="id">solve_forall2</span> <span class="id">H9</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>. <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [[? ?]|?]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall2</span> <span class="id">H7</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>. <span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> [[? ?]|[?|?]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall2</span> <span class="id">H9</span> <span class="id">H</span>. <span class="id">solve_forall2</span> <span class="id">H10</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;ite&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>. <span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> [[? ?]|[?|?]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall2</span> <span class="id">H11</span> <span class="id">H</span>. <span class="id">solve_forall2</span> <span class="id">H12</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LCAUSALITY.Is_free_left_list_length">Is_free_left_list_length</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">es</span> <span class="id">x</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annots">annots</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Is_free_left_list_length</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_length">Is_free_left_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.Is_free_left_list_Exists">Is_free_left_list_Exists</a></span> : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">x</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">k</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">Exists</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id">k</span>') <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hfree</span>; <span class="id">inv</span> <span class="id">Hfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id">k</span>. <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">specialize</span> (<span class="id">IHes</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>) <span class="kwd">as</span> [<span class="id">k</span>' ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">k</span>'. <span class="tactic">right</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Causality check </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="LCAUSALITY.collect_free_left">collect_free_left</a></span> (<span class="id">e</span> : <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp">exp</a></span>) {<span class="kwd">struct</span> <span class="id">e</span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.CommonPS.html#PS.t">PS.t</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">collect_free_left_list</span> (<span class="id">es</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp">exp</a></span>) := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map">flat_map</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left">collect_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Econst">Econst</a></span> <span class="id">_</span> =&gt; [<span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Evar">Evar</a></span> <span class="id">id</span> (<span class="id">_</span>, (<span class="id">ck</span>, <span class="id">_</span>)) =&gt; [<span class="id"><a href="Velus.Common.CommonPS.html#PS.singleton">PS.singleton</a></span> <span class="id">id</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eunop">Eunop</a></span> <span class="id">_</span> <span class="id">e</span> (<span class="id">_</span>, (<span class="id">ck</span>, <span class="id">_</span>)) =&gt; (<span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left">collect_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Ebinop">Ebinop</a></span> <span class="id">_</span> <span class="id">e1</span> <span class="id">e2</span> (<span class="id">_</span>, (<span class="id">ck</span>, <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps1</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left">collect_free_left</a></span> <span class="id">e1</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps2</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left">collect_free_left</a></span> <span class="id">e2</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">ps1</span>, <span class="id">ps2</span>) =&gt; <span class="id"><a href="Velus.Common.CommonPS.html#PS.union">PS.union</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps1">ps1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps2">ps2</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine">List.combine</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps1">ps1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps2">ps2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Efby">Efby</a></span> <span class="id">e0s</span> <span class="id">_</span> <span class="id">_</span> =&gt; (<span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">e0s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Earrow">Earrow</a></span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps1</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">e0s</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps2</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">es</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">ps1</span>, <span class="id">ps2</span>) =&gt; <span class="id"><a href="Velus.Common.CommonPS.html#PS.union">PS.union</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps1">ps1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps2">ps2</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine">List.combine</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps1">ps1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps2">ps2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Ewhen">Ewhen</a></span> <span class="id">es</span> <span class="id">id</span> <span class="id">_</span> (<span class="id">_</span>, (<span class="id">ck</span>, <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">ps</span> =&gt; <span class="id"><a href="Velus.Common.CommonPS.html#PS.add">PS.add</a></span> <span class="id">id</span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps">ps</a></span>) (<span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">es</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Emerge">Emerge</a></span> <span class="id">id</span> <span class="id">ets</span> <span class="id">efs</span> (<span class="id">_</span>, (<span class="id">ck</span>, <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps1</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">ets</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps2</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">efs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">ps1</span>, <span class="id">ps2</span>) =&gt; <span class="id"><a href="Velus.Common.CommonPS.html#PS.add">PS.add</a></span> <span class="id">id</span> (<span class="id"><a href="Velus.Common.CommonPS.html#PS.union">PS.union</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps1">ps1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps2">ps2</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine">List.combine</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps1">ps1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps2">ps2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eite">Eite</a></span> <span class="id">e</span> <span class="id">ets</span> <span class="id">efs</span> (<span class="id">_</span>, (<span class="id">ck</span>, <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps0</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left">collect_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps1</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">ets</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps2</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">efs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">ps1</span>, <span class="id">ps2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonPS.html#PS.union">PS.union</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#hd">List.hd</a></span> <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps0">ps0</a></span>) (<span class="id"><a href="Velus.Common.CommonPS.html#PS.union">PS.union</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps1">ps1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps2">ps2</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine">List.combine</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps1">ps1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ps2">ps2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eapp">Eapp</a></span> <span class="id">_</span> <span class="id">es</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">a</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps</span> := <span class="id"><a href="Velus.Common.CommonPS.html#PSUnion">PSUnion</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">es</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#ps">ps</a></span>) <span class="id">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eapp">Eapp</a></span> <span class="id">_</span> <span class="id">es</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">r</span>) <span class="id">a</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ps</span> := <span class="id"><a href="Velus.Common.CommonPS.html#PSUnion">PSUnion</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left">collect_free_left</a></span> <span class="id">r</span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_left_list">collect_free_left_list</a></span> <span class="id">es</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#ps">ps</a></span>) <span class="id">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> (<span class="id">es</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp">exp</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map">flat_map</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left">collect_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="LCAUSALITY.collect_free_clock">collect_free_clock</a></span> (<span class="id">ck</span> : <span class="id"><a href="Velus.ClockDefs.html#clock">clock</a></span>) : <span class="id"><a href="Velus.Common.CommonPS.html#PS.t">PS.t</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.LCausality.html#ck">ck</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ClockDefs.html#Cbase">Cbase</a></span> =&gt; <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.ClockDefs.html#Con">Con</a></span> <span class="id">ck</span> <span class="id">x</span> <span class="id">_</span> =&gt; (<span class="id"><a href="Velus.Common.CommonPS.html#PS.add">PS.add</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#collect_free_clock">collect_free_clock</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ck">ck</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LCAUSALITY.build_graph">build_graph</a></span> (<span class="id">n</span> : <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.node">node</a></span>) : <span class="id"><a href="Velus.Environment.html#Env.t">Env.t</a></span> <span class="id"><a href="Velus.Common.CommonPS.html#PS.t">PS.t</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">vo</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map">flat_map</a></span> (<span class="kwd">fun</span> '(<span class="id">xs</span>, <span class="id">es</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">frees</span> := <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine">List.combine</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#xs">xs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#frees">frees</a></span>) (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">env</span> := <span class="id"><a href="Velus.Environment.html#Env.from_list">Env.from_list</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#vo">vo</a></span> ++ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> '(<span class="id">x</span>, <span class="id">_</span>) =&gt; (<span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>)) (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>))) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.mapi">Env.mapi</a></span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">deps</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#find">List.find</a></span> (<span class="kwd">fun</span> <span class="id">xtc</span> =&gt; (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#xtc">xtc</a></span> =? <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span>)%<span class="id">positive</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">_</span>, (<span class="id">_</span>, <span class="id">ck</span>)) =&gt; <span class="id"><a href="Velus.Common.CommonPS.html#PS.union">PS.union</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#deps">deps</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_clock">collect_free_clock</a></span> <span class="id">ck</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#deps">deps</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) <span class="id"><a href="Velus.Lustre.LCausality.html#env">env</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LCAUSALITY.check_node_causality">check_node_causality</a></span> (<span class="id">n</span> : <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.node">node</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.AcyGraph.html#build_acyclic_graph">build_acyclic_graph</a></span> (<span class="id"><a href="Velus.Environment.html#Env.map">Env.map</a></span> <span class="id"><a href="Velus.Common.CommonPS.html#PSP.to_list">PSP.to_list</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph">build_graph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>)) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> <span class="id">msg</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> "<span class="id">Node</span> " :: (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#CTX">CTX</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_name">n_name</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>)) :: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> " : " :: <span class="id">msg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LCAUSALITY.check_causality">check_causality</a></span> (<span class="id">G</span> : <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.global">global</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#mmap">mmap</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.check_node_causality">check_node_causality</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">collect_free_left_list_length</span>' : <span class="kwd">forall</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left">collect_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annot">annot</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>)) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annots">annots</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>. <span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.collect_free_left_length">collect_free_left_length</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left">collect_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annot">annot</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Ltac</span> <span class="id">solve_forall</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_Forall">Forall_Forall</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span> ? [? ?]; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="tactic">intros</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;const&nbsp;*)</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> (?&amp;?&amp;?); <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id">IHe</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span> <span class="kwd">in</span> <span class="id">H6</span>, <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_length">combine_length</a></span>, <span class="id">IHe1</span>, <span class="id">IHe2</span>, <span class="id">H6</span>, <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">collect_free_left_list_length</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;arrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_length">combine_length</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">collect_free_left_list_length</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span>, <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.min_id">PeanoNat.Nat.min_id</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">H</span>. <span class="id">solve_forall</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">nck</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">collect_free_left_list_length</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">nck</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_length">combine_length</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">collect_free_left_list_length</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H8</span>, <span class="id">H9</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.min_id">PeanoNat.Nat.min_id</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">H</span>. <span class="id">solve_forall</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;ite&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">nck</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_length">combine_length</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">collect_free_left_list_length</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H10</span>, <span class="id">H11</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.min_id">PeanoNat.Nat.min_id</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">H</span>. <span class="id">solve_forall</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;*)</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;(reset)&nbsp;*)</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annots">annots</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">collect_free_left_list_length</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_length">collect_free_left_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">collect_free_left_list_spec</span>' : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">es</span> <span class="id">x</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt; <span class="id"><a href="Velus.Common.CommonPS.html#PS.In">PS.In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left">collect_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>) <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonPS.html#PS.In">PS.In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">List.nth</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>) &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonPS.html#not_In_empty">not_In_empty</a></span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left">collect_free_left</a></span> <span class="id">a</span>) = <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id">a</span>) <span class="kwd">as</span> <span class="id">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_length">collect_free_left_length</a></span>, <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#dec_lt">Compare_dec.dec_lt</a></span> <span class="id">k</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">left</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nth1">app_nth1</a></span>, <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#not_lt">Compare_dec.not_lt</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">right</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nth2">app_nth2</a></span>, <span class="id">IHes</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>. 1,2:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nth1">app_nth1</a></span>, <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nth2">app_nth2</a></span>, <span class="id">IHes</span>; <span class="tactic">eauto</span>. 1,2:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">psunion_collect_free_list_spec</span>' : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">es</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt; <span class="id"><a href="Velus.Common.CommonPS.html#PS.In">PS.In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left">collect_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>) <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonPS.html#PS.In">PS.In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="Velus.Common.CommonPS.html#PSUnion">PSUnion</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>)) &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">k</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">Exists</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id">k</span>') <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hf</span>; <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSUnion_nil">PSUnion_nil</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#not_In_empty">not_In_empty</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;<span class="id">Hex</span>). <span class="id">inv</span> <span class="id">Hex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSUnion_In_app">PSUnion_In_app</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSUnion_In_In">PSUnion_In_In</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth">In_nth</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hnth</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Hnth</span>, <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">IHes</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">k</span>'&amp;<span class="id">Hex</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSUnion_In_app">PSUnion_In_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;<span class="id">Hex</span>). <span class="id">inv</span> <span class="id">Hex</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">Hk</span>:=<span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_length">Is_free_left_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>; <span class="tactic">eauto</span>; <span class="id">erewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_length">collect_free_left_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonPS.html#In_In_PSUnion">In_In_PSUnion</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">right</span>. <span class="tactic">rewrite</span> <span class="id">IHes</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LCAUSALITY.ps_In_k_lt">ps_In_k_lt</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">l</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonPS.html#PS.In">PS.In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#l">l</a></span> <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">intros</span> * <span class="id">Hin</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonPS.html#not_In_empty">not_In_empty</a></span>. <span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_0_succ">PeanoNat.Nat.lt_0_succ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Lt.html#lt_n_S">Lt.lt_n_S</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LCAUSALITY.collect_free_left_spec">collect_free_left_spec</a></span>: <span class="kwd">forall</span> <span class="id">G</span> <span class="id">x</span> <span class="id">e</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonPS.html#PS.In">PS.In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">List.nth</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left">collect_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>) <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>) &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp_ind2">exp_ind2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">intros</span> * <span class="id">Hwl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_length">Is_free_left_length</a></span> <span class="id">G</span> <span class="id">_</span> <span class="id">x</span> <span class="id">k</span> <span class="id">Hwl</span>) <span class="kwd">as</span> <span class="id">Hlen1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_length">collect_free_left_length</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hwl</span>) <span class="kwd">as</span> <span class="id">Hlen2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">ty</span> [<span class="id">ck</span> <span class="id">name</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span> <span class="kwd">in</span> *; <span class="tactic">idtac</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;const&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonPS.html#not_In_empty">not_In_empty</a></span>. <span class="tactic">repeat</span> (<span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">k</span>. 2:<span class="id">exfalso</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonPS.html#not_In_empty">not_In_empty</a></span>; <span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.singleton_1">PSF.singleton_1</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.singleton_2">PSF.singleton_2</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">Hk</span>:=<span class="id">H</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_length">Is_free_left_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">Hk</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_1_r">PeanoNat.Nat.lt_1_r</a></span> <span class="kwd">in</span> <span class="id">Hk</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_length">collect_free_left_length</a></span> <span class="kwd">in</span> <span class="id">H6</span>, <span class="id">H7</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">singleton_length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">k</span>; [|<span class="tactic">destruct</span> <span class="id">k</span>]. 2,3:<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonPS.html#not_In_empty">not_In_empty</a></span> <span class="id">_</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.union_1">PSF.union_1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [?|?]; <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">left</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">IHe1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">IHe2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [?|?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.union_2">PSF.union_2</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">IHe1</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.union_3">PSF.union_3</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">IHe2</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">collect_free_left_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;arrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.ps_In_k_lt">ps_In_k_lt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">as</span> <span class="id">Hk</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>':=(<span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>)) <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_nth">combine_nth</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:(<span class="tactic">repeat</span> <span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id">H7</span>, <span class="id">H8</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PS.union_spec">PS.union_spec</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id">collect_free_left_list_spec</span>' <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span> <span class="kwd">in</span> <span class="id">H7</span>, <span class="id">H8</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>':=(<span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:(<span class="id">erewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id">Hlen2</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_nth">combine_nth</a></span>. 2:<span class="tactic">setoid_rewrite</span> <span class="id">H7</span>; <span class="tactic">setoid_rewrite</span> <span class="id">H8</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PS.union_spec">PS.union_spec</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">collect_free_left_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.ps_In_k_lt">ps_In_k_lt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">as</span> <span class="id">Hk</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>':=<span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PS.add_spec">PS.add_spec</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [?|?]; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">left</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">collect_free_left_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>':=<span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:(<span class="id">erewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id">Hlen2</span>; <span class="tactic">eapply</span> <span class="id">Hlen1</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [(<span class="id">_</span>&amp;?)|?]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.add_1">PSF.add_1</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.add_2">PSF.add_2</a></span>. <span class="id">erewrite</span> <span class="id">collect_free_left_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.ps_In_k_lt">ps_In_k_lt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">as</span> <span class="id">Hk</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>':=(<span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>)) <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_nth">combine_nth</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:(<span class="tactic">repeat</span> <span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id">H9</span>, <span class="id">H10</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.add_iff">PSF.add_iff</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#PS.union_spec">PS.union_spec</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id">collect_free_left_list_spec</span>' <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [?|?]; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">left</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id">Hlen2</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span> <span class="kwd">in</span> <span class="id">H9</span>, <span class="id">H10</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>':=(<span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:(<span class="id">erewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id">Hlen2</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_nth">combine_nth</a></span>. 2:<span class="tactic">setoid_rewrite</span> <span class="id">H9</span>; <span class="tactic">setoid_rewrite</span> <span class="id">H10</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.add_iff">PSF.add_iff</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#PS.union_spec">PS.union_spec</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">collect_free_left_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [(<span class="id">_</span>&amp;?)|?]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;ite&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.ps_In_k_lt">ps_In_k_lt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">as</span> <span class="id">Hk</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>':=(<span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>)) <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_nth">combine_nth</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:(<span class="tactic">repeat</span> <span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id">H11</span>, <span class="id">H12</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PS.union_spec">PS.union_spec</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id">collect_free_left_list_spec</span>' <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [?|?]; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">left</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id">Hlen2</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">IHe</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left">collect_free_left</a></span> <span class="id">_</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span> <span class="kwd">in</span> <span class="id">H11</span>, <span class="id">H12</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>':=(<span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:(<span class="id">erewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id">Hlen2</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_nth">combine_nth</a></span>. 2:<span class="tactic">setoid_rewrite</span> <span class="id">H11</span>; <span class="tactic">setoid_rewrite</span> <span class="id">H12</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PS.union_spec">PS.union_spec</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">collect_free_left_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [(<span class="id">_</span>&amp;?)|?]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">left</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">IHe</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left">collect_free_left</a></span> <span class="id">_</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">Hk</span>:=<span class="id">H1</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.ps_In_k_lt">ps_In_k_lt</a></span> <span class="kwd">in</span> <span class="id">Hk</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. 2:<span class="tactic">exact</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Op.bool_type">Op.bool_type</a></span>, (<span class="id"><a href="Velus.ClockDefs.html#Cbase">Cbase</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">psunion_collect_free_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H1</span>. <span class="id">erewrite</span> <span class="id">map_nth</span>'; <span class="tactic">eauto</span>. 2:<span class="tactic">exact</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Op.bool_type">Op.bool_type</a></span>, (<span class="id"><a href="Velus.ClockDefs.html#Cbase">Cbase</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">psunion_collect_free_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;(reset)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">Hk</span>:=<span class="id">H1</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.ps_In_k_lt">ps_In_k_lt</a></span> <span class="kwd">in</span> <span class="id">Hk</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. 2:<span class="tactic">exact</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Op.bool_type">Op.bool_type</a></span>, (<span class="id"><a href="Velus.ClockDefs.html#Cbase">Cbase</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSUnion_In_app">PSUnion_In_app</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [?|?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_length">collect_free_left_length</a></span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">singleton_length</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSUnion">PSUnion</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">left</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">psunion_collect_free_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H1</span>. <span class="id">erewrite</span> <span class="id">map_nth</span>'; <span class="tactic">eauto</span>. 2:<span class="tactic">exact</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Op.bool_type">Op.bool_type</a></span>, (<span class="id"><a href="Velus.ClockDefs.html#Cbase">Cbase</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSUnion_In_app">PSUnion_In_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>. <span class="tactic">rewrite</span> <span class="id">psunion_collect_free_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">left</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonPS.html#In_In_PSUnion">In_In_PSUnion</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>. <span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_length">collect_free_left_length</a></span>, <span class="id">H8</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LCAUSALITY.collect_free_left_list_spec">collect_free_left_list_spec</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">es</span> <span class="id">x</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonPS.html#PS.In">PS.In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">List.nth</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>) &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">collect_free_left_list_spec</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_spec">collect_free_left_spec</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Is_free_in_clock">Is_free_in_clock</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.collect_free_clock_spec">collect_free_clock_spec</a></span> : <span class="kwd">forall</span> <span class="id">ck</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonPS.html#PS.In">PS.In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_clock">collect_free_clock</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ck">ck</a></span>) &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Clocks.html#Is_free_in_clock">Is_free_in_clock</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ck">ck</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ck</span>; <span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">simpl</span>; (<span class="tactic">split</span>; [<span class="tactic">intros</span> <span class="id">H</span>|<span class="tactic">intros</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#not_In_empty">not_In_empty</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.add_iff">PSF.add_iff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [?|?]; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">right</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">IHck</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.add_1">PSF.add_1</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.add_2">PSF.add_2</a></span>. <span class="tactic">rewrite</span> <span class="id">IHck</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LCAUSALITY.wl_node_vars_defined">wl_node_vars_defined</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_node">wl_node</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map">flat_map</a></span> (<span class="kwd">fun</span> '(<span class="id">xs</span>, <span class="id">es</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine">combine</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#xs">xs</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>)) (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>)) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.vars_defined">vars_defined</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hwl</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [<span class="id">xs</span> <span class="id">es</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id">IHHwl</span>. <span class="tactic">f_equal</span>; <span class="tactic">auto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">combine_map_fst</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.build_graph_dom">build_graph_dom</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_node">wl_node</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.dom">Env.dom</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph">build_graph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>) (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.idents">idents</a></span>, <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph">build_graph</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Environment.html#Env.dom_intro">Env.dom_intro</a></span>. <span class="tactic">intros</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.mapi_in_iff">Env.Props.P.F.mapi_in_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.In_from_list">Env.In_from_list</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_app_comm">Permutation_app_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">g</span>:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>). 2:<span class="tactic">intros</span> (?&amp;?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.wl_node_vars_defined">wl_node_vars_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_defd">n_defd</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LCAUSALITY.build_graph_Perm">build_graph_Perm</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_node">wl_node</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Environment.html#Env.elements">Env.elements</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph">build_graph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>))) (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph_dom">build_graph_dom</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hwl</span>) <span class="kwd">as</span> <span class="id">Hdom1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Environment.html#Env.dom_elements">Env.dom_elements</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph">build_graph</a></span> <span class="id">n</span>)) <span class="kwd">as</span> <span class="id">Hdom2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Environment.html#Env.dom_Perm">Env.dom_Perm</a></span> <span class="kwd">in</span> <span class="id">Hdom1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Environment.html#Env.NoDupMembers_elements">Env.NoDupMembers_elements</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.node_NoDup">node_NoDup</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.build_graph_find">build_graph_find</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">n</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_node">wl_node</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.depends_on_ck">depends_on_ck</a></span> (<span class="id"><a href="Velus.Common.Common.html#idck">idck</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>)) (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">ys</span>, (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph">build_graph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ys">ys</a></span> /\ <span class="id"><a href="Velus.Common.CommonPS.html#PS.In">PS.In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ys">ys</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hdep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph_dom">build_graph_dom</a></span> <span class="id">G</span> <span class="id">n</span> <span class="id">Hwl</span>) <span class="kwd">as</span> <span class="id">Hdom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Environment.html#Env.dom_use">Env.dom_use</a></span> <span class="kwd">with</span> (<span class="id">x0</span>:=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">Hdom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.In_find">Env.In_find</a></span> <span class="kwd">in</span> <span class="id">Hdom</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">Hdom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hdep</span> <span class="kwd">as</span> [<span class="id">Hdep</span>|(<span class="id">ck</span>&amp;<span class="id">Hin</span>&amp;<span class="id">Hfree</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists_exists">Exists_exists</a></span> <span class="kwd">in</span> <span class="id">Hdep</span> <span class="kwd">as</span> ((<span class="id">xs</span>&amp;<span class="id">es</span>)&amp;<span class="id">Hin</span>&amp;<span class="id">k</span>&amp;<span class="id">Hnth</span>&amp;<span class="id">Hfree</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id">n</span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_vars">n_vars</a></span> <span class="id">n</span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_out">n_out</a></span> <span class="id">n</span>))) <span class="kwd">as</span> <span class="id">Hin</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>; <span class="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_defd">n_defd</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.vars_defined">vars_defined</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#flat_map_concat_map">flat_map_concat_map</a></span>. <span class="tactic">eapply</span> <span class="id">in_concat</span>'; <span class="tactic">eauto</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span>. <span class="tactic">exists</span> (<span class="id">xs</span>, <span class="id">es</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hdom</span> <span class="kwd">in</span> <span class="id">Hin</span>' <span class="kwd">as</span> (?&amp;<span class="id">Hfind</span>). <span class="tactic">clear</span> <span class="id">Hdom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph">build_graph</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FMapPositive.html#PositiveMap.gmapi">FMapPositive.PositiveMap.gmapi</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#option_map_inv_Some">option_map_inv_Some</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hfind</span>&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Environment.html#Env.find_In_from_list">Env.find_In_from_list</a></span> <span class="kwd">with</span> (<span class="id">v</span>:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">List.nth</a></span> <span class="id">k</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> <span class="id">es</span>) <span class="id"><a href="Velus.Common.CommonPS.html#PS.empty">PS.empty</a></span>) <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hwl</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfind</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#find">find</a></span> <span class="kwd">as</span> [(?&amp;?&amp;?)|]. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.union_2">PSF.union_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_spec">collect_free_left_list_spec</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>; <span class="tactic">left</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_flat_map">in_flat_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">xs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list">collect_free_left_list</a></span> <span class="id">es</span>)) <span class="kwd">as</span> <span class="id">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hwl</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_left_list_length">collect_free_left_list_length</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">k</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">xs</span>) <span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_Some">nth_error_Some</a></span>, <span class="id"><a href="Velus.Common.Common.html#not_None_is_Some">not_None_is_Some</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="Velus.Common.CommonList.html#nth_error_nth">nth_error_nth</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>) <span class="kwd">in</span> <span class="id">Hnth</span> <span class="kwd">as</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_nth">combine_nth</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_length">combine_length</a></span>, &lt;- <span class="id">Hlen</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.min_id">PeanoNat.Nat.min_id</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.wl_node_vars_defined">wl_node_vars_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>. <span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">g</span>:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>). 2:<span class="tactic">intros</span> (?&amp;?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_app_comm">Permutation_app_comm</a></span>, <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_defd">n_defd</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.node_NoDup">node_NoDup</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#In_idck_exists">In_idck_exists</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (<span class="id">ty</span>&amp;<span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id">n</span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_vars">n_vars</a></span> <span class="id">n</span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_out">n_out</a></span> <span class="id">n</span>))) <span class="kwd">as</span> <span class="id">Hin</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span>. <span class="tactic">exists</span> (<span class="id">x</span>, (<span class="id">ty</span>, <span class="id">ck</span>)); <span class="tactic">split</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hdom</span> <span class="kwd">in</span> <span class="id">Hin</span>' <span class="kwd">as</span> (?&amp;<span class="id">Hfind</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph">build_graph</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FMapPositive.html#PositiveMap.gmapi">FMapPositive.PositiveMap.gmapi</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#option_map_inv_Some">option_map_inv_Some</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> (?&amp;<span class="id">Hfind</span>&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">find_some</span>' <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.node_NoDup">node_NoDup</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSF.union_3">PSF.union_3</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.collect_free_clock_spec">collect_free_clock_spec</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">We prove that the <span class="bracket"><span class="id">check_node_causality</span></span> function only succeeds if
      the node is indeed causal.
      This is a simple consequence of <span class="bracket"><span class="id">build_graph_find</span></span> and <span class="bracket"><span class="id">build_acyclic_graph_spec</span></span>.
   </div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.check_node_causality_correct">check_node_causality_correct</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_node">wl_node</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.check_node_causality">check_node_causality</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.node_causal">node_causal</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hcheck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.check_node_causality">check_node_causality</a></span> <span class="kwd">in</span> <span class="id">Hcheck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.AcyGraph.html#build_acyclic_graph">build_acyclic_graph</a></span> <span class="id">_</span>) <span class="id">eqn</span>:<span class="id">Build</span>; <span class="id">inv</span> <span class="id">Hcheck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.AcyGraph.html#build_acyclic_graph_spec">build_acyclic_graph_spec</a></span> <span class="kwd">in</span> <span class="id">Build</span> <span class="kwd">as</span> (<span class="id">a</span>&amp;(<span class="id">Hv</span>&amp;<span class="id">Ha</span>)&amp;<span class="id">Graph</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">t</span>. <span class="tactic">exists</span> <span class="id">a</span>. <span class="tactic">exists</span> <span class="id">Graph</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">x</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph_dom">build_graph_dom</a></span> <span class="kwd">in</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_in_iff">Env.Props.P.F.map_in_iff</a></span>, (<span class="id">Hwl</span> <span class="id">x</span>), &lt;- <span class="id"><a href="Velus.Common.CommonPS.html#ps_from_list_ps_of_list">ps_from_list_ps_of_list</a></span>, <span class="id"><a href="Velus.Common.CommonPS.html#ps_from_list_In">ps_from_list_In</a></span>, <span class="id"><a href="Velus.Common.Common.html#map_fst_idck">map_fst_idck</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hdep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.build_graph_find">build_graph_find</a></span> <span class="kwd">in</span> <span class="id">Hwl</span> <span class="kwd">as</span> (<span class="id">ys</span> &amp; <span class="id">Find</span> &amp; <span class="id">In</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> (<span class="id"><a href="Velus.Common.CommonPS.html#PSP.to_list">PSP.to_list</a></span> <span class="id">ys</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span>, <span class="id">Find</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#In_PS_elements">In_PS_elements</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LCAUSALITY.check_causality_correct">check_causality_correct</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">tts</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_global">wl_global</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.check_causality">check_causality</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#tts">tts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.node_causal">node_causal</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#G">G</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">G</span>; <span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hcheck</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.check_causality">check_causality</a></span> <span class="kwd">in</span> <span class="id">Hcheck</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hcheck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#bind_inversion">bind_inversion</a></span> <span class="kwd">in</span> <span class="id">Hcheck</span> <span class="kwd">as</span> [? [? <span class="id">Hcheck</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">x</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.check_node_causality_correct">check_node_causality_correct</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#bind_inversion">bind_inversion</a></span> <span class="kwd">in</span> <span class="id">Hcheck</span> <span class="kwd">as</span> [? [? <span class="id">Hcheck</span>]]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Induction tactic over a causal set of equations </h2>
<br/>
<div class="doc">We can "follow" the <span class="bracket"><span class="id">TopOrder</span></span> extracted from an <span class="bracket"><span class="id">AcyGraph</span></span>.
      This gives us an order over the variables of the node </div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.TopoOrder_inv">TopoOrder_inv</a></span> {<span class="id">v</span> <span class="id">a</span>} : <span class="kwd">forall</span> (<span class="id">g</span> : <span class="id"><a href="Velus.AcyGraph.html#AcyGraph">AcyGraph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#v">v</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>) <span class="id">eqs</span> <span class="id">x</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.depends_on">depends_on</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#eqs">eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> -&gt; <span class="id"><a href="Velus.AcyGraph.html#is_arc">is_arc</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#g">g</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.AcyGraph.html#TopoOrder">TopoOrder</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#g">g</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span>::<span class="id"><a href="Velus.Lustre.LCausality.html#xs">xs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.vars_defined">vars_defined</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#eqs">eqs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists">Exists</a></span> (<span class="kwd">fun</span> '(<span class="id">xs</span>', <span class="id">es</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">xs</span>' /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id">xs</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> = <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#y">y</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#xs">xs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#eqs">eqs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdep</span> <span class="id">Hpref</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hpref</span> <span class="kwd">as</span> [|?? (?&amp;?&amp;?) ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.vars_defined">vars_defined</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_flat_map">in_flat_map</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> [[<span class="id">xs</span>' <span class="id">es</span>] [<span class="id">Hin</span> <span class="id">Hin</span>']]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists_exists">Exists_exists</a></span>. <span class="tactic">exists</span> (<span class="id">xs</span>', <span class="id">es</span>); <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth">In_nth</a></span> <span class="kwd">with</span> (<span class="id">d</span>:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>) <span class="kwd">in</span> <span class="id">Hin</span>' <span class="kwd">as</span> [<span class="id">k</span> [<span class="id">Hlen</span> <span class="id">Hnth</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">k</span>. <span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">nth_error_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>) <span class="kwd">in</span> <span class="id">Hlen</span>; <span class="tactic">subst</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">y</span>' <span class="id">Hfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">left</span>. <span class="tactic">apply</span> <span class="id">Hdep</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.depends_on">depends_on</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists_exists">Exists_exists</a></span>. <span class="tactic">exists</span> (<span class="id">xs</span>', <span class="id">es</span>); <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LCAUSALITY.causal_ind">causal_ind</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LCAUSALITY.causal_ind.G">G</a></span> : <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.global">global</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LCAUSALITY.causal_ind.n">n</a></span> : <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.node">node</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LCAUSALITY.causal_ind.P_var">P_var</a></span> : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LCAUSALITY.causal_ind.P_exp">P_exp</a></span> : <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LCAUSALITY.P_exps">P_exps</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.P_exps_now">P_exps_now</a></span> <span class="id">e</span> <span class="id">es</span> <span class="id">k</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>::<span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LCAUSALITY.P_exps_later">P_exps_later</a></span> <span class="id">e</span> <span class="id">es</span> <span class="id">k</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &gt;= <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>-<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span>::<span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.Pexp_Pexps">Pexp_Pexps</a></span> : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list">Is_free_left_list</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annots">annots</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hf</span> <span class="id">Hfree</span> <span class="id">Hk</span>; <span class="id">inv</span> <span class="id">Hf</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Nat.html#ltb">Nat.ltb</a></span> <span class="id">k</span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id">a</span>)) <span class="id">eqn</span>:<span class="id">Hltb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.ltb_lt">PeanoNat.Nat.ltb_lt</a></span> <span class="kwd">in</span> <span class="id">Hltb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.ltb_ge">PeanoNat.Nat.ltb_ge</a></span> <span class="kwd">in</span> <span class="id">Hltb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps_later">P_exps_later</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHes</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>, <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_add">PeanoNat.Nat.sub_add</a></span> <span class="kwd">in</span> <span class="id">Hltb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_comm">PeanoNat.Nat.add_comm</a></span> <span class="kwd">in</span> <span class="id">Hltb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Hltb</span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_lt_mono_l">PeanoNat.Nat.add_lt_mono_l</a></span> <span class="kwd">in</span> <span class="id">Hk</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EconstCase">EconstCase</a></span> : <span class="kwd">forall</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Econst">Econst</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#c">c</a></span>) 0.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EvarCase">EvarCase</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Evar">Evar</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) 0.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EunopCase">EunopCase</a></span> : <span class="kwd">forall</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e1">e1</a></span> 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eunop">Eunop</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#op">op</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e1">e1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) 0.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EbinopCase">EbinopCase</a></span> : <span class="kwd">forall</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ann</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e1">e1</a></span> 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e2">e2</a></span> 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Ebinop">Ebinop</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#op">op</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e1">e1</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e2">e2</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) 0.<br/>
<br/>
<div class="doc">We're reasoning on causality, so we only get the hypothesis on the lhs </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EfbyCase">EfbyCase</a></span> : <span class="kwd">forall</span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">ann</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e0s">e0s</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Efby">Efby</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e0s">e0s</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EarrowCase">EarrowCase</a></span> : <span class="kwd">forall</span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">ann</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e0s">e0s</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Earrow">Earrow</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e0s">e0s</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EwhenCase">EwhenCase</a></span> : <span class="kwd">forall</span> <span class="id">es</span> <span class="id">x</span> <span class="id">b</span> <span class="id">ann</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Ewhen">Ewhen</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#b">b</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EmergeCase">EmergeCase</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ets</span> <span class="id">efs</span> <span class="id">ann</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ets">ets</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#efs">efs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Emerge">Emerge</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ets">ets</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#efs">efs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EiteCase">EiteCase</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">ets</span> <span class="id">efs</span> <span class="id">ann</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ets">ets</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#efs">efs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eite">Eite</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ets">ets</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#efs">efs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EappCase">EappCase</a></span> : <span class="kwd">forall</span> <span class="id">f</span> <span class="id">es</span> <span class="id">ann</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annots">annots</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) -&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eapp">Eapp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#f">f</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EappResetCase">EappResetCase</a></span> : <span class="kwd">forall</span> <span class="id">f</span> <span class="id">es</span> <span class="id">er</span> <span class="id">ann</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.annots">annots</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) -&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#er">er</a></span> 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.Eapp">Eapp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#f">f</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#er">er</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#ann">ann</a></span>) <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="LCAUSALITY.exp_causal_ind">exp_causal_ind</a></span> <span class="id">e</span> {<span class="kwd">struct</span> <span class="id">e</span>} : <span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">solve_forall</span> <span class="id">es</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="id">es</span>, <span class="id">Hind</span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt; <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hind</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hfree</span> <span class="id">Hnum</span>; <span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">o</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;const&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_1_r">PeanoNat.Nat.lt_1_r</a></span> <span class="kwd">in</span> <span class="id">Hnum</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EconstCase">EconstCase</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_1_r">PeanoNat.Nat.lt_1_r</a></span> <span class="kwd">in</span> <span class="id">Hnum</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EvarCase">EvarCase</a></span>, <span class="id">Hfree</span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_1_r">PeanoNat.Nat.lt_1_r</a></span> <span class="kwd">in</span> <span class="id">Hnum</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EunopCase">EunopCase</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">exp_causal_ind</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_1_r">PeanoNat.Nat.lt_1_r</a></span> <span class="kwd">in</span> <span class="id">Hnum</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EbinopCase">EbinopCase</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id">exp_causal_ind</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H6</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EfbyCase">EfbyCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Pexp_Pexps">Pexp_Pexps</a></span>; <span class="tactic">eauto</span>. 2:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;arrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EarrowCase">EarrowCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Pexp_Pexps">Pexp_Pexps</a></span>; <span class="tactic">eauto</span>. 2,4:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">l</span>. <span class="id">solve_forall</span> <span class="id">l0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EwhenCase">EwhenCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Pexp_Pexps">Pexp_Pexps</a></span>; <span class="tactic">eauto</span>. 2:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EmergeCase">EmergeCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Pexp_Pexps">Pexp_Pexps</a></span>; <span class="tactic">eauto</span>. 2,4:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">l</span>. <span class="id">solve_forall</span> <span class="id">l0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;ite&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EiteCase">EiteCase</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">exp_causal_ind</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Pexp_Pexps">Pexp_Pexps</a></span>; <span class="tactic">eauto</span>. 2,4:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_forall</span> <span class="id">l</span>. <span class="id">solve_forall</span> <span class="id">l0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;(reset)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EappResetCase">EappResetCase</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">k</span>' <span class="id">Hk</span>'. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Pexp_Pexps">Pexp_Pexps</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">solve_forall</span> <span class="id">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> ? <span class="id">Hfree</span>'. <span class="tactic">eapply</span> <span class="id">Hfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list_Exists">Is_free_left_list_Exists</a></span> <span class="kwd">in</span> <span class="id">Hfree</span>' <span class="kwd">as</span> [? ?]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">exp_causal_ind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EappCase">EappCase</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>' <span class="id">Hk</span>'. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Pexp_Pexps">Pexp_Pexps</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">solve_forall</span> <span class="id">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> ? <span class="id">Hfree</span>'. <span class="tactic">eapply</span> <span class="id">Hfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left_list_Exists">Is_free_left_list_Exists</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.EqVars">EqVars</a></span>: <span class="kwd">forall</span> <span class="id">xs</span> <span class="id">es</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#xs">xs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#xs">xs</a></span>, <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span>) (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.P_exps">P_exps</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#xs">xs</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LCAUSALITY.causal_ind.Inputs">Inputs</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span>)).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LCAUSALITY.causal_ind">causal_ind</a></span> {<span class="id">v</span> <span class="id">a</span>} : <span class="kwd">forall</span> (<span class="id">g</span> : <span class="id"><a href="Velus.AcyGraph.html#AcyGraph">AcyGraph</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#v">v</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#a">a</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_equation">wl_equation</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.G">G</a></span>) (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.graph_of_node">graph_of_node</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#g">g</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> (<span class="id"><a href="Velus.Common.CommonPS.html#PS.elements">PS.elements</a></span> (<span class="id"><a href="Velus.AcyGraph.html#vertices">vertices</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#g">g</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span> [<span class="id">Hv</span> <span class="id">Ha</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.AcyGraph.html#has_TopoOrder">has_TopoOrder</a></span> <span class="id">g</span>) <span class="kwd">as</span> (<span class="id">xs</span>'&amp;<span class="id">Heq</span>&amp;<span class="id">Hpre</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heq</span>, &lt;- <span class="id"><a href="Velus.Common.CommonPS.html#PS_For_all_Forall">PS_For_all_Forall</a></span>, &lt;- <span class="id"><a href="Velus.Common.CommonPS.html#ps_from_list_ps_of_list">ps_from_list_ps_of_list</a></span>, <span class="id">PS_For_all_Forall</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span>' (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span>) ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.vars_defined">vars_defined</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span>))) <span class="kwd">as</span> <span class="id">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Hv</span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Common.CommonPS.html#ps_from_list_ps_of_list">ps_from_list_ps_of_list</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">Hin</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Common.CommonPS.html#ps_from_list_In">ps_from_list_In</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Heq</span>, <span class="id"><a href="Velus.Common.Common.html#map_fst_idck">map_fst_idck</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_defd">n_defd</a></span>. <span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">incl_cons</span>' <span class="kwd">in</span> <span class="id">Hincl</span> <span class="kwd">as</span> [<span class="id">HIn</span> <span class="id">Hincl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> <span class="id">xs</span>') <span class="kwd">as</span> <span class="id">Hxs</span> <span class="tactic">by</span> (<span class="id">inv</span> <span class="id">Hpre</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_or">in_app_or</a></span> <span class="kwd">in</span> <span class="id">HIn</span> <span class="kwd">as</span> [<span class="id">HIn</span>|<span class="id">HIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;a&nbsp;is&nbsp;in&nbsp;the&nbsp;inputs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; [|<span class="tactic">eauto</span>]. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.Inputs">Inputs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;a&nbsp;is&nbsp;in&nbsp;the&nbsp;lhs&nbsp;of&nbsp;an&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.TopoOrder_inv">TopoOrder_inv</a></span> <span class="kwd">in</span> <span class="id">Hpre</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Exists_exists">Exists_exists</a></span> <span class="kwd">in</span> <span class="id">Hpre</span> <span class="kwd">as</span> [(?&amp;?) (?&amp;<span class="id">k</span>&amp;<span class="id">Hk</span>&amp;<span class="id">Hnth</span>&amp;<span class="id">Hfree</span>)]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.EqVars">EqVars</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hwl</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Pexp_Pexps">Pexp_Pexps</a></span>; <span class="tactic">eauto</span>. 3:<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.exp_causal_ind">exp_causal_ind</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hxs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Hdep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Ha</span>. <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LCAUSALITY.node_causal_ind">node_causal_ind</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_node">wl_node</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.node_causal">node_causal</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_var">P_var</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span> (?&amp;?&amp;<span class="id">g</span>&amp;<span class="id">Hcaus</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hvars</span>:=<span class="id">Hcaus</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind">causal_ind</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcaus</span> <span class="kwd">as</span> (<span class="id">Heq</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Common.CommonPS.html#PS_For_all_Forall">PS_For_all_Forall</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">PS_For_all_Forall</span>', <span class="id"><a href="Velus.Common.CommonPS.html#ps_from_list_ps_of_list">ps_from_list_ps_of_list</a></span>, &lt;- <span class="id"><a href="Velus.Common.Common.html#map_fst_idck">map_fst_idck</a></span>, &lt;- <span class="id">Heq</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Bonus : now that the induction is done, the property is true for
        any exp or equation </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">exp_causal_ind</span>' : <span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_node">wl_node</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.node_causal">node_causal</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span> -&gt;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.G">G</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.Is_free_left">Is_free_left</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#x">x</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span> ++ <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.n">n</a></span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span> &lt; <span class="id"><a href="Velus.Lustre.LCausality.html#Syn.numstreams">numstreams</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind.P_exp">P_exp</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#k">k</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hcaus</span> <span class="id">Hwl</span>' ? <span class="id">Hfree</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.exp_causal_ind">exp_causal_ind</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.node_causal_ind">node_causal_ind</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hcaus</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY.causal_ind">causal_ind</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY">LCAUSALITY</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="LCausalityFun">LCausalityFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span>  : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span>   : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span>  : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;: <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY">LCAUSALITY</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn">Syn</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY">LCAUSALITY</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html#Syn">Syn</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LCausality.html#LCausalityFun">LCausalityFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
