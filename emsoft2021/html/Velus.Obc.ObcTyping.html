
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module ObcTyping</title>
<meta name="description" content="Documentation of Coq module ObcTyping" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module ObcTyping</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.VelusMemory.html">VelusMemory</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Obc.ObcSyntax.html">Obc.ObcSyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Obc.ObcSemantics.html">Obc.ObcSemantics</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id">List.ListNotations</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<h1> Obc typing </h1>
<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="OBCTYPING">OBCTYPING</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Obc.ObcSyntax.html#OBCSYNTAX">OBCSYNTAX</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Sem</span>   : <span class="id"><a href="Velus.Obc.ObcSemantics.html#OBCSEMANTICS">OBCSEMANTICS</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn">Syn</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="OBCTYPING.WellTyped">WellTyped</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCTYPING.WellTyped.p">p</a></span>     : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCTYPING.WellTyped.insts">insts</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCTYPING.WellTyped.mems">mems</a></span>  : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCTYPING.WellTyped.vars">vars</a></span>  : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="OBCTYPING.wt_exp">wt_exp</a></span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.exp">exp</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Var">wt_Var</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Var">Var</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_State">wt_State</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.mems">mems</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.State">State</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Const">wt_Const</a></span>: <span class="kwd">forall</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Const">Const</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Unop">wt_Unop</a></span>: <span class="kwd">forall</span> <span class="id">op</span> <span class="id">e</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type_unop">type_unop</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#op">op</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Unop">Unop</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#op">op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Binop">wt_Binop</a></span>: <span class="kwd">forall</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type_binop">type_binop</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#op">op</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e1">e1</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e2">e2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e1">e1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e2">e2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Binop">Binop</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#op">op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e1">e1</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e2">e2</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Valid">wt_Valid</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Valid">Valid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="OBCTYPING.wt_stmt">wt_stmt</a></span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.stmt">stmt</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Assign">wt_Assign</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Assign">Assign</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_AssignSt">wt_AssignSt</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.mems">mems</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.AssignSt">AssignSt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Ifte">wt_Ifte</a></span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> = <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.bool_type">bool_type</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Ifte">Ifte</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s1">s1</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s2">s2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Comp">wt_Comp</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Comp">Comp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s1">s1</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s2">s2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Call">wt_Call</a></span>: <span class="kwd">forall</span> <span class="id">clsid</span> <span class="id">cls</span> <span class="id">p</span>' <span class="id">o</span> <span class="id">f</span> <span class="id">fm</span> <span class="id">ys</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.insts">insts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ys">ys</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> <span class="id">xt</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped.vars">vars</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#ys">ys</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Call">Call</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ys">ys</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wt_Skip">wt_Skip</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.Skip">Skip</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WellTyped">WellTyped</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OBCTYPING.wt_method">wt_method</a></span> (<span class="id">p</span>     : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">insts</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mems</span>  : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">m</span>     : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.method">method</a></span>) : <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#insts">insts</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mems">mems</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#m">m</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#m">m</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_body">m_body</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OBCTYPING.wt_class">wt_class</a></span> (<span class="id">p</span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span>) (<span class="id">cls</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.class">class</a></span>) : <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">ocls</span>=&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ocls">ocls</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_method">wt_method</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="OBCTYPING.wt_program">wt_program</a></span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wtp_nil">wtp_nil</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_program">wt_program</a></span> []<br/>
&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.wtp_cons">wtp_cons</a></span>: <span class="kwd">forall</span> <span class="id">cls</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_class">wt_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">cls</span>' =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) &lt;&gt; <span class="id">cls</span>'.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_program">wt_program</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>::<span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#wt_program">wt_program</a></span> : <span class="id">obctyping</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id"><a name="OBCTYPING.wt_exp_Proper">wt_exp_Proper</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.exp">exp</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m2</span> <span class="id">m1</span> <span class="id">Hm</span> <span class="id">v2</span> <span class="id">v1</span> <span class="id">Hv</span> <span class="id">e</span>' <span class="id">e</span> <span class="id">He</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">split</span>; <span class="tactic">inversion_clear</span> 1; <span class="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hm</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hv</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id">_</span> &lt;-&gt; <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span> <span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">obctyping</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id"><a name="OBCTYPING.wt_stmt_Proper">wt_stmt_Proper</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.stmt">stmt</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span>' <span class="id">p</span> <span class="id">Hp</span> <span class="id">xs2</span> <span class="id">xs1</span> <span class="id">Hxs</span> <span class="id">ys2</span> <span class="id">ys1</span> <span class="id">Hys</span> <span class="id">zs2</span> <span class="id">zs1</span> <span class="id">Hzs</span> <span class="id">s</span>' <span class="id">s</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hp</span>, <span class="id">Hs</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">Hp</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span>; <span class="tactic">split</span>; <span class="tactic">intro</span> <span class="id">HH</span>; <span class="id">inv</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Assign&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">rewrite</span> &lt;-<span class="id">Hzs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">rewrite</span> <span class="id">Hzs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;AssignSt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hzs</span>; <span class="tactic">rewrite</span> &lt;-<span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hzs</span>; <span class="tactic">rewrite</span> <span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Ifte&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">IHs1</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">IHs2</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hzs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHs1</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHs2</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hzs</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Comp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">IHs1</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">IHs2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHs1</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHs2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>) |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>) <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hzs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>) <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hys</span>, &lt;-<span class="id">Hzs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>) |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>) <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hzs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>) <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hys</span>, <span class="id">Hzs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Skip&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Properties </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OBCTYPING.wt_venv_val">wt_venv_val</a></span> (<span class="id">ve</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.venv">venv</a></span>) (<span class="id">xty</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xty">xty</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xty">xty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OBCTYPING.wt_env">wt_env</a></span> (<span class="id">ve</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.venv">venv</a></span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="OBCTYPING.wt_mem">wt_mem</a></span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.menv">menv</a></span> -&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span> -&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.class">class</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.WTmenv">WTmenv</a></span>: <span class="kwd">forall</span> <span class="id">me</span> <span class="id">p</span> <span class="id">cl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.VelusMemory.html#values">values</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.menv">menv</a></span> -&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span> -&gt; (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.WTminst_empty">WTminst_empty</a></span>: <span class="kwd">forall</span> <span class="id">me</span> <span class="id">p</span> <span class="id">o</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusMemory.html#find_inst">find_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="OBCTYPING.WTminst">WTminst</a></span>: <span class="kwd">forall</span> <span class="id">me</span> <span class="id">p</span> <span class="id">o</span> <span class="id">c</span> <span class="id">mo</span> <span class="id">cls</span> <span class="id">p</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusMemory.html#find_inst">find_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mo">mo</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mo">mo</a></span> <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OBCTYPING.wt_state">wt_state</a></span> (<span class="id">p</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span>) (<span class="id">me</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.menv">menv</a></span>) (<span class="id">ve</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.venv">venv</a></span>) (<span class="id">c</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.class">class</a></span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> /\ <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="OBCTYPING.wt_mem_mult">wt_mem_mult</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCTYPING.wt_mem_mult.P">P</a></span> : <span class="kwd">forall</span> <span class="id">me</span> <span class="id">p</span> <span class="id">cl</span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCTYPING.wt_mem_mult.Pinst">Pinst</a></span> : <span class="kwd">forall</span> <span class="id">me</span> <span class="id">p</span> <span class="id">oc</span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#oc">oc</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Arguments</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#P">P</a></span> {<span class="id">me</span> <span class="id">p</span> <span class="id">cl</span>} <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Arguments</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Pinst">Pinst</a></span> {<span class="id">me</span> <span class="id">p</span> <span class="id">oc</span>} <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Arguments</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WTmenv">WTmenv</a></span> {<span class="id">me</span> <span class="id">p</span> <span class="id">cl</span>} <span class="id">Hwt</span> <span class="id">Hinsts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Arguments</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WTminst_empty">WTminst_empty</a></span> {<span class="id">me</span>} <span class="id">p</span> {<span class="id">o</span>} <span class="id">c</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Arguments</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WTminst">WTminst</a></span> {<span class="id">me</span> <span class="id">p</span> <span class="id">o</span> <span class="id">c</span> <span class="id">mo</span> <span class="id">cls</span> <span class="id">p</span>'} <span class="id">Hinst</span> <span class="id">Hclass</span> <span class="id">Hwt</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="OBCTYPING.wt_mem_mult.WTmenvCase">WTmenvCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">me</span> <span class="id">p</span> <span class="id">cl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.VelusMemory.html#values">values</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ys</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">cl</span> =&gt; <span class="tactic">exists</span> <span class="id">H</span>, @<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.Pinst">Pinst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#H">H</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.P">P</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WTmenv">WTmenv</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ys">ys</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="OBCTYPING.wt_mem_mult.WTminst_emptyCase">WTminst_emptyCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">me</span> <span class="id">p</span> <span class="id">o</span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hfind</span>: <span class="id"><a href="Velus.VelusMemory.html#find_inst">find_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.Pinst">Pinst</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WTminst_empty">WTminst_empty</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Hfind">Hfind</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="OBCTYPING.wt_mem_mult.WTminstCase">WTminstCase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">me</span> <span class="id">p</span> <span class="id">o</span> <span class="id">c</span> <span class="id">mo</span> <span class="id">cls</span> <span class="id">p</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hfind_inst</span>: <span class="id"><a href="Velus.VelusMemory.html#find_inst">find_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mo">mo</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hfind_class</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">p</span>'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hwt</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mo">mo</a></span> <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.P">P</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Hwt">Hwt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.Pinst">Pinst</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WTminst">WTminst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Hfind_inst">Hfind_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Hfind_class">Hfind_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Hwt">Hwt</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="OBCTYPING.wt_mem_ind_mult">wt_mem_ind_mult</a></span> {<span class="id">me</span> <span class="id">p</span> <span class="id">cl</span>} (<span class="id">H</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cl">cl</a></span>) {<span class="kwd">struct</span> <span class="id">H</span>} : <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.P">P</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#H">H</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="OBCTYPING.wt_mem_inst_ind_mult">wt_mem_inst_ind_mult</a></span> {<span class="id">me</span> <span class="id">p</span> <span class="id">oc</span>} (<span class="id">H</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#oc">oc</a></span>) {<span class="kwd">struct</span> <span class="id">H</span>}: <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.Pinst">Pinst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#H">H</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [? ? ? <span class="id">Hwt</span> <span class="id">Hrec</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.WTmenvCase">WTmenvCase</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hrec</span> <span class="kwd">as</span> [| ? ? <span class="id">Hwt</span>' <span class="id">Hrec</span>' ]; <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">Hwt</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">wt_mem_inst_ind_mult</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.WTminst_emptyCase">WTminst_emptyCase</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult.WTminstCase">WTminstCase</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_mult">wt_mem_mult</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_vempty">wt_vempty</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.vempty">vempty</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span> <span class="kwd">as</span> [|<span class="id">v</span> <span class="id">vars</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_cons">Forall_cons</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.gempty">Env.gempty</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mempty">wt_mempty</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">cls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.mempty">mempty</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_vempty">wt_vempty</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">induction</span> (<span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>)) <span class="kwd">as</span> [|(<span class="id">o</span>, <span class="id">c</span>) <span class="id">os</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_cons">Forall_cons</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.WTminst_empty">WTminst_empty</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.VelusMemory.html#find_inst_gempty">find_inst_gempty</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_vempty</span> <span class="id">wt_mempty</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.venv_find_wt_val">venv_find_wt_val</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">ve</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">WTe</span> <span class="id">Hin</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">WTe</span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hfind</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_program_find_class">wt_program_find_class</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">clsid</span> <span class="id">p</span> <span class="id">cls</span> <span class="id">p</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_class">wt_class</a></span> <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> /\ <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">p</span> <span class="kwd">as</span> [|<span class="id">cls</span> <span class="id">p</span>]; [<span class="id">now</span> <span class="tactic">inversion</span> 2|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">cls</span>' <span class="id">p</span>' <span class="id">WTp</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">Heq</span>]; <span class="tactic">clear</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTp</span> <span class="kwd">as</span> [|? ? <span class="id">WTc</span> <span class="id">WTp</span>' <span class="id">Hnodup</span>]; <span class="tactic">rename</span> <span class="id">WTp</span>' <span class="id">into</span> <span class="id">WTp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonPS.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) <span class="id">clsid</span>) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">Hne</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_refl">ident_eqb_refl</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">Heq</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident_eqb_neq">ident_eqb_neq</a></span> <span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) <span class="id">clsid</span>) <span class="id">Hne</span>) <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHp</span> <span class="kwd">with</span> (1:=<span class="id">WTp</span>) (2:=<span class="id">Heq</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_class_find_method">wt_class_find_method</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">cls</span> <span class="id">f</span> <span class="id">fm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_class">wt_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_method">wt_method</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> <span class="id">cls</span> <span class="id">f</span> <span class="id">fm</span> <span class="id">WTc</span> <span class="id">Hfindm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">WTc</span> <span class="kwd">as</span> (<span class="id">Hfo</span> &amp; <span class="id">WTms</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">WTms</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method_In">find_method_In</a></span> <span class="kwd">with</span> (1:=<span class="id">Hfindm</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_exp">pres_sem_exp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mems</span> <span class="id">vars</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.VelusMemory.html#values">values</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#mems">mems</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mems">mems</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="tactic">until</span> <span class="id">v</span>. <span class="tactic">intros</span> <span class="id">WTm</span> <span class="id">WTv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">intros</span> <span class="id">v</span> <span class="id">WTe</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.venv_find_wt_val">venv_find_wt_val</a></span> <span class="kwd">with</span> (1:=<span class="id">WTv</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.VelusMemory.html#find_val">find_val</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.venv_find_wt_val">venv_find_wt_val</a></span> <span class="kwd">with</span> (1:=<span class="id">WTm</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hexp</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val_const">wt_val_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.pres_sem_unop">pres_sem_unop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.pres_sem_binop">pres_sem_binop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">WTe</span>. <span class="id">inv</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.venv_find_wt_val">venv_find_wt_val</a></span> <span class="kwd">with</span> (1:=<span class="id">WTv</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">pres_sem_exp</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">c</span> <span class="id">vars</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (<span class="id">WT_mem</span>&amp;?) ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WT_mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_exp">pres_sem_exp</a></span> <span class="kwd">with</span> (<span class="id">vars</span>:=<span class="id">vars</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pres_sem_exp</span>'.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_expo">pres_sem_expo</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mems</span> <span class="id">vars</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">vo</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.VelusMemory.html#values">values</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#mems">mems</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mems">mems</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">vo</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_exp">pres_sem_exp</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">pres_sem_expo</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">c</span> <span class="id">vars</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">vo</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">vo</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pres_sem_expo</span>'.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_exps">pres_sem_exps</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">c</span> <span class="id">vars</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">es</span> <span class="id">vos</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.exp_eval">exp_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vos">vos</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">vo</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vos">vos</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">Hf</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> ?<span class="id">xs</span>, <span class="id">Hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> ?<span class="id">xs</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">Hf</span>) <span class="kwd">in</span> <span class="id">Hi</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">pres_sem_expo</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pres_sem_exps</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_venv_val_add">wt_venv_val_add</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">env</span> <span class="id">v</span> <span class="id">x</span> <span class="id">y</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span> = <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> /\ <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>) \/ (<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span> &lt;&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> /\ <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span> (<span class="id"><a href="Velus.Environment.html#Env.add">Env.add</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hor</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hor</span> <span class="kwd">as</span> [[<span class="id">Heq</span> <span class="id">Hwt</span>]|[<span class="id">Hne</span> <span class="id">Hwt</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">subst</span>. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.gss">Env.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.gso">Env.gso</a></span> <span class="kwd">with</span> (1:=<span class="id">Hne</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_env_add">wt_env_add</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">env</span> <span class="id">x</span> <span class="id">t</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#t">t</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.Environment.html#Env.add">Env.add</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hndup</span> <span class="id">WTenv</span> <span class="id">Hin</span> <span class="id">WTv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span> <span class="kwd">as</span> [|<span class="id">y</span> <span class="id">vars</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_cons2">Forall_cons2</a></span> <span class="kwd">in</span> <span class="id">WTenv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">WTenv</span> <span class="kwd">as</span> (<span class="id">WTx</span> &amp; <span class="id">WTenv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">y</span> <span class="kwd">as</span> (<span class="id">y</span> &amp; <span class="id">ty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#nodupmembers_cons">nodupmembers_cons</a></span> <span class="kwd">in</span> <span class="id">Hndup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hndup</span> <span class="kwd">as</span> (<span class="id">Hnin</span> &amp; <span class="id">Hndup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:(<span class="id">y</span>, <span class="id">ty</span>) = <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">injection</span> <span class="id">H</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val_add">wt_venv_val_add</a></span>; <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_impl_In">Forall_impl_In</a></span> <span class="kwd">with</span> (2:=<span class="id">WTenv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> (<span class="id">y</span> &amp; <span class="id">ty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">HTy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NotInMembers_NotIn">NotInMembers_NotIn</a></span> <span class="kwd">with</span> (<span class="id">b</span>:=<span class="id">ty</span>) <span class="kwd">in</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val_add">wt_venv_val_add</a></span>; <span class="tactic">right</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>; <span class="tactic">subst</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id">HTy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val_add">wt_venv_val_add</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonPS.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">x</span> <span class="id">y</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="tactic">left</span>; <span class="tactic">split</span>|<span class="tactic">right</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NotInMembers_NotIn">NotInMembers_NotIn</a></span> <span class="kwd">with</span> (<span class="id">b</span>:=<span class="id">t</span>) <span class="kwd">in</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">IHvars</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_env_add</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_inst_add_val">wt_mem_inst_add_val</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">o</span> <span class="id">c</span> <span class="id">x</span> <span class="id">v</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> (<span class="id"><a href="Velus.VelusMemory.html#add_val">add_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_add_val">wt_mem_add_val</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">c</span> <span class="id">x</span> <span class="id">t</span> <span class="id">v</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#t">t</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> (<span class="id"><a href="Velus.VelusMemory.html#add_val">add_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env_add">wt_env_add</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_nodupmems">c_nodupmems</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span> (?&amp;?) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst_add_val">wt_mem_inst_add_val</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_mem_add_val</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_add">wt_state_add</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> <span class="id">vars</span> <span class="id">x</span> <span class="id">v</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#t">t</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> (<span class="id"><a href="Velus.Environment.html#Env.add">Env.add</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (?&amp;?) ???; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_add</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_adds">wt_state_adds</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> <span class="id">vars</span> <span class="id">vs</span> (<span class="id">xts</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> <span class="id">xt</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#xs">xs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xts">xts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xs">xs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">rv</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#rv">rv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xts">xts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds">Env.adds</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xs">xs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>; <span class="tactic">inversion</span> 3; <span class="tactic">inversion</span> 1; <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_cons_cons">Env.adds_cons_cons</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_adds</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_adds_opt">wt_state_adds_opt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> <span class="id">vars</span> <span class="id">vs</span> (<span class="id">xts</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> <span class="id">xt</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#xs">xs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xts">xts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xs">xs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">rv</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#rv">rv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xts">xts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xs">xs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_opt_is_adds">Env.adds_opt_is_adds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_adds_opt</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_add_val">wt_state_add_val</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> <span class="id">vars</span> <span class="id">x</span> <span class="id">v</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#t">t</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> (<span class="id"><a href="Velus.VelusMemory.html#add_val">add_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (?&amp;?) ??; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_add_val</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_inst_add_inst_neq">wt_mem_inst_add_inst_neq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">o</span> <span class="id">c</span> <span class="id">x</span> <span class="id">me_x</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> &lt;&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> (<span class="id"><a href="Velus.VelusMemory.html#add_inst">add_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me_x">me_x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">left</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.VelusMemory.html#find_inst_gso">find_inst_gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.VelusMemory.html#find_inst_gso">find_inst_gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_inst_add_inst_eq">wt_mem_inst_add_inst_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">c</span> <span class="id">x</span> <span class="id">cls</span> <span class="id">p</span>' <span class="id">me_x</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me_x">me_x</a></span> <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> (<span class="id"><a href="Velus.VelusMemory.html#add_inst">add_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me_x">me_x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.VelusMemory.html#find_inst_gss">find_inst_gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.VelusMemory.html#find_inst_gss">find_inst_gss</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_add_inst">wt_mem_add_inst</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">c</span> <span class="id">x</span> <span class="id">c_x</span> <span class="id">cls</span> <span class="id">p</span>' <span class="id">me_x</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c_x">c_x</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c_x">c_x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me_x">me_x</a></span> <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> (<span class="id"><a href="Velus.VelusMemory.html#add_inst">add_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me_x">me_x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> 1 <span class="kwd">as</span> [???? <span class="id">WT</span>]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span> (<span class="id">x</span>', <span class="id">c</span>') <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">WT</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonPS.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">x</span> <span class="id">x</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">c</span>' = <span class="id">c_x</span>) <span class="kwd">as</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_det">NoDupMembers_det</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_nodupobjs">c_nodupobjs</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst_add_inst_eq">wt_mem_inst_add_inst_eq</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst_add_inst_neq">wt_mem_inst_add_inst_neq</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_mem_add_inst</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.wt_state_add_inst">wt_state_add_inst</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">c</span> <span class="id">c</span>' <span class="id">prog</span>' <span class="id">vars</span> <span class="id">x</span> <span class="id">me_x</span> <span class="id">c_x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#c_x">c_x</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c_x">c_x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>', <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me_x">me_x</a></span> <span class="id">prog</span>' <span class="id">c</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> (<span class="id"><a href="Velus.VelusMemory.html#add_inst">add_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me_x">me_x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * (?&amp;?) ??; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_state_add_inst</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_venv_val_remove">wt_venv_val_remove</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">env</span> <span class="id">x</span> <span class="id">y</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span> (<span class="id"><a href="Velus.Environment.html#Env.remove">Env.remove</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#ty">ty</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">WTenv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonPS.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">x</span> <span class="id">y</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.grs">Env.grs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.gro">Env.gro</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_env_remove">wt_env_remove</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">env</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.Environment.html#Env.remove">Env.remove</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#x">x</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span> <span class="kwd">as</span> [|(<span class="id">y</span>, <span class="id">yt</span>) <span class="id">vars</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_cons2">Forall_cons2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 1 <span class="kwd">as</span> (<span class="id">Hy</span> &amp; <span class="id">Hvars</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHvars</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val_remove">wt_venv_val_remove</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_env_remove</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_env_adds_opt">wt_env_adds_opt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">env</span> <span class="id">ys</span> <span class="id">outs</span> <span class="id">rvs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ys">ys</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> (<span class="id">xt</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#y">y</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#ys">ys</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#outs">outs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#rvs">rvs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#outs">outs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ys">ys</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#rvs">rvs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#env">env</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">NodupM</span> <span class="id">Nodup</span> <span class="id">WTenv</span> <span class="id">Hin</span> <span class="id">WTv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ys</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">rvs</span>) <span class="kwd">as</span> <span class="id">Length</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">transitivity</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">outs</span>); [|<span class="tactic">symmetry</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">env</span> <span class="id">rvs</span> <span class="id">outs</span> <span class="id">WTenv</span> <span class="id">WTv</span> <span class="id">Length</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ys</span>, <span class="id">rvs</span>, <span class="id">outs</span>; <span class="tactic">intros</span> * <span class="id">WTenv</span> <span class="id">WTv</span> <span class="id">Length</span> <span class="id">Hin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Length</span>; <span class="id">inv</span> <span class="id">Nodup</span>; <span class="id">inv</span> <span class="id">Hin</span>; <span class="id">inv</span> <span class="id">WTv</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">Env.adds_opt_cons_cons</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHys</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_opt_cons_cons_None">Env.adds_opt_cons_cons_None</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHys</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_env_adds_opt</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_params">wt_params</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vos</span> <span class="id">xs</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">vo</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vos">vos</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> (<span class="id">xt</span>: <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>) =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xs">xs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#vos">vos</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xs">xs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vos</span>, <span class="id">xs</span>, <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Wt</span> <span class="id">Eq</span>; <span class="id">inv</span> <span class="id">Wt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Eq</span> <span class="kwd">as</span> [|? ? ? ? <span class="id">E</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">E</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_params</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_env_params">wt_env_params</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vos</span> <span class="id">callee</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#vos">vos</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#callee">callee</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#callee">callee</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#vos">vos</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.vempty">vempty</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#callee">callee</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_nodupvars">m_nodupvars</a></span> <span class="id">callee</span>) <span class="kwd">as</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_app_l">NoDupMembers_app_l</a></span> <span class="kwd">in</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env_adds_opt">wt_env_adds_opt</a></span> <span class="kwd">with</span> (<span class="id">outs</span>:=<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">clear</span>; <span class="tactic">induction</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>) <span class="kwd">as</span> [|(?, ?)]; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">now</span> <span class="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">x</span>, <span class="id">t</span>) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id">callee</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span> <span class="id">Hin</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> <span class="id">Hin</span>'; <span class="tactic">destruct</span> <span class="id">Hin</span>' <span class="kwd">as</span> [(<span class="id">x</span>', <span class="id">t</span>') [? <span class="id">Hin</span>']]; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_split">in_split</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> (? &amp; ? &amp; <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_split">in_split</a></span> <span class="kwd">in</span> <span class="id">Hin</span>'; <span class="tactic">destruct</span> <span class="id">Hin</span>' <span class="kwd">as</span> (? &amp; ? &amp; <span class="id">Hin</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hin</span>, <span class="id">Hin</span>' <span class="kwd">in</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>, &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_comm_cons">app_comm_cons</a></span> <span class="kwd">in</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_app_r">NoDupMembers_app_r</a></span> <span class="kwd">in</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Nodup</span> <span class="kwd">as</span> [|? ? ? <span class="id">Notin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Notin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#InMembers_app">InMembers_app</a></span>; <span class="tactic">right</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#InMembers_app">InMembers_app</a></span>; <span class="tactic">right</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#inmembers_eq">inmembers_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_venv_val">wt_venv_val</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.find_In_gsso_opt">Env.find_In_gsso_opt</a></span>, <span class="id"><a href="Velus.Environment.html#Env.gempty">Env.gempty</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_env_params</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_env_params_exprs">wt_env_params_exprs</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vos</span> <span class="id">callee</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">vo</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vos">vos</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> (<span class="id">e</span> : <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.exp">exp</a></span>) (<span class="id">xt</span> : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> * <span class="id"><a href="Velus.Obc.ObcTyping.html#Op.type">type</a></span>) =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.typeof">typeof</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#es">es</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#callee">callee</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#callee">callee</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#vos">vos</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.vempty">vempty</a></span>) (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#callee">callee</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Wt</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env_params">wt_env_params</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_params">wt_params</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_env_params_exprs</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">pres_sem_stmt</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">p</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">stmt</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval">stmt_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#stmt">stmt</a></span> <span class="id">e</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cls</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">me</span>', <span class="id">ve</span>') := <span class="id">e</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#stmt">stmt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id">me</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> /\ <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id">ve</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">p</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">me</span>' <span class="id">rvs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span> <span class="id">me</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#rvs">rvs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>' <span class="id">cls</span> <span class="id">fm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">v</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id">me</span>' <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">v</span> <span class="id">yt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#v">v</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#yt">yt</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#rvs">rvs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval_call_ind">stmt_eval_call_ind</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;assign&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hexp</span> <span class="id">cls</span> <span class="id">vars</span> <span class="id">Hndup</span> <span class="id">WTp</span> (<span class="id">WTm</span> &amp; <span class="id">WTe</span>) <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>. <span class="tactic">inversion_clear</span> <span class="id">WTm</span> <span class="kwd">as</span> [? ? ? <span class="id">WTmv</span> <span class="id">WTmi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_exp">pres_sem_exp</a></span> <span class="kwd">with</span> (1:=<span class="id">WTmv</span>) (2:=<span class="id">WTe</span>) <span class="kwd">in</span> <span class="id">Hexp</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env_add">wt_env_add</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;assign&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hexp</span> <span class="id">cls</span> <span class="id">vars</span> <span class="id">Hndup</span> <span class="id">WTp</span> (<span class="id">WTm</span> &amp; <span class="id">WTe</span>) <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>. <span class="tactic">inversion_clear</span> <span class="id">WTm</span> <span class="kwd">as</span> [? ? ? <span class="id">WTmv</span> <span class="id">WTmi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_exp">pres_sem_exp</a></span> <span class="kwd">with</span> (1:=<span class="id">WTmv</span>) (2:=<span class="id">WTe</span>) <span class="kwd">in</span> <span class="id">Hexp</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env_add">wt_env_add</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDup_app_weaken">NoDup_app_weaken</a></span> <span class="kwd">with</span> (1:=<span class="id">cls</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_nodup">c_nodup</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_impl_In">Forall_impl_In</a></span> <span class="kwd">with</span> (2:=<span class="id">WTmi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 2; <span class="id">now</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> * <span class="id">Hevals</span> <span class="id">Hcall</span> <span class="id">IH</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cls</span> <span class="id">vars</span> <span class="id">Hndups</span> <span class="id">WTp</span> (<span class="id">WTm</span> &amp; <span class="id">WTe</span>) <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IH</span>; <span class="tactic">eauto</span>; <span class="tactic">clear</span> <span class="id">IH</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Instance&nbsp;memory&nbsp;is&nbsp;well-typed&nbsp;before&nbsp;execution.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.instance_match">instance_match</a></span>; <span class="tactic">destruct</span> (<span class="id"><a href="Velus.VelusMemory.html#find_inst">find_inst</a></span> <span class="id">o</span> <span class="id">me</span>) <span class="id">eqn</span>:<span class="id">Hmfind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTm</span> <span class="kwd">as</span> [? ? ? <span class="id">WTv</span> <span class="id">WTi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">WTi</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTi</span> <span class="kwd">as</span> [? ? ? ? <span class="id">Hmfind</span>'|? ? ? ? ? ? ? <span class="id">Hmfind</span>' <span class="id">Hcfind</span>' <span class="id">WTm</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hmfind</span>' <span class="kwd">in</span> <span class="id">Hmfind</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">Hcfind</span>:<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">_</span>, <span class="id">p</span>') |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hcfind</span>'; <span class="tactic">rewrite</span> <span class="id">Hcfind</span> <span class="kwd">in</span> <span class="id">Hcfind</span>' <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">Hmfind</span>; <span class="tactic">injection</span> <span class="id">Hcfind</span>'. <span class="tactic">intros</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Arguments&nbsp;are&nbsp;well-typed&nbsp;if&nbsp;given.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">Hevals</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id">_</span> <span class="id">es</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>) |- <span class="id">_</span> =&gt; <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">Hes</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#all_In_Forall2">all_In_Forall2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-(<span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hes</span>), (<span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hevals</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">v</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Forall2_chain_In</span>' <span class="kwd">with</span> (1:=<span class="id">Hevals</span>) (2:=<span class="id">Hes</span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> (<span class="id">e</span> &amp; <span class="id">Hexp</span> &amp; <span class="id">Hty</span> &amp; <span class="id">Hxy</span> &amp; <span class="id">Hyv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">Hty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_combine_r">in_combine_r</a></span> <span class="kwd">in</span> <span class="id">Hxy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> <span class="id">es</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">H</span>) <span class="kwd">in</span> <span class="id">Hxy</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">pres_sem_expo</span>'; <span class="tactic">eauto</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;sequential&nbsp;composition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> <span class="id">menv</span> <span class="id">env</span> <span class="id">s1</span> <span class="id">s2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">Hstmt1</span> <span class="id">IH1</span> <span class="id">Hstmt2</span> <span class="id">IH2</span> <span class="id">cls</span> <span class="id">vars</span> <span class="id">Hndups</span> <span class="id">WTp</span> <span class="id">WTs</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;match&nbsp;goal&nbsp;with&nbsp;WTstmt1:wt_stmt&nbsp;_&nbsp;_&nbsp;_&nbsp;_&nbsp;s1&nbsp;|-&nbsp;_&nbsp;=&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specialize&nbsp;(IH1&nbsp;_&nbsp;_&nbsp;Hndups&nbsp;WTp&nbsp;WTs&nbsp;WTstmt1)&nbsp;end.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IH1</span> <span class="kwd">as</span> (<span class="id">WTm1</span> &amp; <span class="id">WTe1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id">p</span> <span class="id">me1</span> <span class="id">ve1</span> <span class="id">cls</span> <span class="id">vars</span>) <span class="kwd">as</span> <span class="id">WTs1</span>; <span class="tactic">auto</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;if/then/else&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">prog</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">cond</span> <span class="id">v</span> <span class="id">b</span> <span class="id">st</span> <span class="id">sf</span> <span class="id">env</span>' <span class="id">menv</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hexp</span> <span class="id">Hvtb</span> <span class="id">Hstmt</span> <span class="id">IH</span> <span class="id">cls</span> <span class="id">vars</span> <span class="id">Hndups</span> <span class="id">WTp</span> <span class="id">WTs</span> <span class="id">WTstmt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IH</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTstmt</span>. <span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;skip&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;call&nbsp;eval&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hfindc</span> <span class="id">Hfindm</span> <span class="id">Hlvos</span> <span class="id">Hstmt</span> <span class="id">IH</span> <span class="id">Hrvs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">p</span>'' <span class="id">cls</span>'' <span class="id">fm</span>'' <span class="id">WTp</span> <span class="id">Hfindc</span>' <span class="id">Hfindm</span>' <span class="id">WTmem</span> <span class="id">WTv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfindc</span> <span class="kwd">in</span> <span class="id">Hfindc</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">Hfindc</span>'; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">cls</span>'' <span class="id">p</span>''; <span class="tactic">clear</span> <span class="id">Hfindc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfindm</span> <span class="kwd">in</span> <span class="id">Hfindm</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">Hfindm</span>'; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">fm</span>''; <span class="tactic">clear</span> <span class="id">Hfindm</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program_find_class">wt_program_find_class</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">WTp</span> <span class="id">Hfindc</span>) <span class="kwd">as</span> (<span class="id">WTc</span> &amp; <span class="id">WTp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IH</span> <span class="kwd">with</span> (<span class="id">vars</span> := <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.meth_vars">meth_vars</a></span> <span class="id">fm</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_nodupvars">m_nodupvars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;In&nbsp;a&nbsp;well-typed&nbsp;class,&nbsp;method&nbsp;bodies&nbsp;are&nbsp;well-typed.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_class_find_method">wt_class_find_method</a></span> <span class="kwd">with</span> (1:=<span class="id">WTc</span>) (2:=<span class="id">Hfindm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Show&nbsp;that&nbsp;result&nbsp;values&nbsp;are&nbsp;well-typed.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span> <span class="kwd">in</span> <span class="id">Hrvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">Hrvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span> <span class="kwd">with</span> (2:=<span class="id">Hrvs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">v</span> <span class="id">x</span> <span class="id">Hvin</span> <span class="id">Hxin</span> <span class="id">Hxv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">ty</span>). <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.venv_find_wt_val">venv_find_wt_val</a></span> <span class="kwd">with</span> (3:=<span class="id">Hxv</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_stmt">pres_sem_stmt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">cls</span> <span class="id">vars</span> <span class="id">stmt</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">me</span>' <span class="id">ve</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_state">wt_state</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_mems">c_mems</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#stmt">stmt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval">stmt_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#stmt">stmt</a></span> (<span class="id">me</span>', <span class="id">ve</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id">me</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> /\ <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_env">wt_env</a></span> <span class="id">ve</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> ((<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">pres_sem_stmt</span>') <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">me</span>', <span class="id">ve</span>')); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_sem_stmt_call">pres_sem_stmt_call</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">clsid</span> <span class="id">p</span>' <span class="id">cls</span> <span class="id">f</span> <span class="id">fm</span> <span class="id">me</span> <span class="id">vs</span> <span class="id">me</span>' <span class="id">rvs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">p</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span> <span class="id">me</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#rvs">rvs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id">me</span>' <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">yt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#yt">yt</a></span>)) <span class="id"><a href="Velus.Obc.ObcTyping.html#rvs">rvs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fm">fm</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">pres_sem_stmt</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.pres_loop_call_spec">pres_loop_call_spec</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">prog</span> <span class="id">cid</span> <span class="id">c</span> <span class="id">prog</span>' <span class="id">fid</span> <span class="id">f</span> <span class="id">ins</span> <span class="id">outs</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fid">fid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) (<span class="id"><a href="Velus.Obc.ObcTyping.html#ins">ins</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#n">n</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.loop_call">loop_call</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fid">fid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ins">ins</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#outs">outs</a></span> 0 <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">me_n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.loop_call">loop_call</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fid">fid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ins">ins</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#outs">outs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#n">n</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me_n">me_n</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me_n">me_n</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) (<span class="id"><a href="Velus.Obc.ObcTyping.html#outs">outs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#n">n</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * ????? <span class="id">Loop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id">me</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Loop</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_stmt_call">pres_sem_stmt_call</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">IHn</span> <span class="kwd">as</span> (<span class="id">me_n</span> &amp; <span class="id">Loop_n</span> &amp; ? &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Loop_n</span> <span class="kwd">as</span> [???? <span class="id">Loop_Sn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id">me</span>' <span class="id">prog</span>' <span class="id">c</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_stmt_call">pres_sem_stmt_call</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Loop_Sn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_sem_stmt_call">pres_sem_stmt_call</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="OBCTYPING.pres_loop_call">pres_loop_call</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">cid</span> <span class="id">c</span> <span class="id">prog</span>' <span class="id">fid</span> <span class="id">f</span> <span class="id">ins</span> <span class="id">outs</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fid">fid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) (<span class="id"><a href="Velus.Obc.ObcTyping.html#ins">ins</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#n">n</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_in">m_in</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.loop_call">loop_call</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#fid">fid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ins">ins</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#outs">outs</a></span> 0 <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#xt">xt</a></span>)) (<span class="id"><a href="Velus.Obc.ObcTyping.html#outs">outs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#n">n</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.m_out">m_out</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">edestruct</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.pres_loop_call_spec">pres_loop_call_spec</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_program_app">wt_program_app</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cls</span> <span class="id">cls</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> ++ <span class="id">cls</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">cls</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">cls</span>; <span class="tactic">inversion</span> 1; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Remark</span> <span class="id"><a name="OBCTYPING.wt_program_not_class_in">wt_program_not_class_in</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pre</span> <span class="id">post</span> <span class="id">o</span> <span class="id">c</span> <span class="id">cid</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#pre">pre</a></span> ++ <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> :: <span class="id"><a href="Velus.Obc.ObcTyping.html#post">post</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#pre">pre</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">pre</span> <span class="kwd">as</span> [|<span class="id">k</span>]; <span class="tactic">intros</span> <span class="id">post</span> <span class="id">o</span> <span class="id">c</span> <span class="id">c</span>' <span class="id">WT</span> <span class="id">Hin</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">WT</span>. <span class="id">inv</span> <span class="id">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app_weaken">Forall_app_weaken</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall_cons2">Forall_cons2</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">Hneq</span> &amp;?) <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_neq">ident_eqb_neq</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">IHpre</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">Hin</span>); <span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program_app">wt_program_app</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">H</span> <span class="kwd">as</span> [|? ? <span class="id">WTc</span> <span class="id">WTp</span> <span class="id">Hnodup</span>] <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonPS.html#ident_eqb">ident_eqb</a></span> <span class="id">k</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) <span class="id">c</span>') <span class="id">eqn</span>: <span class="id">Heq</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_eq">ident_eqb_eq</a></span> <span class="kwd">in</span> <span class="id">Heq</span>; <span class="tactic">rewrite</span> <span class="id">Heq</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTc</span> <span class="kwd">as</span> [<span class="id">Ho</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">Ho</span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#not_None_is_Some">not_None_is_Some</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> ((<span class="id">cls</span>, <span class="id">p</span>') &amp; <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_name">find_class_name</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hin</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_In">find_class_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Remark</span> <span class="id"><a name="OBCTYPING.wt_program_not_same_name">wt_program_not_same_name</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">post</span> <span class="id">o</span> <span class="id">c</span> <span class="id">cid</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> :: <span class="id"><a href="Velus.Obc.ObcTyping.html#post">post</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#o">o</a></span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span>) <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span> &lt;&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">WTp</span> <span class="id">Hin</span> <span class="id">Hc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hc</span>' <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">clear</span> <span class="id">Hc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTp</span> <span class="kwd">as</span> [|? ? <span class="id">WTc</span> <span class="id">WTp</span>' <span class="id">Hnodup</span>]; <span class="tactic">clear</span> <span class="id">WTp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTc</span> <span class="kwd">as</span> [<span class="id">Ho</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">with</span> (1:=<span class="id">Ho</span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#not_None_is_Some">not_None_is_Some</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> ((<span class="id">cls</span>, <span class="id">p</span>') &amp; <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="tactic">rewrite</span> &lt;-(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_name">find_class_name</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hin</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_In">find_class_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="OBCTYPING.suffix">suffix</a></span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span> -&gt; <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="OBCTYPING.suffix_intro">suffix_intro</a></span>: <span class="kwd">forall</span> <span class="id">p</span> <span class="id">p</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#suffix">suffix</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> (<span class="id">p</span>' ++ <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.suffix_refl">suffix_refl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>; <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_l">app_nil_l</a></span>; <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">suffix_refl</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Relation</span>: <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.program">program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span> <span class="id">proved</span> <span class="tactic">by</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix_refl">suffix_refl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">suffix_rel</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.suffix_cons">suffix_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cls</span> <span class="id">prog</span>' <span class="id">prog</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span> :: <span class="id">prog</span>') <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Common.CommonList.html#app_last_app">app_last_app</a></span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Remark</span> <span class="id"><a name="OBCTYPING.find_class_sub_same">find_class_sub_same</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog1</span> <span class="id">prog2</span> <span class="id">clsid</span> <span class="id">cls</span> <span class="id">prog</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog2">prog2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog1">prog1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog2">prog2</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog1">prog1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog1">prog1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">prog</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hfind</span> <span class="id">WD</span> <span class="id">Sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">p</span>' <span class="kwd">as</span> [|<span class="id">cls</span>' <span class="id">p</span>']; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WD</span> <span class="kwd">as</span> [|? ? <span class="id">WTc</span> <span class="id">WTp</span> <span class="id">Hnodup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">IHp</span>' <span class="id">WTp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonPS.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">cls</span>'.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) <span class="id">clsid</span>) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">Hne</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">He</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_name">find_class_name</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">IHp</span>') <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_In">find_class_In</a></span> <span class="kwd">in</span> <span class="id">IHp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">IHp</span>'; <span class="tactic">eauto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_neq">ident_eqb_neq</a></span> <span class="kwd">in</span> <span class="id">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hne</span>, <span class="id">IHp</span>'.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.find_class_sub">find_class_sub</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">clsid</span> <span class="id">cls</span> <span class="id">prog</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Find</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_app">find_class_app</a></span> <span class="kwd">in</span> <span class="id">Find</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Find</span> <span class="kwd">as</span> (? &amp; ? &amp; ?); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#List_shift_first">List_shift_first</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_stmt_sub">wt_stmt_sub</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">prog</span>' <span class="id">insts</span> <span class="id">mems</span> <span class="id">vars</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#insts">insts</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mems">mems</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#insts">insts</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mems">mems</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vars">vars</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> * <span class="id">Sub</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.find_class_sub_same">find_class_sub_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_inst_sub">wt_mem_inst_sub</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">prog</span>' <span class="id">mem</span> <span class="id">oc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mem">mem</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#oc">oc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_inst">wt_mem_inst</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mem">mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#oc">oc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.find_class_sub_same">find_class_sub_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_mem_inst_sub</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_sub">wt_mem_sub</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">prog</span>' <span class="id">c</span> <span class="id">mem</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mem">mem</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mem">mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1 <span class="kwd">as</span> [? ? ? ? <span class="id">WTmem_inst</span>]; <span class="tactic">intros</span> * <span class="id">Sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_objs">c_objs</a></span> <span class="id">cl</span>) <span class="kwd">as</span> [|(<span class="id">o</span>, <span class="id">c</span>)]; <span class="id">inv</span> <span class="id">WTmem_inst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#suffix">suffix</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.stmt_call_eval_suffix">stmt_call_eval_suffix</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">p</span>' <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">ome</span> <span class="id">rvs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ome">ome</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#rvs">rvs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#clsid">clsid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#f">f</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#vs">vs</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ome">ome</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#rvs">rvs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Ev</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.find_class_sub_same">find_class_sub_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">stmt_call_eval_suffix</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.stmt_eval_suffix">stmt_eval_suffix</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">p</span>' <span class="id">me</span> <span class="id">ve</span> <span class="id">s</span> <span class="id">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval">stmt_eval</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s">s</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#S">S</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.suffix">suffix</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#p">p</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Sem.stmt_eval">stmt_eval</a></span> <span class="id">p</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#me">me</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#s">s</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#S">S</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Ev</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Ev</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">stmt_eval_suffix</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.find_class_chained">find_class_chained</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">cls</span> <span class="id">prog</span>' <span class="id">cls</span>' <span class="id">prog</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c1">c1</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#cls">cls</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c2">c2</a></span> <span class="id">prog</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">cls</span>', <span class="id">prog</span>'') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c2">c2</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">cls</span>', <span class="id">prog</span>'').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">prog</span> <span class="kwd">as</span> [|<span class="id">c</span> <span class="id">prog</span> <span class="id">IH</span>]; [<span class="id">now</span> <span class="tactic">inversion</span> 2|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">WTp</span> <span class="id">Hfc</span> <span class="id">Hfc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hfc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTp</span> <span class="kwd">as</span> [|? ? <span class="id">WTc</span> <span class="id">WTp</span>' <span class="id">Hnodup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_In">find_class_In</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hfc</span>') <span class="kwd">as</span> <span class="id">Hfcin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_name">find_class_name</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hfc</span>') <span class="kwd">as</span> <span class="id">Hc2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonPS.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) <span class="id">c1</span>) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">Hne</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">He</span>, <span class="id"><a href="Velus.Common.Common.html#ident_eqb_refl">ident_eqb_refl</a></span> <span class="kwd">in</span> <span class="id">Hfc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">Hfc</span>; <span class="tactic">intros</span> <span class="id">R1</span> <span class="id">R2</span>; <span class="tactic">rewrite</span> &lt;-<span class="id">R1</span>, &lt;-<span class="id">R2</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">Hfc</span> <span class="id">R1</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) &lt;&gt; <span class="id">cls</span>'.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>)) <span class="kwd">as</span> <span class="id">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intro</span> <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_split">in_split</a></span> <span class="kwd">in</span> <span class="id">Hfcin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hfcin</span> <span class="kwd">as</span> (<span class="id">ws</span> &amp; <span class="id">xs</span> &amp; <span class="id">Hfcin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfcin</span> <span class="kwd">in</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app_weaken">Forall_app_weaken</a></span> <span class="kwd">in</span> <span class="id">Hnodup</span>; <span class="id">inv</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_neq">ident_eqb_neq</a></span> <span class="kwd">in</span> <span class="id">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hc2</span> <span class="kwd">in</span> <span class="id">Hne</span>. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_neq">ident_eqb_neq</a></span> <span class="kwd">in</span> <span class="id">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hne</span> <span class="kwd">in</span> <span class="id">Hfc</span>. <span class="tactic">clear</span> <span class="id">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id">IH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">WTp</span>' <span class="id">Hfc</span> <span class="id">Hfc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;inversion_clear&nbsp;Hnodup&nbsp;as&nbsp;[|?&nbsp;?&nbsp;Hnin&nbsp;Hnodup'].&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_app">find_class_app</a></span> <span class="kwd">in</span> <span class="id">Hfc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hfc</span> <span class="kwd">as</span> (<span class="id">cls</span>'' &amp; <span class="id">Hprog</span> &amp; <span class="id">Hfc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hprog</span> <span class="kwd">in</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">c</span>.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) &lt;&gt; <span class="id">cls</span>'.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>)) <span class="kwd">as</span> <span class="id">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intro</span> <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_split">in_split</a></span> <span class="kwd">in</span> <span class="id">Hfcin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hfcin</span> <span class="kwd">as</span> (<span class="id">ws</span> &amp; <span class="id">xs</span> &amp; <span class="id">Hfcin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfcin</span> <span class="kwd">in</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app_weaken">Forall_app_weaken</a></span> <span class="kwd">in</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_comm_cons">app_comm_cons</a></span> <span class="kwd">in</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app_weaken">Forall_app_weaken</a></span> <span class="kwd">in</span> <span class="id">Hnodup</span>; <span class="id">inv</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> &lt;-<span class="id">Hc2</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_neq">ident_eqb_neq</a></span> <span class="kwd">in</span> <span class="id">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hne</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_chained">wt_mem_chained</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">prog</span>' <span class="id">c</span>  <span class="id">mem</span> <span class="id">ownerid</span> <span class="id">owner</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ownerid">ownerid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#owner">owner</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mem">mem</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mem">mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem_sub">wt_mem_sub</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.find_class_sub">find_class_sub</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_mem_chained</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.wt_mem_skip">wt_mem_skip</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">prog</span>' <span class="id">cid</span> <span class="id">c</span> <span class="id">mem</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#cid">cid</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mem">mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#mem">mem</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">WT</span> <span class="id">Find</span> <span class="id">WTm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTm</span> <span class="kwd">as</span> [???? <span class="id">WTinsts</span>]; <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span> (?&amp;?) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">WTinsts</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class_app">find_class_app</a></span> <span class="kwd">in</span> <span class="id">Find</span> <span class="kwd">as</span> (<span class="id">prog</span>'' &amp; ? &amp;?); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">WT</span> <span class="kwd">as</span> <span class="id">WT</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program_not_class_in">wt_program_not_class_in</a></span> <span class="kwd">in</span> <span class="id">WT</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTinsts</span> <span class="kwd">as</span> [|???????? <span class="id">Find</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">find_class_app</span>', <span class="id">WT</span> <span class="kwd">in</span> <span class="id">Find</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program_app">wt_program_app</a></span> <span class="kwd">in</span> <span class="id">WT</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program_not_same_name">wt_program_not_same_name</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Find</span>; <span class="id">cases_eqn</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_eq">ident_eqb_eq</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_mem_skip</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCTYPING.find_class_rev">find_class_rev</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">n</span> <span class="id">c</span> <span class="id">prog</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING.wt_program">wt_program</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#n">n</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">prog</span>'', <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#prog">prog</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcTyping.html#c">c</a></span>, <span class="id">prog</span>'').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">prog</span> <span class="kwd">as</span> [|<span class="id">c</span>']; <span class="tactic">simpl</span>; <span class="tactic">intros</span> * <span class="id">WTP</span> <span class="id">Find</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTP</span> <span class="kwd">as</span> [|? ? <span class="id">Hwtc</span> <span class="id">Hwtp</span> <span class="id">Hndup</span>].<br/>
&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">find_class_app</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.CommonPS.html#ident_eqb">ident_eqb</a></span> <span class="id">c</span>'.(<span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.c_name">c_name</a></span>) <span class="id">n</span>) <span class="id">eqn</span>:<span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Find</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_eq">ident_eqb_eq</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heq</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn.not_In_find_class">not_In_find_class</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_eq">ident_eqb_eq</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heq</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_rev">map_rev</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;?&amp; <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_neq">ident_eqb_neq</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IHprog</span> <span class="kwd">as</span> (? &amp; <span class="id">Find</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Find</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING">OBCTYPING</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="ObcTypingFun">ObcTypingFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Obc.ObcSyntax.html#OBCSYNTAX">OBCSYNTAX</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Sem</span>   : <span class="id"><a href="Velus.Obc.ObcSemantics.html#OBCSEMANTICS">OBCSEMANTICS</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;: <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING">OBCTYPING</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem">Sem</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OBCTYPING">OBCTYPING</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Obc.ObcTyping.html#Sem">Sem</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcTyping.html#ObcTypingFun">ObcTypingFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
