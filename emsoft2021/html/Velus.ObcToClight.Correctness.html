
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Correctness</title>
<meta name="description" content="Documentation of Coq module Correctness" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Correctness</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html">cfrontend.ClightBigstep</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html">cfrontend.Clight</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html">cfrontend.Ctypes</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html">lib.Integers</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html">lib.Maps</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html">lib.Coqlib</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html">Errors</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html">common.Separation</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html">common.Values</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html">common.Memory</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html">common.Events</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html">common.Globalenvs</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html">common.Smallstep</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html">common.Behaviors</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.VelusMemory.html">VelusMemory</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Ident.html">Ident</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Traces.html">Traces</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CompCertLib.html">Common.CompCertLib</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html">ObcToClight.MoreSeparation</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html">ObcToClight.SepInvariant</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ObcToClight.Generation.html">ObcToClight.Generation</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html">ObcToClight.GenerationProperties</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.ObcToClight.Interface.html">ObcToClight.Interface</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Tactics.html">Program.Tactics</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id">List.ListNotations</span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html">ZArith.BinInt</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.omega.Omega.html">Omega</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Sorting.Permutation</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Obc.Typ</span>.<br/>
<span class="kwd">Import</span> <span class="id">Obc.Syn</span>.<br/>
<span class="kwd">Import</span> <span class="id">Obc.Sem</span>.<br/>
<span class="kwd">Import</span> <span class="id">Obc.Inv</span>.<br/>
<span class="kwd">Import</span> <span class="id">OpAux</span>.<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">sep_scope</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">Z</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#Clight.eval_lvalue">Clight.eval_lvalue</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#Clight.eval_expr">Clight.eval_expr</a></span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span>  <span class="id">Clight.assign_loc_value</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">Z.divide_refl</span>.<br/>
<br/>
<div class="doc">simple occurence predicate                                  *</div>
<div class="doc">(to ensure that a statement occurs in the caller body)      *</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="occurs_in">occurs_in</a></span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.stmt">stmt</a></span> -&gt; <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.stmt">stmt</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="occurs_refl">occurs_refl</a></span>: <span class="kwd">forall</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span><br/>
| <span class="id"><a name="occurs_ite">occurs_ite</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">e</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span> \/ <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Ifte">Ifte</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span>)<br/>
| <span class="id"><a name="occurs_comp">occurs_comp</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span> \/ <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Comp">Comp</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span>).<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">occurs_refl</span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="occurs_in_ite">occurs_in_ite</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Ifte">Ifte</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> /\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Occurs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span>; <span class="tactic">inversion_clear</span> <span class="id">Occurs</span> <span class="kwd">as</span> [|? ? ? ? [<span class="id">Hs1</span>|<span class="id">Hs2</span>]|? ? ? [<span class="id">Hs1</span>|<span class="id">Hs2</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">constructor</span>; ((<span class="tactic">left</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHs1</span>) || (<span class="tactic">right</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHs2</span>) || <span class="tactic">idtac</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">right</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="occurs_in_comp">occurs_in_comp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Comp">Comp</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> /\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Occurs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span>; <span class="tactic">inversion_clear</span> <span class="id">Occurs</span> <span class="kwd">as</span> [|? ? ? ? [<span class="id">Hs1</span>|<span class="id">Hs2</span>]|? ? ? [<span class="id">Hs1</span>|<span class="id">Hs2</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">constructor</span>; ((<span class="tactic">left</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHs1</span>) || (<span class="tactic">right</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHs2</span>) || <span class="tactic">idtac</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">right</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">occurs_in_ite</span> <span class="id">occurs_in_comp</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="occurs_in_wt">occurs_in_wt</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">s</span>' <span class="id">p</span> <span class="id">insts</span> <span class="id">mems</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#insts">insts</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#mems">mems</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vars">vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id">s</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_stmt">wt_stmt</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#insts">insts</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#mems">mems</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vars">vars</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span>; <span class="tactic">intros</span> * <span class="id">Wt</span> <span class="id">Occ</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Wt</span>; <span class="tactic">inversion_clear</span> <span class="id">Occ</span> <span class="kwd">as</span> [|? ? ? ? [?|?]|? ? ? [?|?]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="occurs_in_No_Naked_Vars">occurs_in_No_Naked_Vars</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">s1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Inv.No_Naked_Vars">No_Naked_Vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Inv.No_Naked_Vars">No_Naked_Vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s1">s1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s2</span>; <span class="tactic">inversion_clear</span> 1; <span class="tactic">inversion_clear</span> 1; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Inv.No_Naked_Vars">No_Naked_Vars</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id">_</span> \/ <span class="id">_</span>) <span class="id">and</span> <span class="tactic">destruct</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="occurs_in_instance_methods">occurs_in_instance_methods</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ys</span> <span class="id">clsid</span> <span class="id">o</span> <span class="id">fid</span> <span class="id">es</span> <span class="id">f</span> <span class="id">p</span> <span class="id">insts</span> <span class="id">mems</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_method">wt_method</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#insts">insts</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#mems">mems</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#insts">insts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Call">Call</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ys">ys</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#clsid">clsid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#es">es</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(1 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ys">ys</a></span>)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Generation.html#M.MapsTo">M.MapsTo</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#clsid">clsid</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#instance_methods">instance_methods</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#instance_methods">instance_methods</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_method">wt_method</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Wt</span> <span class="id">Nodup</span> <span class="id">Occurs</span> <span class="id">Length</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span> <span class="id">f</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Occurs</span> <span class="kwd">as</span> [|? ? ? ? [<span class="id">Hs1</span>|<span class="id">Hs2</span>]|? ? ? [<span class="id">Hs1</span>|<span class="id">Hs2</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Wt</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#In_rec_instance_methods">In_rec_instance_methods</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in_wt">occurs_in_wt</a></span> <span class="kwd">in</span> <span class="id">Hs1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hs1</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#In_rec_instance_methods">In_rec_instance_methods</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in_wt">occurs_in_wt</a></span> <span class="kwd">in</span> <span class="id">Hs2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hs2</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#In_rec_instance_methods">In_rec_instance_methods</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in_wt">occurs_in_wt</a></span> <span class="kwd">in</span> <span class="id">Hs1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hs1</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#In_rec_instance_methods">In_rec_instance_methods</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in_wt">occurs_in_wt</a></span> <span class="kwd">in</span> <span class="id">Hs2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hs2</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">l</span> <span class="kwd">as</span> [|<span class="id">l</span> <span class="kwd">is</span>]; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="kwd">is</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">contradict</span> <span class="id">Length</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Lt.html#lt_n_0">lt_n_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">contradict</span> <span class="id">Length</span>; <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Lt.html#lt_irrefl">lt_irrefl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#M.add_1">M.add_1</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION">PRESERVATION</a></span>.<br/>
<br/>
<div class="doc">we work in a well-typed translated program                  *</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="PRESERVATION.main_node">main_node</a></span>  : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.prog">prog</a></span>       : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.tprog">tprog</a></span>      : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#program">Clight.program</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.do_sync">do_sync</a></span>    : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.all_public">all_public</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.tge">tge</a></span>              := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#globalenv">Clight.globalenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.gcenv">gcenv</a></span>            := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#genv_cenv">Clight.genv_cenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.TRANSL">TRANSL</a></span> : <span class="id"><a href="Velus.ObcToClight.Generation.html#translate">translate</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.do_sync">do_sync</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.all_public">all_public</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">Errors.OK</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.WT">WT</a></span>     : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_program">wt_program</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Opaque</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">wt_val_load_result</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#wt_stmt">wt_stmt</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.MatchStates">MatchStates</a></span>.<br/>
<br/>
<div class="doc">we work under a caller method of an owner class,            *</div>
<div class="doc">we state various results of semantics preservation using    *</div>
<div class="doc">the memory predicate match_states                           *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span><br/>
<div class="doc">Obc class </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.ownerid">ownerid</a></span>  : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)     (<span class="id"><a name="PRESERVATION.MatchStates.owner">owner</a></span>  : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>)     (<span class="id">prog</span>' : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>)<br/>
<br/>
<div class="doc">Obc method </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.callerid">callerid</a></span> : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)     (<span class="id"><a name="PRESERVATION.MatchStates.caller">caller</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>)<br/>
<br/>
<div class="doc">Obc state </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.me">me</a></span>       : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.menv">menv</a></span>)      (<span class="id"><a name="PRESERVATION.MatchStates.ve">ve</a></span>     : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.venv">venv</a></span>)<br/>
<br/>
<div class="doc">Clight state </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.m">m</a></span>        : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.mem">Mem.mem</a></span>)   (<span class="id"><a name="PRESERVATION.MatchStates.e">e</a></span>      : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#env">Clight.env</a></span>) (<span class="id"><a name="PRESERVATION.MatchStates.le">le</a></span>   : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#temp_env">temp_env</a></span>)<br/>
<br/>
<div class="doc">Clight self structure </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.sb">sb</a></span>       : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#block">block</a></span>)     (<span class="id"><a name="PRESERVATION.MatchStates.sofs">sofs</a></span>   : <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#ptrofs">ptrofs</a></span>)<br/>
<br/>
<div class="doc">Clight output structure </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.outb_co">outb_co</a></span>  : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#block">block</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite">composite</a></span>))<br/>
<br/>
<div class="doc">frame </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.P">P</a></span>        : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.MatchStates.Findowner">Findowner</a></span>  : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ownerid">ownerid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>, <span class="id">prog</span>'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.Findcaller">Findcaller</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.callerid">callerid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.Hmem">Hmem</a></span>       : <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states">match_states</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.me">me</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span>) (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.P">P</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness">ExprCorrectness</a></span>.<br/>
<br/>
<div class="doc">correctness of expressions                                  *</div>
<br/>
<div class="doc">out-&gt;x </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.OutField">OutField</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.OutField.x">x</a></span>  : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.OutField.ty">ty</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.OutField.out_ind_field">out_ind_field</a></span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#deref_field">deref_field</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.out">out</a></span>) (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_name">m_name</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.x">x</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.ty">ty</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.OutField.Hin">Hin</a></span>    : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.ty">ty</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.OutField.Length">Length</a></span> : (1 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>))%<span class="id">nat</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="evall_out_field">evall_out_field</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ve1</span> <span class="id">le1</span> <span class="id">m1</span> <span class="id">P1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#m1">m1</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep">outputrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve1">ve1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le1">le1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span> ** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P1">P1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">outb</span> <span class="id">outco</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_lvalue">eval_lvalue</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le1">le1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m1">m1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.out_ind_field">out_ind_field</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outb">outb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#d">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#outb">outb</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#outco">outco</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#field_offset">field_offset</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.x">x</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outco">outco</a></span>) = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">Errors.OK</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>; <span class="tactic">intros</span> * <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep_notnil">outputrep_notnil</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">outb</span> &amp; <span class="id">outco</span> &amp; <span class="id">E</span> &amp;?&amp;?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span> <span class="kwd">with</span> (<span class="id">f</span>:=<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_param">translate_param</a></span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">out_ind_field</span>; <span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method_name">find_method_name</a></span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#output_match">output_match</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep_field_offset">fieldsrep_field_offset</a></span> <span class="kwd">as</span> (<span class="id">d</span> &amp; <span class="id">Hoffset</span> &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">outb</span>, <span class="id">outco</span>, <span class="id">d</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Efield_struct">eval_Efield_struct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#deref_loc_copy">deref_loc_copy</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="eval_out_field">eval_out_field</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.out_ind_field">out_ind_field</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">Hmem</span> &amp;?); <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#evall_out_field">evall_out_field</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp; <span class="id">E</span> &amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep_notnil">outputrep_notnil</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (?&amp;?&amp; <span class="id">E</span>' &amp;?&amp;?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method_name">find_method_name</a></span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> <span class="id">E</span>'; <span class="id">inv</span> <span class="id">E</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep_deref_mem">fieldsrep_deref_mem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#output_match">output_match</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField.ty">ty</a></span>); <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.OutField">OutField</a></span>.<br/>
<br/>
<div class="doc">̄x </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="eval_temp_var">eval_temp_var</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#ty">ty</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Etempvar">Etempvar</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ty">ty</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hvars</span> <span class="id">E</span> <span class="id">Find</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">Hmem</span> &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap5">sep_swap5</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj1">sep_proj1</a></span>, <span class="id">sep_pure</span>' <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Etempvar">eval_Etempvar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NotInMembers_NotIn">NotInMembers_NotIn</a></span> <span class="kwd">with</span> (<span class="id">b</span> := <span class="id">ty</span>) <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#not_In2_app">not_In2_app</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span> <span class="kwd">with</span> (<span class="id">f</span>:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_var">match_var</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Find</span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">x </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="eval_var">eval_var</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#ty">ty</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_var">translate_var</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ty">ty</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hx</span> <span class="id">Hin</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_var">translate_var</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#mem_assoc_ident">mem_assoc_ident</a></span> <span class="id">x</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)) <span class="id">eqn</span>:<span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">ty</span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#mem_assoc_ident_true">mem_assoc_ident_true</a></span> <span class="kwd">in</span> <span class="id">E</span> <span class="kwd">as</span> (<span class="id">t</span>'&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">t</span>') (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>)) <span class="tactic">by</span> (<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span>; <span class="tactic">rewrite</span> 2 <span class="id"><a href="Velus.Common.CommonList.html#in_app">in_app</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_nodupvars">m_nodupvars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>); <span class="id">app_NoDupMembers_det</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">as</span> (?, ?) (?, ?) ? : <span class="id">Out</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">destruct</span> <span class="id">E</span> <span class="kwd">as</span> [<span class="id">E</span>|]; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#ident_eqb_eq">ident_eqb_eq</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">subst</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">Hmem</span> &amp;?); <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep_singleton">outputrep_singleton</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.Hmem">Hmem</a></span> <span class="kwd">as</span> (? &amp; <span class="id">Eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_var">match_var</a></span> <span class="kwd">in</span> <span class="id">Eq</span>; <span class="id">cases</span>; <span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="kwd">in</span> <span class="id">Eq</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (1 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>))%<span class="id">nat</span> <span class="tactic">by</span> (<span class="tactic">rewrite</span> <span class="id">Out</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#eval_out_field">eval_out_field</a></span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id">Out</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (~ <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">x</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)) <span class="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NotIn_NotInMembers">NotIn_NotInMembers</a></span>; <span class="tactic">intro</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#mem_assoc_ident_false">mem_assoc_ident_false</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">as</span> <span class="id">xt</span> ? ?: <span class="id">Out</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#eval_temp_var">eval_temp_var</a></span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id">Out</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">self-&gt;x and &amp;self-&gt;o </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.SelfField">SelfField</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.SelfField.x">x</a></span>  : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.SelfField.ty">ty</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.SelfField.self_ind_field">self_ind_field</a></span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#deref_field">deref_field</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.SelfField.x">x</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.SelfField.ty">ty</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.MatchStates.ExprCorrectness.SelfField.Hmems">Hmems</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.SelfField.x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.SelfField.ty">ty</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_mems">c_mems</a></span>)).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="evall_self_field">evall_self_field</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_lvalue">eval_lvalue</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.SelfField.self_ind_field">self_ind_field</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#d">d</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#field_offset">field_offset</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.SelfField.x">x</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#make_members">make_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>) = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">Errors.OK</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#d">d</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ 0 &lt;= <span class="id"><a href="Velus.ObcToClight.Correctness.html#d">d</a></span> &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">Hmem</span> &amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.Findowner">Findowner</a></span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#make_members_co">make_members_co</a></span> <span class="kwd">as</span> (? &amp; <span class="id">Hco</span> &amp; ? &amp; <span class="id">Eq</span> &amp; ? &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep_field_offset">staterep_field_offset</a></span> <span class="kwd">as</span> (<span class="id">d</span> &amp; ? &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">d</span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Efield_struct">eval_Efield_struct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#deref_loc_copy">deref_loc_copy</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">field_offset_in_range</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (0 &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span>) <span class="tactic">by</span> <span class="tactic">eauto</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="eval_self_field">eval_self_field</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.VelusMemory.html#find_val">find_val</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.SelfField.x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.me">me</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.SelfField.self_ind_field">self_ind_field</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#evall_self_field">evall_self_field</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">Hmem</span> &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep_deref_mem">staterep_deref_mem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">&amp;self-&gt;o : appears only as an additional parameter of funcalls </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="eval_self_inst">eval_self_inst</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">o</span> <span class="id">c</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span>, <span class="id">c</span>') (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_objs">c_objs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#ptr_obj">ptr_obj</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id">c</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#d">d</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#field_offset">field_offset</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#make_members">make_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>) = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">Errors.OK</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#d">d</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ 0 &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> + <span class="id"><a href="Velus.ObcToClight.Correctness.html#d">d</a></span> &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">Hmem</span> &amp;?&amp;?&amp;?&amp;?); <span class="tactic">clear</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.Findowner">Findowner</a></span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#make_members_co">make_members_co</a></span> <span class="kwd">as</span> (? &amp; <span class="id">Hco</span> &amp; ? &amp; <span class="id">Eq</span> &amp; ? &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#struct_in_bounds_sizeof">struct_in_bounds_sizeof</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hco</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_program_find_class">wt_program_find_class</a></span> <span class="kwd">as</span> [[<span class="id">Find</span>]]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Find</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Find</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#not_None_is_Some">not_None_is_Some</a></span> <span class="kwd">in</span> <span class="id">Find</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Find</span> <span class="kwd">as</span> [(?, ?)]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">struct_in_struct_in_bounds</span>' <span class="kwd">as</span> (<span class="id">d</span> &amp; ? &amp; <span class="id">Struct</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">d</span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Eaddrof">eval_Eaddrof</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Efield_struct">eval_Efield_struct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#deref_loc_copy">deref_loc_copy</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">Struct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_le_add_le">Z.le_le_add_le</a></span> 0 (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof_struct">sizeof_struct</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#globalenv">Clight.globalenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>) 0 (<span class="id"><a href="Velus.ObcToClight.Generation.html#make_members">make_members</a></span> <span class="id">c</span>))); <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof_struct_incr">sizeof_struct_incr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness.SelfField">SelfField</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="expr_correct">expr_correct</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_mems">c_mems</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#ex">ex</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.exp_eval">exp_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ex">ex</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ex">ex</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ex</span> <span class="kwd">as</span> [<span class="id">x</span>| |<span class="id">cst</span>|<span class="id">op</span>| |<span class="id">x</span>]; <span class="tactic">intros</span> * <span class="id">WTex</span> <span class="id">Ev</span>; <span class="id">inv</span> <span class="id">Ev</span>; <span class="id">inv</span> <span class="id">WTex</span>; <span class="tactic">simpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Var&nbsp;x&nbsp;ty&nbsp;:&nbsp;"x"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#eval_var">eval_var</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;State&nbsp;x&nbsp;ty&nbsp;:&nbsp;"self-&gt;x"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#eval_self_field">eval_self_field</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Const&nbsp;c&nbsp;ty&nbsp;:&nbsp;"c"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">cst</span>; <span class="tactic">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Unop&nbsp;op&nbsp;e&nbsp;ty&nbsp;:&nbsp;"op&nbsp;e"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">op</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?); <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#type_pres">type_pres</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.sem_unary_operation_any_mem">sem_unary_operation_any_mem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.wt_val_not_vundef_nor_vptr">wt_val_not_vundef_nor_vptr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span>: <span class="kwd">match</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctyping.html#check_cast">Ctyping.check_cast</a></span> ?<span class="id">x</span> ?<span class="id">y</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctyping.html#check_cast">Ctyping.check_cast</a></span> <span class="id">x</span> <span class="id">y</span>); <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.sem_cast_any_mem">sem_cast_any_mem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.wt_val_not_vundef_nor_vptr">wt_val_not_vundef_nor_vptr</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Binop&nbsp;op&nbsp;e1&nbsp;e2&nbsp;:&nbsp;"e1&nbsp;op&nbsp;e2"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#translate_binop">translate_binop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?); <span class="tactic">rewrite</span> 2 <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#type_pres">type_pres</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.sem_binary_operation_any_cenv_mem">sem_binary_operation_any_cenv_mem</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.wt_val_not_vundef_nor_vptr">wt_val_not_vundef_nor_vptr</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Valid&nbsp;x&nbsp;ty&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#eval_var">eval_var</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="exprs_correct">exprs_correct</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">es</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">es</span>' := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#es">es</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_mems">c_mems</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.exp_eval">exp_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#es">es</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">Clight.eval_exprlist</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> <span class="id">es</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#list_type_to_typelist">list_type_to_typelist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> <span class="id">es</span>')) <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#Clight.eval_exprlist">Clight.eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">WF</span> <span class="id">EV</span>; <span class="tactic">subst</span> <span class="id">es</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">EV</span>; <span class="id">inv</span> <span class="id">WF</span>; <span class="tactic">econstructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#expr_correct">expr_correct</a></span>; <span class="tactic">eauto</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?); <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#type_pres">type_pres</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.sem_cast_same">sem_cast_same</a></span>; <span class="tactic">eauto</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ExprCorrectness">ExprCorrectness</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">exprs_correct</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.MatchStates.AssignCorrectness">AssignCorrectness</a></span>.<br/>
<br/>
<div class="doc">'Hoare triple' for assignments, the leaves of the program   *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span>  : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>) (<span class="id"><a name="PRESERVATION.MatchStates.AssignCorrectness.ty">ty</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type">type</a></span>) (<span class="id"><a name="PRESERVATION.MatchStates.AssignCorrectness.v">v</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.val">val</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.AssignCorrectness.ae">ae</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#expr">expr</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.MatchStates.AssignCorrectness.WTv">WTv</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.wt_val">wt_val</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.v">v</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ty">ty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.AssignCorrectness.Teq">Teq</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ae">ae</a></span> = <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ty">ty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.AssignCorrectness.Hin">Hin</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ty">ty</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>)).<br/>
<br/>
<div class="doc">x = ae : x can be a temp or an indirect access field (output variable) </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_assign">exec_assign</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">le1</span> <span class="id">ve1</span> <span class="id">P1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#m1">m1</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep">outputrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve1">ve1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le1">le1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#varsrep">varsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve1">ve1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le1">le1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P1">P1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le1">le1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m1">m1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ae">ae</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>' <span class="id">le</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le1">le1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m1">m1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#assign">assign</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ty">ty</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ae">ae</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">le</span>' <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep">outputrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> (<span class="id"><a href="Velus.Environment.html#Env.add">Env.add</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.v">v</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve1">ve1</a></span>) <span class="id">le</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#varsrep">varsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> (<span class="id"><a href="Velus.Environment.html#Env.add">Env.add</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.v">v</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve1">ve1</a></span>) <span class="id">le</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P1">P1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#le1">le1</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> -&gt; <span class="id">le</span>' ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>; <span class="tactic">intros</span> * <span class="id">Hmem</span> <span class="id">Ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> &lt;&gt; <span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span>; <span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_AtomOrGensym">m_AtomOrGensym</a></span>, <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#AtomOrGensym_inv">AtomOrGensym_inv</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#mem_assoc_ident">mem_assoc_ident</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)) <span class="id">eqn</span>:<span class="id">E</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;is&nbsp;a&nbsp;caller&nbsp;output&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ty">ty</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)) <span class="kwd">as</span> <span class="id">Hin</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#mem_assoc_ident_true">mem_assoc_ident_true</a></span> <span class="kwd">in</span> <span class="id">E</span> <span class="kwd">as</span> (<span class="id">t</span> &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span>, <span class="id">t</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>)) <span class="tactic">by</span> (<span class="tactic">do</span> 2 <span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#in_app">in_app</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_nodupvars">m_nodupvars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>); <span class="id">app_NoDupMembers_det</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#assign">assign</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">as</span> (<span class="id">x</span>', <span class="id">t</span>') (<span class="id">x</span>'', <span class="id">t</span>'') <span class="id">outs</span> : <span class="id">Houts</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;only&nbsp;one&nbsp;output:&nbsp;x&nbsp;is&nbsp;a&nbsp;temporary&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion_clear</span> <span class="id">Hin</span>' <span class="kwd">as</span> [<span class="id">Eq</span>|<span class="id">Eq</span>]; <span class="id">inv</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m1</span>, (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.v">v</a></span> <span class="id">le1</span>); <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">intuition</span>; <span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt">exec_stmt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_imp">sep_imp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep_assign_singleton_mem">outputrep_assign_singleton_mem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#varsrep_add">varsrep_add</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;several&nbsp;outputs:&nbsp;x&nbsp;is&nbsp;an&nbsp;indirect&nbsp;access&nbsp;out-&gt;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (1 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>))%<span class="id">nat</span> <span class="tactic">by</span> (<span class="tactic">rewrite</span> <span class="id">Houts</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ty">ty</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Houts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep_assign_gt1_mem">outputrep_assign_gt1_mem</a></span> <span class="kwd">as</span> (<span class="id">m</span>' &amp; ?&amp;?&amp;?&amp; <span class="id">Hco</span> &amp; <span class="id">Hofs</span> &amp;?&amp;?); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#output_match">output_match</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>', <span class="id">le1</span>; <span class="tactic">intuition</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#evall_out_field">evall_out_field</a></span> <span class="kwd">with</span> (<span class="id">m1</span> := <span class="id">m1</span>) <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp; <span class="id">Hco</span>' &amp; <span class="id">Hofs</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hco</span> <span class="kwd">in</span> <span class="id">Hco</span>'; <span class="id">inv</span> <span class="id">Hco</span>'. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#prog_comp_env">prog_comp_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>) <span class="kwd">with</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="kwd">in</span> <span class="id">Hofs</span>; <span class="tactic">rewrite</span> <span class="id">Hofs</span> <span class="kwd">in</span> <span class="id">Hofs</span>'; <span class="id">inv</span> <span class="id">Hofs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.Teq">Teq</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_imp">sep_imp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#varsrep_corres_out">varsrep_corres_out</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;is&nbsp;not&nbsp;a&nbsp;caller&nbsp;output&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (~ <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)) <span class="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NotIn_NotInMembers">NotIn_NotInMembers</a></span>; <span class="tactic">intro</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#mem_assoc_ident_false">mem_assoc_ident_false</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m1</span>, (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.v">v</a></span> <span class="id">le1</span>); <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">intuition</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#assign">assign</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) : <span class="id">Houts</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt">exec_stmt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#varsrep_add">varsrep_add</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep_assign_var_mem">outputrep_assign_var_mem</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#output_match">output_match</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="exec_assign_match_states">exec_assign_match_states</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ae">ae</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>' <span class="id">le</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#assign">assign</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ty">ty</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.ae">ae</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">le</span>' <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states">match_states</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.me">me</a></span>, <span class="id"><a href="Velus.Environment.html#Env.add">Env.add</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness.v">v</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span>) (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span>, <span class="id">le</span>') <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.P">P</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">Hmem</span> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_assign">exec_assign</a></span> <span class="kwd">as</span> (<span class="id">m</span>' &amp; <span class="id">le</span>' &amp; ?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>', <span class="id">le</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_nodupvars">m_nodupvars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.AssignCorrectness">AssignCorrectness</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness">FuncallAssignCorrectness</a></span>.<br/>
<br/>
<div class="doc">assignments after a funcall are particular as they do not   *</div>
<div class="doc">correspond to source statements                             *</div>
<div class="doc">we assume that the callee exists in a child class, with     *</div>
<div class="doc">more at least two outputs, meaning that a local output      *</div>
<div class="doc">structure is declared in the caller                         *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span><br/>
<div class="doc">Child class </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.cid">cid</a></span>       : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)   (<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.c">c</a></span>      : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>)     (<span class="id">prog</span>'' : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.program">program</a></span>)<br/>
<br/>
<div class="doc">Callee </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.fid">fid</a></span>       : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)   (<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.callee">callee</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>)<br/>
<br/>
<div class="doc">the callee environment </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.ve_callee">ve_callee</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.venv">venv</a></span>)<br/>
<br/>
<div class="doc">the local output structure </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.o">o</a></span>         : <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span>)   (<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.instco">instco</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite">composite</a></span>) (<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.instb">instb</a></span>  : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#block">block</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.Findchild">Findchild</a></span>  : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.cid">cid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.c">c</a></span>, <span class="id">prog</span>''))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.Findcallee">Findcallee</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.callee">callee</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.Len">Len</a></span>        : (1 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.callee">callee</a></span>))%<span class="id">nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.Ho">Ho</a></span>         : <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.o">o</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instb">instb</a></span>, <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.cid">cid</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.Hinstco">Hinstco</a></span>    : <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.cid">cid</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instco">instco</a></span>).<br/>
<br/>
<div class="doc">o.x : a local output structure field is evaluated to the value found in the callee env </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="eval_inst_field">eval_inst_field</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">v</span> <span class="id">le2</span> <span class="id">m1</span> <span class="id">P1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">inst_field</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Efield">Efield</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Evar</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.o">o</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.cid">cid</a></span>))) <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ty">ty</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#m1">m1</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.ve_callee">ve_callee</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instco">instco</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instb">instb</a></span> ** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P1">P1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#ty">ty</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.ve_callee">ve_callee</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le2">le2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m1">m1</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#inst_field">inst_field</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span> <span class="id">Findcaller</span> <span class="id">Findowner</span>; <span class="tactic">intros</span> * <span class="id">Hmem</span> <span class="id">Hin</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span> <span class="kwd">with</span> (<span class="id">f</span>:=<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_param">translate_param</a></span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#output_match">output_match</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep_field_offset">fieldsrep_field_offset</a></span> <span class="kwd">as</span> (<span class="id">d</span> &amp; <span class="id">Hoffset</span> &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Efield_struct">eval_Efield_struct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#deref_loc_copy">deref_loc_copy</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep_deref_mem">fieldsrep_deref_mem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<div class="doc">after a call, we are not in match_states: the according     *</div>
<div class="doc">structure is 'filled' with return values                    *</div>
<div class="doc">the variables to be assigned are again temporaries or       *</div>
<div class="doc">indirect field accesses                                     *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variables</span><br/>
<div class="doc">the memory just after the call </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.m1">m1</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.mem">Mem.mem</a></span>)<br/>
<div class="doc">frame </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.P1">P1</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.MatchStates.FuncallAssignCorrectness.Hmem1">Hmem1</a></span> : <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.m1">m1</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.ve_callee">ve_callee</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instco">instco</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instb">instb</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep">outputrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#varsrep">varsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.P1">P1</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_funcall_assign_outs">exec_funcall_assign_outs</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">outs</span> <span class="id">xs</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tyo</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.cid">cid</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> <span class="id">xt</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#y">y</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#xs">xs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xt</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.ve_callee">ve_callee</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>' <span class="id">le</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.m1">m1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall_assign">funcall_assign</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xs">xs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.o">o</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#tyo">tyo</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">le</span>' <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.ve_callee">ve_callee</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instco">instco</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instb">instb</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep">outputrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds">Env.adds</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xs">xs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span>) <span class="id">le</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#varsrep">varsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds">Env.adds</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xs">xs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span>) <span class="id">le</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.P1">P1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> -&gt; <span class="id">le</span>' ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">outs</span>; <span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">m1</span>; <span class="tactic">clear</span> <span class="id">Hmem1</span> <span class="id">m1</span>; <span class="id">revert</span> <span class="id">ve</span> <span class="id">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">outs</span> <span class="kwd">as</span> [|(<span class="id">x</span>, <span class="id">t</span>)]; <span class="tactic">intros</span> * <span class="id">Hmem</span> ??? <span class="id">Incl</span> <span class="id">Hins</span> <span class="id">WTvs</span> <span class="id">Hvs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hins</span> <span class="kwd">as</span> [|<span class="id">y</span>]; <span class="id">inv</span> <span class="id">WTvs</span>; <span class="id">inv</span> <span class="id">Hvs</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#funcall_assign">funcall_assign</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_nil_l">Env.adds_nil_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.m1">m1</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span>; <span class="tactic">intuition</span>; <span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span>;  <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt">exec_stmt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">incl_cons</span>' <span class="kwd">in</span> <span class="id">Incl</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_assign">exec_assign</a></span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id">y</span>) (<span class="id">ty</span> := <span class="id">t</span>) (<span class="id">ae</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Efield">Efield</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Evar</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.o">o</a></span> <span class="id">tyo</span>) <span class="id">x</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">l_x</span> &amp; <span class="id">le_x</span> &amp; ? &amp; <span class="id">Hmem_x</span> &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#eval_inst_field">eval_inst_field</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">Hmem_x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IHouts</span> <span class="kwd">as</span> (<span class="id">m</span>' &amp; <span class="id">le</span>' &amp; ? &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>', <span class="id">le</span>'; <span class="tactic">intuition</span>; <span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt">exec_stmt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="exec_funcall_assign">exec_funcall_assign</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tyo</span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.cid">cid</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> <span class="id">xt</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#y">y</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#xs">xs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xt</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.ve_callee">ve_callee</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>' <span class="id">le</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.m1">m1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#funcall_assign">funcall_assign</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xs">xs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.o">o</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#tyo">tyo</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">le</span>' <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.ve_callee">ve_callee</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instco">instco</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.instb">instb</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep">outputrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds">Env.adds</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xs">xs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span>) <span class="id">le</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#varsrep">varsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> (<span class="id"><a href="Velus.Environment.html#Env.adds">Env.adds</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xs">xs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span>) <span class="id">le</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness.P1">P1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> -&gt; <span class="id">le</span>' ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.obc2c">obc2c</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_funcall_assign_outs">exec_funcall_assign_outs</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl_refl">incl_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.FuncallAssignCorrectness">FuncallAssignCorrectness</a></span>.<br/>
<br/>
<div class="doc">the expected execution and memory state after a funcall,    *</div>
<div class="doc">depending on the numbers of outputs:                        *</div>
<div class="doc">  0: no 'out' pointer parameter, we only need staterep for  *</div>
<div class="doc">     the sub-state, and we get an updated staterep after    *</div>
<div class="doc">     the call, with no return value                         *</div>
<div class="doc">  1: no 'out' pointer parameter, we only need staterep for  *</div>
<div class="doc">     the sub-state, and we get an updated staterep after    *</div>
<div class="doc">     the call, with only one return value                   *</div>
<div class="doc">  n: 'out' pointer parameter, we need both staterep for     *</div>
<div class="doc">     the sub-state and fieldsrep for the output structure,  *</div>
<div class="doc">     we get an updated staterep and a the output structure  *</div>
<div class="doc">     filled with the return values                          *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="call_spec">call_spec</a></span> (<span class="id">c</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.class">class</a></span>) (<span class="id">f</span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.method">method</a></span>) (<span class="id">vs</span> <span class="id">rvs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.val">val</a></span>) (<span class="id">me</span> <span class="id">me</span>': <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.menv">menv</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sb</span> <span class="id">sofs</span> <span class="id">m</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#bounded_struct_of_class">bounded_struct_of_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span>) ** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>' <span class="id">fd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec">method_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fd">fd</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fd">fd</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span> :: <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id">me</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span>) ** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span>) ** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>' <span class="id">fd</span> <span class="id">rv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec">method_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fd">fd</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fd">fd</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span> :: <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#rv">rv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> = [<span class="id"><a href="Velus.ObcToClight.Correctness.html#rv">rv</a></span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id">me</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span>) ** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">outs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">instb</span> <span class="id">instco</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_name">m_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#instco">instco</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.vempty">vempty</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#instco">instco</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#instb">instb</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">ve_f</span> <span class="id">m</span>' <span class="id">fd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec">method_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fd">fd</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fd">fd</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span> :: <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#instb">instb</a></span> :: <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xt</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve_f">ve_f</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_name">c_name</a></span>) <span class="id">me</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve_f">ve_f</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#instco">instco</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#instb">instb</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<br/>
<div class="doc">'Hoare triple' for funcalls, assuming call_spec for the     *</div>
<div class="doc">callee as a mutual induction hypothesis                     *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_binded_funcall">exec_binded_funcall</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ys</span> <span class="id">o</span> <span class="id">es</span> <span class="id">me_o</span>' <span class="id">vs</span> <span class="id">rvs</span> <span class="id">cid</span> <span class="id">c</span> <span class="id">prog</span>'' <span class="id">fid</span> <span class="id">callee</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span> <span class="id">prog</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>, <span class="id">prog</span>'') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#callee">callee</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#callee">callee</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.instance_match">instance_match</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.me">me</a></span>) <span class="id">me_o</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">y</span> <span class="id">xt</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#y">y</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#ys">ys</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((1 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>))%<span class="id">nat</span> -&gt; <span class="id"><a href="Velus.ObcToClight.Generation.html#M.MapsTo">M.MapsTo</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#instance_methods">instance_methods</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ys">ys</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_objs">c_objs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">xt</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> = <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#es">es</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#callee">callee</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#es">es</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#list_type_to_typelist">list_type_to_typelist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#es">es</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id">me_o</span>' <span class="id">prog</span>'' <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>' <span class="id">le</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#binded_funcall">binded_funcall</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ys">ys</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#es">es</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">le</span>' <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states">match_states</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.VelusMemory.html#add_inst">add_inst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#o">o</a></span> <span class="id">me_o</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.me">me</a></span>, <span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ys">ys</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.ve">ve</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span>, <span class="id">le</span>') <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.P">P</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Findchild</span> <span class="id">Findcallee</span> <span class="id">CallSpec</span> <span class="id">Hins</span> <span class="id">WTrvs</span> <span class="id">Hinstmth</span> <span class="id">Nodup</span> <span class="id">Hin</span> <span class="id">Hts</span> <span class="id">Evs</span> <span class="id">WTme_o</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;Clight&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id">cid</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">prog</span>'')) <span class="kwd">as</span> <span class="id">Findchild</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.find_class_chained">find_class_chained</a></span>; <span class="tactic">eauto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#methods_corres">methods_corres</a></span> <span class="kwd">with</span> (3 := <span class="id">Findchild</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">loc_f</span> &amp; <span class="id">fun_f</span> &amp; <span class="id">Gf</span> &amp; <span class="id">Gptrf</span> &amp; <span class="id">Spec_f</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id">fid</span> <span class="id">cid</span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tfunction">Tfunction</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#targs">targs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#tres">tres</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cc">cc</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">loc_f</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Evar_global">eval_Evar_global</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Common.Common.html#not_Some_is_None">not_Some_is_None</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (?, ?) <span class="id">Hget</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp; <span class="id">He</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">He</span> <span class="kwd">in</span> <span class="id">Hget</span>; <span class="tactic">destruct</span> <span class="id">Hget</span> <span class="kwd">as</span> (? &amp; ? &amp; <span class="id">Eqpref</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Ident.html#Ids.prefix_injective">prefix_injective</a></span> <span class="kwd">in</span> <span class="id">Eqpref</span> <span class="kwd">as</span> (<span class="id">Heq1</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Ident.html#Ids.fun_not_out">fun_not_out</a></span> <span class="kwd">in</span> <span class="id">Heq1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#deref_loc_reference">deref_loc_reference</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">loc_f</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id">fun_f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#type_of_fundef">type_of_fundef</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id">fun_f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tfunction">Tfunction</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="id">callee</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Tcons</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id">cid</span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#list_type_to_typelist">list_type_to_typelist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> <span class="id">es</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Tcons</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id">cid</span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#list_type_to_typelist">list_type_to_typelist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> <span class="id">es</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Tcons</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id">cid</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Tcons</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id">fid</span> <span class="id">cid</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#list_type_to_typelist">list_type_to_typelist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> <span class="id">es</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="id">callee</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tvoid">Tvoid</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">t</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#t">t</a></span>) (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tvoid">Tvoid</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#cc_default">AST.cc_default</a></span>) <span class="kwd">as</span> <span class="id">Type_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#type_of_function">type_of_function</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Spec_f</span> <span class="kwd">as</span> (<span class="id">Params_f</span> &amp; <span class="id">Return_f</span> &amp; <span class="id">CC_f</span> &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Params_f</span>, <span class="id">Return_f</span>, <span class="id">CC_f</span>; <span class="tactic">simpl</span>; <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method_name">find_method_name</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span>; <span class="id">destruct_list</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id">callee</span>) <span class="kwd">as</span> (?,?) (?,?) ?; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">types_pres</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;&amp;self-&gt;o&nbsp;parameter&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#eval_self_inst">eval_self_inst</a></span> <span class="kwd">as</span> (<span class="id">d</span> &amp; ?&amp; <span class="id">Hofs</span> &amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cop.html#sem_cast">Cop.sem_cast</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">d</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id">cid</span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id">cid</span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sb">sb</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">d</span>)))) <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">Hmem</span> &amp; ?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;sub-structure&nbsp;is&nbsp;well-sized&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#bounded_struct_of_class">bounded_struct_of_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id">c</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> + <span class="id">d</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#bounded_struct_of_class">bounded_struct_of_class</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#make_members_co">make_members_co</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp; &lt;- &amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#struct_in_struct_in_bounds">struct_in_struct_in_bounds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#Consistent">Consistent</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#field_translate_obj_type">field_translate_obj_type</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;prepare&nbsp;the&nbsp;induction&nbsp;invariant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hin</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.Hmem">Hmem</a></span>) <span class="kwd">as</span> <span class="id">Hmem</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep_extract">staterep_extract</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>' <span class="kwd">as</span> (<span class="id">objs</span> &amp; <span class="id">objs</span>' &amp; ? &amp; <span class="id">E</span> &amp; <span class="id">Hofs</span>' &amp; <span class="id">Hmem</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>; <span class="tactic">rename</span> <span class="id">Hmem</span>' <span class="id">into</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="id">cid</span>) <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hofs</span>' <span class="kwd">in</span> <span class="id">Hofs</span>; <span class="id">inv</span> <span class="id">Hofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span> + <span class="id">d</span>)) <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt;= <span class="id">d</span> &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">assert</span> (0 &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.sofs">sofs</a></span>) <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.Common.CompCertLib.html#field_offset_type">field_offset_type</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#field_offset_rec_in_range">field_offset_rec_in_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">o</span> (<span class="id">objs</span> ++ <span class="id">objs</span>'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_app_cons">NoDupMembers_app_cons</a></span>; <span class="tactic">setoid_rewrite</span> &lt;-<span class="id">E</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_nodupobjs">c_nodupobjs</a></span>).<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#binded_funcall">binded_funcall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">Findchild</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.find_class_rev">find_class_rev</a></span> <span class="kwd">in</span> <span class="id">Findchild</span>' <span class="kwd">as</span> (<span class="id">cls</span> &amp; <span class="id">Findchild</span>'); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Findchild</span>', <span class="id">Findcallee</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span> <span class="kwd">in</span> <span class="id">CallSpec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="kwd">in</span> <span class="id">Type_f</span>, <span class="id">CallSpec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> <span class="id">callee</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">as</span> (<span class="id">a</span>, <span class="id">ta</span>) (<span class="id">b</span>, <span class="id">tb</span>) ? : <span class="id">Hout</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hins</span> <span class="kwd">as</span> [|<span class="id">x</span> ???? <span class="id">Hins</span>']; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">Hins</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">WTrvs</span> <span class="kwd">as</span> [|????? <span class="id">WTrvs</span>']; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">WTrvs</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;output&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;get&nbsp;the&nbsp;induction&nbsp;invariant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">CallSpec</span> <span class="kwd">as</span> (<span class="id">m</span>' &amp; ? &amp; <span class="id">Spec_f</span>' &amp; <span class="id">EvalF</span> &amp; <span class="id">Hmem</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec_eq">method_spec_eq</a></span> <span class="kwd">with</span> (2 := <span class="id">Spec_f</span>) <span class="kwd">in</span> <span class="id">Spec_f</span>'; <span class="tactic">eauto</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="id">d</span>), &lt;- <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.add_unsigned">Ptrofs.add_unsigned</a></span> <span class="kwd">in</span> <span class="id">EvalF</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>', <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#set_opttemp">set_opttemp</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_opt_nil_l">Env.adds_opt_nil_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep_extract">staterep_extract</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">objs</span>, <span class="id">objs</span>', <span class="id">d</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_imp">sep_imp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.instance_match">instance_match</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.VelusMemory.html#find_inst_gss">find_inst_gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id">sep_imp</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep_objs_not_in">staterep_objs_not_in</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;one&nbsp;output&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;get&nbsp;the&nbsp;induction&nbsp;invariant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">CallSpec</span> <span class="kwd">as</span> (<span class="id">m</span>' &amp; ? &amp; <span class="id">rv</span> &amp; <span class="id">Spec_f</span>' &amp; <span class="id">EvalF</span> &amp; <span class="id">Erv</span> &amp; <span class="id">Hmem</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Erv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec_eq">method_spec_eq</a></span> <span class="kwd">with</span> (2 := <span class="id">Spec_f</span>) <span class="kwd">in</span> <span class="id">Spec_f</span>'; <span class="tactic">eauto</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="id">d</span>), &lt;- <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.add_unsigned">Ptrofs.add_unsigned</a></span> <span class="kwd">in</span> <span class="id">EvalF</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;only&nbsp;assignment&nbsp;after&nbsp;the&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap67">sep_swap67</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap56">sep_swap56</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_assign">exec_assign</a></span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id">x</span>) (<span class="id">ty</span> := <span class="id">ta</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ae</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Etempvar">Etempvar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_temp">prefix_temp</a></span> <span class="id">fid</span> <span class="id">a</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">ta</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">le1</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.set">PTree.set</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_temp">prefix_temp</a></span> <span class="id">fid</span> <span class="id">a</span>) <span class="id">rv</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">m</span>'' &amp; <span class="id">le</span>' &amp; ? &amp; <span class="id">Hmem</span>'' &amp; <span class="id">Hself</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method_name">find_method_name</a></span> <span class="kwd">in</span> <span class="id">Findcallee</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_good">m_good</a></span> <span class="id">callee</span>) <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hat</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_imp">sep_imp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep_add_prefix">outputrep_add_prefix</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id">sep_imp</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">varsrep_add</span>'''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#InMembers_In">InMembers_In</a></span> <span class="kwd">in</span> <span class="id">contra</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_good">m_good</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>) <span class="kwd">as</span> (<span class="id">Hvars</span>&amp;<span class="id">_</span>). <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_map">Forall_map</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>. <span class="tactic">destruct</span> <span class="id">Hvars</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>'. 2:<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#AtomOrGensym_inv">AtomOrGensym_inv</a></span> <span class="kwd">in</span> <span class="id">Hin</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>'', <span class="id">le</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">change</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sseq_1">exec_Sseq_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.set">PTree.set</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_temp">prefix_temp</a></span> <span class="id">fid</span> <span class="id">a</span>) <span class="id">rv</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span>) <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#set_opttemp">set_opttemp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_temp">prefix_temp</a></span> <span class="id">fid</span> <span class="id">a</span>)) <span class="id">rv</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="id">map</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_opt_cons_cons">Env.adds_opt_cons_cons</a></span>, <span class="id"><a href="Velus.Environment.html#Env.adds_opt_nil_l">Env.adds_opt_nil_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_nodupvars">m_nodupvars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep_extract">staterep_extract</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">objs</span>, <span class="id">objs</span>', <span class="id">d</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap67">sep_swap67</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap56">sep_swap56</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_imp">sep_imp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id">sep_imp</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.instance_match">instance_match</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.VelusMemory.html#find_inst_gss">find_inst_gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep_objs_not_in">staterep_objs_not_in</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hself</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">prefix_injective</span>'. <span class="tactic">left</span>. <span class="id">prove_str_to_pos_neq</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;multiple&nbsp;outputs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;get&nbsp;the&nbsp;local&nbsp;structure&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#M.MapsTo">M.MapsTo</a></span> (<span class="id">o</span>, <span class="id">fid</span>) <span class="id">cid</span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#instance_methods">instance_methods</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.caller">caller</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id">Hinstmth</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#subrep_extract">subrep_extract</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (<span class="id">instb</span> &amp; <span class="id">instco</span> &amp; <span class="id">xs</span> &amp; <span class="id">xs</span>' &amp;?&amp; <span class="id">Hinstco</span> &amp;?&amp; <span class="id">Hmem</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">Hinstco</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="id">cid</span>), &lt;-(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method_name">find_method_name</a></span> <span class="id">fid</span>) <span class="kwd">in</span> <span class="id">Hinstco</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;&amp;o&nbsp;parameter&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_out">prefix_out</a></span> <span class="id">fid</span> <span class="id">o</span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id">fid</span> <span class="id">cid</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#pointer_of">pointer_of</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id">fid</span> <span class="id">cid</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">instb</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">constructor</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cop.html#sem_cast">Cop.sem_cast</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">instb</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_out">prefix_out</a></span> <span class="id">o</span> <span class="id">fid</span>) (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id">fid</span> <span class="id">cid</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#pointer_of">pointer_of</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id">fid</span> <span class="id">cid</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#pointer_of">pointer_of</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id">fid</span> <span class="id">cid</span>))) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">instb</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>)) <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;induction&nbsp;invariant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">CallSpec</span> <span class="kwd">as</span> (<span class="id">ve_f</span> &amp; <span class="id">m</span>' &amp; ? &amp; <span class="id">Spec_f</span>' &amp; <span class="id">EvalF</span> &amp; ? &amp; <span class="id">Hmem</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec_eq">method_spec_eq</a></span> <span class="kwd">with</span> (2 := <span class="id">Spec_f</span>) <span class="kwd">in</span> <span class="id">Spec_f</span>'; <span class="tactic">eauto</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="id">d</span>), &lt;- <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.add_unsigned">Ptrofs.add_unsigned</a></span> <span class="kwd">in</span> <span class="id">EvalF</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;multiple&nbsp;assignments&nbsp;after&nbsp;the&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (1 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id">callee</span>))%<span class="id">nat</span> <span class="tactic">by</span> (<span class="tactic">rewrite</span> <span class="id">Hout</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap56">sep_swap56</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap78">sep_swap78</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap67">sep_swap67</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap56">sep_swap56</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_funcall_assign">exec_funcall_assign</a></span> <span class="kwd">as</span> (<span class="id">m</span>'' &amp; <span class="id">le</span>' &amp; ? &amp; <span class="id">Hmem</span>'' &amp; <span class="id">Hself</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hout</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>'', <span class="id">le</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">change</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#funcall">funcall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">Hout</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sseq_1">exec_Sseq_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#set_opttemp">set_opttemp</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates.le">le</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_nodupvars">m_nodupvars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep_extract">staterep_extract</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">objs</span>, <span class="id">objs</span>', <span class="id">d</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#subrep_extract">subrep_extract</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">instb</span>, <span class="id">instco</span>, <span class="id">xs</span>, <span class="id">xs</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_opt_is_adds">Env.adds_opt_is_adds</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap56">sep_swap56</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap78">sep_swap78</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap67">sep_swap67</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_swap56">sep_swap56</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap45">sep_swap45</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_imp">sep_imp</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep_any_empty">fieldsrep_any_empty</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id">sep_imp</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.instance_match">instance_match</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.VelusMemory.html#find_inst_gss">find_inst_gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep_objs_not_in">staterep_objs_not_in</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.MatchStates">MatchStates</a></span>.<br/>
<br/>
<br/>
<div class="doc">The main correctness result, shown by mutual induction:     *</div>
<div class="doc">the usual scheme with induction on the program is not       *</div>
<div class="doc">adapted because the generation function is monadic, and not *</div>
<div class="doc">recursive                                                   *</div>
<div class="doc">we have to perform the mutual induction on suffixes though, *</div>
<div class="doc">to be able to use the previous results                      *</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.SpecIO">SpecIO</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ome</span> <span class="id">ome</span>' <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span> <span class="id">rvos</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Correctness.html#vo">vo</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#vos">vos</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ome">ome</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#clsid">clsid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vos">vos</a></span> <span class="id">ome</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvos">rvos</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvos">rvos</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.NO_NAKED_VARS">NO_NAKED_VARS</a></span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Forall_methods">Forall_methods</a></span> (<span class="kwd">fun</span> <span class="id">m</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Inv.No_Naked_Vars">No_Naked_Vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="mutual_correctness">mutual_correctness</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">p</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">s</span> <span class="id">me</span>' <span class="id">ve</span>' <span class="id">ownerid</span> <span class="id">owner</span> <span class="id">prog</span>' <span class="id">callerid</span> <span class="id">caller</span> <span class="id">m</span> <span class="id">e</span> <span class="id">le</span> <span class="id">outb_co</span> <span class="id">sb</span> <span class="id">sofs</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.suffix">suffix</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_eval">stmt_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> (<span class="id">me</span>', <span class="id">ve</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ownerid">ownerid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#callerid">callerid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states">match_states</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span>) (<span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>' <span class="id">le</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_stmt">translate_stmt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">le</span>' <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states">match_states</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span> (<span class="id">me</span>', <span class="id">ve</span>') (<span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span>, <span class="id">le</span>') <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outb_co">outb_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">p</span> <span class="id">me</span> <span class="id">cid</span> <span class="id">fid</span> <span class="id">c</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">rvs</span> <span class="id">prog</span>' <span class="id">me</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.suffix">suffix</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span>) <span class="id">me</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id">me</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;result&nbsp;in&nbsp;mutual&nbsp;induction&nbsp;form&nbsp;using&nbsp;a&nbsp;cut&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">cut</span> ((<span class="kwd">forall</span> <span class="id">p</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">s</span> (<span class="id">me_ve</span>': <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.menv">menv</a></span> * <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.venv">venv</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_eval">stmt_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> <span class="id">me_ve</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.suffix">suffix</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ownerid</span> <span class="id">owner</span> <span class="id">prog</span>' <span class="id">callerid</span> <span class="id">caller</span> <span class="id">m</span> <span class="id">e</span> <span class="id">le</span> <span class="id">outb_co</span> <span class="id">sb</span> <span class="id">sofs</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">me</span>', <span class="id">ve</span>') := <span class="id">me_ve</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">Findowner</span>  : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ownerid">ownerid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span>, <span class="id">prog</span>'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Findcaller</span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#callerid">callerid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hmem</span>       : <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states">match_states</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span>) (<span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outb_co">outb_co</a></span> ** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Occurs</span>     : <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in">occurs_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NoNaked</span>    : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Inv.No_Naked_Vars">No_Naked_Vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">WTs</span>        : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_stmt">wt_stmt</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_objs">c_objs</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_mems">c_mems</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>' <span class="id">le</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_stmt">translate_stmt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#s">s</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">le</span>' <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states">match_states</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#owner">owner</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#caller">caller</a></span> (<span class="id">me</span>', <span class="id">ve</span>') (<span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span>, <span class="id">le</span>') <span class="id"><a href="Velus.ObcToClight.Correctness.html#sb">sb</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#sofs">sofs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outb_co">outb_co</a></span> ** <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">p</span> <span class="id">me</span> <span class="id">cid</span> <span class="id">fid</span> <span class="id">vos</span> <span class="id">me</span>' <span class="id">rvos</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vos">vos</a></span> <span class="id">me</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvos">rvos</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.suffix">suffix</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#p">p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">rvs</span> <span class="id">prog</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#vos">vos</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#rvos">rvos</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id">me</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span> (<span class="id">Hstmt</span> &amp; <span class="id">Hcall</span>); <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * ???? <span class="id">Occurs</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id">Hstmt</span> <span class="id">p</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">s</span> (<span class="id">me</span>', <span class="id">ve</span>')); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in_No_Naked_Vars">occurs_in_No_Naked_Vars</a></span> <span class="kwd">with</span> (2 := <span class="id">Occurs</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Forall_methods_find">Forall_methods_find</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.NO_NAKED_VARS">NO_NAKED_VARS</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in_wt">occurs_in_wt</a></span> <span class="kwd">with</span> (2 := <span class="id">Occurs</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_class_find_method">wt_class_find_method</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_program_find_class">wt_program_find_class</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Opaque</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states">match_states</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_eval_call_ind">stmt_eval_call_ind</a></span>; [| |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">intros</span> ?????????? <span class="id">IH1</span> ? <span class="id">IH2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">intros</span> ????????????? <span class="id">IH</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">intros</span> * <span class="id">Findcl</span> <span class="id">Findmth</span> ?? <span class="id">IH</span> <span class="id">Hrvos</span> ? * <span class="id">Findcl</span>' <span class="id">Findmth</span>']; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">inversion_clear</span> <span class="id">WTs</span> <span class="kwd">as</span> [| | | |????????? <span class="id">Findcl</span> <span class="id">Findmth</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">inv</span> <span class="id">NoNaked</span>; <span class="tactic">simpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;=&nbsp;e&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_assign_match_states">exec_assign_match_states</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#expr_correct">expr_correct</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;state(x)&nbsp;=&nbsp;e&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#evall_self_field">evall_self_field</a></span> <span class="kwd">as</span> (?&amp;?&amp; <span class="id">Hofs</span>' &amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_mems">c_mems</a></span> <span class="id">owner</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">and</span> <span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_assign_state_mem">match_states_assign_state_mem</a></span> <span class="kwd">with</span> (4 := <span class="id">it</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">m</span>' &amp; ? &amp; <span class="id">Hofs</span> &amp; ? &amp; <span class="id">Hmem</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hofs</span> <span class="kwd">in</span> <span class="id">Hofs</span>'; <span class="id">inv</span> <span class="id">Hofs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>', <span class="id">le</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#expr_correct">expr_correct</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#type_pres">type_pres</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.add_unsigned">Ptrofs.add_unsigned</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;xs&nbsp;=&nbsp;(i&nbsp;:&nbsp;c).f(es)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">take</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">Ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.stmt_call_eval_suffix">stmt_call_eval_suffix</a></span> <span class="kwd">in</span> <span class="id">Ev</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Correctness.html#vo">vo</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">vos</span>) <span class="kwd">as</span> <span class="id">HnNone</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Inv.no_vars_in_args_spec">no_vars_in_args_spec</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="tactic">exists</span> <span class="id">vs</span>, <span class="id">vos</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span>) <span class="kwd">as</span> (<span class="id">vs</span> &amp; ?)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.Common.html#not_None_is_Some_Forall">not_None_is_Some_Forall</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="tactic">exists</span> <span class="id">rvs</span>, <span class="id">rvos</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span>) <span class="kwd">as</span> (<span class="id">rvs</span> &amp;?)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.Common.html#not_None_is_Some_Forall">not_None_is_Some_Forall</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">vo</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vo">vo</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>)) <span class="id">vos</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id">fm</span>)) <span class="kwd">as</span> <span class="id">WTvs</span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span> <span class="kwd">in</span> <span class="id">WTvs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">WTvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">Ev</span> <span class="kwd">as</span> <span class="id">Ev</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">Findcl</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.find_class_chained">find_class_chained</a></span> <span class="kwd">in</span> <span class="id">Findcl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.instance_match">instance_match</a></span> <span class="id">o</span> <span class="id">me</span>) <span class="id">p</span>' <span class="id">cls</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> (?&amp;?&amp; (<span class="id">WTmem</span> &amp; ?) &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTmem</span> <span class="kwd">as</span> [???? <span class="id">WTinsts</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">WTinsts</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.instance_match">instance_match</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WTinsts</span> <span class="kwd">as</span> [???? <span class="id">Find</span>|??????? <span class="id">Find</span> <span class="id">Findcl</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Find</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Findcl</span> <span class="kwd">in</span> <span class="id">Findcl</span>'; <span class="id">inv</span> <span class="id">Findcl</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.pres_sem_stmt_call">pres_sem_stmt_call</a></span> <span class="kwd">in</span> <span class="id">Ev</span>' <span class="kwd">as</span> (?&amp; <span class="id">WTrvos</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span> <span class="kwd">in</span> <span class="id">WTrvos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.exp_eval">exp_eval</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span> <span class="kwd">in</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Ev</span> <span class="kwd">as</span> [??????????? <span class="id">Findcl</span>' <span class="id">Findmth</span>' ?? <span class="id">Hrvs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Findcl</span> <span class="kwd">in</span> <span class="id">Findcl</span>'; <span class="id">inv</span> <span class="id">Findcl</span>'; <span class="tactic">rewrite</span> <span class="id">Findmth</span> <span class="kwd">in</span> <span class="id">Findmth</span>'; <span class="id">inv</span> <span class="id">Findmth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span> <span class="kwd">in</span> <span class="id">Hrvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_binded_funcall">exec_binded_funcall</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exprs_correct">exprs_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in_instance_methods">occurs_in_instance_methods</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_class_find_method">wt_class_find_method</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_program_find_class">wt_program_find_class</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_nodupobjs">c_nodupobjs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#type_pres">type_pres</a></span>; <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;s1&nbsp;;&nbsp;s2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in_comp">occurs_in_comp</a></span> <span class="kwd">in</span> <span class="id">Occurs</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IH1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IH2</span> <span class="kwd">as</span> (<span class="id">m</span>' &amp; <span class="id">le</span>' &amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>', <span class="id">le</span>'; <span class="tactic">intuition</span>; <span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt">exec_stmt</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;if&nbsp;e&nbsp;then&nbsp;s1&nbsp;else&nbsp;s2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cop.html#bool_val">Cop.bool_val</a></span> <span class="id">v</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_exp">translate_exp</a></span> <span class="id">owner</span> <span class="id">caller</span> <span class="id">cond</span>)) <span class="id">m</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#type_pres">type_pres</a></span>; <span class="id">take</span> (<span class="id">_</span> = <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.bool_type">bool_type</a></span>) <span class="id">and</span> <span class="tactic">rewrite</span> <span class="id">it</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#occurs_in_ite">occurs_in_ite</a></span> <span class="kwd">in</span> <span class="id">Occurs</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">edestruct</span> <span class="id">IH</span> <span class="kwd">as</span> (<span class="id">m</span>' &amp; <span class="id">le</span>' &amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>', <span class="id">le</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sifthenelse">exec_Sifthenelse</a></span> <span class="kwd">with</span> (<span class="id">b</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#expr_correct">expr_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">edestruct</span> <span class="id">IH</span> <span class="kwd">as</span> (<span class="id">m</span>' &amp; <span class="id">le</span>' &amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>', <span class="id">le</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sifthenelse">exec_Sifthenelse</a></span> <span class="kwd">with</span> (<span class="id">b</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#expr_correct">expr_correct</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;skip&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id">m</span>, <span class="id">le</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>; <span class="tactic">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;funcall&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.find_class_sub_same">find_class_sub_same</a></span> <span class="kwd">in</span> <span class="id">Findcl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Findcl</span>' <span class="kwd">in</span> <span class="id">Findcl</span>; <span class="id">inv</span> <span class="id">Findcl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Findmth</span>' <span class="kwd">in</span> <span class="id">Findmth</span>; <span class="id">inv</span> <span class="id">Findmth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id">fm</span>))) <span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_nodupin">m_nodupin</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.adds_opt_is_adds">Env.adds_opt_is_adds</a></span> <span class="kwd">in</span> <span class="id">IH</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_stmt">wt_stmt</a></span> <span class="id">prog</span>' (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_objs">c_objs</a></span> <span class="id">cls</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_mems">c_mems</a></span> <span class="id">cls</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.meth_vars">meth_vars</a></span> <span class="id">fm</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span> <span class="id">fm</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_class_find_method">wt_class_find_method</a></span>; <span class="tactic">eauto</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_program_find_class">wt_program_find_class</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Inv.No_Naked_Vars">No_Naked_Vars</a></span> <span class="id">fm</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span>)) <span class="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.Forall_methods_find">Forall_methods_find</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.NO_NAKED_VARS">NO_NAKED_VARS</a></span>); <span class="tactic">eauto</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;return&nbsp;values&nbsp;are&nbsp;well-typed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id">rvs</span> <span class="id">fm</span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)) <span class="kwd">as</span> <span class="id">WTrvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">v</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">vs</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id">fm</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">v</span> <span class="id">xt</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_valo">wt_valo</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">rvs</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id">fm</span>)) <span class="kwd">as</span> <span class="id">WTrvs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.pres_sem_stmt_call">pres_sem_stmt_call</a></span> <span class="kwd">with</span> (<span class="id">me</span> := <span class="id">me</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span> <span class="kwd">in</span> <span class="id">WTrvs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">WTrvs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;find&nbsp;the&nbsp;Clight&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#methods_corres">methods_corres</a></span> <span class="kwd">as</span> (<span class="id">fun_b</span> &amp; <span class="id">fd</span> &amp; ?&amp;?&amp; <span class="id">Mspec</span>); <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;prepare&nbsp;the&nbsp;entry&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">Mspec</span> <span class="kwd">as</span> <span class="id">Entry</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#function_entry_match_states">function_entry_match_states</a></span> <span class="kwd">with</span> (<span class="id">me</span> := <span class="id">me</span>) <span class="kwd">in</span> <span class="id">Entry</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fn_body">fn_body</a></span> <span class="id">fd</span> = <span class="id"><a href="Velus.ObcToClight.Generation.html#return_with">return_with</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#translate_stmt">translate_stmt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span>) <span class="id">cls</span> <span class="id">fm</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_body">m_body</a></span> <span class="id">fm</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="id">fm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> <span class="id">t</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#make_in_arg">make_in_arg</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#t">t</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Body</span> <span class="tactic">by</span> (<span class="tactic">destruct</span> <span class="id">Mspec</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?); <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fn_return">fn_return</a></span> <span class="id">fd</span> = <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="id">fm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tvoid">Tvoid</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> <span class="id">t</span> =&gt; <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#t">t</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tvoid">Tvoid</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Return</span> <span class="tactic">by</span> (<span class="tactic">destruct</span> <span class="id">Mspec</span> <span class="kwd">as</span> (?&amp;?&amp;?); <span class="tactic">auto</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span>, <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="kwd">in</span> *; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.suffix">suffix</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.find_class_sub">find_class_sub</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">gcenv</span>; <span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method_name">find_method_name</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id">fm</span>) <span class="kwd">as</span> (<span class="id">a</span>, <span class="id">ta</span>) (?,?) ? : <span class="id">Hout</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">intros</span> * <span class="id">Hmem</span>|<span class="tactic">intros</span> * <span class="id">Hmem</span>|<span class="tactic">intros</span> * ? <span class="id">Hmem</span>];<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;entry&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Entry</span> <span class="kwd">as</span> (<span class="id">e_f</span> &amp; <span class="id">le_f</span> &amp; <span class="id">m_f</span> &amp; ? &amp; <span class="id">Hm_f</span>); <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmem</span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;state&nbsp;after&nbsp;evaluating&nbsp;the&nbsp;body&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IH</span> <span class="kwd">as</span> (<span class="id">m</span>' &amp; <span class="id">le</span>' &amp; ? &amp; <span class="id">Hm</span>'); <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hm_f</span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;free&nbsp;the&nbsp;environment&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_states_conj">match_states_conj</a></span> <span class="kwd">in</span> <span class="id">Hm</span>' <span class="kwd">as</span> (<span class="id">Hm</span>' &amp;?);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap34">sep_swap34</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, &lt;-<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span> <span class="kwd">in</span> <span class="id">Hm</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#decidable_subrep">decidable_subrep</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#free_exists">free_exists</a></span> <span class="kwd">in</span> <span class="id">Hm</span>' <span class="kwd">as</span> (<span class="id">m</span>'' &amp; ?&amp; <span class="id">Hm</span>'').<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;output&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> <span class="id">m</span>'', <span class="id">fd</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">rewrite</span> <span class="id">Body</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sseq_1">exec_Sseq_1</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt">exec_stmt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">rewrite</span> <span class="id">Return</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">do</span> 2 <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_drop2">sep_drop2</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;one&nbsp;output&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;get&nbsp;the&nbsp;return&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep_singleton">outputrep_singleton</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span> <span class="kwd">in</span> <span class="id">Hrvos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hrvos</span> <span class="kwd">as</span> [|? <span class="id">rv</span> ?? <span class="id">Hrv</span> <span class="id">Hrvos</span>']; <span class="id">inv</span> <span class="id">Hrvos</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTrvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#match_var">match_var</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hrv</span>; <span class="tactic">rewrite</span> <span class="id">Hrv</span> <span class="kwd">in</span> <span class="id">Hm</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hm</span>'' <span class="kwd">as</span> (<span class="id">Hm</span>'' &amp; <span class="id">Eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">E</span>; <span class="id">inv</span> <span class="id">Eq</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>'', <span class="id">fd</span>, <span class="id">rv</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">rewrite</span> <span class="id">Body</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sseq_1">exec_Sseq_1</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt">exec_stmt</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">rewrite</span> <span class="id">Return</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.sem_cast_same">sem_cast_same</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ta</span>; <span class="tactic">simpl</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_drop2">sep_drop2</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;multiple&nbsp;output&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;return&nbsp;values&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span> <span class="kwd">in</span> <span class="id">Hrvos</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">ve</span>', <span class="id">m</span>'', <span class="id">fd</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">rewrite</span> <span class="id">Body</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sseq_1">exec_Sseq_1</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt">exec_stmt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">rewrite</span> <span class="id">Return</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (1 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id">fm</span>))%<span class="id">nat</span> <span class="tactic">by</span> (<span class="tactic">rewrite</span> <span class="id">Hout</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#outputrep_notnil">outputrep_notnil</a></span> <span class="kwd">in</span> <span class="id">Hm</span>'' <span class="kwd">as</span> (?&amp;?&amp; <span class="id">E</span> &amp; <span class="id">Hm</span>'' &amp;?); <span class="tactic">auto</span>; <span class="id">inv</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>, &lt;-<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_drop2">sep_drop2</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span> <span class="kwd">in</span> <span class="id">Hm</span>''.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="stmt_call_correctness">stmt_call_correctness</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">me</span> <span class="id">cid</span> <span class="id">fid</span> <span class="id">c</span> <span class="id">f</span> <span class="id">vs</span> <span class="id">rvs</span> <span class="id">prog</span>' <span class="id">me</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span>) <span class="id">me</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cid">cid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>, <span class="id">prog</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#fid">fid</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id">prog</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#c">c</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id">me</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#mutual_correctness">mutual_correctness</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Correctness of the whole program                            *</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.c_main">c_main</a></span>     := <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#c_main">c_main</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.prog_main">prog_main</a></span>  := <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#prog_main">prog_main</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.main_step">main_step</a></span>  := <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#main_step">main_step</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.main_reset">main_reset</a></span> := <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#main_reset">main_reset</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.main_f">main_f</a></span>     := <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#main_f">main_f</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="find_main_class">find_main_class</a></span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class">find_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog_main">prog_main</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#find_main_class">find_main_class</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="find_main_step">find_main_step</a></span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#find_main_step">find_main_step</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="find_main_reset">find_main_reset</a></span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method">find_method</a></span> <span class="id"><a href="Velus.Ident.html#Ids.reset">reset</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.c_methods">c_methods</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_reset">main_reset</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#find_main_reset">find_main_reset</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">find_main_class</span> <span class="id">find_main_step</span> <span class="id">find_main_reset</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="bounded_main_class">bounded_main_class</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#bounded_struct_of_class">bounded_struct_of_class</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#bounded_struct_of_class">bounded_struct_of_class</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#make_members_co">make_members_co</a></span> <span class="kwd">as</span> (<span class="id">co</span> &amp;?&amp; <span class="id">Kind</span> &amp; &lt;- &amp;?&amp;?&amp; <span class="id">Size</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_consistent_sizeof">co_consistent_sizeof</a></span> <span class="kwd">in</span> <span class="id">Size</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#Consistent">Consistent</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Kind</span> <span class="kwd">in</span> <span class="id">Size</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Size</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#align_le">align_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_alignof_two_p">co_alignof_two_p</a></span> <span class="id">co</span>) <span class="kwd">as</span> (?&amp;-&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#two_power_nat_pos">two_power_nat_pos</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">bounded_main_class</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="reset_correct">reset_correct</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">me0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.mempty">mempty</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.Ident.html#Ids.reset">reset</a></span> [] <span class="id"><a href="Velus.ObcToClight.Correctness.html#me0">me0</a></span> [] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_reset">main_reset</a></span> [] [] <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.mempty">mempty</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me0">me0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Sem</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#stmt_call_correctness">stmt_call_correctness</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Sem</span> <span class="kwd">as</span> [??????????? <span class="id">Findcl</span> <span class="id">Findmth</span> <span class="id">Len</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_class">find_main_class</a></span> <span class="kwd">in</span> <span class="id">Findcl</span>; <span class="id">inv</span> <span class="id">Findcl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_reset">find_main_reset</a></span> <span class="kwd">in</span> <span class="id">Findmth</span>; <span class="id">inv</span> <span class="id">Findmth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_reset">main_reset</a></span>); <span class="tactic">try</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Len</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="step_correct">step_correct</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">me</span> <span class="id">me</span>' <span class="id">vs</span> <span class="id">rvs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span>) <span class="id">me</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog_main">prog_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id">me</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Sem</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#stmt_call_correctness">stmt_call_correctness</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.le_main">le_main</a></span>    := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_f">main_f</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fn_temps">fn_temps</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.out_step">out_step</a></span>   := <span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.out">out</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.t_out_step">t_out_step</a></span> := <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="main_entry">main_entry</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#m0">m0</a></span> |= <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#lt_dec">lt_dec</a></span> 1 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m1</span> <span class="id">step_b</span> <span class="id">step_co</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_f">main_f</a></span> [] <span class="id"><a href="Velus.ObcToClight.Correctness.html#m0">m0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.out_step">out_step</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.t_out_step">t_out_step</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#empty_env">empty_env</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.le_main">le_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m1">m1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#m1">m1</a></span> |= <span class="id"><a href="Velus.ObcToClight.Correctness.html#P">P</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.vempty">vempty</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_f">main_f</a></span> [] <span class="id"><a href="Velus.ObcToClight.Correctness.html#m0">m0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#empty_env">empty_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.le_main">le_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m0">m0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#var_names">var_names</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fn_vars">fn_vars</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_f">main_f</a></span>))) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#norepet_vars_main">norepet_vars_main</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#var_names">var_names</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fn_params">fn_params</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_f">main_f</a></span>))) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#norepet_params_main">norepet_params_main</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#list_disjoint">list_disjoint</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#var_names">var_names</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fn_params">fn_params</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_f">main_f</a></span>)) (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#var_names">var_names</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fn_temps">fn_temps</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_f">main_f</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#disjoint_params_temps_main">disjoint_params_temps_main</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#main_with_output_structure">main_with_output_structure</a></span> <span class="kwd">as</span> (<span class="id">m1</span> &amp; <span class="id">step_b</span> &amp; <span class="id">step_co</span> &amp;?&amp;?&amp; <span class="id">Hm1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_comm">sep_comm</a></span> <span class="kwd">in</span> <span class="id">Hm1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m1</span>, <span class="id">step_b</span>, <span class="id">step_co</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#main_step">main_step</a></span>, <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">omega</span>; <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Trace semantics of reads and writes to volatiles             </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="out_step_env">out_step_env</a></span> (<span class="id">e</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#env">Clight.env</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">b</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#b">b</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#t">t</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> = <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.out_step">out_step</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Remark</span> <span class="id"><a name="out_step_env_no_prefix_glob">out_step_env_no_prefix_glob</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Common.Common.html#not_Some_is_None">not_Some_is_None</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">b</span>, <span class="id">t</span>') <span class="id">Hget</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">He</span> <span class="kwd">in</span> <span class="id">Hget</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Ident.html#Ids.prefix_injective">prefix_injective</a></span> <span class="kwd">in</span> <span class="id">Hget</span> <span class="kwd">as</span> (?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Ident.html#Ids.glob">glob</a></span> &lt;&gt; <span class="id"><a href="Velus.Ident.html#Ids.out">out</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">prove_str_to_pos_neq</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_read">exec_read</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vs</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">le</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#load_in">load_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Traces.html#load_events">load_events</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">le</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">v</span> <span class="id">xt</span> =&gt; <span class="id">le</span>' ! (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">x</span>, ~ <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) -&gt; <span class="id">le</span>' ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span> = <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_nodupin">m_nodupin</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>) <span class="kwd">as</span> <span class="id">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_good_in">m_good_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>) <span class="kwd">as</span> <span class="id">Good</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span>  (<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#volatile_step_in">volatile_step_in</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.WT">WT</a></span>) <span class="kwd">as</span> <span class="id">Vol</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">main_step</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> (<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#main_step">GenerationProperties.main_step</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>)) <span class="kwd">as</span> [|(<span class="id">x</span>, <span class="id">t</span>)]; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">He</span> <span class="id">Hwt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hwt</span> <span class="kwd">as</span> [| <span class="id">v</span> ? <span class="id">vs</span>' ? <span class="id">Hwt_v</span> <span class="id">Hwts</span> ]; <span class="tactic">inversion_clear</span> <span class="id">Hnodup</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Traces.html#load_events_nil">load_events_nil</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">econstructor</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion_clear</span> <span class="id">Vol</span> <span class="kwd">as</span> [|? ? <span class="id">Findx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Findx</span> <span class="kwd">as</span> (<span class="id">bx</span> &amp; <span class="id">Findx</span> &amp; <span class="id">Volx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Traces.html#load_events_cons">load_events_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="tactic">exists</span> <span class="id">le</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Sbuiltin">Sbuiltin</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#EF_vload">AST.EF_vload</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.type_chunk">type_chunk</a></span> <span class="id">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tcons">Ctypes.Tcons</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tpointer">Tpointer</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#noattr">noattr</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tnil">Ctypes.Tnil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> <span class="id">x</span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span>)) (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tpointer">Tpointer</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.cltype">cltype</a></span> <span class="id">t</span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#noattr">noattr</a></span>)])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="Velus.Traces.html#load_event_of_val">load_event_of_val</a></span> <span class="id">v</span> (<span class="id">x</span>, <span class="id">t</span>)] <span class="id">le</span>' <span class="id">m</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">le</span>' ! <span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#y">y</a></span> &lt;&gt; <span class="id">x</span> -&gt; <span class="id">le</span>' ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#y">y</a></span> = <span class="id">le</span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#y">y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">le</span>' &amp; <span class="id">Hload</span> &amp; <span class="id">Hgss_le</span>' &amp; <span class="id">Hgso_le</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#set_opttemp">set_opttemp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) <span class="id">v</span> <span class="id">le</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">now</span> <span class="tactic">apply</span>  <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">now</span> <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Eaddrof">eval_Eaddrof</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Evar_global">eval_Evar_global</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env_no_prefix_glob">out_step_env_no_prefix_glob</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cop.html#sem_cast">Cop.sem_cast</a></span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Traces.html#load_event_of_val">load_event_of_val</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.wt_val_load_result">wt_val_load_result</a></span> <span class="kwd">with</span> (<span class="id">ty</span>:=<span class="id">t</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#volatile_load_vol">volatile_load_vol</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Traces.html#eventval_of_val_match">eventval_of_val_match</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">xt</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span> <span class="id">l</span> -&gt; <span class="id"><a href="Velus.Ident.html#Ids.AtomOrGensym">AtomOrGensym</a></span> (<span class="id"><a href="Velus.Common.CommonPS.html#PSP.of_list">PSP.of_list</a></span> <span class="id"><a href="Velus.Ident.html#Ids.gensym_prefs">gensym_prefs</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">Good</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IHl</span> <span class="kwd">with</span> (<span class="id">le</span> := <span class="id">le</span>') <span class="kwd">as</span> (<span class="id">le</span>'' &amp; ? &amp; <span class="id">Hgss</span> &amp; <span class="id">Hgso</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">le</span>''; <span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sseq_1">exec_Sseq_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hgso</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Hnot_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Decidable.html#not_or">Decidable.not_or</a></span> <span class="kwd">in</span> <span class="id">Hnot_in</span> <span class="kwd">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hgso</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_write_multiple">exec_write_multiple</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">outs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>))%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rvs</span> <span class="id">e</span> <span class="id">ve</span> <span class="id">le</span> <span class="id">m</span> <span class="id">step_b</span> <span class="id">step_co</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.out_step">out_step</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.t_out_step">t_out_step</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xt</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#write_multiple_outs">write_multiple_outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Traces.html#store_events">store_events</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">Incl</span> <span class="id">Len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#is_volatile">is_volatile</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>) <span class="id">outs</span>) <span class="kwd">as</span> <span class="id">Vol</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_incl">Forall_incl</a></span> <span class="kwd">with</span> (2 := <span class="id">Incl</span>), <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#volatile_step_out">volatile_step_out</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.AtomOrGensym">AtomOrGensym</a></span> (<span class="id"><a href="Velus.Common.CommonPS.html#PSP.of_list">PSP.of_list</a></span> <span class="id"><a href="Velus.Ident.html#Ids.gensym_prefs">gensym_prefs</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">outs</span>)) <span class="kwd">as</span> <span class="id">Good</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_map">Forall_map</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_incl">Forall_incl</a></span> <span class="kwd">with</span> (2 := <span class="id">Incl</span>), <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_good_out">m_good_out</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">outs</span> <span class="kwd">as</span> [|(<span class="id">x</span>, <span class="id">t</span>)]; <span class="tactic">intros</span> * <span class="id">Nodup</span> <span class="id">He</span> <span class="id">WTrvs</span> <span class="id">Hrco</span> <span class="id">Findstr</span> <span class="id">Hrvs</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Traces.html#store_events_nil">store_events_nil</a></span>; <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion_clear</span> <span class="id">Vol</span> <span class="kwd">as</span> [|? ? <span class="id">Findx</span>];  <span class="tactic">destruct</span> <span class="id">Findx</span> <span class="kwd">as</span> (<span class="id">bx</span> &amp; <span class="id">Findx</span> &amp; <span class="id">Volx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Good</span> <span class="kwd">as</span> [|?? <span class="id">Good_x</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">WTrvs</span> <span class="kwd">as</span> [|<span class="id">rv</span> ? <span class="id">rvs</span>']; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hrvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Nodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Incl</span>; <span class="tactic">apply</span> <span class="id">incl_cons</span>' <span class="kwd">in</span> <span class="id">Incl</span> <span class="kwd">as</span> (<span class="id">Hin</span> &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#main_step">main_step</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">Hm</span> <span class="kwd">as</span> <span class="id">Hm</span>'; <span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span> <span class="kwd">in</span> <span class="id">Hm</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#eval_inst_field">eval_inst_field</a></span> <span class="kwd">in</span> <span class="id">Hm</span>'; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_class">find_main_class</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_step">find_main_step</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Traces.html#store_events_cons">store_events_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sseq_1">exec_Sseq_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sbuiltin">exec_Sbuiltin</a></span> <span class="kwd">with</span> (<span class="id">vres</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Evar_global">eval_Evar_global</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env_no_prefix_glob">out_step_env_no_prefix_glob</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.sem_cast_same">sem_cast_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#volatile_store_vol">volatile_store_vol</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.wt_val_load_result">wt_val_load_result</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Traces.html#eventval_of_val_match">eventval_of_val_match</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="exec_write">exec_write</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rvs</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">y</span> <span class="id">t</span> =&gt; <span class="tactic">exists</span> <span class="id">rv</span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> = [<span class="id"><a href="Velus.ObcToClight.Correctness.html#rv">rv</a></span>] /\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rv">rv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">outs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">ve</span> <span class="id">step_b</span> <span class="id">step_co</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.out_step">out_step</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.t_out_step">t_out_step</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xt</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#write_out">write_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Traces.html#store_events">store_events</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#rvs">rvs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_good_out">m_good_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>) <span class="kwd">as</span> <span class="id">Good</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#is_volatile">is_volatile</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>)) <span class="kwd">as</span> <span class="id">Vol</span> <span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#volatile_step_out">volatile_step_out</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">He</span> <span class="id">WT_vals</span> <span class="id">Hrep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">rvs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>)) <span class="kwd">as</span> <span class="id">Length</span> <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span>; <span class="tactic">eauto</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="kwd">in</span> <span class="id">Hrep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>) <span class="kwd">as</span> (<span class="id">y</span>, <span class="id">t</span>) (<span class="id">y</span>', <span class="id">t</span>') <span class="id">outs</span> : <span class="id">Out</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> <span class="id">rvs</span> <span class="kwd">as</span> <span class="id">rv</span> <span class="id">rv</span>' <span class="id">rvs</span>' : <span class="id">Rvs</span>; <span class="id">contr</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;output&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Traces.html#store_events_nil">store_events_nil</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt">exec_stmt</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;one&nbsp;output&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#write_out">write_out</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Vol</span> <span class="kwd">as</span> [|? ? <span class="id">Findy</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Findy</span> <span class="kwd">as</span> (<span class="id">b_y</span> &amp; <span class="id">Findy</span> &amp; <span class="id">Voly</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">WT_vals</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hrep</span> <span class="kwd">as</span> (?&amp;<span class="id">E</span>&amp;?); <span class="id">inv</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sbuiltin">exec_Sbuiltin</a></span> <span class="kwd">with</span> (<span class="id">vres</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="tactic">econstructor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Evar_global">eval_Evar_global</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env_no_prefix_glob">out_step_env_no_prefix_glob</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.sem_cast_same">sem_cast_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#volatile_store_vol">volatile_store_vol</a></span>; <span class="tactic">auto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.Interface.html#Op.wt_val_load_result">wt_val_load_result</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Traces.html#eventval_of_val_match">eventval_of_val_match</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;multiple&nbsp;outputs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">Hrep</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#write_out">write_out</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_write_multiple">exec_write_multiple</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id">Out</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl_refl">incl_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Out</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id">Out</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_nodupout">m_nodupout</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<div class="doc">Clight version of dostep                                    *</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.dostep">dostep</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variables</span> (<span class="id"><a name="PRESERVATION.dostep.sb">sb</a></span>     : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#block">block</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.dostep.step_f">step_f</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function">function</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variables</span> <span class="id"><a name="PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a name="PRESERVATION.dostep.outs">outs</a></span>: <span class="id"><a href="Velus.ObcToClight.Interface.html#IStr.stream">IStr.stream</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.val">val</a></span>).<br/>
<br/>
<div class="doc">This coinductive predicate describes the logical behavior of
        the <span class="bracket"><span class="id">while</span></span> loop. </div>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="dostep">dostep</a></span> (<span class="id">e</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#env">Clight.env</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="DoStep">DoStep</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_f">step_f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> :: <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> = [<span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_f">step_f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> :: <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">ys</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">ve</span> <span class="id">step_b</span> <span class="id">step_co</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_f">step_f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> :: <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span> :: <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.out_step">out_step</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.t_out_step">t_out_step</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xt</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#ys">ys</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep">dostep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep">dostep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.dostep.Dostep_coind">Dostep_coind</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.dostep.Dostep_coind.R">R</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.dostep.Dostep_coind.e">e</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#env">Clight.env</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.dostep.Dostep_coind.He">He</a></span> : <span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Dostep_coind.e">e</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="dostepCase">dostepCase</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Dostep_coind.R">R</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_f">step_f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> :: <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> = [<span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_f">step_f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> :: <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>' <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">ys</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">ve</span> <span class="id">step_b</span> <span class="id">step_co</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_f">step_f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> :: <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span> :: <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Dostep_coind.e">e</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.out_step">out_step</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.t_out_step">t_out_step</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xt</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#ys">ys</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">m</span>' |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ve">ve</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Dostep_coind.R">R</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id">m</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="dostep_coind">dostep_coind</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#dostepCase">dostepCase</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Dostep_coind.R">R</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> -&gt; <span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep">dostep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Dostep_coind.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">DoStep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">COINDHYP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? ? <span class="id">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id">DoStep</span> <span class="id">_</span> <span class="id">_</span> <span class="id">HR</span>) <span class="kwd">as</span> <span class="id">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">decompose</span> <span class="id">record</span> <span class="id">Hstep</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Dostep_coind">Dostep_coind</a></span>.<br/>
<br/>
<br/>
<div class="doc">dostep implies a step of the body loop                      *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Remark</span> <span class="id"><a name="out_step_env_no_prefix_fun">out_step_env_no_prefix_fun</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#f">f</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#x">x</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Common.Common.html#not_Some_is_None">not_Some_is_None</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">b</span>, <span class="id">t</span>') <span class="id">Hget</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">He</span> <span class="kwd">in</span> <span class="id">Hget</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step">out_step</a></span> <span class="kwd">in</span> <span class="id">Hget</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="kwd">in</span> <span class="id">Hget</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Ident.html#Ids.prefix_injective">prefix_injective</a></span> <span class="kwd">in</span> <span class="id">Hget</span> <span class="kwd">as</span> (?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">out_step_env_no_prefix_fun</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.dostep.step_name">step_name</a></span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.dostep.self_addr">self_addr</a></span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Eaddrof">Eaddrof</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span> <span class="id"><a href="Velus.Ident.html#Ids.main_id">main_id</a></span>)) (<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst">type_of_inst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.dostep.Find_self">Find_self</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_glob">prefix_glob</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix">prefix</a></span> <span class="id"><a href="Velus.Ident.html#Ids.self">self</a></span> <span class="id"><a href="Velus.Ident.html#Ids.main_id">main_id</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span>.<br/>
<br/>
<div class="doc">evaluate the self parameter </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="eval_expr_self">eval_expr_self</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.self_addr">self_addr</a></span> (<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Evar_global">eval_Evar_global</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env_no_prefix_glob">out_step_env_no_prefix_glob</a></span>; <span class="tactic">auto</span>; <span class="tactic">apply</span> <span class="id">self_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">eval_expr_self</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.dostep.Hwt_ins">Hwt_ins</a></span>  : <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.dostep.Hwt_outs">Hwt_outs</a></span> : <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.dostep.StepSpec">StepSpec</a></span> : <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec">method_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_f">step_f</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_body">exec_body</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">n</span> <span class="id">m_n</span> <span class="id">le_n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep">dostep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m_n">m_n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">le_Sn</span> <span class="id">m_Sn</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le_n">le_n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m_n">m_n</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#main_loop_body">main_loop_body</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Traces.html#load_events">load_events</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id"><a href="Velus.Traces.html#store_events">store_events</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#le_Sn">le_Sn</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m_Sn">m_Sn</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep">dostep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#m_Sn">m_Sn</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Dostep</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;loop&nbsp;predicate&nbsp;gives&nbsp;the&nbsp;expected&nbsp;memory&nbsp;after&nbsp;a&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Dostep</span> <span class="kwd">as</span> [?? <span class="id">m_Sn</span> <span class="id">EvalStep</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;load&nbsp;in&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_read">exec_read</a></span> <span class="kwd">with</span> (<span class="id">le</span> := <span class="id">le_n</span>) (<span class="id">m</span> := <span class="id">m_n</span>) <span class="kwd">as</span> (<span class="id">le1</span> &amp; ?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#methods_corres">methods_corres</a></span> <span class="kwd">with</span> (4 := <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_step">find_main_step</a></span>) <span class="kwd">as</span> (<span class="id">ptr_step</span> &amp; <span class="id">f</span> &amp; <span class="id">Get_s</span> &amp; <span class="id">Get_f</span> &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">f</span> = <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_f">step_f</a></span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec_eq">method_spec_eq</a></span>; <span class="tactic">eauto</span>); <span class="tactic">subst</span> <span class="id">f</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;evaluate&nbsp;the&nbsp;lvalue&nbsp;function&nbsp;name&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id">e</span> <span class="id">le1</span> <span class="id">m_n</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_name">step_name</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tfunction">Tfunction</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#targs">targs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#tres">tres</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cc">cc</a></span>)) (<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id">ptr_step</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Evar_global">eval_Evar_global</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#deref_loc_reference">deref_loc_reference</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;evaluate&nbsp;the&nbsp;arguments&nbsp;of&nbsp;the&nbsp;step&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">v</span> <span class="id">xt</span> =&gt; <span class="id">le1</span> ! (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#xt">xt</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#v">v</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id">e</span> <span class="id">le1</span> <span class="id">m_n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#make_in_arg">make_in_arg</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#list_type_to_typelist">list_type_to_typelist</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#typeof">Clight.typeof</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#make_in_arg">make_in_arg</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#vs">vs</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) <span class="kwd">as</span> [|(<span class="id">x</span>, <span class="id">t</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">Hvals_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hvals_in</span> <span class="kwd">as</span> [| <span class="id">cin</span> ? <span class="id">cins</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hdef</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hdef</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Econs">eval_Econs</a></span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">cin</span>)(<span class="id">v2</span> := <span class="id">cin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Op.sem_cast_same">sem_cast_same</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;step&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="tactic">exists</span> <span class="id">le2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id">e</span> <span class="id">le1</span> <span class="id">m_n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.Generation.html#step_call">step_call</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.ObcToClight.Generation.html#make_in_arg">make_in_arg</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>)) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le2">le2</a></span> <span class="id">m_Sn</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">match</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>), <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [(<span class="id">x</span>, <span class="id">_</span>)], [<span class="id">v</span>] =&gt; <span class="id"><a href="Velus.ObcToClight.Correctness.html#le2">le2</a></span> ! <span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">le2</span> &amp; <span class="id">Hcall</span> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#step_call">step_call</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">as</span> (?, ?) ? ? : <span class="id">Out</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="kwd">in</span> <span class="id">EvalStep</span>; <span class="tactic">rewrite</span> <span class="id">Out</span> <span class="kwd">in</span> <span class="id">EvalStep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eexists</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Scall">exec_Scall</a></span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#type_of_function">type_of_function</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.StepSpec">StepSpec</a></span> <span class="kwd">as</span> (<span class="id">P_f</span> &amp; <span class="id">R_f</span> &amp; <span class="id">CC_f</span> &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">P_f</span>, <span class="id">R_f</span>, <span class="id">CC_f</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span>; <span class="tactic">rewrite</span> <span class="id">Out</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#type_of_params_make_in_arg">type_of_params_make_in_arg</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">EvalStep</span> <span class="kwd">as</span> (? &amp; <span class="id">E</span> &amp; ?); <span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Scall">exec_Scall</a></span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#type_of_function">type_of_function</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.StepSpec">StepSpec</a></span> <span class="kwd">as</span> (<span class="id">P_f</span> &amp; <span class="id">R_f</span> &amp; <span class="id">CC_f</span> &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">P_f</span>, <span class="id">R_f</span>, <span class="id">CC_f</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span>; <span class="tactic">rewrite</span> <span class="id">Out</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#type_of_params_make_in_arg">type_of_params_make_in_arg</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">EvalStep</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Scall">exec_Scall</a></span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> 7 <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#type_of_function">type_of_function</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.StepSpec">StepSpec</a></span> <span class="kwd">as</span> (<span class="id">P_f</span> &amp; <span class="id">R_f</span> &amp; <span class="id">CC_f</span> &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">P_f</span>, <span class="id">R_f</span>, <span class="id">CC_f</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span>; <span class="tactic">rewrite</span> <span class="id">Out</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#type_of_params_make_in_arg">type_of_params_make_in_arg</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method_name">find_method_name</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#type_of_inst_p">type_of_inst_p</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span> <span class="id">le2</span>, <span class="id">m_Sn</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Sseq_1">exec_Sseq_1</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;write&nbsp;out&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_write">exec_write</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span>; <span class="id">destruct_list</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) <span class="kwd">as</span> (?, ?) ? ?: <span class="id">Outs</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="kwd">in</span> <span class="id">EvalStep</span>; <span class="tactic">rewrite</span> <span class="id">Outs</span> <span class="kwd">in</span> <span class="id">EvalStep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">EvalStep</span> <span class="kwd">as</span> (?&amp; <span class="id">E</span> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">EvalStep</span> <span class="kwd">as</span> (<span class="id">ve</span> &amp; <span class="id">step_b</span> &amp; <span class="id">step_co</span> &amp; ?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">ve</span>, <span class="id">step_b</span>, <span class="id">step_co</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.dostep.MainCorrectness">MainCorrectness</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variables</span> (<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.me0">me0</a></span>     : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.menv">menv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.reset_f">reset_f</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function">function</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.e">e</a></span>       : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#env">Clight.env</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.m_main">m_main</a></span>  : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#mem">mem</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.ResetCall">ResetCall</a></span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.mempty">mempty</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.Ident.html#Ids.reset">reset</a></span> [] <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.me0">me0</a></span> [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.WTme0">WTme0</a></span>     : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.me0">me0</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog_main">prog_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.StepLoop">StepLoop</a></span>  : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.loop_call">loop_call</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) 0 <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.me0">me0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.ResetSpec">ResetSpec</a></span> : <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec">method_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_reset">main_reset</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.reset_f">reset_f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.He">He</a></span>        : <span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.e">e</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.Hm_main">Hm_main</a></span>   : <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#lt_dec">lt_dec</a></span> 1 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">step_b</span> <span class="id">step_co</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.e">e</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.out_step">out_step</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.t_out_step">t_out_step</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.m_main">m_main</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.mempty">mempty</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.vempty">vempty</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.m_main">m_main</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.mempty">mempty</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="reset_no_output">reset_no_output</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_reset">main_reset</a></span> = [].<br/>
<div class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">ResetCall</span> <span class="kwd">as</span> [??????????? <span class="id">Findcl</span> <span class="id">Findmth</span> ?? <span class="id">Houts</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_class">find_main_class</a></span> <span class="kwd">in</span> <span class="id">Findcl</span>; <span class="id">inv</span> <span class="id">Findcl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_reset">find_main_reset</a></span> <span class="kwd">in</span> <span class="id">Findmth</span>; <span class="id">inv</span> <span class="id">Findmth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span> <span class="kwd">in</span> <span class="id">Houts</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#main_reset">main_reset</a></span>; <span class="id">inv</span> <span class="id">Houts</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="reset_no_input">reset_no_input</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_reset">main_reset</a></span> = [].<br/>
<div class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">ResetCall</span> <span class="kwd">as</span> [??????????? <span class="id">Findcl</span> <span class="id">Findmth</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_class">find_main_class</a></span> <span class="kwd">in</span> <span class="id">Findcl</span>; <span class="id">inv</span> <span class="id">Findcl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_reset">find_main_reset</a></span> <span class="kwd">in</span> <span class="id">Findmth</span>; <span class="id">inv</span> <span class="id">Findmth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_reset">main_reset</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Correctness of dostep relatively to loop_call               *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="dostep_imp">dostep_imp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#eval_funcall_fe">eval_funcall_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.m_main">m_main</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.reset_f">reset_f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span>] <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m0">m0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep">dostep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.e">e</a></span> 0 <span class="id"><a href="Velus.ObcToClight.Correctness.html#m0">m0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;reset&nbsp;correctness&nbsp;preparation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.ResetCall">ResetCall</a></span> <span class="kwd">as</span> <span class="id">ResetCall</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#reset_correct">reset_correct</a></span> <span class="kwd">in</span> <span class="id">ResetCall</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span>, <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="kwd">in</span> <span class="id">ResetCall</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#reset_no_output">reset_no_output</a></span> <span class="kwd">in</span> <span class="id">ResetCall</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">ResetCall</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> <span class="id">Hm_main</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;prepare&nbsp;the&nbsp;coinduction&nbsp;relation&nbsp;in&nbsp;advance&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">R</span> := <span class="kwd">fun</span> <span class="id">n</span> <span class="id">m</span> =&gt; <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.loop_call">loop_call</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog_main">prog_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">me</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.loop_call">loop_call</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog_main">prog_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> 0 )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">me</span> <span class="id">step_b</span> <span class="id">step_co</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.loop_call">loop_call</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog_main">prog_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> ! (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.e">e</a></span> ! <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.out_step">out_step</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.t_out_step">t_out_step</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> |= <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#staterep">staterep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me">me</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.sb">sb</a></span> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep">fieldsrep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.gcenv">gcenv</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.vempty">vempty</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_co">step_co</a></span>) <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_b">step_b</a></span>)).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#dostepCase">dostepCase</a></span> <span class="id">R</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.e">e</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">R</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#dostepCase">dostepCase</a></span>, <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">n</span> <span class="id">m_n</span> <span class="id">Spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_list</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>) <span class="kwd">as</span> (?,?) (?,?) ? : <span class="id">Hout</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">destruct</span> <span class="id">Spec</span> <span class="kwd">as</span> (? &amp; <span class="id">Dostep</span> &amp; <span class="id">Hwt</span> &amp; <span class="id">Hm_n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">destruct</span> <span class="id">Spec</span> <span class="kwd">as</span> (? &amp; <span class="id">Dostep</span> &amp; <span class="id">Hwt</span> &amp; <span class="id">Hm_n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">destruct</span> <span class="id">Spec</span> <span class="kwd">as</span> (? &amp; <span class="id">step_b</span>' &amp; <span class="id">step_co</span>' &amp; <span class="id">Dostep</span> &amp; <span class="id">Hwt</span> &amp; ? &amp; ? &amp; <span class="id">Hm_n</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Dostep</span> <span class="kwd">as</span> [? <span class="id">me_n</span> <span class="id">me_Sn</span> <span class="id">EvalStep</span> <span class="id">dostep</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id">me_Sn</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog_main">prog_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.pres_sem_stmt_call">pres_sem_stmt_call</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span>); <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>; <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Hwt_ins">Hwt_ins</a></span>);<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;step&nbsp;correctness&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#step_correct">step_correct</a></span> <span class="kwd">in</span> <span class="id">EvalStep</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#call_spec">call_spec</a></span>, <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span> <span class="kwd">in</span> <span class="id">EvalStep</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hout</span> <span class="kwd">in</span> <span class="id">EvalStep</span>; <span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span> <span class="kwd">in</span> <span class="id">EvalStep</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span>, &lt;- <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> <span class="id">Hm_n</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span> <span class="kwd">in</span> <span class="id">Hm_n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">eapply</span> <span class="id">EvalStep</span> <span class="kwd">in</span> <span class="id">Hm_n</span> <span class="kwd">as</span> (<span class="id">m_Sn</span> &amp; <span class="id">step_f</span>' &amp; ? &amp; ? &amp; <span class="id">Hm_Sn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">eapply</span> <span class="id">EvalStep</span> <span class="kwd">in</span> <span class="id">Hm_n</span> <span class="kwd">as</span> (<span class="id">m_Sn</span> &amp; <span class="id">step_f</span>' &amp; ? &amp; ? &amp; ? &amp; ? &amp; <span class="id">Hm_Sn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">eapply</span> <span class="id">EvalStep</span> <span class="kwd">in</span> <span class="id">Hm_n</span> <span class="kwd">as</span> (<span class="id">ve_f</span> &amp; <span class="id">m_Sn</span> &amp; <span class="id">step_f</span>' &amp; ? &amp; ? &amp; ? &amp; <span class="id">Hm_Sn</span>)]; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_method_name">find_method_name</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.step_f">step_f</a></span> = <span class="id">step_f</span>') <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec_eq">method_spec_eq</a></span>; <span class="tactic">eauto</span>); <span class="tactic">subst</span> <span class="id">step_f</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id">m_Sn</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">me_Sn</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> <span class="id">Hm_Sn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id">m_Sn</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">me_Sn</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> <span class="id">Hm_Sn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id">m_Sn</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> <span class="id">ve_f</span>, <span class="id">step_b</span>', <span class="id">step_co</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj2">sep_proj2</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj1">sep_proj1</a></span> <span class="kwd">in</span> <span class="id">Hm_Sn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> <span class="id">me_Sn</span>, <span class="id">step_b</span>', <span class="id">step_co</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> <span class="id">Hm_Sn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_imp">sep_imp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#fieldsrep_any_empty">fieldsrep_any_empty</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;reset&nbsp;correctness&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">destruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.Hm_main">Hm_main</a></span> <span class="kwd">as</span> (<span class="id">step_b</span> &amp; <span class="id">step_co</span> &amp; ? &amp; ? &amp; <span class="id">Hm_main</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hm_main</span>; <span class="tactic">rename</span> <span class="id">Hm_main</span>' <span class="id">into</span> <span class="id">Hm_main</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span> <span class="kwd">in</span> <span class="id">Hm_main</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">ResetCall</span>' <span class="kwd">in</span> <span class="id">Hm_main</span> <span class="kwd">as</span> (<span class="id">m0</span> &amp; <span class="id">reset_f</span>' &amp; ? &amp; ? &amp; <span class="id">Hm0</span>); <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.reset_f">reset_f</a></span> = <span class="id">reset_f</span>') <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec_eq">method_spec_eq</a></span>; <span class="tactic">eauto</span>); <span class="tactic">subst</span> <span class="id">reset_f</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m0</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;loop&nbsp;correctness&nbsp;using&nbsp;the&nbsp;R&nbsp;relation&nbsp;defined&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep_coind">dostep_coind</a></span> <span class="kwd">with</span> (<span class="id">R</span> := <span class="id">R</span>); <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">R</span>, <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span>; <span class="id">destruct_list</span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>) <span class="kwd">as</span> (?,?) (?,?) ?;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.me0">me0</a></span>, <span class="id">step_b</span>, <span class="id">step_co</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.me0">me0</a></span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> <span class="id">Hm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.me0">me0</a></span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> <span class="id">Hm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.dostep.MainCorrectness.reset_name">reset_name</a></span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Evar">Evar</a></span> (<span class="id"><a href="Velus.Ident.html#Ids.prefix_fun">prefix_fun</a></span> <span class="id"><a href="Velus.Ident.html#Ids.reset">reset</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="exec_reset">exec_reset</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_fe">exec_stmt_fe</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.e">e</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.le_main">le_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.m_main">m_main</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#reset_call">reset_call</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.le_main">le_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m0">m0</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#Out_normal">Out_normal</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep">dostep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.e">e</a></span> 0 <span class="id"><a href="Velus.ObcToClight.Correctness.html#m0">m0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep_imp">dostep_imp</a></span> <span class="kwd">as</span> (<span class="id">m0</span> &amp; ?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">m0</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#methods_corres">methods_corres</a></span> <span class="kwd">with</span> (4 := <span class="id"><a href="Velus.ObcToClight.Correctness.html#find_main_reset">find_main_reset</a></span>) <span class="kwd">as</span> (<span class="id">ptr_reset</span> &amp; <span class="id">f</span> &amp; <span class="id">Get_s</span> &amp; <span class="id">Get_f</span> &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">f</span> = <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.reset_f">reset_f</a></span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#method_spec_eq">method_spec_eq</a></span>; <span class="tactic">eauto</span>); <span class="tactic">subst</span> <span class="id">f</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;evaluate&nbsp;the&nbsp;lvalue&nbsp;function&nbsp;name&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.le_main">le_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.m_main">m_main</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.reset_name">reset_name</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Tfunction">Tfunction</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#targs">targs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#tres">tres</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#cc">cc</a></span>)) (<span class="id"><a href="Velus.ObcToClight.SepInvariant.html#var_ptr">var_ptr</a></span> <span class="id">ptr_reset</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Elvalue">eval_Elvalue</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_Evar_global">eval_Evar_global</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#deref_loc_reference">deref_loc_reference</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">change</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.le_main">le_main</a></span> <span class="kwd">with</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#set_opttemp">set_opttemp</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.le_main">le_main</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_Scall">exec_Scall</a></span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#type_of_function">type_of_function</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.ResetSpec">ResetSpec</a></span> <span class="kwd">as</span> (-&gt; &amp; -&gt; &amp; -&gt; &amp;?); <span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#case_out">case_out</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#reset_no_output">reset_no_output</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#reset_no_input">reset_no_input</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.find_class_name">find_class_name</a></span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<div class="doc">Corollary of exec_body: dostep implies the infinte looping* *</div>
<div class="doc">execution                                                   *</div>
<div class="doc">We switch to the small-step semantics since the big-step    *</div>
<div class="doc">one cannot distinguish between Reacts and Diverges          *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.dostep.MainCorrectness.TraceInf">TraceInf</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.dostep.MainCorrectness.TraceInf.Step_in_out_spec">Step_in_out_spec</a></span>: <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span>) &lt;&gt; [] \/ <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>.(<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span>) &lt;&gt; [].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="Len_ins">Len_ins</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">n</span>; <span class="tactic">specialize</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Hwt_ins">Hwt_ins</a></span> <span class="id">n</span>); <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="Len_outs">Len_outs</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">n</span>; <span class="tactic">specialize</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Hwt_outs">Hwt_outs</a></span> <span class="id">n</span>); <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trace_main_step">trace_main_step</a></span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>): <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#traceinf">traceinf</a></span> := <span class="id"><a href="Velus.Traces.html#trace_step">trace_step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.TraceInf.Step_in_out_spec">Step_in_out_spec</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#Len_ins">Len_ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#Len_outs">Len_outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.dostep.MainCorrectness.TraceInf.main_state">main_state</a></span> <span class="id">F</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#State">Clight.State</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#F">F</a></span> (<span class="id"><a href="Velus.ObcToClight.Generation.html#main_loop">main_loop</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="reactive_loop">reactive_loop</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">F</span> <span class="id">e</span> <span class="id">m</span> <span class="id">le</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#dostep">dostep</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Forever_reactive</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">semantics2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>) (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.TraceInf.main_state">main_state</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#F">F</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#k">k</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#le">le</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#m">m</a></span>) (<span class="id"><a href="Velus.ObcToClight.Correctness.html#trace_main_step">trace_main_step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#trace_main_step">trace_main_step</a></span>, <span class="id"><a href="Velus.Traces.html#trace_step">trace_step</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">COINDHYP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdostep</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_body">exec_body</a></span> <span class="kwd">with</span> (1:=<span class="id">Hdostep</span>') <span class="kwd">as</span> (? &amp; ? &amp; <span class="id">Exec_body</span> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_steps">exec_stmt_steps</a></span> <span class="kwd">in</span> <span class="id">Exec_body</span> <span class="kwd">as</span> (? &amp; <span class="id">Star_body</span> &amp; <span class="id">Out_body</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.ObcToClight.Generation.html#main_loop_body">main_loop_body</a></span> <span class="kwd">in</span> <span class="id">Star_body</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Traces.html#unfold_mk_trace">unfold_mk_trace</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#star_step">star_step</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#step_loop">step_loop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#star_right">star_right</a></span> <span class="kwd">with</span> (<span class="id">t2</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#star_right">star_right</a></span> <span class="kwd">with</span> (<span class="id">t2</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">eapply</span> <span class="id">Star_body</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">inversion_clear</span> <span class="id">Out_body</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#step_skip_or_continue_loop1">step_skip_or_continue_loop1</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#step_skip_loop2">step_skip_loop2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> 2 <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0_right">E0_right</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intro</span> <span class="id">Evts</span>; <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#Eapp_E0_inv">Eapp_E0_inv</a></span> <span class="kwd">in</span> <span class="id">Evts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>)) <span class="kwd">as</span> <span class="id">Len_ins</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">intro</span> <span class="id">n</span>'; <span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Hwt_ins">Hwt_ins</a></span> <span class="id">n</span>'); <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>)) <span class="kwd">as</span> <span class="id">Len_outs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">intro</span> <span class="id">n</span>'; <span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.Hwt_outs">Hwt_outs</a></span> <span class="id">n</span>'); <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Traces.html#load_store_events_not_E0">load_store_events_not_E0</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.TraceInf.Step_in_out_spec">Step_in_out_spec</a></span> <span class="id">Len_ins</span> <span class="id">Len_outs</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">COINDHYP</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">We show that the whole program is reactive, with the        *</div>
<div class="doc">correct infinite trace                                      *</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.dostep.MainCorrectness.TraceInf.Behavior">Behavior</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="PRESERVATION.dostep.MainCorrectness.TraceInf.Behavior.m0">m0</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#mem">mem</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.dostep.MainCorrectness.TraceInf.Behavior.Init">Init</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.TraceInf.Behavior.m0">m0</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.dostep.MainCorrectness.TraceInf.Behavior.prog_state">prog_state</a></span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Callstate">Clight.Callstate</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_f">main_f</a></span>) [] <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Kstop">Kstop</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.TraceInf.Behavior.m0">m0</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="initial_state_main">initial_state_main</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#initial_state">Clight.initial_state</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.TraceInf.Behavior.prog_state">prog_state</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#find_main_ptr">find_main_ptr</a></span> <span class="kwd">with</span> (<span class="id">tprog</span> := <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>) (<span class="id">TRANSL</span> := <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.TRANSL">TRANSL</a></span>) <span class="kwd">as</span> (?&amp; <span class="id">Find_main</span> &amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#tprog_main_proved_id">tprog_main_proved_id</a></span> <span class="kwd">in</span> <span class="id">Find_main</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="reacts">reacts</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#function_entry2">function_entry2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_f">main_f</a></span> [] <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.TraceInf.Behavior.m0">m0</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.e">e</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.le_main">le_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.m_main">m_main</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#program_behaves">program_behaves</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">semantics2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#Reacts">Reacts</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#trace_main_step">trace_main_step</a></span> 0)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#initial_state_main">initial_state_main</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#exec_reset">exec_reset</a></span> <span class="kwd">as</span> (? &amp; <span class="id">Exec_reset</span> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.ClightBigstep.html#exec_stmt_steps">exec_stmt_steps</a></span> <span class="kwd">in</span> <span class="id">Exec_reset</span> <span class="kwd">as</span> (? &amp; <span class="id">Star_reset</span> &amp; <span class="id">Out_reset</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0_left_inf">E0_left_inf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#star_forever_reactive">Smallstep.star_forever_reactive</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#star_step">star_step</a></span> <span class="kwd">with</span> (<span class="id">t1</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>) (<span class="id">t2</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#step_internal_function">step_internal_function</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#star_step">star_step</a></span> <span class="kwd">with</span> (<span class="id">t1</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>) (<span class="id">t2</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#step_seq">step_seq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#star_right">star_right</a></span> <span class="kwd">with</span> (<span class="id">t1</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>) (<span class="id">t2</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">E0</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="tactic">eapply</span> <span class="id">Star_reset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="tactic">inversion_clear</span> <span class="id">Out_reset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#step_skip_seq">step_skip_seq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#reactive_loop">reactive_loop</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.TraceInf.Behavior">Behavior</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness.TraceInf">TraceInf</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep.MainCorrectness">MainCorrectness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.dostep">dostep</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="out_step_env_empty">out_step_env_empty</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#empty_env">empty_env</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ??? <span class="id">Hin</span>; <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="out_step_env_set_out_step">out_step_env_set_out_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env">out_step_env</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.out_step">out_step</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#b">b</a></span>, <span class="id"><a href="Velus.ObcToClight.Correctness.html#t">t</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#empty_env">empty_env</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ????? <span class="id">Hin</span>; <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="tactic">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Program</span> <span class="kwd">Theorem</span> <span class="id"><a name="correctness">correctness</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">outs</span> <span class="id">me0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">WTins</span>            : <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">WTouts</span>           : <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="Velus.ObcToClight.Interface.html#OpAux.wt_vals">wt_vals</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>) (<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Step_in_out_spec</span> : <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_in">m_in</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span> &lt;&gt; [] \/  <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Syn.m_out">m_out</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_step">main_step</a></span> &lt;&gt; []),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.mempty">mempty</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.Ident.html#Ids.reset">reset</a></span> [] <span class="id"><a href="Velus.ObcToClight.Correctness.html#me0">me0</a></span> [] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Sem.loop_call">loop_call</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.main_node">main_node</a></span> <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#n">n</a></span>)) 0 <span class="id"><a href="Velus.ObcToClight.Correctness.html#me0">me0</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.Interface.html#Obc.Typ.wt_mem">wt_mem</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#me0">me0</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.prog_main">prog_main</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.c_main">c_main</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#program_behaves">program_behaves</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">semantics2</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION.tprog">tprog</a></span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#Reacts">Reacts</a></span> (<span class="id"><a href="Velus.ObcToClight.Correctness.html#trace_main_step">trace_main_step</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#ins">ins</a></span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#outs">outs</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> 0)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;reset&nbsp;and&nbsp;step&nbsp;functions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#methods_corres">methods_corres</a></span> <span class="kwd">with</span> (<span class="id">callerid</span> := <span class="id"><a href="Velus.Ident.html#Ids.reset">reset</a></span>) <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#methods_corres">methods_corres</a></span> <span class="kwd">with</span> (<span class="id">callerid</span> := <span class="id"><a href="Velus.Ident.html#Ids.step">step</a></span>) <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?); <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;self&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.GenerationProperties.html#find_self">find_self</a></span> <span class="kwd">as</span> (?&amp; <span class="id">FindSelf</span>); <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;initialize&nbsp;the&nbsp;memory&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Velus.ObcToClight.SepInvariant.html#init_mem">init_mem</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp; <span class="id">FindSelf</span>' &amp; <span class="id">Hm</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">FindSelf</span> <span class="kwd">in</span> <span class="id">FindSelf</span>'; <span class="id">inv</span> <span class="id">FindSelf</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;enter&nbsp;the&nbsp;main&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">Hm</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#main_entry">main_entry</a></span> <span class="kwd">in</span> <span class="id">Hm</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">Hm</span> <span class="kwd">as</span> (?&amp; <span class="id">b</span> &amp; <span class="id">co</span> &amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#reacts">reacts</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env_set_out_step">out_step_env_set_out_step</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">exists</span> <span class="id">b</span>, <span class="id">co</span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#reacts">reacts</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#out_step_env_empty">out_step_env_empty</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.Correctness.html#PRESERVATION">PRESERVATION</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
