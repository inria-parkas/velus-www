
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module CoindStreams</title>
<meta name="description" content="Documentation of Coq module CoindStreams" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module CoindStreams</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html">Lists.Streams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Setoids.Setoid.html">Setoid</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html">Arith.EqNat</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.omega.Omega.html">Omega</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="COINDSTREAMS">COINDSTREAMS</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op">Op</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">stream_scope</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.const_nth">const_nth</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span>} <span class="id">n</span> (<span class="id">c</span>: <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#const">Streams.const</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>) # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">unfold_Stv</span> <span class="id">xs</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="id">xs</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">xs</span> <span class="kwd">as</span> [[|]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">unfold_St</span> <span class="id">xs</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="id">xs</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">xs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.eq_EqSt">eq_EqSt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span>}, <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Definitions.html#inclusion">inclusion</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">xs</span> <span class="id">xs</span>' <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">A</span> : (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Cons_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">A</span> : (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">hd_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">xs</span>, <span class="id">xs</span>'; <span class="id">inv</span> <span class="id">Exs</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">A</span> : (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">tl_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">xs</span>, <span class="id">xs</span>'; <span class="id">inv</span> <span class="id">Exs</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">A</span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) : (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Str_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Str_nth_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#eqst_ntheq">eqst_ntheq</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="COINDSTREAMS.EqSts">EqSts</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">A</span>: <span class="kwd">Type</span>}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COINDSTREAMS.EqSts">EqSts</a></span> (<span class="id">xss</span> <span class="id">yss</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts.A">A</a></span>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts.A">A</a></span>) <span class="id"><a href="Velus.CoindStreams.html#xss">xss</a></span> <span class="id"><a href="Velus.CoindStreams.html#yss">yss</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="COINDSTREAMS.EqSts_reflex">EqSts_reflex</a></span>: <span class="kwd">forall</span> <span class="id">xss</span>, <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#xss">xss</a></span> <span class="id"><a href="Velus.CoindStreams.html#xss">xss</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xss</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="COINDSTREAMS.EqSts_sym">EqSts_sym</a></span>: <span class="kwd">forall</span> <span class="id">xss</span> <span class="id">yss</span>, <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#xss">xss</a></span> <span class="id"><a href="Velus.CoindStreams.html#yss">yss</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#yss">yss</a></span> <span class="id"><a href="Velus.CoindStreams.html#xss">xss</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xss</span>, <span class="id">yss</span>; <span class="tactic">intros</span> * <span class="id">H</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHxss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="COINDSTREAMS.EqSts_trans">EqSts_trans</a></span>: <span class="kwd">forall</span> <span class="id">xss</span> <span class="id">yss</span> <span class="id">zss</span>, <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#xss">xss</a></span> <span class="id"><a href="Velus.CoindStreams.html#yss">yss</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#yss">yss</a></span> <span class="id"><a href="Velus.CoindStreams.html#zss">zss</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#xss">xss</a></span> <span class="id"><a href="Velus.CoindStreams.html#zss">zss</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xss</span>, <span class="id">yss</span>, <span class="id">zss</span>; <span class="tactic">intros</span> * <span class="id">Hx</span> <span class="id">Hy</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">Hx</span>; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">transitivity</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHxss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Relation</span> <span class="id">A</span> : (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>)) (@<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span> <span class="id">proved</span> <span class="tactic">by</span> (@<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts_reflex">EqSts_reflex</a></span> <span class="id">A</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="id">proved</span> <span class="tactic">by</span> (@<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts_sym">EqSts_sym</a></span> <span class="id">A</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">transitivity</span> <span class="id">proved</span> <span class="tactic">by</span> (@<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts_trans">EqSts_trans</a></span> <span class="id">A</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">EqStsrel</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">A</span> : (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#cons">List.cons</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">cons_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</div>
<div class="proofscript" id="proof10">
 <span class="tactic">constructor</span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">A</span> : (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app">List.app</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">app_EqSts</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">xss</span> <span class="id">xss</span>' <span class="id">Exss</span> <span class="id">yss</span> <span class="id">yss</span>' <span class="id">Eyss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">yss</span>; <span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">xss</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xss</span>; <span class="tactic">induction</span> <span class="id">yss</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">Exss</span>; <span class="id">inv</span> <span class="id">Eyss</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">rewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHxss</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> <span class="id">B</span> (<span class="id">P</span>: <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">xs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_compat</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Forall2_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>, <span class="id">ys</span>; <span class="tactic">intros</span> ** <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Eys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">P_compat</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHxs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> <span class="id">B</span> (<span class="id">P</span>: <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">xs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_compat</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Forall2_EqSt_iff</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">revert</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>, <span class="id">ys</span>; <span class="tactic">intros</span> * <span class="id">Eys</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Eys</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;- <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> <span class="id">B</span> (<span class="id">P</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_compat</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>) <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Forall2_EqSt</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>, <span class="id">ys</span>; <span class="tactic">intros</span> ** <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Eys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">P_compat</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHxs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> <span class="id">B</span> (<span class="id">P</span>: <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">xs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_compat</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> ==&gt;  <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#flip">Basics.flip</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#flip">Basics.flip</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Forall2_EqSt_flip</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">ys</span>' <span class="id">Eys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>, <span class="id">ys</span>; <span class="tactic">intros</span> ** <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Eys</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">P_compat</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHxs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> <span class="id">B</span> <span class="id">C</span> (<span class="id">P</span>: <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#C">C</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">xs</span> <span class="id">ys</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_compat</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#C">C</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: (@<span class="id"><a href="Velus.Common.CommonList.html#Forall3">Forall3</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#C">C</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#C">C</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Forall3_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Exy</span> <span class="id">Hxy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Exy</span> <span class="id">Hxy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>, <span class="id">ys</span>; <span class="tactic">intros</span> * <span class="id">Exy</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Exy</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">take</span> (<span class="id">_</span> ≡ <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;- <span class="id">it</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> <span class="id">B</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> (<span class="kwd">fun</span> (<span class="id">f</span> <span class="id">f</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span>) =&gt; <span class="kwd">forall</span> <span class="id">xs</span> <span class="id">xs</span>', <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> ≡ <span class="id">xs</span>' -&gt; <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> ≡ <span class="id">f</span>' <span class="id">xs</span>') ==&gt; @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">map_st_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">f</span> <span class="id">f</span>' <span class="id">Ef</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>; <span class="tactic">induction</span> <span class="id">xs</span>, <span class="id">xs</span>'; <span class="tactic">intros</span> * <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Ef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHxs</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> <span class="id">B</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>) <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> (<span class="kwd">fun</span> (<span class="id">f</span> <span class="id">f</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#B">B</a></span>) =&gt; <span class="kwd">forall</span> <span class="id">xs</span> <span class="id">xs</span>', <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> ≡ <span class="id">xs</span>' -&gt; <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> = <span class="id">f</span>' <span class="id">xs</span>') ==&gt; @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">map_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">f</span> <span class="id">f</span>' <span class="id">Ef</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>; <span class="tactic">induction</span> <span class="id">xs</span>, <span class="id">xs</span>'; <span class="tactic">intros</span> * <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Ef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHxs</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> <span class="id">P</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_compat</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span>) <span class="id"><a href="Velus.CoindStreams.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#A">A</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Forall_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>; <span class="tactic">intros</span> * <span class="id">E</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">E</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">P_compat</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHx</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Synchronous operators </div>
<br/>
&nbsp;&nbsp;<span class="kwd">CoFixpoint</span> <span class="id"><a name="COINDSTREAMS.const">const</a></span> (<span class="id">b</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">c</span>: <span class="id"><a href="Velus.CoindStreams.html#Op.const">const</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="kwd">then</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.CoindStreams.html#Op.sem_const">sem_const</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>) <span class="kwd">else</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>) ⋅ <span class="id"><a href="Velus.CoindStreams.html#const">const</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span>) <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="COINDSTREAMS.lift1">lift1</a></span> (<span class="id">op</span>: <span class="id"><a href="Velus.CoindStreams.html#Op.unop">unop</a></span>) (<span class="id">ty</span>: <span class="id"><a href="Velus.CoindStreams.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.Lift1A">Lift1A</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#lift1">lift1</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty">ty</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#lift1">lift1</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty">ty</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.Lift1P">Lift1P</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">r</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#Op.sem_unop">sem_unop</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty">ty</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#lift1">lift1</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty">ty</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#lift1">lift1</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty">ty</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#r">r</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="COINDSTREAMS.lift2">lift2</a></span> (<span class="id">op</span>: <span class="id"><a href="Velus.CoindStreams.html#Op.binop">binop</a></span>) (<span class="id">ty1</span> <span class="id">ty2</span>: <span class="id"><a href="Velus.CoindStreams.html#Op.type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.Lift2A">Lift2A</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#lift2">lift2</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty1">ty1</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty2">ty2</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#lift2">lift2</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty1">ty1</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty2">ty2</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.Lift2P">Lift2P</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">r</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#Op.sem_binop">sem_binop</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty1">ty1</a></span> <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty2">ty2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#lift2">lift2</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty1">ty1</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty2">ty2</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#lift2">lift2</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty1">ty1</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty2">ty2</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#r">r</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="COINDSTREAMS.when">when</a></span> (<span class="id">b</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.WhenA">WhenA</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">cs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#when">when</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#when">when</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.WhenPA">WhenPA</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">c</span> <span class="id">xs</span> <span class="id">cs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#when">when</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#OpAux.val_to_bool">val_to_bool</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#when">when</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.WhenPP">WhenPP</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">c</span> <span class="id">xs</span> <span class="id">cs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#when">when</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#OpAux.val_to_bool">val_to_bool</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#when">when</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="COINDSTREAMS.merge">merge</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.MergeA">MergeA</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#merge">merge</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#merge">merge</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.MergeT">MergeT</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">xs</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#merge">merge</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#merge">merge</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op.true_val">true_val</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.MergeF">MergeF</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">xs</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#merge">merge</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#merge">merge</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op.false_val">false_val</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="COINDSTREAMS.ite">ite</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.IteA">IteA</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#ite">ite</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#ite">ite</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.IteT">IteT</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">f</span> <span class="id">s</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#ite">ite</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#ite">ite</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op.true_val">true_val</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.IteF">IteF</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">f</span> <span class="id">s</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#ite">ite</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#ite">ite</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op.false_val">false_val</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="COINDSTREAMS.bools_of">bools_of</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="COINDSTREAMS.bools_of_intro">bools_of_intro</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">vs</span> <span class="id">b</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#bools_of">bools_of</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#OpAux.value_to_bool">value_to_bool</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#bools_of">bools_of</a></span> (<span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoFixpoint</span> <span class="id"><a name="COINDSTREAMS.mask">mask</a></span> (<span class="id">k</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">rs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">xs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">mask</span>' <span class="id">k</span>' := <span class="id"><a href="Velus.CoindStreams.html#mask">mask</a></span> <span class="id">k</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| 0, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>    =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#const">Streams.const</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| 0, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>   =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>  ⋅ <span class="id">mask</span>' 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| 1, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>    =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>  ⋅ <span class="id">mask</span>' 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">k</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id">mask</span>' <span class="id">k</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">_</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt; <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id">mask</span>' <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoFixpoint</span> <span class="id"><a name="COINDSTREAMS.count_acc">count_acc</a></span> (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">rs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">s</span> := <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="kwd">else</span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#count_acc">count_acc</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COINDSTREAMS.count">count</a></span> := <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> 0.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.count_acc_grow_trans">count_acc_grow_trans</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">s</span>' <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s</span>' &lt;= <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#ForAll">ForAll</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">s</span>' &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">rs</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="COINDSTREAMS.count_acc_grow">count_acc_grow</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#ForAll">ForAll</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc_grow_trans">count_acc_grow_trans</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.count_S_nth">count_S_nth</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">s</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_tl">Str_nth_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>)) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_tl">Str_nth_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Str_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">rs</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.mask_nth">mask_nth</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">rs</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.mask">mask</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="kwd">if</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count">count</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>) # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span>  =? <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="kwd">then</span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="kwd">else</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Str_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>, <span class="id">k</span> <span class="kwd">as</span> [|[|<span class="id">k</span>]]; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">rs</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc_grow">count_acc_grow</a></span> 1 <span class="id">rs</span>) <span class="kwd">as</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#ForAll_Str_nth_tl">ForAll_Str_nth_tl</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_tl">Str_nth_tl</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> 1 <span class="id">rs</span>)) &lt;&gt; 0) <span class="kwd">as</span> <span class="id">E</span> <span class="tactic">by</span> <span class="tactic">omega</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const_nth">const_nth</a></span> <span class="id">n</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHn</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count">count</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_tl">Str_nth_tl</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> 1 <span class="id">rs</span>)) =? 1) <span class="id">eqn</span>: <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_S_nth">count_S_nth</a></span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_true_iff">beq_nat_true_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#eq_add_S">eq_add_S</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_true_iff">beq_nat_true_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.succ_inj_wd_neg">Nat.succ_inj_wd_neg</a></span>, &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHn</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count">count</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_tl">Str_nth_tl</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> 1 <span class="id">rs</span>)) =? <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">k</span>)) <span class="id">eqn</span>: <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_S_nth">count_S_nth</a></span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_true_iff">beq_nat_true_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#eq_add_S">eq_add_S</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_true_iff">beq_nat_true_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.succ_inj_wd_neg">Nat.succ_inj_wd_neg</a></span>, &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">mask_EqSt</span>' : <span class="kwd">forall</span> <span class="id">b</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">k</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>), <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.mask">mask</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.mask">mask</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#ntheq_eqst">ntheq_eqst</a></span>. <span class="tactic">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Heq</span> ((<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count">count</a></span> <span class="id">b</span>) # <span class="id">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.Str_nth_EqSt">Str_nth_EqSt</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.mask_nth">mask_nth</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_refl">Nat.eqb_refl</a></span> <span class="kwd">in</span> <span class="id">Heq</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h3> Boolean mask </h3>
<br/>
&nbsp;&nbsp;<span class="kwd">CoFixpoint</span> <span class="id"><a name="COINDSTREAMS.maskb">maskb</a></span> (<span class="id">k</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">rs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">xs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">mask</span>' <span class="id">k</span>' := <span class="id"><a href="Velus.CoindStreams.html#maskb">maskb</a></span> <span class="id">k</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| 0, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>    =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#const">Streams.const</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| 0, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>   =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>  ⋅ <span class="id">mask</span>' 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| 1, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>    =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>  ⋅ <span class="id">mask</span>' 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">k</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id">mask</span>' <span class="id">k</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">_</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id">mask</span>' <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.maskb_nth">maskb_nth</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">rs</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="kwd">if</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count">count</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>) # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span>  =? <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="kwd">then</span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Str_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>, <span class="id">k</span> <span class="kwd">as</span> [|[|<span class="id">k</span>]]; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">rs</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc_grow">count_acc_grow</a></span> 1 <span class="id">rs</span>) <span class="kwd">as</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#ForAll_Str_nth_tl">ForAll_Str_nth_tl</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_tl">Str_nth_tl</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> 1 <span class="id">rs</span>)) &lt;&gt; 0) <span class="kwd">as</span> <span class="id">E</span> <span class="tactic">by</span> <span class="tactic">omega</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const_nth">const_nth</a></span> <span class="id">n</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHn</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count">count</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_tl">Str_nth_tl</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> 1 <span class="id">rs</span>)) =? 1) <span class="id">eqn</span>: <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_S_nth">count_S_nth</a></span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_true_iff">beq_nat_true_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#eq_add_S">eq_add_S</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_true_iff">beq_nat_true_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.succ_inj_wd_neg">Nat.succ_inj_wd_neg</a></span>, &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHn</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count">count</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth_tl">Str_nth_tl</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_acc">count_acc</a></span> 1 <span class="id">rs</span>)) =? <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">k</span>)) <span class="id">eqn</span>: <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count_S_nth">count_S_nth</a></span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_true_iff">beq_nat_true_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#eq_add_S">eq_add_S</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_true_iff">beq_nat_true_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.succ_inj_wd_neg">Nat.succ_inj_wd_neg</a></span>, &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_false_iff">beq_nat_false_iff</a></span> <span class="kwd">in</span> <span class="id">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="COINDSTREAMS.maskb_Cons">maskb_Cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">r</span> <span class="id">rs</span> <span class="id">x</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> (<span class="id"><a href="Velus.CoindStreams.html#r">r</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;≡ (<span class="kwd">match</span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="kwd">if</span> <span class="id"><a href="Velus.CoindStreams.html#r">r</a></span> <span class="kwd">then</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#const">Streams.const</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="kwd">else</span> (<span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ⋅ (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> 0 <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1 =&gt; <span class="kwd">if</span> <span class="id"><a href="Velus.CoindStreams.html#r">r</a></span> <span class="kwd">then</span> (<span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ⋅ (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> 0 <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>)) <span class="kwd">else</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> 1 <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">_</span> <span class="kwd">as</span> <span class="id">k</span>') =&gt; <span class="kwd">if</span> <span class="id"><a href="Velus.CoindStreams.html#r">r</a></span> <span class="kwd">then</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id">k</span>' <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) <span class="kwd">else</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">destruct</span> <span class="id">k</span>; [|<span class="tactic">destruct</span> <span class="id">k</span>]; <span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">maskb_EqSt</span>' : <span class="kwd">forall</span> <span class="id">b</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">k</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>), <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#ntheq_eqst">ntheq_eqst</a></span>. <span class="tactic">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Heq</span> ((<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.count">count</a></span> <span class="id">b</span>) # <span class="id">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.Str_nth_EqSt">Str_nth_EqSt</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb_nth">maskb_nth</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_refl">Nat.eqb_refl</a></span> <span class="kwd">in</span> <span class="id">Heq</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.maskb_idem">maskb_idem</a></span> : <span class="kwd">forall</span> <span class="id">k</span> <span class="id">b</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span>) ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#ntheq_eqst">ntheq_eqst</a></span>; <span class="tactic">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb_nth">maskb_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">_</span> =? <span class="id">k</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> fby stream </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">CoFixpoint</span> <span class="id"><a name="COINDSTREAMS.sfby">sfby</a></span> (<span class="id">v</span> : <span class="id"><a href="Velus.CoindStreams.html#Op.val">Op.val</a></span>) (<span class="id">str</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">OpAux.value</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.CoindStreams.html#str">str</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id">v</span>') ⋅ <span class="id">str</span>' =&gt; (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span>) ⋅ (<span class="id"><a href="Velus.CoindStreams.html#sfby">sfby</a></span> <span class="id">v</span>' <span class="id">str</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id">str</span>' =&gt; <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ (<span class="id"><a href="Velus.CoindStreams.html#sfby">sfby</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> <span class="id">str</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.sfby_Cons">sfby_Cons</a></span> : <span class="kwd">forall</span> <span class="id">v</span> <span class="id">y</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sfby">sfby</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> (<span class="id"><a href="Velus.CoindStreams.html#y">y</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id">v</span>' =&gt; (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span>) ⋅ (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sfby">sfby</a></span> <span class="id">v</span>' <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sfby">sfby</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">v</span> <span class="id">y</span> <span class="id">ys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="tactic">at</span> 1; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sfby">sfby</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sfby_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">CoFix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">v</span> [<span class="id">x</span> <span class="id">xs</span>] [<span class="id">y</span> <span class="id">ys</span>] <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> exp level synchronous operators specifications
        To ease the use of coinductive hypotheses to prove non-coinductive
        goals, we give for each coinductive predicate an indexed specification,
        reflecting the shapes of the involved streams pointwise speaking.
        In general this specification is a disjunction with a factor for each
        case of the predicate.
        The corresponding lemmas simply go by induction on <span class="bracket"><span class="id">n</span></span> and by inversion
        of the coinductive hypothesis for the direct direction, and by coinduction
        on the converse.
   </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.const_spec">const_spec</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">c</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="kwd">if</span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="kwd">then</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.CoindStreams.html#Op.sem_const">sem_const</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>) <span class="kwd">else</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">E</span> <span class="id">n</span>; <span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">xs</span>; <span class="id">revert</span> <span class="id">c</span> <span class="id">b</span>; <span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>; <span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">inv</span> <span class="id">E</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">revert</span> <span class="id">xs</span> <span class="id">c</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">COFIX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>; <span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">specialize</span> (<span class="id">E</span> 0); <span class="id">now</span> <span class="id">inv</span> <span class="id">E</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">COFIX</span>; <span class="tactic">intro</span> <span class="id">n</span>; <span class="tactic">specialize</span> (<span class="id">E</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)); <span class="tactic">rewrite</span> 2 <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="COINDSTREAMS.const_true">const_true</a></span>: <span class="kwd">forall</span> <span class="id">bs</span> <span class="id">c</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>) # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.CoindStreams.html#Op.sem_const">sem_const</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt_reflex">EqSt_reflex</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id">bs</span> <span class="id">c</span>)) <span class="kwd">as</span> <span class="id">Hconst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const_spec">const_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Hconst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hconst</span>, <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="COINDSTREAMS.const_false">const_false</a></span> : <span class="kwd">forall</span> <span class="id">bs</span> <span class="id">c</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>) # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt_reflex">EqSt_reflex</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id">bs</span> <span class="id">c</span>)) <span class="kwd">as</span> <span class="id">Hconst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const_spec">const_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Hconst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hconst</span>, <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.const_inv1">const_inv1</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">b</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">b</span>', <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id">b</span>' <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> /\ <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> ≡ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">b</span>. <span class="tactic">split</span>; <span class="tactic">symmetry</span>; <span class="tactic">auto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.const_inv2">const_inv2</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">c</span>' <span class="id">b</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id">c</span>' ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">b</span>', <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id">b</span>' <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> ≡ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">c</span>' = <span class="id"><a href="Velus.CoindStreams.html#Op.sem_const">sem_const</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">b</span>. <span class="tactic">split</span>. <span class="tactic">symmetry</span>. <span class="tactic">assumption</span>. <span class="tactic">split</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.const_tl">const_tl</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">b</span> <span class="id">v</span> <span class="id">tl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#tl">tl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">Streams.tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span>) <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#tl">tl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.const_Cons">const_Cons</a></span> : <span class="kwd">forall</span> <span class="id">c</span> <span class="id">b</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> (<span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span>) <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ≡<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">if</span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="kwd">then</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.CoindStreams.html#Op.sem_const">sem_const</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>) <span class="kwd">else</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>) ⋅ (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="tactic">at</span> 1; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">n</span> := <span class="tactic">fresh</span> "<span class="id">n</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">CoFix</span>; <span class="tactic">intro</span> <span class="id">n</span>; <span class="tactic">specialize</span> (<span class="id">H</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.when_spec">when_spec</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">xs</span> <span class="id">cs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.when">when</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">x</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#OpAux.val_to_bool">val_to_bool</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">x</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#OpAux.val_to_bool">val_to_bool</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">H</span> <span class="id">n</span>; <span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">xs</span>; <span class="id">revert</span> <span class="id">cs</span> <span class="id">rs</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>; <span class="tactic">left</span>. <span class="tactic">do</span> 2 <span class="tactic">eexists</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>; <span class="tactic">right</span>. <span class="tactic">do</span> 2 <span class="tactic">eexists</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">revert</span> <span class="id">xs</span> <span class="id">cs</span> <span class="id">rs</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">CoFix</span>; <span class="tactic">intros</span> * <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">unfold_Stv</span> <span class="id">cs</span>; <span class="id">unfold_Stv</span> <span class="id">rs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">specialize</span> (<span class="id">H</span> 0); <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [(?&amp;?&amp;?)|[(?&amp;?&amp;?&amp;?&amp;?)|(?&amp;?&amp;?&amp;?&amp;?)]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>; <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">specialize</span> (<span class="id">H</span> 0); <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [(?&amp;?&amp;?)|[(?&amp;?&amp;?&amp;?&amp;?&amp;?)|(?&amp;?&amp;?&amp;?&amp;?&amp;?)]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id">H</span> 0) <span class="kwd">as</span> [(?&amp;?&amp;?)|[(?&amp;?&amp;?&amp;?&amp;?&amp;?)|(?&amp;?&amp; <span class="id">E</span> &amp; <span class="id">E</span>' &amp;?&amp; <span class="id">E</span>'')]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">E</span>, <span class="id">E</span>', <span class="id">E</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span>, <span class="id">E</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.lift1_spec">lift1_spec</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">op</span> <span class="id">t</span> <span class="id">xs</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.lift1">lift1</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> /\ <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#Op.sem_unop">sem_unop</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">H</span> <span class="id">n</span>; <span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">xs</span>; <span class="id">revert</span> <span class="id">ys</span> <span class="id">t</span> <span class="id">op</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">right</span>. <span class="tactic">do</span> 2 <span class="tactic">eexists</span>; <span class="tactic">intuition</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">revert</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">t</span> <span class="id">op</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">CoFix</span>; <span class="tactic">intros</span> * <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">unfold_Stv</span> <span class="id">ys</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">specialize</span> (<span class="id">H</span> 0); <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [(?&amp;?)|(?&amp;?&amp;?&amp;?&amp;?)]; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>; <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> (<span class="id">H</span> 0) <span class="kwd">as</span> [(?&amp;?)|(?&amp;?&amp; <span class="id">E</span> &amp;?&amp; <span class="id">E</span>')]; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">E</span>, <span class="id">E</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">E</span>; <span class="id">inv</span> <span class="id">E</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.lift2_spec">lift2_spec</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">op</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.lift2">lift2</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#t1">t1</a></span> <span class="id"><a href="Velus.CoindStreams.html#t2">t2</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span> <span class="id"><a href="Velus.CoindStreams.html#zs">zs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#zs">zs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#ys">ys</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#Op.sem_binop">sem_binop</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#t1">t1</a></span> <span class="id"><a href="Velus.CoindStreams.html#y">y</a></span> <span class="id"><a href="Velus.CoindStreams.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#z">z</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#zs">zs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#z">z</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">H</span> <span class="id">n</span>; <span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">xs</span>; <span class="id">revert</span> <span class="id">ys</span> <span class="id">zs</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">op</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">right</span>. <span class="tactic">do</span> 3 <span class="tactic">eexists</span>; <span class="tactic">intuition</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">revert</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">op</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">CoFix</span>; <span class="tactic">intros</span> * <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">unfold_Stv</span> <span class="id">ys</span>; <span class="id">unfold_Stv</span> <span class="id">zs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">specialize</span> (<span class="id">H</span> 0); <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [(?&amp;?&amp;?)|(?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?)]; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>; <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> (<span class="id">H</span> 0) <span class="kwd">as</span> [(?&amp;?&amp;?)|(?&amp;?&amp;?&amp; <span class="id">E</span> &amp; <span class="id">E</span>' &amp;?&amp; <span class="id">E</span>'')]; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">E</span>, <span class="id">E</span>', <span class="id">E</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">E</span>; <span class="id">inv</span> <span class="id">E</span>'; <span class="id">inv</span> <span class="id">E</span>''; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> cexp level synchronous operators specifications </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.merge_spec">merge_spec</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.merge">merge</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op.true_val">true_val</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op.false_val">false_val</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">H</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">xs</span>; <span class="id">revert</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>; <span class="tactic">left</span>. <span class="tactic">eexists</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>; <span class="tactic">right</span>. <span class="tactic">eexists</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">revert</span> <span class="id">xs</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>; <span class="kwd">cofix</span> <span class="id">CoFix</span>; <span class="tactic">intros</span> * <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">unfold_Stv</span> <span class="id">ts</span>; <span class="id">unfold_Stv</span> <span class="id">fs</span>; <span class="id">unfold_Stv</span> <span class="id">rs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">specialize</span> (<span class="id">H</span> 0); <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [(?&amp;?&amp;?&amp;?)|[(?&amp;?&amp;?&amp;?&amp;?)|(?&amp;?&amp;?&amp;?&amp;?)]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>; <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id">H</span> 0) <span class="kwd">as</span> [(?&amp;?&amp;?&amp;?)|[(?&amp;?&amp;?&amp;?&amp;?)|(?&amp; <span class="id">E</span> &amp;?&amp; <span class="id">E</span>' &amp; <span class="id">E</span>'')]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">E</span>, <span class="id">E</span>', <span class="id">E</span>''; <span class="id">inv</span> <span class="id">E</span>; <span class="id">inv</span> <span class="id">E</span>'; <span class="id">inv</span> <span class="id">E</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id">H</span> 0) <span class="kwd">as</span> [(?&amp;?&amp;?&amp;?)|[(?&amp; <span class="id">E</span> &amp; <span class="id">E</span>' &amp;?&amp; <span class="id">E</span>'')|(?&amp;?&amp;?&amp;?&amp;?)]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">E</span>, <span class="id">E</span>', <span class="id">E</span>''; <span class="id">inv</span> <span class="id">E</span>; <span class="id">inv</span> <span class="id">E</span>'; <span class="id">inv</span> <span class="id">E</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.ite_spec">ite_spec</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.ite">ite</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">t</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op.true_val">true_val</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">t</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op.false_val">false_val</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#t">t</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#f">f</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">H</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">xs</span>; <span class="id">revert</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>; <span class="tactic">left</span>. <span class="tactic">do</span> 2 <span class="tactic">eexists</span>; <span class="id">now</span> <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>; <span class="tactic">right</span>. <span class="tactic">do</span> 2 <span class="tactic">eexists</span>; <span class="id">now</span> <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">revert</span> <span class="id">xs</span> <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>; <span class="kwd">cofix</span> <span class="id">CoFix</span>; <span class="tactic">intros</span> * <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">unfold_Stv</span> <span class="id">ts</span>; <span class="id">unfold_Stv</span> <span class="id">fs</span>; <span class="id">unfold_Stv</span> <span class="id">rs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">specialize</span> (<span class="id">H</span> 0); <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [(?&amp;?&amp;?&amp;?)|[(?&amp;?&amp;?&amp;?&amp;?&amp;?)|(?&amp;?&amp;?&amp;?&amp;?&amp;?)]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">constructor</span>; <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id">H</span> 0) <span class="kwd">as</span> [(?&amp;?&amp;?&amp;?)|[(?&amp;?&amp; <span class="id">E1</span> &amp; <span class="id">E2</span> &amp; <span class="id">E3</span> &amp; <span class="id">E4</span>)|(?&amp;?&amp; <span class="id">E1</span> &amp; <span class="id">E2</span> &amp; <span class="id">E3</span> &amp; <span class="id">E4</span>)]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">E1</span>, <span class="id">E2</span>, <span class="id">E3</span>, <span class="id">E4</span>; <span class="id">inv</span> <span class="id">E1</span>; <span class="id">inv</span> <span class="id">E2</span>; <span class="id">inv</span> <span class="id">E3</span>; <span class="id">inv</span> <span class="id">E4</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">k</span> : (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.mask">mask</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">mask_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">k</span>; <span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="tactic">intros</span> <span class="id">k</span> <span class="id">rs</span> <span class="id">rs</span>' <span class="id">Ers</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">rs</span>; <span class="id">unfold_Stv</span> <span class="id">rs</span>'; <span class="id">unfold_St</span> <span class="id">xs</span>; <span class="id">unfold_St</span> <span class="id">xs</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">inv</span> <span class="id">Ers</span>; <span class="id">inv</span> <span class="id">Exs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">k</span> <span class="kwd">as</span> [|[]]; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">k</span> : (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">maskb_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">k</span>; <span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="tactic">intros</span> <span class="id">k</span> <span class="id">rs</span> <span class="id">rs</span>' <span class="id">Ers</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">rs</span>; <span class="id">unfold_Stv</span> <span class="id">rs</span>'; <span class="id">unfold_St</span> <span class="id">xs</span>; <span class="id">unfold_St</span> <span class="id">xs</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">inv</span> <span class="id">Ers</span>; <span class="id">inv</span> <span class="id">Exs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">k</span> <span class="kwd">as</span> [|[]]; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.ite">ite</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">ite_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [? ?] [? ?] <span class="id">Heq</span> [? ?] [? ?] <span class="id">Heq0</span> [? ?] [? ?] <span class="id">Heq1</span> [? ?] [? ?] <span class="id">Heq2</span> <span class="id">Hite</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq</span>. <span class="id">inv</span> <span class="id">Heq0</span>. <span class="id">inv</span> <span class="id">Heq1</span>. <span class="id">inv</span> <span class="id">Heq2</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hite</span>; <span class="tactic">constructor</span>; <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> history and it's properties </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COINDSTREAMS.history">history</a></span> := <span class="id"><a href="Velus.Environment.html#Env.t">Env.t</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COINDSTREAMS.history_tl">history_tl</a></span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span> := <span class="id"><a href="Velus.Environment.html#Env.map">Env.map</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>) <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.history_tl_find_Some">history_tl_find_Some</a></span> : <span class="kwd">forall</span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) <span class="id">id</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">id</span> <span class="id">vs</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfind</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">history_tl_find_Some</span>' : <span class="kwd">forall</span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) <span class="id">id</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">v</span>, <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">id</span> <span class="id">vs</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#option_map_inv_Some">option_map_inv_Some</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">vs</span>' [<span class="id">Hfind</span> <span class="id">Htl</span>]]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">vs</span>'). <span class="tactic">destruct</span> <span class="id">vs</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.history_tl_find_None">history_tl_find_None</a></span> : <span class="kwd">forall</span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">id</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfind</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">history_tl_find_None</span>' : <span class="kwd">forall</span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">id</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#option_map_inv_None">option_map_inv_None</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COINDSTREAMS.env">env</a></span> := <span class="id"><a href="Velus.Environment.html#Env.t">Env.t</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COINDSTREAMS.history_nth">history_nth</a></span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.env">env</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.map">Env.map</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Str_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span>) <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="COINDSTREAMS.history_hd">history_hd</a></span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.env">env</a></span> := <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> 0 <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.history_nth_tl">history_nth_tl</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span>) <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span>, <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.map_map">Env.map_map</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Environment.html#Env.map_ext">Env.map_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">x</span> <span class="id">xs</span>]. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.history_nth_find_None">history_nth_find_None</a></span> : <span class="kwd">forall</span> <span class="id">n</span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">id</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span>, <span class="id">Hfind</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth_tl">history_nth_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHn</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl_find_None">history_tl_find_None</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">history_nth_find_None</span>' : <span class="kwd">forall</span> <span class="id">n</span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">id</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#option_map_inv_None">option_map_inv_None</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth_tl">history_nth_tl</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">history_tl_find_None</span>' <span class="kwd">in</span> <span class="id">Hfind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.history_nth_find_Some">history_nth_find_Some</a></span> : <span class="kwd">forall</span> <span class="id">n</span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) <span class="id">id</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Str_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">id</span> <span class="id">vs</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span>, <span class="id">Hfind</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth_tl">history_nth_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHn</span> <span class="kwd">with</span> (<span class="id">vs</span>:=(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id">vs</span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl_find_Some">history_tl_find_Some</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">history_nth_find_Some</span>' : <span class="kwd">forall</span> <span class="id">n</span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) <span class="id">id</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">vs</span>, <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> /\ <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">id</span> <span class="id">v</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#option_map_inv_Some">option_map_inv_Some</a></span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">vs</span>' [<span class="id">Hfind</span> <span class="id">Heq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">vs</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth_tl">history_nth_tl</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">vs</span>' [<span class="id">Hfind</span> <span class="id">Heq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">history_tl_find_Some</span>' <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">v</span>' <span class="id">Hfind</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> (<span class="id">v</span>' ⋅ <span class="id">vs</span>'); <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">history_nth_find_Some</span>'' : <span class="kwd">forall</span> (<span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>) <span class="id">vs</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">vs</span>', <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#id">id</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">vs</span>' /\ <span class="id">vs</span>' ≡ <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id">id</span> <span class="id">H</span>) <span class="kwd">as</span> [<span class="id">vs</span>'|] <span class="id">eqn</span>:<span class="id">Hfind</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> <span class="id">vs</span>'. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#ntheq_eqst">ntheq_eqst</a></span>. <span class="tactic">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Hfind</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">history_nth_find_Some</span>' <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">vs</span>'' [? ?]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">Hfind</span>'. <span class="id">inv</span> <span class="id">Hfind</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth_find_None">history_nth_find_None</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=0) <span class="kwd">in</span> <span class="id">Hfind</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.history_hd_refines">history_hd_refines</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">H</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.refines">Env.refines</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.refines">Env.refines</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_hd">history_hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_hd">history_hd</a></span> <span class="id">H</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">Href</span> <span class="id">x</span> <span class="id">v</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">history_nth_find_Some</span>' <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">vs</span>' [<span class="id">Hfind</span> <span class="id">Heq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">v</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Href</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">vs</span>'' [? <span class="id">Hfind</span>]]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth_find_Some">history_nth_find_Some</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.history_tl_refines">history_tl_refines</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">H</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.refines">Env.refines</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.refines">Env.refines</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id">H</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">Href</span> <span class="id">x</span> <span class="id">vs</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">history_tl_find_Some</span>' <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">v</span>' <span class="id">Hfind</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Href</span> <span class="kwd">in</span> <span class="id">Hfind</span> <span class="kwd">as</span> [<span class="id">vs</span>' [<span class="id">Heq</span>' <span class="id">Hfind</span>']].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id">vs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl_find_Some">history_tl_find_Some</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vs</span>'; <span class="tactic">simpl</span>. <span class="id">inv</span> <span class="id">Heq</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.history_nth_refines">history_nth_refines</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">H</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.refines">Env.refines</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="Velus.Environment.html#Env.refines">Env.refines</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth">history_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> <span class="id">H</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">Href</span> <span class="id">n</span>; <span class="id">revert</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_hd_refines">history_hd_refines</a></span>, <span class="id">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_nth_tl">history_nth_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHn</span>, <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl_refines">history_tl_refines</a></span>, <span class="id">Href</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.env_find_tl">env_find_tl</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">x</span>' <span class="id">H</span> <span class="id">H</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.Common.html#orel">orel</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>) (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id">x</span>' <span class="id">H</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.Common.html#orel">orel</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id">x</span>' (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id">H</span>')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hfind</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_o">Env.Props.P.F.map_o</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hfind</span> <span class="kwd">as</span> [|?? <span class="id">Hs</span>]; <span class="tactic">eauto</span>; <span class="tactic">econstructor</span>; <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h1> sem_var
        This is common to Lustre and NLustre Semantics </h1>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="COINDSTREAMS.sem_var">sem_var</a></span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span> -&gt; <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="COINDSTREAMS.sem_var_intro">sem_var_intro</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">xs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.MapsTo">Env.MapsTo</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id">xs</span>' <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> ≡ <span class="id">xs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id"><a name="COINDSTREAMS.sem_var_Proper">sem_var_Proper</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.ClockDefs.html#ident">ident</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' ? <span class="id">x</span> <span class="id">x</span>' ? <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Heq</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">Heq</span>. <span class="id">etransitivity</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etransitivity</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sem_var_det">sem_var_det</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">x</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#s1">s1</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem1</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem1</span>. <span class="id">inv</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>, <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Environment.html#Env.find_1">Env.find_1</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Environment.html#Env.find_1">Env.find_1</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.env_maps_tl">env_maps_tl</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">v</span> <span class="id">s</span> <span class="id">H</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.MapsTo">Env.MapsTo</a></span> <span class="id"><a href="Velus.CoindStreams.html#i">i</a></span> (<span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> -&gt; <span class="id"><a href="Velus.Environment.html#Env.MapsTo">Env.MapsTo</a></span> <span class="id"><a href="Velus.CoindStreams.html#i">i</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">s</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">Streams.tl</a></span> (<span class="id">v</span> ⋅ <span class="id">s</span>)) <span class="kwd">as</span> <span class="id">Hs</span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hs</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Environment.html#Env.map_1">Env.map_1</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sem_var_step">sem_var_step</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">x</span> <span class="id">v</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> (<span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">xs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.env_maps_tl">env_maps_tl</a></span>; <span class="tactic">eauto</span>. <span class="id">now</span> <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sem_var_step_nl">sem_var_step_nl</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">x</span> <span class="id">v</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> (<span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">xs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.env_maps_tl">env_maps_tl</a></span>; <span class="tactic">eauto</span>. <span class="id">now</span> <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sem_var_switch_env">sem_var_switch_env</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">x</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.Common.html#orel">orel</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>) (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id">H</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> &lt;-&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id">H</span>' <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</div>
<div class="proofscript" id="proof65">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hfind</span>; <span class="tactic">split</span>; <span class="tactic">intro</span> <span class="id">Hsem</span>; <span class="tactic">inversion_clear</span> <span class="id">Hsem</span> <span class="kwd">as</span> [???? <span class="id">Hr</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hr</span> <span class="kwd">in</span> <span class="id">Hfind</span>; <span class="id">inv</span> <span class="id">Hfind</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Environment.html#Env.find_1">Env.find_1</a></span> <span class="kwd">in</span> <span class="id">Hr</span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; [<span class="tactic">rewrite</span> <span class="id">H3</span>|<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Environment.html#Env.find_2">Env.find_2</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sem_var_env_eq">sem_var_env_eq</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">xs</span> <span class="id">ss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ss">ss</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id">H</span>') <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#ss">ss</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Common.Common.html#orel">orel</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> (<span class="id">A</span>:=<span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>)) (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id">H</span>')) <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</div>
<div class="proofscript" id="proof66">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">auto</span>. <span class="tactic">intros</span> <span class="id">Hf</span>. <span class="id">inv</span> <span class="id">Hf</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">take</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">take</span> (<span class="id"><a href="Velus.Environment.html#Env.MapsTo">Env.MapsTo</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.Environment.html#Env.find_1">Env.find_1</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">H4</span>, &lt;- <span class="id">H5</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h1> sem_clock
        This is also common to Lustre and NLustre *</h1>
<br/>
<h2> clocks_of and its properties </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">CoFixpoint</span> <span class="id"><a name="COINDSTREAMS.clocks_of">clocks_of</a></span> (<span class="id">ss</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>)) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> (<span class="kwd">fun</span> <span class="id">s</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> &lt;&gt;<span class="id">b</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>) <span class="id"><a href="Velus.CoindStreams.html#ss">ss</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#clocks_of">clocks_of</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>) <span class="id"><a href="Velus.CoindStreams.html#ss">ss</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.clocks_of">clocks_of</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.EqSts">EqSts</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">clocks_of_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</div>
<div class="proofscript" id="proof67">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">xs</span> <span class="id">xs</span>' <span class="id">Exs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">clear</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">xs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>; <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">Exs</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">xs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">xs</span>; <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">Exs</span>; <span class="tactic">simpl</span>; <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">IHxs</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.clocks_of_nth">clocks_of_nth</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.clocks_of">clocks_of</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> (<span class="kwd">fun</span> <span class="id">s</span> =&gt; <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> &lt;&gt;<span class="id">b</span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Str_nth</a></span> <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span>) <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</div>
<div class="proofscript" id="proof68">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">cbn</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_map">existsb_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S_tl">Str_nth_S_tl</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHn</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_map">existsb_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.clocks_of_mask">clocks_of_mask</a></span> : <span class="kwd">forall</span> <span class="id">xs</span> <span class="id">k</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.clocks_of">clocks_of</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.mask">mask</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>) <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) ≡ (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.clocks_of">clocks_of</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</div>
<div class="proofscript" id="proof69">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#ntheq_eqst">ntheq_eqst</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb_nth">maskb_nth</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.clocks_of_nth">clocks_of_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_map">existsb_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">_</span> =? <span class="id">k</span>) <span class="id">eqn</span>:<span class="id">Hcount</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_ext">existsb_ext</a></span>; <span class="tactic">intros</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.mask_nth">mask_nth</a></span>, <span class="id">Hcount</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_Forall">existsb_Forall</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb_forall">forallb_forall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.mask_nth">mask_nth</a></span>, <span class="id">Hcount</span>, <span class="id"><a href="Velus.CoindStreams.html#OpAux.neg_eq_value">neg_eq_value</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#equiv_decb_refl">equiv_decb_refl</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> sem_clock and its properties </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="COINDSTREAMS.sem_clock">sem_clock</a></span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.ClockDefs.html#clock">clock</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.Sbase">Sbase</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">b</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> ≡ <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.ClockDefs.html#Cbase">Cbase</a></span> <span class="id">b</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.Son">Son</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">bk</span> <span class="id">bs</span> <span class="id">ck</span> <span class="id">x</span> <span class="id">k</span> <span class="id">xs</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bk">bk</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#OpAux.val_to_bool">val_to_bool</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span>) (<span class="id"><a href="Velus.ClockDefs.html#Con">Con</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>) <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> (<span class="id"><a href="Velus.ClockDefs.html#Con">Con</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.Son_abs1">Son_abs1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">bk</span> <span class="id">bs</span> <span class="id">ck</span> <span class="id">x</span> <span class="id">k</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bk">bk</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span>) (<span class="id"><a href="Velus.ClockDefs.html#Con">Con</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>) <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> (<span class="id"><a href="Velus.ClockDefs.html#Con">Con</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.Son_abs2">Son_abs2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">bk</span> <span class="id">bs</span> <span class="id">ck</span> <span class="id">x</span> <span class="id">k</span> <span class="id">c</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bk">bk</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#OpAux.val_to_bool">val_to_bool</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span>) (<span class="id"><a href="Velus.ClockDefs.html#Con">Con</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>)) <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> (<span class="id"><a href="Velus.ClockDefs.html#Con">Con</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.history_tl_Equiv">history_tl_Equiv</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">H</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.Equiv">Env.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>) <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id">H</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Environment.html#Env.Equiv">Env.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id">H</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</div>
<div class="proofscript" id="proof70">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * [<span class="id">Heq1</span> <span class="id">Heq2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_in_iff">Env.Props.P.F.map_in_iff</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hm1</span> <span class="id">Hm2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Environment.html#Env.Props.P.F.map_mapsto_iff">Env.Props.P.F.map_mapsto_iff</a></span> <span class="kwd">in</span> <span class="id">Hm1</span>, <span class="id">Hm2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hm1</span> <span class="kwd">as</span> [<span class="id">e1</span> [<span class="id">Htl1</span> <span class="id">Hm1</span>]]. <span class="tactic">destruct</span> <span class="id">Hm2</span> <span class="kwd">as</span> [<span class="id">e2</span> [<span class="id">Htl2</span> <span class="id">Hm2</span>]]. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.tl_EqSt">tl_EqSt</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> <span class="id"><a href="Velus.Environment.html#Env.Equiv">Env.Equiv</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>) ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sem_clock_morph</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</div>
<div class="proofscript" id="proof71">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">CoFix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>' <span class="id">Hequiv</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">Eb</span> <span class="id">ck</span> <span class="id">bk</span> <span class="id">bk</span>' <span class="id">Ebk</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1:<span class="tactic">constructor</span>; <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Ebk</span>, &lt;-<span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-3:(<span class="tactic">destruct</span> <span class="id">bk</span>' <span class="kwd">as</span> [[]]; <span class="id">inv</span> <span class="id">Ebk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2,3:(<span class="tactic">assert</span> (<span class="id">Hequiv</span>':=<span class="id">Hequiv</span>); <span class="tactic">destruct</span> <span class="id">Hequiv</span>' <span class="kwd">as</span> [<span class="id">Heq1</span> <span class="id">Heq2</span>]; <span class="id">inv</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Environment.html#Env.MapsTo">Env.MapsTo</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> (<span class="tactic">apply</span> <span class="id"><a href="Velus.Environment.html#Env.find_In">Env.find_In</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> <span class="id">HIn</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heq1</span>, <span class="id"><a href="Velus.Environment.html#Env.In_find">Env.In_find</a></span> <span class="kwd">in</span> <span class="id">HIn</span>; <span class="tactic">destruct</span> <span class="id">HIn</span> <span class="kwd">as</span> [<span class="id">xs</span>'' <span class="id">Hfind</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Heq</span>:=<span class="id">Hfind</span>); <span class="tactic">eapply</span> <span class="id">Heq2</span> <span class="kwd">in</span> <span class="id">Heq</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:(<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>). 7:<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.Son_abs2">Son_abs2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,3,4,6,7,9:(<span class="tactic">eapply</span> <span class="id">CoFix</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="id">inv</span> <span class="id">Eb</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-3:<span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl_Equiv">history_tl_Equiv</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-3:<span class="tactic">econstructor</span>; [<span class="tactic">eauto</span>|<span class="id">etransitivity</span>; <span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sc_step">sc_step</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">s</span> <span class="id">ss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> (<span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#ss">ss</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history_tl">history_tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">Streams.tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span>) <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#ss">ss</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</div>
<div class="proofscript" id="proof72">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">auto</span>. <span class="tactic">econstructor</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">simpl</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">discriminate_stream</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">H</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H1</span>: ?<span class="id">b</span> ≡ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id">_</span>, <span class="id">H2</span> : ?<span class="id">b</span> ≡ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">inversion</span> <span class="id">H2</span> <span class="kwd">as</span> [? <span class="id">H</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">discriminate_var</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> ?<span class="id">H</span> ?<span class="id">x</span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id">_</span> ⋅ <span class="id">_</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span> : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> ?<span class="id">H</span> ?<span class="id">x</span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id">_</span> =&gt; <span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var_det">sem_var_det</a></span> <span class="kwd">with</span> (2 := <span class="id">H2</span>) <span class="kwd">in</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sem_clock_det">sem_clock_det</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ck</span> : <span class="id"><a href="Velus.ClockDefs.html#clock">clock</a></span>) (<span class="id">H</span> : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.history">history</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">b</span> <span class="id">xs</span> <span class="id">xs</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id">xs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> ≡ <span class="id">xs</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</div>
<div class="proofscript" id="proof73">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>. <span class="tactic">intros</span> * <span class="id">Hsc</span> <span class="id">Hsc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">unfold_Stv</span> <span class="id">xs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hsc</span>; <span class="id">inv</span> <span class="id">Hsc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hsc</span>; <span class="id">inv</span> <span class="id">Hsc</span>'; <span class="tactic">try</span> <span class="id">discriminate_stream</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">discriminate_var</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id">_</span> <span class="id">x</span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id">c</span> ⋅ <span class="id">_</span>)) <span class="id">and</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">it</span> <span class="kwd">as</span> [<span class="id">Hit</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hit</span>. <span class="id">inv</span> <span class="id">Hit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">k0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hsc</span>; <span class="id">inv</span> <span class="id">Hsc</span>'; <span class="tactic">try</span> <span class="id">discriminate_stream</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">discriminate_var</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var">sem_var</a></span> <span class="id">_</span> <span class="id">x</span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id">c</span> ⋅ <span class="id">_</span>)) <span class="id">and</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">it</span> <span class="kwd">as</span> [<span class="id">Hit</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hit</span>. <span class="id">inv</span> <span class="id">Hit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hsc</span>; <span class="id">inv</span> <span class="id">Hsc</span>'; <span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="id">now</span> <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">now</span> <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H14</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.sem_clock_true_inv">sem_clock_true_inv</a></span> : <span class="kwd">forall</span> <span class="id">H</span> <span class="id">ck</span> <span class="id">b</span> <span class="id">bs</span> <span class="id">bs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> (<span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span>) <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id">bs</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</div>
<div class="proofscript" id="proof74">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ck</span>; <span class="tactic">intros</span> * <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHck</span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">discriminate_clock</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">HH</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> ?<span class="id">H</span> ?<span class="id">b</span> ?<span class="id">ck</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id">_</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span> : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> ?<span class="id">H</span> ?<span class="id">b</span> ?<span class="id">ck</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id">_</span>) |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock_det">sem_clock_det</a></span> <span class="kwd">with</span> (2 := <span class="id">H2</span>) <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">HH</span> ?]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">HH</span>; <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="COINDSTREAMS.sub_clock">sub_clock</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Definitions.html#relation">relation</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.SubP1">SubP1</a></span> : <span class="kwd">forall</span> <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sub_clock">sub_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id">s</span>' -&gt; <span class="id"><a href="Velus.CoindStreams.html#sub_clock">sub_clock</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id">s</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.SubP2">SubP2</a></span> : <span class="kwd">forall</span> <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sub_clock">sub_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id">s</span>' -&gt; <span class="id"><a href="Velus.CoindStreams.html#sub_clock">sub_clock</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id">s</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.SubA">SubA</a></span> : <span class="kwd">forall</span> <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#sub_clock">sub_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id">s</span>' -&gt; <span class="id"><a href="Velus.CoindStreams.html#sub_clock">sub_clock</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id">s</span>').<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="COINDSTREAMS.sub_clock_trans">sub_clock_trans</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Transitive">Transitive</a></span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock">sub_clock</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</div>
<div class="proofscript" id="proof75">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>. <span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> <span class="id">XY</span> <span class="id">YZ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">x</span>; <span class="id">unfold_Stv</span> <span class="id">z</span>; <span class="id">inv</span> <span class="id">XY</span>; <span class="id">inv</span> <span class="id">YZ</span>; <span class="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="COINDSTREAMS.sub_clock_refl">sub_clock_refl</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Reflexive">Reflexive</a></span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock">sub_clock</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</div>
<div class="proofscript" id="proof76">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>. <span class="tactic">intro</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">x</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock">sub_clock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">sub_clock_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</div>
<div class="proofscript" id="proof77">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>. <span class="tactic">intros</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">Eb</span> <span class="id">c</span> <span class="id">c</span>' <span class="id">Ec</span> <span class="id">Hsub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>'; <span class="id">unfold_Stv</span> <span class="id">c</span>'; <span class="tactic">try</span> <span class="tactic">constructor</span>; <span class="id">inv</span> <span class="id">Eb</span>; <span class="id">inv</span> <span class="id">Ec</span>; <span class="id">inv</span> <span class="id">Hsub</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sub_clock_step">sub_clock_step</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>', <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock">sub_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock">sub_clock</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">Streams.tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">Streams.tl</a></span> <span class="id">b</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</div>
<div class="proofscript" id="proof78">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hs</span>. <span class="id">unfold_Stv</span> <span class="id">b</span>; <span class="id">unfold_Stv</span> <span class="id">b</span>'; <span class="id">inv</span> <span class="id">Hs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sub_clock_Con">sub_clock_Con</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">x</span> <span class="id">b0</span> <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> (<span class="id"><a href="Velus.ClockDefs.html#Con">Con</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#x">x</a></span> <span class="id"><a href="Velus.CoindStreams.html#b0">b0</a></span>) <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock">sub_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</div>
<div class="proofscript" id="proof79">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsc</span> <span class="id">Hsc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">ck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">Hsc</span>. <span class="id">revert</span> <span class="id">Hsc</span>' <span class="id">H1</span>. <span class="id">revert</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">b0</span> <span class="id">s</span> <span class="id">s</span>'. <span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">s</span>'; <span class="id">unfold_Stv</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">inv</span> <span class="id">Hsc</span>'. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hsc</span>' <span class="kwd">as</span> [|????????? <span class="id">Hb</span>'| |]. <span class="id">inv</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">discriminate_stream</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">inv</span> <span class="id">Hsc</span>'; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">inv</span> <span class="id">Hsc</span>'; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">revert</span> <span class="id">Hsc</span> <span class="id">Hsc</span>'. <span class="id">revert</span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">i</span> <span class="id">b1</span> <span class="id">s</span> <span class="id">s</span>' <span class="id">x</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">s</span>'; <span class="id">unfold_Stv</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sc_step">sc_step</a></span> <span class="kwd">in</span> <span class="id">Hsc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sc_step">sc_step</a></span> <span class="kwd">in</span> <span class="id">Hsc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsc</span>'. <span class="id">discriminate_clock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsc</span>'. <span class="id">discriminate_clock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sc_step">sc_step</a></span> <span class="kwd">in</span> <span class="id">Hsc</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sc_step">sc_step</a></span> <span class="kwd">in</span> <span class="id">Hsc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sc_step">sc_step</a></span> <span class="kwd">in</span> <span class="id">Hsc</span>'. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sub_clock_parent">sub_clock_parent</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">ck</span>' <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sem_clock">sem_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#H">H</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id">ck</span>' <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Clocks.html#clock_parent">clock_parent</a></span> <span class="id"><a href="Velus.CoindStreams.html#ck">ck</a></span> <span class="id">ck</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock">sub_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</div>
<div class="proofscript" id="proof80">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsc</span> <span class="id">Hsc</span>' <span class="id">Hparent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="tactic">dependent</span> <span class="id">s</span>'. <span class="tactic">induction</span> <span class="id">Hparent</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock_Con">sub_clock_Con</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">Hsc</span>' <span class="kwd">as</span> [|????????? <span class="id">Hck</span>'|???????? <span class="id">Hck</span>' |????????? <span class="id">Hck</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock_Con">sub_clock_Con</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hck</span>' <span class="id">Hsc</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHparent</span> <span class="kwd">in</span> <span class="id">Hck</span>'; <span class="id">etransitivity</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Aligned and its properties </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="COINDSTREAMS.aligned">aligned</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.synchro_present">synchro_present</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">vs</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#aligned">aligned</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#aligned">aligned</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="COINDSTREAMS.synchro_absent">synchro_absent</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vs</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#aligned">aligned</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#aligned">aligned</a></span> (<span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id"><a name="COINDSTREAMS.aligned_Proper">aligned_Proper</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.aligned">aligned</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</div>
<div class="proofscript" id="proof81">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">vs</span> <span class="id">vs</span>' <span class="id">Heq1</span> <span class="id">bs</span> <span class="id">bs</span>' <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">revert</span> <span class="id">vs</span> <span class="id">vs</span>' <span class="id">Heq1</span> <span class="id">bs</span> <span class="id">bs</span>' <span class="id">Heq2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">aligned_Proper</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span> <span class="id">vs</span>] [<span class="id">v</span>' <span class="id">vs</span>'] <span class="id">Heq1</span> [<span class="id">b</span> <span class="id">bs</span>] [<span class="id">b</span>' <span class="id">bs</span>'] <span class="id">Heq2</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>; <span class="id">inv</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.aligned_spec">aligned_spec</a></span> : <span class="kwd">forall</span> <span class="id">vs</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.aligned">aligned</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, (<span class="tactic">exists</span> <span class="id">v</span>, <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> /\ <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id"><a href="Velus.CoindStreams.html#v">v</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> /\ <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> # <span class="id"><a href="Velus.CoindStreams.html#n">n</a></span> = <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof82')">Proof with</div>
<div class="proofscript" id="proof82">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">H</span> <span class="id">n</span>. <span class="id">revert</span> <span class="id">vs</span> <span class="id">bs</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">left</span>. <span class="tactic">exists</span> <span class="id">v</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">right</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_S">Str_nth_S</a></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">revert</span> <span class="id">vs</span> <span class="id">bs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">CoFix</span>; <span class="tactic">intros</span> * <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">vs</span>; <span class="id">unfold_Stv</span> <span class="id">bs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,4:(<span class="tactic">specialize</span> (<span class="id">H</span> 0); <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonStreams.html#Str_nth_0">Str_nth_0</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[? [? ?]]|[? ?]]; <span class="tactic">try</span> <span class="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:(<span class="tactic">constructor</span>; <span class="id">cofix_step</span> <span class="id">CoFix</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.aligned_EqSt">aligned_EqSt</a></span> : <span class="kwd">forall</span> <span class="id">vs</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.aligned">aligned</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs1">bs1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.aligned">aligned</a></span> <span class="id"><a href="Velus.CoindStreams.html#vs">vs</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs2">bs2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#bs1">bs1</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#bs2">bs2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</div>
<div class="proofscript" id="proof83">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">CoFix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span> <span class="id">vs</span>] [<span class="id">b1</span> <span class="id">bs1</span>] [<span class="id">b2</span> <span class="id">bs2</span>] <span class="id">Hsync1</span> <span class="id">Hsync2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsync1</span>; <span class="id">inv</span> <span class="id">Hsync2</span>; <span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.const_aligned">const_aligned</a></span> : <span class="kwd">forall</span> <span class="id">bs</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.aligned">aligned</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span>) <span class="id"><a href="Velus.CoindStreams.html#bs">bs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof84')">Proof with</div>
<div class="proofscript" id="proof84">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">bs</span> <span class="id">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id">bs</span> <span class="id">c</span>) <span class="kwd">as</span> <span class="id">vs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.aligned_spec">aligned_spec</a></span>. <span class="tactic">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.eq_EqSt">eq_EqSt</a></span>, <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const_spec">const_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Heqvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqvs</span>; <span class="tactic">clear</span> <span class="id">Heqvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">bs</span> # <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">left</span>. <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">right</span>...<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">CoFixpoint</span> <span class="id"><a name="COINDSTREAMS.abstract_clock">abstract_clock</a></span> (<span class="id">xs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span> ⋅ <span class="id">xs</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.CoindStreams.html#OpAux.present">present</a></span> <span class="id">_</span> ⋅ <span class="id">xs</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ⋅ <span class="id"><a href="Velus.CoindStreams.html#abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> : (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.value">value</a></span> ==&gt; @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">ac_EqSt</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</div>
<div class="proofscript" id="proof85">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">Eb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>; <span class="id">unfold_Stv</span> <span class="id">b</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">inv</span> <span class="id">Eb</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.ac_tl">ac_tl</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span>, <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">Streams.tl</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) ≡ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#tl">Streams.tl</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</div>
<div class="proofscript" id="proof86">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">unfold_Stv</span> <span class="id">s</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.ac_when">ac_when</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">cs</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.when">when</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</div>
<div class="proofscript" id="proof87">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwhen</span>. <span class="id">inv</span> <span class="id">Hwhen</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.ac_const">ac_const</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">b</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.const">const</a></span> <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> <span class="id"><a href="Velus.CoindStreams.html#c">c</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#b">b</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</div>
<div class="proofscript" id="proof88">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hconst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">b</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hconst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">cs</span>; <span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.ac_ite">ac_ite</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span>  <span class="id">ts</span> <span class="id">fs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.ite">ite</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> <span class="id"><a href="Velus.CoindStreams.html#fs">fs</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#ts">ts</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</div>
<div class="proofscript" id="proof89">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hite</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">ts</span>; <span class="id">inv</span> <span class="id">Hite</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.ac_lift1">ac_lift1</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">op</span> <span class="id">ty</span> <span class="id">s</span> <span class="id">o</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.lift1">lift1</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty">ty</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id"><a href="Velus.CoindStreams.html#o">o</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#o">o</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</div>
<div class="proofscript" id="proof90">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hlift</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">s</span>; <span class="id">inv</span> <span class="id">Hlift</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.ac_lift2">ac_lift2</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">op</span> <span class="id">ty1</span> <span class="id">ty2</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">o</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.lift2">lift2</a></span> <span class="id"><a href="Velus.CoindStreams.html#op">op</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty1">ty1</a></span> <span class="id"><a href="Velus.CoindStreams.html#ty2">ty2</a></span> <span class="id"><a href="Velus.CoindStreams.html#s1">s1</a></span> <span class="id"><a href="Velus.CoindStreams.html#s2">s2</a></span> <span class="id"><a href="Velus.CoindStreams.html#o">o</a></span> -&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s1">s1</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#o">o</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</div>
<div class="proofscript" id="proof91">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hlift</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">s1</span>; <span class="id">inv</span> <span class="id">Hlift</span>; <span class="tactic">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.ac_aligned">ac_aligned</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span>, <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.aligned">aligned</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</div>
<div class="proofscript" id="proof92">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">s</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span>; <span class="tactic">simpl</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.sub_clock_sclocksof">sub_clock_sclocksof</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">ss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span> <span class="id"><a href="Velus.CoindStreams.html#ss">ss</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">s</span>' =&gt; <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock">sub_clock</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>) (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id">s</span>')) <span class="id"><a href="Velus.CoindStreams.html#ss">ss</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.clocks_of">clocks_of</a></span> <span class="id"><a href="Velus.CoindStreams.html#ss">ss</a></span> ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</div>
<div class="proofscript" id="proof93">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span> <span class="id">Hsub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id">s</span>) <span class="kwd">as</span> <span class="id">acs</span> <span class="id">eqn</span>: <span class="id">Hacs</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.eq_EqSt">eq_EqSt</a></span> <span class="kwd">in</span> <span class="id">Hacs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hin</span> <span class="id">Hacs</span> <span class="id">Hsub</span>. <span class="id">revert</span> <span class="id">s</span> <span class="id">ss</span> <span class="id">acs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="id">s</span>) <span class="kwd">in</span> *; <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [[|]]; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="kwd">in</span> <span class="id">Hacs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hacs</span>; <span class="tactic">inversion</span> <span class="id">Hacs</span> <span class="kwd">as</span> [<span class="id">Hac</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">Hac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_Forall">existsb_Forall</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#forallb_Forall">forallb_Forall</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span> * <span class="id">Hin</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> <span class="id">Hin</span>' <span class="kwd">as</span> <span class="id">Hs</span>; <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hs</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hacs</span> <span class="kwd">in</span> <span class="id">Hs</span>. <span class="tactic">inversion</span> <span class="id">Hs</span> <span class="kwd">as</span> [| |??? <span class="id">HH</span> <span class="id">Hx</span> ]. <span class="id">unfold_Stv</span> <span class="id">x</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="kwd">in</span> <span class="id">Hx</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hx</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_map">Forall_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> * <span class="id">HH</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.ac_tl">ac_tl</a></span>. <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock_step">sub_clock_step</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">Hac</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb_exists">existsb_exists</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="tactic">eapply</span> <span class="id">Cofix</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_map">Forall_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> * <span class="id">HH</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.ac_tl">ac_tl</a></span>. <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.sub_clock_step">sub_clock_step</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COINDSTREAMS.ac_Streams_const">ac_Streams_const</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#const">Streams.const</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux.absent">absent</a></span>) ≡ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#const">Streams.const</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</div>
<div class="proofscript" id="proof94">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">CoFix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COINDSTREAMS.ac_mask">ac_mask</a></span> : <span class="kwd">forall</span> <span class="id">k</span> <span class="id">rs</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.mask">mask</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>) ≡ <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.maskb">maskb</a></span> <span class="id"><a href="Velus.CoindStreams.html#k">k</a></span> <span class="id"><a href="Velus.CoindStreams.html#rs">rs</a></span> (<span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.abstract_clock">abstract_clock</a></span> <span class="id"><a href="Velus.CoindStreams.html#xs">xs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</div>
<div class="proofscript" id="proof95">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">CoFix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">unfold_Stv</span> <span class="id">rs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">destruct</span> <span class="id">k</span> <span class="kwd">as</span> [|[|?]]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#const">Streams.const</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS.ac_Streams_const">ac_Streams_const</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="CoindStreamsFun">CoindStreamsFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op">Op</a></span>) &lt;: <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op">Op</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux">OpAux</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span> <span class="id"><a href="Velus.CoindStreams.html#Op">Op</a></span> <span class="id"><a href="Velus.CoindStreams.html#OpAux">OpAux</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.CoindStreams.html#CoindStreamsFun">CoindStreamsFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
