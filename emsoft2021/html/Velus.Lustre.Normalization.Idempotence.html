
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Idempotence</title>
<meta name="description" content="Documentation of Coq module Idempotence" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Idempotence</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Sorting.Permutation</a></span>.<br/>
<span class="kwd">Import</span> <span class="id">List.ListNotations</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.omega.Omega.html">Omega</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.ProofIrrelevance.html">ProofIrrelevance</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html">Lustre.LCausality</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Normalization.Fresh.html">Lustre.Normalization.Fresh</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Normalization.html">Lustre.Normalization.Normalization</a></span>.<br/>
<br/>
<h1> Idempotence of the normalization </h1>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="IDEMPOTENCE">IDEMPOTENCE</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span> : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span> : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cau</span> : <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY">LCAUSALITY</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Norm</span> : <span class="id"><a href="Velus.Lustre.Normalization.Normalization.html#NORMALIZATION">NORMALIZATION</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Cau">Cau</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Import</span> <span class="id">Fresh</span> <span class="id">Facts</span> <span class="id">Tactics</span>.<br/>
<br/>
<h2> Idempotence of untupling </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="IDEMPOTENCE.normalized_lexp_normalize_idem">normalized_lexp_normalize_idem</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">e</span> <span class="id">is_control</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.normalized_lexp">normalized_lexp</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_exp">unnest_exp</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#is_control">is_control</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = ([<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span>], [], <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof with</div>
<div class="proofscript" id="proof1">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hnormed</span>; <span class="id">revert</span> <span class="id">is_control</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hnormed</span>; <span class="tactic">intro</span> <span class="id">is_control</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [<span class="id">e</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [[<span class="id">e</span>]]. <span class="tactic">exists</span> [[]]. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id">normalized_lexps_normalize_idem</span>' : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">es</span> <span class="id">is_control</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.normalized_lexp">normalized_lexp</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">eqs</span>, <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.Fresh.map_bind2">map_bind2</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_exp">unnest_exp</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#is_control">is_control</a></span>) <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; [<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span>]) <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span>, <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span>, <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>) /\ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span> = [])).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2')">Proof with</div>
<div class="proofscript" id="proof2">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hf</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_lexp_normalize_idem">normalized_lexp_normalize_idem</a></span> <span class="kwd">in</span> <span class="id">H1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id">IHes</span> <span class="id">is_control</span> <span class="id">st</span>) <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">clear</span> <span class="id">IHes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">eqs</span> [<span class="id">H2</span> <span class="id">Heqs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> ([]::<span class="id">eqs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>... <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>... <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>... <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="IDEMPOTENCE.normalized_lexps_normalize_idem">normalized_lexps_normalize_idem</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">es</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.normalized_lexp">normalized_lexp</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_exps">unnest_exps</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span>, [], <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3')">Proof with</div>
<div class="proofscript" id="proof3">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">normalized_lexps_normalize_idem</span>' <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">eqs</span> [<span class="id">H</span> <span class="id">Heqs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_exps">unnest_exps</a></span>; <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#concat_map_singl1">concat_map_singl1</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="IDEMPOTENCE.normalized_cexp_normalize_idem">normalized_cexp_normalize_idem</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">e</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.normalized_cexp">normalized_cexp</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_exp">unnest_exp</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = ([<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span>], [], <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4')">Proof with</div>
<div class="proofscript" id="proof4">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hnormed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hnormed</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [<span class="id">et</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> [[<span class="id">et</span>]]. <span class="tactic">exists</span> [[]]. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> [<span class="id">ef</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [[<span class="id">ef</span>]]. <span class="tactic">exists</span> [[]]. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;ite&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_lexp_normalize_idem">normalized_lexp_normalize_idem</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [<span class="id">et</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> [[<span class="id">et</span>]]. <span class="tactic">exists</span> [[]]. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> [<span class="id">ef</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [[<span class="id">ef</span>]]. <span class="tactic">exists</span> [[]]. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;lexp&nbsp;*)</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_lexp_normalize_idem">normalized_lexp_normalize_idem</a></span>...<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="IDEMPOTENCE.unnest_noops_exps_idem">unnest_noops_exps_idem</a></span> : <span class="kwd">forall</span> <span class="id">cks</span> <span class="id">es</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.noops_exp">noops_exp</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#cks">cks</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_noops_exps">unnest_noops_exps</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#cks">cks</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span>, [], <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5')">Proof with</div>
<div class="proofscript" id="proof5">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_noops_exps">unnest_noops_exps</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hf</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">repeat</span> <span class="tactic">eexists</span>... <span class="id">inv_bind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">inv_bind</span>; <span class="tactic">repeat</span> <span class="tactic">eexists</span>; <span class="tactic">try</span> <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_noops_exp">unnest_noops_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.is_noops_exp_spec">is_noops_exp_spec</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#hd">hd</a></span> <span class="kwd">as</span> (?&amp;?&amp;?). <span class="id">inv_bind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv_bind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="IDEMPOTENCE.unnested_rhs_normalize_idem">unnested_rhs_normalize_idem</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">e</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnested_rhs">unnested_rhs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_rhs">unnest_rhs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = ([<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span>], [], <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6')">Proof with</div>
<div class="proofscript" id="proof6">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hnormed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span>; <span class="id">inv</span> <span class="id">Hnormed</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_rhs">unnest_rhs</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">solve</span> [<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_cexp_normalize_idem">normalized_cexp_normalize_idem</a></span>; <span class="tactic">eauto</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">solve</span> [<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [<span class="id">e0</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_exps">unnest_exps</a></span>; <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> [[<span class="id">e0</span>]]. <span class="tactic">exists</span> [[]]. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [<span class="id">e0</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_lexp_normalize_idem">normalized_lexp_normalize_idem</a></span> <span class="kwd">in</span> <span class="id">H1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> []. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> [<span class="id">e</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">exists</span> [[<span class="id">e</span>]]. <span class="tactic">exists</span> [[]]. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [<span class="id">e</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_lexp_normalize_idem">normalized_lexp_normalize_idem</a></span> <span class="kwd">in</span> <span class="id">H3</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>; <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;arrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [<span class="id">e0</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_exps">unnest_exps</a></span>; <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> [[<span class="id">e0</span>]]. <span class="tactic">exists</span> [[]]. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [<span class="id">e0</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_lexp_normalize_idem">normalized_lexp_normalize_idem</a></span> <span class="kwd">in</span> <span class="id">H1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> []. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> [<span class="id">e</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">exists</span> [[<span class="id">e</span>]]. <span class="tactic">exists</span> [[]]. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> [<span class="id">e</span>]. <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_lexp_normalize_idem">normalized_lexp_normalize_idem</a></span> <span class="kwd">in</span> <span class="id">H3</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>; <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_lexps_normalize_idem">normalized_lexps_normalize_idem</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.find_node_incks">find_node_incks</a></span>; <span class="tactic">rewrite</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.unnest_noops_exps_idem">unnest_noops_exps_idem</a></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;(reset)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_lexps_normalize_idem">normalized_lexps_normalize_idem</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.find_node_incks">find_node_incks</a></span>; <span class="tactic">rewrite</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.unnest_noops_exps_idem">unnest_noops_exps_idem</a></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>... <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id">unnested_rhss_normalize_idem</span>' : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">es</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnested_rhs">unnested_rhs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">exists</span> <span class="id">eqs</span>, <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.Fresh.map_bind2">map_bind2</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_rhs">unnest_rhs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; [<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#e">e</a></span>]) <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span>, <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span>, <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>) /\ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span> = [])).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7')">Proof with</div>
<div class="proofscript" id="proof7">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> <span class="id">st</span> <span class="id">Hf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hf</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.unnested_rhs_normalize_idem">unnested_rhs_normalize_idem</a></span> <span class="kwd">in</span> <span class="id">H1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id">IHes</span> <span class="id">st</span>) <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">clear</span> <span class="id">IHes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">eqs</span> [<span class="id">H2</span> <span class="id">Heqs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> ([]::<span class="id">eqs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">repeat</span> <span class="tactic">eexists</span>; <span class="tactic">eauto</span>; <span class="id">inv_bind</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="IDEMPOTENCE.unnested_rhss_normalize_idem">unnested_rhss_normalize_idem</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">es</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnested_rhs">unnested_rhs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_rhss">unnest_rhss</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#es">es</a></span>, [], <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8')">Proof with</div>
<div class="proofscript" id="proof8">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">unnested_rhss_normalize_idem</span>' <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">eqs</span> [<span class="id">H</span> <span class="id">Heqs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_rhss">unnest_rhss</a></span>; <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#concat_map_singl1">concat_map_singl1</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="IDEMPOTENCE.unnested_equation_unnest_idem">unnested_equation_unnest_idem</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">eq</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.wl_equation">wl_equation</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eq">eq</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnested_equation">unnested_equation</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eq">eq</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_equation">unnest_equation</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eq">eq</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = ([<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eq">eq</a></span>], <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9')">Proof with</div>
<div class="proofscript" id="proof9">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">G</span> [<span class="id">xs</span> <span class="id">es</span>] <span class="id">st</span> <span class="id">Hwl</span> <span class="id">Hnormed</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnested_equation_unnested_rhs">unnested_equation_unnested_rhs</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hnormed</span>) <span class="kwd">as</span> <span class="id">Hnormed2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.unnested_rhss_normalize_idem">unnested_rhss_normalize_idem</a></span> <span class="kwd">with</span> (<span class="id">st</span>:=<span class="id">st</span>) <span class="kwd">in</span> <span class="id">Hnormed2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hnormed</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eexists</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">repeat</span> <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#firstn_all2">firstn_all2</a></span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Le.html#le_refl">le_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#firstn_all2">firstn_all2</a></span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Le.html#le_refl">le_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.length_annot_numstreams">length_annot_numstreams</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#firstn_all2">firstn_all2</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Le.html#le_refl">le_refl</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="IDEMPOTENCE.unnested_equations_unnest_idem">unnested_equations_unnest_idem</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">eqs</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.wl_equation">wl_equation</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnested_equation">unnested_equation</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span>) <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_equations">unnest_equations</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span>, <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof10')">Proof with</div>
<div class="proofscript" id="proof10">
 <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">eqs</span>; <span class="tactic">intros</span> * <span class="id">Hwl</span> <span class="id">Hnormed</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hnormed</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_equations">unnest_equations</a></span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="id">inv_bind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.unnested_equation_unnest_idem">unnested_equation_unnest_idem</a></span> <span class="kwd">in</span> <span class="id">H3</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHeqs</span> <span class="kwd">with</span> (<span class="id">st</span>:=<span class="id">st</span>) <span class="kwd">in</span> <span class="id">H2</span>... <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.Unnesting.unnest_equations">unnest_equations</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> ([<span class="id">a</span>]::<span class="id">x</span>). <span class="tactic">exists</span> <span class="id">st</span>. <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">repeat</span> <span class="tactic">eexists</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>...<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="IDEMPOTENCE.transport1">transport1</a></span> {<span class="id">n1</span> <span class="id">n2</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.node">node</a></span>} (<span class="id">Hin</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) : 0 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>) -&gt; 0 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</div>
<div class="proofscript" id="proof11">
 <span class="tactic">intros</span>. <span class="tactic">induction</span> <span class="id">Hin</span>. <span class="tactic">auto</span>. Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="IDEMPOTENCE.transport2">transport2</a></span> {<span class="id">n1</span> <span class="id">n2</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.node">node</a></span>} (<span class="id">Hout</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) : 0 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>) -&gt; 0 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</div>
<div class="proofscript" id="proof12">
 <span class="tactic">intros</span>. <span class="tactic">induction</span> <span class="id">Hout</span>. <span class="tactic">auto</span>. Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="IDEMPOTENCE.transport3">transport3</a></span> {<span class="id">n1</span> <span class="id">n2</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.node">node</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Heqs</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hvars</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hout</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.vars_defined">vars_defined</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> ((<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>) ++ (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.vars_defined">vars_defined</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> ((<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) ++ (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Heqs</span>. <span class="tactic">induction</span> <span class="id">Hvars</span>. <span class="tactic">induction</span> <span class="id">Hout</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="IDEMPOTENCE.transport4">transport4</a></span> {<span class="id">n1</span> <span class="id">n2</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.node">node</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hin</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hvars</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hout</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Heqs</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.anon_in_eqs">anon_in_eqs</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.anon_in_eqs">anon_in_eqs</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hin</span>. <span class="tactic">induction</span> <span class="id">Hvars</span>. <span class="tactic">induction</span> <span class="id">Hout</span>. <span class="tactic">induction</span> <span class="id">Heqs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="IDEMPOTENCE.transport5">transport5</a></span> {<span class="id">n1</span> <span class="id">n2</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.node">node</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hname</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_name">n_name</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_name">n_name</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hin</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hvars</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hout</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Heqs</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hprefs</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_prefixes">n_prefixes</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_prefixes">n_prefixes</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids.AtomOrGensym">AtomOrGensym</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_prefixes">n_prefixes</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.anon_in_eqs">anon_in_eqs</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>))) /\ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids.atom">atom</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_name">n_name</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids.AtomOrGensym">AtomOrGensym</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_prefixes">n_prefixes</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span> ++ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.anon_in_eqs">anon_in_eqs</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>))) /\ <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids.atom">atom</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_name">n_name</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hname</span>. <span class="tactic">induction</span> <span class="id">Hin</span>. <span class="tactic">induction</span> <span class="id">Hvars</span>. <span class="tactic">induction</span> <span class="id">Hout</span>. <span class="tactic">induction</span> <span class="id">Heqs</span>. <span class="tactic">induction</span> <span class="id">Hprefs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="IDEMPOTENCE.equal_node">equal_node</a></span> (<span class="id">n1</span> <span class="id">n2</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.node">node</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hname</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_name">n_name</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_name">n_name</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hstate</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_hasstate">n_hasstate</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_hasstate">n_hasstate</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hin</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_in">n_in</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hout</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_out">n_out</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hvars</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_vars">n_vars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Heqs</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_eqs">n_eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hprefs</span> : <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_prefixes">n_prefixes</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_prefixes">n_prefixes</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.transport1">transport1</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hin">Hin</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_ingt0">n_ingt0</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>) = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_ingt0">n_ingt0</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.transport2">transport2</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hout">Hout</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_outgt0">n_outgt0</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>) = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_outgt0">n_outgt0</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.transport3">transport3</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Heqs">Heqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hvars">Hvars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hout">Hout</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_defd">n_defd</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>) = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_defd">n_defd</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.transport4">transport4</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hin">Hin</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hvars">Hvars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hout">Hout</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Heqs">Heqs</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_nodup">n_nodup</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>) = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_nodup">n_nodup</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.transport5">transport5</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hname">Hname</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hin">Hin</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hvars">Hvars</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hout">Hout</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Heqs">Heqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Hprefs">Hprefs</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_good">n_good</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span>) = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn.n_good">n_good</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n1">n1</a></span> = <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#n2">n2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Heq3</span> <span class="id">Heq4</span> <span class="id">Heq5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">n1</span>. <span class="tactic">destruct</span> <span class="id">n2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hname</span>. <span class="tactic">destruct</span> <span class="id">Hstate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hin</span>. <span class="tactic">destruct</span> <span class="id">Hout</span>. <span class="tactic">destruct</span> <span class="id">Hvars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Heqs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
<br/>
<h2> Idempotence of fby-normalization </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="IDEMPOTENCE.normalized_equation_fby_idem">normalized_equation_fby_idem</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">to_cut</span> <span class="id">eq</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.NormFby.normalized_equation">normalized_equation</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#to_cut">to_cut</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eq">eq</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.NormFby.fby_equation">fby_equation</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#to_cut">to_cut</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eq">eq</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = ([<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eq">eq</a></span>], <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">G</span> <span class="id">to_cut</span> (<span class="id">xs</span>&amp;<span class="id">es</span>) <span class="id">st</span> <span class="id">Hnormed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">xs</span>; [|<span class="tactic">destruct</span> <span class="id">xs</span>]; <span class="tactic">simpl</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hnormed</span>; <span class="tactic">simpl</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ann0</span> <span class="kwd">as</span> (?&amp;?&amp;?);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.NormFby.is_constant_normalized_constant">is_constant_normalized_constant</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">rewrite</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonPS.html#PSE.mem_3">PSE.mem_3</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">rewrite</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="id">inv_bind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="id">inv_bind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="IDEMPOTENCE.normalized_equations_fby_idem">normalized_equations_fby_idem</a></span> : <span class="kwd">forall</span> <span class="id">G</span> <span class="id">to_cut</span> <span class="id">eqs</span> <span class="id">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.NormFby.normalized_equation">normalized_equation</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#G">G</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#to_cut">to_cut</a></span>) <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.NormFby.fby_equations">fby_equations</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#to_cut">to_cut</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span> = (<span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#eqs">eqs</a></span>, <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#st">st</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">eqs</span>; <span class="tactic">intros</span> * <span class="id">Hnormed</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm.NormFby.fby_equations">fby_equations</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span>; <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exists</span> []. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">inv_bind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hnormed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHeqs</span> <span class="kwd">with</span> (<span class="id">st</span>:=<span class="id">st</span>) <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">clear</span> <span class="id">IHeqs</span>. <span class="tactic">repeat</span> <span class="id">inv_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> ([<span class="id">a</span>]::<span class="id">x</span>). <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">repeat</span> <span class="id">inv_bind</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">exists</span> [<span class="id">a</span>]. <span class="tactic">exists</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE.normalized_equation_fby_idem">normalized_equation_fby_idem</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_bind</span>. <span class="tactic">exists</span> <span class="id">x</span>. <span class="tactic">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">inv_bind</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
<h2> Idempotence of normalization </h2>
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE">IDEMPOTENCE</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="IdempotenceFun">IdempotenceFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span> : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span> : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cau</span> : <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY">LCAUSALITY</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Norm</span> : <span class="id"><a href="Velus.Lustre.Normalization.Normalization.html#NORMALIZATION">NORMALIZATION</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Cau">Cau</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;: <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE">IDEMPOTENCE</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Cau">Cau</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm">Norm</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IDEMPOTENCE">IDEMPOTENCE</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Cau">Cau</a></span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#Norm">Norm</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Normalization.Idempotence.html#IdempotenceFun">IdempotenceFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
