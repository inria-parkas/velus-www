
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module NLIndexedToCoind</title>
<meta name="description" content="Documentation of Coq module NLIndexedToCoind" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h1 class="title">Module NLIndexedToCoind</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html">Sorting.Permutation</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Setoids.Setoid.html">Setoid</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Tactics.html">Program.Tactics</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.FSets.FMapPositive.html">FSets.FMapPositive</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.FunctionalEnvironment.html">FunctionalEnvironment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoreExpr.CESyntax.html">CoreExpr.CESyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLustre.NLSyntax.html">NLustre.NLSyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLustre.NLOrdered.html">NLustre.NLOrdered</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.IndexedStreams.html">IndexedStreams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoindStreams.html">CoindStreams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.IndexedToCoind.html">IndexedToCoind</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoreExpr.CESemantics.html">CoreExpr.CESemantics</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoreExpr.CEInterpreter.html">CoreExpr.CEInterpreter</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLustre.NLIndexedSemantics.html">NLustre.NLIndexedSemantics</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLustre.NLCoindSemantics.html">NLustre.NLCoindSemantics</a></span>.<br/>
<br/>
<div class="doc">We can simplify the proofs a bit :p </div>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoindToIndexed.html">CoindToIndexed</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html">NLCoindToIndexed</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Setoids.Setoid.html">Setoid</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="NLINDEXEDTOCOIND">NLINDEXEDTOCOIND</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>    : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>     : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span>  : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span>      <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span>    : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>             <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">CESyn</span>  : <span class="id"><a href="Velus.CoreExpr.CESyntax.html#CESYNTAX">CESYNTAX</a></span>           <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>    : <span class="id"><a href="Velus.NLustre.NLSyntax.html#NLSYNTAX">NLSYNTAX</a></span>           <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">IStr</span>   : <span class="id"><a href="Velus.IndexedStreams.html#INDEXEDSTREAMS">INDEXEDSTREAMS</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">CStr</span>   : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span>       <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">ICStr</span>  : <span class="id"><a href="Velus.IndexedToCoind.html#INDEXEDTOCOIND">INDEXEDTOCOIND</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr">CStr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ord</span>    : <span class="id"><a href="Velus.NLustre.NLOrdered.html#NLORDERED">NLORDERED</a></span>          <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CESem</span>         : <span class="id"><a href="Velus.CoreExpr.CESemantics.html#CESEMANTICS">CESEMANTICS</a></span>        <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Indexed</span>       : <span class="id"><a href="Velus.NLustre.NLIndexedSemantics.html#NLINDEXEDSEMANTICS">NLINDEXEDSEMANTICS</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ord">Ord</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem">CESem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Interp</span> : <span class="id"><a href="Velus.CoreExpr.CEInterpreter.html#CEINTERPRETER">CEINTERPRETER</a></span>      <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem">CESem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CoInd</span>         : <span class="id"><a href="Velus.NLustre.NLCoindSemantics.html#NLCOINDSEMANTICS">NLCOINDSEMANTICS</a></span>   <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ord">Ord</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Module</span> <span class="id"><a name="NLINDEXEDTOCOIND.CIStr">CIStr</a></span> := <span class="id"><a href="Velus.CoindToIndexed.html#CoindToIndexedFun">CoindToIndexedFun</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Module</span> <span class="id"><a name="NLINDEXEDTOCOIND.NLCIStr">NLCIStr</a></span> := <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCoindToIndexedFun">NLCoindToIndexedFun</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.CIStr">CIStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ord">Ord</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem">CESem</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed">Indexed</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd">CoInd</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NLINDEXEDTOCOIND.Global">Global</a></span>.<br/>
<br/>
<h1> SEMANTICS CORRESPONDENCE </h1>
<br/>
<h2> Variables </h2>
<br/>
<br/>
<div class="doc">An inversion principle for <span class="bracket"><span class="id">sem_vars</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_vars_inv_from">sem_vars_inv_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">xs</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_vars">CESem.sem_vars</a></span> <span class="id">H</span> <span class="id">xs</span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">k</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var">IStr.sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.streams_nth">streams_nth</a></span> <span class="id">k</span> <span class="id">xss</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#skipn">skipn</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> <span class="id">n</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">xs</span> - <span class="id">n</span>)).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_vars">CESem.sem_vars</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift">IStr.lift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#length_skipn">length_skipn</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_seq">length_seq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">x_d</span> <span class="id">k_d</span> <span class="id">n'</span> <span class="id">x</span> <span class="id">k</span> <span class="id">Length</span> <span class="id">Hskipn</span> <span class="id">Hseq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#length_skipn">length_skipn</a></span> <span class="kwd">in</span> <span class="id">Length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#nth_skipn">nth_skipn</a></span> <span class="kwd">in</span> <span class="id">Hskipn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#nth_seq">nth_seq</a></span> <span class="kwd">in</span> <span class="id">Hseq</span>; <span class="id">auto</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">m</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">Sem</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_add_lt_sub_r">Nat.lt_add_lt_sub_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.streams_nth">streams_nth</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_vars_inv">sem_vars_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">xs</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_vars">CESem.sem_vars</a></span> <span class="id">H</span> <span class="id">xs</span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">k</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var">IStr.sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.streams_nth">streams_nth</a></span> <span class="id">k</span> <span class="id">xss</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xs</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">xs</span>)).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>; <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_vars_inv_from">sem_vars_inv_from</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=0) <span class="kwd">in</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_0_r">Nat.sub_0_r</a></span> <span class="kwd">in</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_vars_impl_from">sem_vars_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">xs</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_vars">CESem.sem_vars</a></span> <span class="id">H</span> <span class="id">xs</span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.sem_var">sem_var</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from">tr_history_from</a></span> <span class="id">n</span> <span class="id">H</span>) (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>)) <span class="id">xs</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams_from">tr_streams_from</a></span> <span class="id">n</span> <span class="id">xss</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">xs</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id">xss</span> <span class="id">n</span>)) <span class="kwd">as</span> <span class="id">Length</span> <span class="kwd">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_vars">CESem.sem_vars</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift">IStr.lift</a></span> <span class="kwd">in</span> <span class="id">Sem</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">Sem</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams_from_length">tr_streams_from_length</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_vars_inv">sem_vars_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x_d</span> <span class="id">xs_d</span> <span class="id">n'</span> <span class="id">x</span> <span class="id">xs'</span> <span class="id">En'</span> <span class="id">Ex</span> <span class="id">Exs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (? &amp; <span class="id">Sem</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">n'</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">xs</span>)) 0 = <span class="id">n'</span>) <span class="kwd">as</span> <span class="id">Nth</span> <span class="kwd">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rewrite</span> &lt;-(<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_0_r">Nat.sub_0_r</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">xs</span>)), <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#plus_n_O">plus_n_O</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#nth_seq">nth_seq</a></span>; <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_0_r">Nat.sub_0_r</a></span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">Sem</span> <span class="kwd">in</span> <span class="id">Nth</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl_from">sem_var_impl_from</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">Nth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.nth_tr_streams_from_nth">nth_tr_streams_from_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> &lt;-<span class="id">Length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_vars_impl">sem_vars_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">xs</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_vars">CESem.sem_vars</a></span> <span class="id">H</span> <span class="id">xs</span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.sem_var">sem_var</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>)) <span class="id">xs</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams">tr_streams</a></span> <span class="id">xss</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_vars_impl_from">sem_vars_impl_from</a></span>. Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_vars_impl_from</span> <span class="id">sem_vars_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<h2> exp level synchronous operators inversion principles
        The indexed semantics is inductive only instant-speaking, therefore we
        can't use usual tactics like inversion nor induction.
        We prove some lemmas to provide inversion-like tactics on the semantics
        of exps.
        These lemmas could be proven using the classical axiom of choice which
        gives, from an instant semantics entailment true at every instant,
        the existence of a stream verifying the general entailment.
        But we rather use the interpretor to seq_streams these witnesses, with 2
        benefits :
        1) this is a constructive way of obtaining a witness
        2) we don't rely on an axiom whose use would have to be be deeply
           justified since it would raise some logical contradictions in Coq
     </h2>
<br/>
<div class="doc">This tactic automatically uses the interpretor to give a witness stream. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">interp_str</span> <span class="id">b</span> <span class="id">H</span> <span class="id">x</span> <span class="id">Sem</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Sem_x</span> := <span class="id">fresh</span> <span class="string">"Sem_"</span> <span class="id">x</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">sol</span> <span class="id">sem</span> <span class="id">interp</span> <span class="id">complete</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">sem</span> <span class="id">b</span> <span class="id">H</span> <span class="id">x</span> (<span class="id">interp</span> <span class="id">b</span> <span class="id">H</span> <span class="id">x</span>)) <span class="kwd">as</span> <span class="id">Sem_x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">intro</span>; <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">n</span>:<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> |- _ =&gt; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>) <span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">interp</span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift_interp">lift_interp</a></span>; <span class="id">inv</span> <span class="id">Sem</span>; <span class="id">erewrite</span> &lt;-<span class="id">complete</span>; <span class="id">eauto</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">type</span> <span class="id">of</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.exp">exp</a></span> =&gt; <span class="id">sol</span> <span class="id">CESem.sem_exp</span> <span class="id">interp_exp</span> <span class="id">interp_exp_instant_complete</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.cexp">cexp</a></span> =&gt; <span class="id">sol</span> <span class="id">CESem.sem_cexp</span> <span class="id">interp_cexp</span> <span class="id">interp_cexp_instant_complete</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> =&gt; <span class="id">assert</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var">IStr.sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.interp_var">interp_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>))) <span class="kwd">as</span> <span class="id">Sem_x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">intro</span>; <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">n</span>:<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> |- _ =&gt; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>) <span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.interp_var">interp_var</a></span>, <span class="id">lift_interp'</span>; <span class="id">inv</span> <span class="id">Sem</span>; <span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.interp_var_instant_complete">interp_var_instant_complete</a></span>; <span class="id">eauto</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks.clock">clock</a></span> =&gt; <span class="id">sol</span> <span class="id">IStr.sem_clock</span> <span class="id">interp_clock</span> <span class="id">interp_clock_instant_complete</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.when_inv">when_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">x</span> <span class="id">tx</span> <span class="id">k</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.Ewhen">Ewhen</a></span> <span class="id">e</span> (<span class="id">x</span>, <span class="id">tx</span>) <span class="id">k</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">ys</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">ys</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var">IStr.sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>) <span class="id">xs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">sc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ys</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">sc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.Venum">Venum</a></span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">sc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">sc</span> <span class="id">k'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ys</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">sc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.Venum">Venum</a></span> <span class="id">k'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">k</span> &lt;&gt; <span class="id">k'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ys</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>)).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">interp_str</span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">interp_str</span> <span class="id">b</span> <span class="id">H</span> <span class="id">x</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 2 <span class="id">eexists</span>; <span class="id">intuition</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Sem_e</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Sem_x</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">sc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>; <span class="id">intuition</span> <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">sc</span>, <span class="id">b'</span>; <span class="id">intuition</span>; <span class="id">try</span> <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>; <span class="id">right</span>; <span class="id">repeat</span> <span class="id">split</span>; <span class="id">intuition</span> <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.unop_inv">unop_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">op</span> <span class="id">e</span> <span class="id">ty</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.Eunop">Eunop</a></span> <span class="id">op</span> <span class="id">e</span> <span class="id">ty</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">ys</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">v</span> <span class="id">v'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ys</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.sem_unop">sem_unop</a></span> <span class="id">op</span> <span class="id">v</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> <span class="id">e</span>) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">v'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ys</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">interp_str</span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">intuition</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Sem_e</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> ?<span class="id">e</span> = _, <span class="id">H'</span>: <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> ?<span class="id">e</span> = _ |- _ =&gt; <span class="id">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H'</span>; <span class="id">inv</span> <span class="id">H'</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">do</span> 2 <span class="id">eexists</span>. <span class="id">intuition</span> <span class="id">eauto</span>. <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>; <span class="id">intuition</span> <span class="id">eauto</span>. <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.binop_inv">binop_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.Ebinop">Ebinop</a></span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">ys</span> <span class="id">zs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e1</span> <span class="id">ys</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e2</span> <span class="id">zs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">v'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ys</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">v1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">zs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">v2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.sem_binop">sem_binop</a></span> <span class="id">op</span> <span class="id">v1</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> <span class="id">e1</span>) <span class="id">v2</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> <span class="id">e2</span>) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">v'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ys</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">zs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">interp_str</span> <span class="id">b</span> <span class="id">H</span> <span class="id">e1</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">interp_str</span> <span class="id">b</span> <span class="id">H</span> <span class="id">e2</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 2 <span class="id">eexists</span>; <span class="id">intuition</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Sem_e1</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Sem_e2</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> ?<span class="id">e</span> = _, <span class="id">H'</span>: <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> ?<span class="id">e</span> = _ |- _ =&gt; <span class="id">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H'</span>; <span class="id">inv</span> <span class="id">H'</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>; <span class="id">do</span> 3 <span class="id">eexists</span>; <span class="id">intuition</span>; <span class="id">eauto</span>; <span class="id">try</span> <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">intuition</span>; <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<h2> Semantics of exps </h2>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">use_spec</span> <span class="id">Spec</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> |- _ =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">m</span> := <span class="id">fresh</span> <span class="string">"m"</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">m</span>; <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Spec</span> (<span class="id">m</span> + <span class="id">n</span>))%<span class="id">nat</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span>: _ \/ _ |- _ =&gt; <span class="id">destruct</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct_conjs</span>; <span class="id">firstorder</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">State the correspondence for <span class="bracket"><span class="id">exp</span></span>.
        Goes by induction on <span class="bracket"><span class="id">exp</span></span> and uses the previous inversion lemmas. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#when">when</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#lift1">lift1</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#lift2">lift2</a></span> : <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_exp_impl_from">sem_exp_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_exp">CoInd.sem_exp</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from">tr_history_from</a></span> <span class="id">n</span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">b</span>) <span class="id">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">H</span>; <span class="id">revert</span> <span class="id">b</span> <span class="id">es</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span>; <span class="id">intros</span> * <span class="id">Sem</span>; <span class="id">destruct_conjs</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift">lift</a></span> <span class="kwd">in</span> <span class="id">Sem</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.const_spec">const_spec</a></span>; <span class="id">use_spec</span> <span class="id">Sem</span>; <span class="id">inv</span> <span class="id">Sem</span>; <span class="id">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.enum_spec">enum_spec</a></span>; <span class="id">use_spec</span> <span class="id">Sem</span>; <span class="id">inv</span> <span class="id">Sem</span>; <span class="id">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl_from">sem_var_impl_from</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n'</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">inv</span> <span class="id">Sem</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl_from">sem_var_impl_from</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n'</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">inv</span> <span class="id">Sem</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.when_inv">when_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (<span class="id">ys</span> &amp; <span class="id">xs</span> &amp; ? &amp; ? &amp; <span class="id">Spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl_from">sem_var_impl_from</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.when_spec">when_spec</a></span>; <span class="id">use_spec</span> <span class="id">Spec</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.unop_inv">unop_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (<span class="id">ys</span> &amp; ? &amp; <span class="id">Spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.lift1_spec">lift1_spec</a></span>; <span class="id">use_spec</span> <span class="id">Spec</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.binop_inv">binop_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (<span class="id">ys</span> &amp; <span class="id">zs</span> &amp; ? &amp; ? &amp; <span class="id">Spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.lift2_spec">lift2_spec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">m</span>; <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>; <span class="id">specialize</span> (<span class="id">Spec</span> (<span class="id">m</span> + <span class="id">n</span>)%<span class="id">nat</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: _ \/ _ |- _ =&gt; <span class="id">destruct</span> <span class="id">H</span> <span class="kwd">end</span>; <span class="id">destruct_conjs</span>; <span class="id">auto</span> <span class="kwd">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>; <span class="id">do</span> 3 <span class="id">eexists</span>; <span class="id">auto</span> <span class="kwd">with</span> *; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_exp_impl">sem_exp_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_exp">CoInd.sem_exp</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>) <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_exp_impl_from">sem_exp_impl_from</a></span>. Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_exp_impl_from</span> <span class="id">sem_exp_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<div class="doc">An inversion principle for lists of <span class="bracket"><span class="id">exp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_exps_inv">sem_exps_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">es</span> <span class="id">ess</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exps">CESem.sem_exps</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">es</span> <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">ess'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span>) <span class="id">es</span> <span class="id">ess'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">n</span>, <span class="id">ess</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id">es</span> <span class="id">n</span>) <span class="id">ess'</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">interp_exps'</span> <span class="id">b</span> <span class="id">H</span> <span class="id">es</span>); <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eapply</span> <span class="id">interp_exps'_complete</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">induction</span> <span class="id">Sem</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_exp">interp_exp</a></span>; <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_exp_instant_complete">interp_exp_instant_complete</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">Generalization for lists of <span class="bracket"><span class="id">exp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_exps_impl_from">sem_exps_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">b</span> <span class="id">es</span> <span class="id">ess</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exps">CESem.sem_exps</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">es</span> <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_exp">CoInd.sem_exp</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from">tr_history_from</a></span> <span class="id">n</span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">b</span>)) <span class="id">es</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams_from">tr_streams_from</a></span> <span class="id">n</span> <span class="id">ess</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_exps_inv">sem_exps_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (<span class="id">ess'</span> &amp; <span class="id">Sem</span> &amp; <span class="id">Eess'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id">ess</span> <span class="id">n</span>)) <span class="kwd">as</span> <span class="id">Length</span> <span class="kwd">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rewrite</span> <span class="id">Eess'</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span>; <span class="id">simpl</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span>; <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold_tr_streams</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.seq_streams_length">seq_streams_length</a></span>; <span class="id">simpl</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.nth_tr_streams_from_nth">nth_tr_streams_from_nth</a></span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_exp_impl_from">sem_exp_impl_from</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> (<span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2_eq">Forall2_forall2_eq</a></span> _ _ (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.exp">exp</a></span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.eq_str_refl">eq_str_refl</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (? &amp; <span class="id">Sem</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id">Sem</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.streams_nth">streams_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">k</span>; <span class="id">rewrite</span> <span class="id">Eess'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span> <span class="kwd">with</span> ((<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id">es</span> <span class="id">k</span>) (<span class="kwd">fun</span> _ =&gt; @<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.value">value</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_nth">map_nth</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span>; <span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?? <span class="id">E</span> ?? <span class="id">E'</span> <span class="id">Sem</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.lift_eq_str">CESem.lift_eq_str</a></span>; <span class="id">eauto</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_exps_impl">sem_exps_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">es</span> <span class="id">ess</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exps">CESem.sem_exps</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">es</span> <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_exp">CoInd.sem_exp</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>)) <span class="id">es</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams">tr_streams</a></span> <span class="id">ess</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_exps_impl_from">sem_exps_impl_from</a></span>. Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_exps_impl_from</span> <span class="id">sem_exps_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<div class="doc">An inversion principle for annotated <span class="bracket"><span class="id">exp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_aexp_inv">sem_aexp_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_aexp">CESem.sem_aexp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">ck</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">es</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">exists</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_clock">IStr.sem_clock</a></span> <span class="id">b</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.var_history">Indexed.var_history</a></span> <span class="id">H</span>) <span class="id">ck</span> <span class="id">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bs</span> <span class="id">n</span> = <span class="kwd">match</span> <span class="id">es</span> <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="kwd">match</span> <span class="id">es</span> <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>); <span class="id">split</span>; <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">We deduce from the previous lemmas the correspondence for annotated
        <span class="bracket"><span class="id">exp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_aexp_impl_from">sem_aexp_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">H'</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> _) <span class="id">H'</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from">tr_history_from</a></span> <span class="id">n</span> <span class="id">H</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_aexp">CESem.sem_aexp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">ck</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_aexp">CoInd.sem_aexp</a></span> <span class="id">H'</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">b</span>) <span class="id">ck</span> <span class="id">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="id">intros</span> * <span class="id">Heq</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Sem</span> <span class="kwd">as</span> <span class="id">Sem'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_aexp_inv">sem_aexp_inv</a></span> <span class="kwd">in</span> <span class="id">Sem'</span> <span class="kwd">as</span> (<span class="id">Sem'</span> &amp; <span class="id">bs</span> &amp; <span class="id">Sem_ck</span> &amp; <span class="id">Ebs</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_exp_impl_from">sem_exp_impl_from</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">Sem'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_clock_impl_from">sem_clock_impl_from</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Sem_ck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span> <span class="id">es</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span> <span class="id">bs</span>), <span class="id">Ebs</span> <span class="kwd">in</span> <span class="id">Sem_ck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">es</span> <span class="id">n</span>); <span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2,4,5:<span class="id">rewrite</span> <span class="id">Heq</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_tl">init_from_tl</a></span>; <span class="id">eapply</span> <span class="id">Cofix</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:(<span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from_tl">tr_history_from_tl</a></span>; <span class="id">eapply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map_Equiv">FEnv.map_Equiv</a></span>; <span class="id">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">HE</span>; <span class="id">now</span> <span class="id">rewrite</span> <span class="id">HE</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_aexp_impl">sem_aexp_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_aexp">CESem.sem_aexp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">ck</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_aexp">CoInd.sem_aexp</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>) <span class="id">ck</span> <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_aexp_impl_from">sem_aexp_impl_from</a></span>; <span class="id">eauto</span>. <span class="id">reflexivity</span>. Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_aexp_impl_from</span> <span class="id">sem_aexp_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<h2> cexp level synchronous operators inversion principles </h2>
<br/>
<div class="doc">An inversion principle for lists of <span class="bracket"><span class="id">cexp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_cexps_inv">sem_cexps_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">es</span> <span class="id">ess</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp_instant">CESem.sem_cexp_instant</a></span> (<span class="id">b</span> <span class="id">n</span>) (<span class="id">H</span> <span class="id">n</span>)) <span class="id">es</span> (<span class="id">ess</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">ess'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span> <span class="id">b</span> <span class="id">H</span>) <span class="id">es</span> <span class="id">ess'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">n</span>, <span class="id">ess</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id">es</span> <span class="id">n</span>) <span class="id">ess'</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">interp_cexps'</span> <span class="id">b</span> <span class="id">H</span> <span class="id">es</span>); <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eapply</span> <span class="id">interp_cexps'_complete</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">induction</span> <span class="id">Sem</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp">interp_cexp</a></span>; <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.merge_inv">merge_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">tx</span> <span class="id">l</span> <span class="id">ty</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span> <span class="id">b</span> <span class="id">H</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.Emerge">Emerge</a></span> (<span class="id">x</span>, <span class="id">tx</span>) <span class="id">l</span> <span class="id">ty</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">xs</span> <span class="id">ess</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var">IStr.sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>) <span class="id">xs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span> <span class="id">b</span> <span class="id">H</span>) <span class="id">l</span> <span class="id">ess</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">b</span> <span class="id">c</span> <span class="id">ess1</span> <span class="id">es</span> <span class="id">ess2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.Venum">Venum</a></span> <span class="id">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">ess</span> = <span class="id">ess1</span> ++ <span class="id">es</span> :: <span class="id">ess2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess1</span> = <span class="id">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">xs</span> =&gt; <span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>) (<span class="id">ess1</span> ++ <span class="id">ess2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">os</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">xs</span> =&gt; <span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>) <span class="id">ess</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">os</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>)).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">interp_str</span> <span class="id">b</span> <span class="id">H</span> <span class="id">x</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp_instant">CESem.sem_cexp_instant</a></span> (<span class="id">b</span> <span class="id">n</span>) (<span class="id">H</span> <span class="id">n</span>)) <span class="id">l</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexps">interp_cexps</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">l</span> <span class="id">n</span>)) <span class="kwd">as</span> <span class="id">Seml</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _) <span class="id">and</span> <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (<span class="id">Hes1</span> &amp; <span class="id">Hes2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexps">interp_cexps</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift_interp">lift_interp</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexps_instant">interp_cexps_instant</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>; <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2_app">Forall2_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">clear</span> - <span class="id">Hes1</span>; <span class="id">induction</span> <span class="id">Hes1</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">clear</span> - <span class="id">Hes2</span>; <span class="id">induction</span> <span class="id">Hes2</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _) <span class="id">and</span> <span class="id">induction</span> <span class="id">it</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_cexps_inv">sem_cexps_inv</a></span> <span class="kwd">in</span> <span class="id">Seml</span> <span class="kwd">as</span> (<span class="id">ess'</span> &amp; <span class="id">Sem_l</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 2 <span class="id">eexists</span>; <span class="id">split</span>; <span class="id">eauto</span>; <span class="id">split</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span>; <span class="id">specialize</span> (<span class="id">Sem_x</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>; <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es1</span>), <span class="id">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2_app_inv_l">Forall2_app_inv_l</a></span> <span class="kwd">in</span> <span class="id">Sem_l</span> <span class="kwd">as</span> (<span class="id">ess1</span> &amp; <span class="id">ess2'</span> &amp; <span class="id">Hess1</span> &amp; <span class="id">Hess2'</span> &amp; <span class="id">E'</span>); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">Hess2'</span> <span class="kwd">as</span> [|? <span class="id">es</span> ? <span class="id">ess2</span> <span class="id">He</span> <span class="id">Hess2</span>]; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es1</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess1</span>) <span class="kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span>; <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">E</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexps">interp_cexps</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift_interp">lift_interp</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexps_instant">interp_cexps_instant</a></span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> ? <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#app_inv">app_inv</a></span> <span class="kwd">in</span> <span class="id">E</span> <span class="kwd">as</span> (<span class="id">E1</span> &amp; <span class="id">E2'</span>); [|<span class="id">rewrite</span> ? <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span>; <span class="id">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">E2'</span> <span class="kwd">as</span> [[<span class="id">E</span> <span class="id">E2</span>]]; <span class="id">clear</span> <span class="id">E2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 3 <span class="id">eexists</span>; <span class="id">intuition</span>; <span class="id">eauto</span>; <span class="id">try</span> <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> &lt;- <span class="id">E</span>, &lt;- <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span>; <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _) <span class="id">and</span> <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (<span class="id">Sem1</span> &amp; <span class="id">Sem2</span>); <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">clear</span> - <span class="id">E1</span> <span class="id">Sem1</span>; <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">ess1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Sem1</span>, <span class="id">ess1</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">discriminate</span>; <span class="id">constructor</span>; <span class="id">inv</span> <span class="id">E1</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">clear</span> - <span class="id">E2</span> <span class="id">Sem2</span>; <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">ess2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Sem2</span>, <span class="id">ess2</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">discriminate</span>; <span class="id">constructor</span>; <span class="id">inv</span> <span class="id">E2</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>; <span class="id">repeat</span> <span class="id">split</span>; <span class="id">auto</span>; <span class="id">try</span> <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _) <span class="id">and</span> <span class="id">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">Sem</span>; <span class="id">clear</span> - <span class="id">Sem</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">E</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">ess'</span>; <span class="id">induction</span> <span class="id">Sem</span>, <span class="id">ess'</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">discriminate</span>; <span class="id">constructor</span>; <span class="id">inv</span> <span class="id">E</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">An inversion principle for lists of <span class="bracket"><span class="id">option</span> <span class="id">cexp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_ocexps_inv">sem_ocexps_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">es</span> <span class="id">ess</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">oe</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp_instant">CESem.sem_cexp_instant</a></span> (<span class="id">b</span> <span class="id">n</span>) (<span class="id">H</span> <span class="id">n</span>) (<span class="id"><a href="Velus.Common.Common.html#or_default">or_default</a></span> <span class="id">e</span> <span class="id">oe</span>)) <span class="id">es</span> (<span class="id">ess</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">ess'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">oe</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span> <span class="id">b</span> <span class="id">H</span> (<span class="id"><a href="Velus.Common.Common.html#or_default">or_default</a></span> <span class="id">e</span> <span class="id">oe</span>)) <span class="id">es</span> <span class="id">ess'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">n</span>, <span class="id">ess</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id">es</span> <span class="id">n</span>) <span class="id">ess'</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">interp_ocexps'</span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">es</span>); <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eapply</span> <span class="id">interp_ocexps'_complete</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">induction</span> <span class="id">Sem</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp">interp_cexp</a></span>; <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.case_inv">case_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">l</span> <span class="id">d</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span> <span class="id">b</span> <span class="id">H</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.Ecase">Ecase</a></span> <span class="id">e</span> <span class="id">l</span> <span class="id">d</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">xs</span> <span class="id">ess</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">xs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">oe</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span> <span class="id">b</span> <span class="id">H</span> (<span class="id"><a href="Velus.Common.Common.html#or_default">or_default</a></span> <span class="id">d</span> <span class="id">oe</span>)) <span class="id">l</span> <span class="id">ess</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">xs</span> =&gt; <span class="id">xs</span> <span class="id">n</span> &lt;&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>) <span class="id">ess</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">exists</span> <span class="id">b</span> <span class="id">c</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.Venum">Venum</a></span> <span class="id">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id">ess</span> <span class="id">b</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">es</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">os</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">xs</span> =&gt; <span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>) <span class="id">ess</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">os</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>)).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">interp_str</span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">oe</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp_instant">CESem.sem_cexp_instant</a></span> (<span class="id">b</span> <span class="id">n</span>) (<span class="id">H</span> <span class="id">n</span>) (<span class="id"><a href="Velus.Common.Common.html#or_default">or_default</a></span> <span class="id">d</span> <span class="id">oe</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">l</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_ocexps">interp_ocexps</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">d</span> <span class="id">l</span> <span class="id">n</span>)) <span class="kwd">as</span> <span class="id">Seml</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp_instant">CESem.sem_cexp_instant</a></span> (<span class="id">b</span> <span class="id">n</span>) (<span class="id">H</span> <span class="id">n</span>) (<span class="id"><a href="Velus.Common.Common.html#or_default">or_default</a></span> <span class="id">d</span> <span class="id">e</span>) <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> <span class="id">vs</span>)) <span class="kwd">by</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_ocexps">interp_ocexps</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift_interp">lift_interp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_ocexps_instant_complete">interp_ocexps_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _) <span class="id">and</span> <span class="id">clear</span> - <span class="id">it</span>; <span class="id">induction</span> <span class="id">it</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_ocexps_inv">sem_ocexps_inv</a></span> <span class="kwd">in</span> <span class="id">Seml</span> <span class="kwd">as</span> (<span class="id">ess'</span> &amp; <span class="id">Sem_l</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 2 <span class="id">eexists</span>; <span class="id">split</span>; <span class="id">eauto</span>; <span class="id">split</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span>; <span class="id">specialize</span> (<span class="id">Sem_e</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">E</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_ocexps">interp_ocexps</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift_interp">lift_interp</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_ocexps_instant">interp_ocexps_instant</a></span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> ? <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">ess'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> _ _ _) <span class="id">and</span> <span class="id">clear</span> - <span class="id">it</span>; <span class="id">induction</span> <span class="id">it</span>, <span class="id">ess'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> 1; <span class="id">constructor</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">E</span>; <span class="id">inv</span> <span class="id">E</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>; <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">exists</span> <span class="id">b0</span>, <span class="id">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> _ _ = _) <span class="id">and</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_split">nth_error_split</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (<span class="id">vs1</span> &amp; <span class="id">vs2</span> &amp; <span class="id">Nth</span> &amp; <span class="id">Length</span>); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> _ _ (_ ++ _)) <span class="id">and</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2_app_inv_r">Forall2_app_inv_r</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (<span class="id">es1</span> &amp; <span class="id">es2'</span> &amp; <span class="id">Hes1</span> &amp; <span class="id">Hes2'</span> &amp; ?); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> _ (_ ++ _) _) <span class="id">and</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2_app_inv_l">Forall2_app_inv_l</a></span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> (<span class="id">ess1</span> &amp; <span class="id">ess2'</span> &amp; <span class="id">Hess1</span> &amp; <span class="id">Hess2'</span> &amp; ?); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">Hes1</span> <span class="kwd">as</span> <span class="id">L1</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">Hess1</span> <span class="kwd">as</span> <span class="id">L1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id">L1</span>, <span class="id">L1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_app2">nth_error_app2</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_diag">Nat.sub_diag</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hes2'</span>; <span class="id">inv</span> <span class="id">Hess2'</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id">L1'</span>, <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">intuition</span> <span class="id">eauto</span>; <span class="id">try</span> <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> ? <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#app_inv">app_inv</a></span> <span class="kwd">in</span> <span class="id">E</span> <span class="kwd">as</span> (?&amp; <span class="id">E'</span>); [|<span class="id">now</span> <span class="id">rewrite</span> 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">List.length_map</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">E'</span>; <span class="id">inv</span> <span class="id">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>; <span class="id">repeat</span> <span class="id">split</span>; <span class="id">auto</span>; <span class="id">try</span> <span class="id">CESem.sem_det</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _) <span class="id">and</span> <span class="id">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">Sem</span>; <span class="id">clear</span> - <span class="id">Sem</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">E</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">ess'</span>; <span class="id">induction</span> <span class="id">Sem</span>, <span class="id">ess'</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">discriminate</span>; <span class="id">constructor</span>; <span class="id">inv</span> <span class="id">E</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_cexp_instant_complete">interp_cexp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.exp_inv">exp_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">le</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span> <span class="id">b</span> <span class="id">H</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.Eexp">Eexp</a></span> <span class="id">le</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">le</span> <span class="id">es</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc"><span class="bracket"><span class="id">fby</span></span> is not a predicate but a function, so we directly state the
        correspondence.  </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.fby_impl_from">fby_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">c</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.fby">Indexed.fby</a></span> <span class="id">c</span> <span class="id">xs</span>) <span class="id">≡</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.sfby">sfby</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.hold">Indexed.hold</a></span> <span class="id">c</span> <span class="id">xs</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">xs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span>; <span class="id">rewrite</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span> <span class="id">xs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.fby">Indexed.fby</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">xs</span> <span class="id">n</span>) <span class="id">eqn</span>: <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.hold_abs">Indexed.hold_abs</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.hold_pres">Indexed.hold_pres</a></span> <span class="id">v</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.fby_impl">fby_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.fby">Indexed.fby</a></span> <span class="id">c</span> <span class="id">xs</span>) <span class="id">≡</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.sfby">sfby</a></span> <span class="id">c</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">xs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.fby_impl_from">fby_impl_from</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="NLINDEXEDTOCOIND.tr_Stream_eqst">tr_Stream_eqst</a></span> {<span class="id">A</span>} : <span class="kwd">forall</span> (<span class="id">x</span> : <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.stream">stream</a></span> <span class="id">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_Stream">CIStr.tr_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">x</span>) <span class="id">≈</span> <span class="id">x</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_Stream">CIStr.tr_Stream</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_0_r">Nat.add_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.reset_impl">reset_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v0</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.reset">Indexed.reset</a></span> <span class="id">v0</span> <span class="id">xs</span> <span class="id">rs</span>) <span class="id">≡</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.reset">CoInd.reset</a></span> <span class="id">v0</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">xs</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">rs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#ntheq_eqst">ntheq_eqst</a></span>. <span class="id">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_0_r">Nat.add_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.reset">Indexed.reset</a></span> <span class="id">v0</span> <span class="id">xs</span> <span class="id">rs</span> <span class="id">n</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.reset">Indexed.reset</a></span> <span class="id">v0</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_Stream">CIStr.tr_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">xs</span>)) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_Stream">CIStr.tr_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">rs</span>)) <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.reset">Indexed.reset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_Stream_eqst">tr_Stream_eqst</a></span>. <span class="id">destruct</span> (<span class="id">xs</span> <span class="id">n</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_Stream_eqst">tr_Stream_eqst</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">rs</span> _); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_Stream_eqst">tr_Stream_eqst</a></span>. <span class="id">destruct</span> (<span class="id">xs</span> _); <span class="id">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.reset_impl">NLCIStr.reset_impl</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.reset_fby_impl">reset_fby_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v0</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.reset">Indexed.reset</a></span> <span class="id">v0</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.fby">Indexed.fby</a></span> <span class="id">v0</span> <span class="id">xs</span>) <span class="id">rs</span>) <span class="id">≡</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.reset">CoInd.reset</a></span> <span class="id">v0</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.sfby">sfby</a></span> <span class="id">v0</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">xs</span>)) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">rs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.reset_impl">reset_impl</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.fby_impl">fby_impl</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<h2> Semantics of cexps </h2>
<br/>
<div class="doc">State the correspondence for <span class="bracket"><span class="id">cexp</span></span>.
        Goes by induction on <span class="bracket"><span class="id">cexp</span></span> and uses the previous inversion lemmas. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#merge">merge</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#case">case</a></span> : <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_cexp_impl_from">sem_cexp_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_cexp">CoInd.sem_cexp</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from">tr_history_from</a></span> <span class="id">n</span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">b</span>) <span class="id">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">H</span>; <span class="id">revert</span> <span class="id">b</span> <span class="id">es</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.cexp_ind2">cexp_ind2</a></span>; <span class="id">intros</span> * <span class="id">Sem</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift">IStr.lift</a></span> <span class="kwd">in</span> <span class="id">Sem</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">x</span>; <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.merge_inv">merge_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (<span class="id">xs</span> &amp; <span class="id">ess</span> &amp; ? &amp; <span class="id">Hess</span> &amp; <span class="id">Spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl_from">sem_var_impl_from</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">instantiate</span> (1 := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span>) <span class="id">ess</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _) <span class="id">and</span> <span class="id">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Hess</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">inv</span> <span class="id">IH</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.merge_spec">merge_spec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">m</span>; <span class="id">specialize</span> (<span class="id">Spec</span> (<span class="id">m</span> + <span class="id">n</span>)%<span class="id">nat</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Spec</span> <span class="kwd">as</span> [(?&amp;?&amp;?&amp;?&amp;?&amp;<span class="id">Hxs</span>&amp;<span class="id">Happ</span>&amp;<span class="id">Hlen</span>&amp;<span class="id">Hpres</span>&amp;<span class="id">Habs</span>&amp;<span class="id">Hes</span>)|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hxs</span>&amp;<span class="id">Habs</span>&amp;<span class="id">Hes</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span>; <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">right</span>; <span class="id">do</span> 2 <span class="id">eexists</span>; <span class="id">intuition</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists_exists">Exists_exists</a></span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">x1</span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">x2</span>); <span class="id">repeat</span> <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_combine_seq">In_combine_seq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">map_nth_error'</span>, <span class="id"><a href="Velus.Common.CommonList.html#nth_error_app3">nth_error_app3</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="id">intros</span> (?&amp;?) <span class="id">Hin</span> <span class="id">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_combine_seq">In_combine_seq</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">map_nth_error'</span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonTactics.html#option_map_inv">option_map_inv</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin</span>&amp;?); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span> <span class="kwd">in</span> <span class="id">Habs</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_decidable">Nat.lt_decidable</a></span> <span class="id">e</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">x1</span>)) <span class="kwd">as</span> [<span class="id">Hlt</span>|<span class="id">Hge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:(<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Compare_dec.html#not_lt">Compare_dec.not_lt</a></span> <span class="kwd">in</span> <span class="id">Hge</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_decidable">Nat.lt_decidable</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">x1</span>) <span class="id">e</span>) <span class="kwd">as</span> [<span class="id">Hle</span>|<span class="id">Hgt</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_app1">nth_error_app1</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; [|<span class="id">eauto</span>]; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_app2">nth_error_app2</a></span> <span class="kwd">in</span> <span class="id">Hin</span>. 2:<span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">e</span> - <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">x1</span>) <span class="id">eqn</span>:<span class="id">Hl</span>; <span class="id">try</span> <span class="id">lia</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; [|<span class="id">eauto</span>]; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Compare_dec.html#not_lt">Compare_dec.not_lt</a></span> <span class="kwd">in</span> <span class="id">Hgt</span>. <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hlen</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.le_antisymm">Nat.le_antisymm</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">left</span>. <span class="id">intuition</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="id">intros</span> (?&amp;?) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_combine_seq">In_combine_seq</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">map_nth_error'</span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonTactics.html#option_map_inv">option_map_inv</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin</span>&amp;?); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; [|<span class="id">eauto</span>]; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>; <span class="id">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.case_inv">case_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (<span class="id">xs</span> &amp; <span class="id">ess</span> &amp; ? &amp; <span class="id">Hess</span> &amp; <span class="id">Spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">instantiate</span> (1 := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span>) <span class="id">ess</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _) <span class="id">and</span> <span class="id">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Hess</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">inv</span> <span class="id">IH</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.case_spec">case_spec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">m</span>; <span class="id">specialize</span> (<span class="id">Spec</span> (<span class="id">m</span> + <span class="id">n</span>)%<span class="id">nat</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Spec</span> <span class="kwd">as</span> [(?&amp;?&amp;?&amp;?&amp;<span class="id">Hxs</span>&amp;<span class="id">Hsome</span>&amp;<span class="id">Hpres</span>&amp;<span class="id">Hes</span>)|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hxs</span>&amp;<span class="id">Habs</span>&amp;<span class="id">Hes</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span>; <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">right</span>; <span class="id">left</span>; <span class="id">do</span> 2 <span class="id">eexists</span>; <span class="id">intuition</span> <span class="id">eauto</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="id">intros</span> (?&amp;?) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_combine_seq">In_combine_seq</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">map_nth_error'</span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonTactics.html#option_map_inv">option_map_inv</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin</span>&amp;?); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; [|<span class="id">eauto</span>]; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists_exists">Exists_exists</a></span>. <span class="kwd">exists</span> (<span class="id">x</span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">x1</span>); <span class="id">repeat</span> <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_combine_seq">In_combine_seq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">map_nth_error'</span>, <span class="id">Hsome</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">left</span>; <span class="id">intuition</span> <span class="id">eauto</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="id">intros</span> (?&amp;?) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_combine_seq">In_combine_seq</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">map_nth_error'</span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonTactics.html#option_map_inv">option_map_inv</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin</span>&amp;?); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; [|<span class="id">eauto</span>]; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.exp_inv">exp_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span>; <span class="id">constructor</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_cexp_impl">sem_cexp_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_cexp">CESem.sem_cexp</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_cexp">CoInd.sem_cexp</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>) <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_cexp_impl_from">sem_cexp_impl_from</a></span>. Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_cexp_impl_from</span> <span class="id">sem_cexp_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<h2> Semantics of rhss </h2>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.extcall_inv">extcall_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">f</span> <span class="id">es</span> <span class="id">tyout</span> <span class="id">os</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_rhs">CESem.sem_rhs</a></span> <span class="id">b</span> <span class="id">H</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.Eextcall">Eextcall</a></span> <span class="id">f</span> <span class="id">es</span> <span class="id">tyout</span>) <span class="id">os</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">tyins</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">ty</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> <span class="id">e</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.Tprimitive">Tprimitive</a></span> <span class="id">ty</span>) <span class="id">es</span> <span class="id">tyins</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp">CESem.sem_exp</a></span> <span class="id">b</span> <span class="id">H</span>) <span class="id">es</span> <span class="id">xss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">n</span>, (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">xs</span> =&gt; <span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>) <span class="id">xss</span> /\ <span class="id">os</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">xs</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xs0</span> <span class="id">x0</span> =&gt; <span class="id">xs0</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.Vscalar">Vscalar</a></span> <span class="id">x0</span>)) <span class="id">xss</span> <span class="id">xs</span> /\ <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.sem_extern">sem_extern</a></span> <span class="id">f</span> <span class="id">tyins</span> <span class="id">xs</span> <span class="id">tyout</span> <span class="id">y</span> /\ <span class="id">os</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.Vscalar">Vscalar</a></span> <span class="id">y</span>))).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hrhs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp_instant">CESem.sem_exp_instant</a></span> (<span class="id">b</span> <span class="id">n</span>) (<span class="id">H</span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">es</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_exps">interp_exps</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">es</span> <span class="id">n</span>)) <span class="kwd">as</span> <span class="id">Seml</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Hrhs</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Hrhs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_exp_instant">CESem.sem_exp_instant</a></span> (<span class="id">b</span> <span class="id">n</span>) (<span class="id">H</span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">es</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.Vscalar">Vscalar</a></span> <span class="id">v</span>)) <span class="id">vs</span>)) <span class="kwd">by</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_exps">interp_exps</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift_interp">lift_interp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_exps_instant_complete">interp_exps_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _) <span class="id">and</span> <span class="id">clear</span> - <span class="id">it</span>; <span class="id">induction</span> <span class="id">it</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_exp_instant_complete">interp_exp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> <span class="id">ty</span> =&gt; <span class="kwd">match</span> <span class="id">ty</span> <span class="kwd">with</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.Tprimitive">Tprimitive</a></span> <span class="id">cty</span> =&gt; <span class="id">cty</span> | _ =&gt; <span class="id">tyout</span> <span class="kwd">end</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> <span class="id">es</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">interp_exps'</span> <span class="id">b</span> <span class="id">H</span> <span class="id">es</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">Hrhs</span> 0). <span class="id">inv</span> <span class="id">Hrhs</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> _ <span class="id">es</span> <span class="id">tyins</span>) <span class="id">and</span> <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> _ = _) <span class="id">and</span> <span class="id">now</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> _ <span class="id">es</span> <span class="id">tyins</span>) <span class="id">and</span> <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> _ = _) <span class="id">and</span> <span class="id">now</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eapply</span> <span class="id">interp_exps'_complete</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">n</span>. <span class="id">specialize</span> (<span class="id">Hrhs</span> <span class="id">n</span>). <span class="id">specialize</span> (<span class="id">Seml</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hrhs</span>; [<span class="id">right</span>|<span class="id">left</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">do</span> 2 <span class="id">esplit</span>. <span class="id">repeat</span> <span class="id">split</span>. <span class="id">instantiate</span> (1:=<span class="id">vs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">unfold</span> <span class="id">interp_exps'</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_exp_instant_complete">interp_exp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> _ _) <span class="kwd">with</span> <span class="id">tyins</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_eq">Forall2_eq</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>. <span class="id">simpl_Forall</span>. <span class="id">take</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn.typeof">typeof</a></span> _ = _) <span class="id">and</span> <span class="id">now</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span> <span class="kwd">in</span> <span class="id">Seml</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">interp_exps'</span> <span class="kwd">in</span> *; <span class="id">simpl_In</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp.interp_exp_instant_complete">interp_exp_instant_complete</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">State the correspondence for <span class="bracket"><span class="id">rhs</span></span>.
        Goes by induction on <span class="bracket"><span class="id">rhs</span></span> and uses the previous inversion lemmas. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_rhs_impl_from">sem_rhs_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_rhs">CESem.sem_rhs</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_rhs">CoInd.sem_rhs</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from">tr_history_from</a></span> <span class="id">n</span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">b</span>) <span class="id">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_rhs">CESem.sem_rhs</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift">IStr.lift</a></span> <span class="kwd">in</span> <span class="id">Sem</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;external&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.extcall_inv">extcall_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (?&amp;<span class="id">ess</span>&amp;<span class="id">Htys</span>&amp;<span class="id">Hsems</span>&amp;<span class="id">Hlift</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>. <span class="id">instantiate</span> (1:=<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span>) <span class="id">ess</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_exp_impl_from">sem_exp_impl_from</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.liftn_spec">liftn_spec</a></span>. <span class="id">intros</span> ?. <span class="id">specialize</span> (<span class="id">Hlift</span> (<span class="id">n0</span> + <span class="id">n</span>)%<span class="id">nat</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hlift</span> <span class="kwd">as</span> [(?&amp;?)|(?&amp;?&amp;?&amp;?&amp;?)]; [<span class="id">left</span>|<span class="id">right</span>; <span class="id">do</span> 2 <span class="id">esplit</span>]; <span class="id">repeat</span> <span class="id">split</span>; <span class="id">eauto</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>; <span class="id">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;cexp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_cexp_impl_from">sem_cexp_impl_from</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?. <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n0</span>). <span class="id">now</span> <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_rhs_impl">sem_rhs_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_rhs">CESem.sem_rhs</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_rhs">CoInd.sem_rhs</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>) <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_rhs_impl_from">sem_rhs_impl_from</a></span>. Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_rhs_impl_from</span> <span class="id">sem_rhs_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<div class="doc">An inversion principle for annotated <span class="bracket"><span class="id">rhs</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_arhs_inv">sem_arhs_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_arhs">CESem.sem_arhs</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">ck</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_rhs">CESem.sem_rhs</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> <span class="id">es</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">exists</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_clock">IStr.sem_clock</a></span> <span class="id">b</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.var_history">Indexed.var_history</a></span> <span class="id">H</span>) <span class="id">ck</span> <span class="id">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">bs</span> <span class="id">n</span> = <span class="kwd">match</span> <span class="id">es</span> <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="kwd">match</span> <span class="id">es</span> <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.present">present</a></span> _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>); <span class="id">split</span>; <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">inv</span> <span class="id">Sem</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">We deduce from the previous lemmas the correspondence for annotated </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_arhs_impl_from">sem_arhs_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">H'</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> _) <span class="id">H'</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from">tr_history_from</a></span> <span class="id">n</span> <span class="id">H</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_arhs">CESem.sem_arhs</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">ck</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_arhs">CoInd.sem_arhs</a></span> <span class="id">H'</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">b</span>) <span class="id">ck</span> <span class="id">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="id">intros</span> * <span class="id">Heq</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Sem</span> <span class="kwd">as</span> <span class="id">Sem'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_arhs_inv">sem_arhs_inv</a></span> <span class="kwd">in</span> <span class="id">Sem'</span> <span class="kwd">as</span> (<span class="id">Sem'</span> &amp; <span class="id">bs</span> &amp; <span class="id">Sem_ck</span> &amp; <span class="id">Ebs</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_rhs_impl_from">sem_rhs_impl_from</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">Sem'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_clock_impl_from">sem_clock_impl_from</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Sem_ck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span> <span class="id">es</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span> <span class="id">bs</span>), <span class="id">Ebs</span> <span class="kwd">in</span> <span class="id">Sem_ck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">es</span> <span class="id">n</span>); <span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2,4,5:<span class="id">rewrite</span> <span class="id">Heq</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_tl">init_from_tl</a></span>; <span class="id">eapply</span> <span class="id">Cofix</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:(<span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from_tl">tr_history_from_tl</a></span>; <span class="id">eapply</span> <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.map_Equiv">FEnv.map_Equiv</a></span>; <span class="id">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">HE</span>; <span class="id">now</span> <span class="id">rewrite</span> <span class="id">HE</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_arhs_impl">sem_arhs_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_arhs">CESem.sem_arhs</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">ck</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_arhs">CoInd.sem_arhs</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>) <span class="id">ck</span> <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_arhs_impl_from">sem_arhs_impl_from</a></span>; <span class="id">eauto</span>. <span class="id">reflexivity</span>. Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_arhs_impl_from</span> <span class="id">sem_arhs_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<h1> RESET CORRESPONDENCE  </h1>
<br/>
<div class="doc">We state the correspondence for <span class="bracket"><span class="id">bools_of</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.bools_of_impl_from">bools_of_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.bools_of">Indexed.bools_of</a></span> <span class="id">xs</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.bools_of">CStr.bools_of</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">rs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="id">intros</span> * <span class="id">Rst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Rst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Rst</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span> <span class="id">xs</span>), (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span> <span class="id">rs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Rst</span> <span class="kwd">as</span> [(-&gt; &amp; -&gt;)|[(-&gt; &amp; -&gt;)|(-&gt; &amp; -&gt;)]]; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.bools_of">bools_of</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.bools_of_impl">bools_of_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.bools_of">Indexed.bools_of</a></span> <span class="id">xs</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.bools_of">CStr.bools_of</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">xs</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">rs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.bools_of_impl_from">bools_of_impl_from</a></span>. Qed.</div></details>
<br/>
<div class="doc">And for <span class="bracket"><span class="id">bools_ofs</span></span> </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.bools_ofs_impl">bools_ofs_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xss</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.bools_ofs">Indexed.bools_ofs</a></span> <span class="id">xss</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.bools_ofs">CStr.bools_ofs</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">xss</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">rs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.bools_ofs">CStr.bools_ofs</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.bools_ofs">Indexed.bools_ofs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * (<span class="id">rss</span>&amp;<span class="id">Bools1</span>&amp;<span class="id">Bools2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">rss</span>). <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="id">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.bools_of_impl">bools_of_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#ntheq_eqst">ntheq_eqst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>. <span class="id">specialize</span> (<span class="id">Bools2</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.disj_str_spec">disj_str_spec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_0_r">Nat.add_0_r</a></span>, <span class="id">Bools2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_map">existsb_map</a></span>. <span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_ext">existsb_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?. <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_0_r">Nat.add_0_r</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<h2> Properties about <span class="bracket"><span class="id">count</span></span> and <span class="bracket"><span class="id">mask</span></span> </h2>
<br/>
<div class="doc">State the correspondance for <span class="bracket"><span class="id">count</span></span>.  </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.count_impl_from">count_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> (<span class="id">r</span>: <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.stream">stream</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.count_acc">count_acc</a></span> (<span class="kwd">if</span> <span class="id">r</span> <span class="id">n</span> <span class="kwd">then</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.count">IStr.count</a></span> <span class="id">r</span> <span class="id">n</span> - 1 <span class="kwd">else</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.count">IStr.count</a></span> <span class="id">r</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">≡</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.count">IStr.count</a></span> <span class="id">r</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;cofix-based&nbsp;proof&nbsp;encounter&nbsp;the&nbsp;guardness&nbsp;criterion&nbsp;(Why&nbsp;??)&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#ntheq_eqst">ntheq_eqst</a></span>; <span class="id">intro</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Str_nth</a></span>; <span class="id">revert</span> <span class="id">n</span>; <span class="id">induction</span> <span class="id">m</span>; <span class="id">intro</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> (<span class="id">r</span> <span class="id">n</span>) <span class="id">eqn</span>: <span class="id">R</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.count_true_ge_1">count_true_ge_1</a></span> <span class="kwd">in</span> <span class="id">R</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> &lt;-<span class="id">IHm</span>; <span class="id">simpl</span>; <span class="id">destruct</span> (<span class="id">r</span> <span class="id">n</span>) <span class="id">eqn</span>: <span class="id">R</span>; <span class="id">destruct</span> (<span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> (<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.count_true_ge_1">count_true_ge_1</a></span> <span class="kwd">in</span> <span class="id">R</span>; <span class="id">rewrite</span> &lt;-<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_succ_l">Nat.sub_succ_l</a></span>; <span class="id">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> (<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_succ">Nat.sub_succ</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_0_r">Nat.sub_0_r</a></span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">Generalizing is too intricate: we can use the generalized lemma above to </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.mask_impl">mask_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> (<span class="id">r</span>: <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.stream">stream</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.wf_streams">wf_streams</a></span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.EqSts">EqSts</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams">tr_streams</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.mask">IStr.mask</a></span> <span class="id">k</span> <span class="id">r</span> <span class="id">xss</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.maskv">CStr.maskv</a></span> <span class="id">k</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">r</span>)) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams">tr_streams</a></span> <span class="id">xss</span>)).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Const</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams">tr_streams</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span>, 2 <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams_from_length">tr_streams_from_length</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.mask_length">mask_length</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">d1</span> <span class="id">d2</span> <span class="id">n'</span> <span class="id">xs1</span> <span class="id">xs2</span> <span class="id">Len</span> <span class="id">Nth1</span> <span class="id">Nth2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams_from_length">tr_streams_from_length</a></span> <span class="kwd">in</span> <span class="id">Len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id">Nth1</span>, &lt;-<span class="id">Nth2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">n'</span> &lt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams_from">tr_streams_from</a></span> 0 <span class="id">xss</span>)) <span class="kwd">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.mask_length">mask_length</a></span> <span class="kwd">in</span> <span class="id">Len</span>; <span class="id">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams_from_length">tr_streams_from_length</a></span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">map_nth'</span> <span class="kwd">with</span> (<span class="id">d'</span>:=<span class="id">d2</span>), <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.nth_tr_streams_from_nth">nth_tr_streams_from_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.mask_length">mask_length</a></span> <span class="kwd">in</span> <span class="id">Len</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.nth_tr_streams_from_nth">nth_tr_streams_from_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.mask">CStr.mask</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.mask">IStr.mask</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#ntheq_eqst">ntheq_eqst</a></span>; <span class="id">intro</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.nth_tr_streams_from">nth_tr_streams_from</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.maskv_nth">maskv_nth</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.count">CStr.count</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.streams_nth">streams_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.count_impl_from">count_impl_from</a></span> 0 <span class="id">r</span>) <span class="kwd">as</span> <span class="id">Count</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> ((<span class="kwd">if</span> <span class="id">r</span> 0 <span class="kwd">then</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.count">IStr.count</a></span> <span class="id">r</span> 0 - 1 <span class="kwd">else</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.count">IStr.count</a></span> <span class="id">r</span> 0) = 0) <span class="kwd">as</span> <span class="id">E</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">simpl</span>; <span class="id">destruct</span> (<span class="id">r</span> 0); <span class="id">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> <span class="id">Count</span>; <span class="id">rewrite</span> <span class="id">Count</span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_nth">init_from_nth</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_sym">Nat.eqb_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.count">IStr.count</a></span> <span class="id">r</span> (<span class="id">m</span> + 0) =? <span class="id">k</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.nth_all_absent">nth_all_absent</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<h1> FINAL LEMMAS </h1>
<br/>
<div class="doc">Correspondence for <span class="bracket"><span class="id">clocks_of</span></span>, used to give a base clock for node </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.tr_clocks_of_from">tr_clocks_of_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.wf_streams">wf_streams</a></span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.clocks_of">CStr.clocks_of</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams_from">tr_streams_from</a></span> <span class="id">n</span> <span class="id">xss</span>) <span class="id">≡</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.clock_of">CESem.clock_of</a></span> <span class="id">xss</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cofix</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.clock_of">CESem.clock_of</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.clock_of_instant">CESem.clock_of_instant</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> (<span class="kwd">fun</span> <span class="id">v</span> : <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.svalue">svalue</a></span> =&gt; <span class="id">v</span> &lt;&gt;<span class="id">b</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>) (<span class="id">xss</span> <span class="id">n</span>)) <span class="id">eqn</span>: <span class="id">E</span>; <span class="id">setoid_rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">assert</span> (<span class="kwd">forall</span> <span class="id">v</span>, <span class="id">v</span> &lt;&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span> &lt;-&gt; (<span class="id">v</span> &lt;&gt;<span class="id">b</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.EquivDec.html#nequiv_decb">nequiv_decb</a></span>; <span class="id">setoid_rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#negb_true_iff">Bool.negb_true_iff</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Common.Common.html#not_equiv_decb_equiv">not_equiv_decb_equiv</a></span>; <span class="id">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;-<span class="id"><a href="Velus.Common.CommonList.html#Exists_existsb">Exists_existsb</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">v</span> &lt;&gt; @<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op.value">value</a></span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;-<span class="id"><a href="Velus.Common.CommonList.html#Exists_existsb">Exists_existsb</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="id">v</span> &lt;&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>) <span class="kwd">in</span> <span class="id">E</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.Exists_In_tr_streams_from_hd">Exists_In_tr_streams_from_hd</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.EquivDec.html#nequiv_decb">nequiv_decb</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_Forall_neg">existsb_Forall_neg</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#forallb_Forall">forallb_Forall</a></span> <span class="kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_Forall_neg">existsb_Forall_neg</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#forallb_Forall">forallb_Forall</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.Forall_In_tr_streams_from_hd">Forall_In_tr_streams_from_hd</a></span> <span class="kwd">in</span> <span class="id">E</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams_from_tl">tr_streams_from_tl</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.tr_clocks_of">tr_clocks_of</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.wf_streams">wf_streams</a></span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.clocks_of">CStr.clocks_of</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams">tr_streams</a></span> <span class="id">xss</span>) <span class="id">≡</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.clock_of">CESem.clock_of</a></span> <span class="id">xss</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_clocks_of_from">tr_clocks_of_from</a></span>. Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_clocked_var_inv">sem_clocked_var_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">H</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var">IStr.sem_var</a></span> <span class="id">H</span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_clocked_var">CESem.sem_clocked_var</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">x</span> <span class="id">ck</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_clock">IStr.sem_clock</a></span> <span class="id">b</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.var_history">Indexed.var_history</a></span> <span class="id">H</span>) <span class="id">ck</span> <span class="id">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">bs</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &lt;-&gt; <span class="id">xs</span> <span class="id">n</span> &lt;&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux.absent">absent</a></span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Var</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_clock">IStr.sem_clock</a></span> <span class="id">b</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.var_history">Indexed.var_history</a></span> <span class="id">H</span>) <span class="id">ck</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.interp_clock">interp_clock</a></span> <span class="id">b</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.var_history">Indexed.var_history</a></span> <span class="id">H</span>) <span class="id">ck</span>)) <span class="kwd">as</span> <span class="id">SemCk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Var</span> <span class="id">n</span>); <span class="id">destruct</span> <span class="id">Sem</span> <span class="kwd">as</span> (<span class="id">Sem</span> &amp; <span class="id">Sem'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.interp_clock">interp_clock</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.lift_interp">lift_interp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">xs</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.interp_clock_instant_complete">interp_clock_instant_complete</a></span>; <span class="id">eauto</span>; <span class="id">apply</span> <span class="id">Sem'</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">erewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.interp_clock_instant_complete">interp_clock_instant_complete</a></span>; <span class="id">eauto</span>; <span class="id">apply</span> <span class="id">Sem</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.interp_clock">interp_clock</a></span> <span class="id">b</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.var_history">Indexed.var_history</a></span> <span class="id">H</span>) <span class="id">ck</span>); <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Var</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">SemCk</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Sem</span> <span class="kwd">as</span> (<span class="id">Sem</span> &amp; <span class="id">Sem'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">E</span> <span class="id">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> <span class="id">SemCk</span>; <span class="id">apply</span> <span class="id">Sem</span> <span class="kwd">in</span> <span class="id">SemCk</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E'</span> <span class="kwd">in</span> <span class="id">Var</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var_instant_det">sem_var_instant_det</a></span> <span class="kwd">in</span> <span class="id">Var</span>; <span class="id">eauto</span>; <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">E</span>; <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.not_absent_present">not_absent_present</a></span> <span class="kwd">in</span> <span class="id">E</span> <span class="kwd">as</span> (?&amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> <span class="id">Var</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_clock_instant">sem_clock_instant</a></span> (<span class="id">b</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.var_history">Indexed.var_history</a></span> <span class="id">H</span> <span class="id">n</span>) <span class="id">ck</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">apply</span> <span class="id">Sem</span>; <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_clock_instant_det">sem_clock_instant_det</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_clocked_var_impl_from">sem_clocked_var_impl_from</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var">IStr.sem_var</a></span> <span class="id">H</span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_clocked_var">CESem.sem_clocked_var</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">x</span> <span class="id">ck</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_clocked_var">CoInd.sem_clocked_var</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from">tr_history_from</a></span> <span class="id">n</span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream_from">tr_stream_from</a></span> <span class="id">n</span> <span class="id">b</span>) <span class="id">x</span> <span class="id">ck</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Var</span> <span class="id">Sem</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_clocked_var_inv">sem_clocked_var_inv</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (<span class="id">bs</span> &amp; <span class="id">Clock</span> &amp; <span class="id">Spec</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl_from">sem_var_impl_from</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n</span>) <span class="kwd">in</span> <span class="id">Var</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_clock_impl_from">sem_clock_impl_from</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n</span>) <span class="kwd">in</span> <span class="id">Clock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Var'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">Var</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">split</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Var</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> - <span class="id">Spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">n</span>; <span class="id">clear</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">COFIX</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span>, (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr.init_from_n">init_from_n</a></span> <span class="id">bs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">xs</span> <span class="id">n</span>) <span class="id">eqn</span>: <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">assert</span> (<span class="id">bs</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="kwd">as</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">rewrite</span> &lt;-<span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#not_true_iff_false">Bool.not_true_iff_false</a></span>, <span class="id">Spec</span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">assert</span> (<span class="id">bs</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="kwd">as</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">apply</span> <span class="id">Spec</span>; <span class="id">intro</span>; <span class="id">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_clocked_var_impl">sem_clocked_var_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var">IStr.sem_var</a></span> <span class="id">H</span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_clocked_var">CESem.sem_clocked_var</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">x</span> <span class="id">ck</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_clocked_var">CoInd.sem_clocked_var</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>) <span class="id">x</span> <span class="id">ck</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
 <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_clocked_var_impl_from">sem_clocked_var_impl_from</a></span>. Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.sem_clocked_vars_impl">sem_clocked_vars_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">xs</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(_, (_, <span class="id">isfalse</span>)) =&gt; <span class="id">isfalse</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_vars">CESem.sem_vars</a></span> <span class="id">H</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">xs</span>) <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_clocked_vars">CESem.sem_clocked_vars</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_clocked_vars">CoInd.sem_clocked_vars</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>) <span class="id">xs</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_clocked_vars">CESem.sem_clocked_vars</a></span>; <span class="id">intros</span> * <span class="id">IsFalse</span> <span class="id">Vars</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="id">intros</span> (<span class="id">x</span>, (<span class="id">ck</span>, ?)) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="id">subst</span>. <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_vars_inv">sem_vars_inv</a></span> <span class="kwd">in</span> <span class="id">Vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hin</span> <span class="kwd">as</span> <span class="id">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_in_left">Forall2_in_left</a></span> <span class="kwd">in</span> <span class="id">Vars</span> <span class="kwd">as</span> (?&amp;?&amp;?); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_clocked_var_impl">sem_clocked_var_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Sem</span>; <span class="id">eauto</span>. <span class="id">destruct_conjs</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">sem_clocked_vars_impl'</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">xs</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(_, (_, <span class="id">isfalse</span>)) =&gt; <span class="id">isfalse</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> '(<span class="id">x</span>, _) =&gt; <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.sem_var">IStr.sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>)) <span class="id">xs</span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_clocked_vars">CESem.sem_clocked_vars</a></span> <span class="id">b</span> <span class="id">H</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_clocked_vars">CoInd.sem_clocked_vars</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>) <span class="id">xs</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.sem_clocked_vars">CESem.sem_clocked_vars</a></span>; <span class="id">intros</span> * <span class="id">IsLast</span> <span class="id">Vars</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="id">intros</span> (<span class="id">x</span>, (<span class="id">ck</span>, <span class="id">islast</span>)) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="id">subst</span>. <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hin</span> <span class="kwd">as</span> <span class="id">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_in_left">Forall2_in_left</a></span> <span class="kwd">in</span> <span class="id">Vars</span> <span class="kwd">as</span> (?&amp;?&amp;?); <span class="id">eauto</span>. <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_clocked_var_impl">sem_clocked_var_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Sem</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Sem</span>; <span class="id">eauto</span>. <span class="id">destruct_conjs</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_clocked_vars_impl'</span> : <span class="id">nlsem</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLINDEXEDTOCOIND.tr_history_var">tr_history_var</a></span> : <span class="kwd">forall</span> <span class="id">H</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.Equiv">FEnv.Equiv</a></span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#EqSt">EqSt</a></span> _) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.var_history">CoInd.var_history</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>)) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.var_history">Indexed.var_history</a></span> <span class="id">H</span>)).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.var_history">CoInd.var_history</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.var_history">Indexed.var_history</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem.var_env">CESem.var_env</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history_from">tr_history_from</a></span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.mapi">FEnv.mapi</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?. <span class="id">simpl</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">The final theorem stating the correspondence for nodes applications. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="NLINDEXEDTOCOIND.implies">implies</a></span> <span class="id">G</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">xss</span> <span class="id">oss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.sem_node">Indexed.sem_node</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">xss</span> <span class="id">oss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_node">CoInd.sem_node</a></span> <span class="id">G</span> <span class="id">f</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams">tr_streams</a></span> <span class="id">xss</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_streams">tr_streams</a></span> <span class="id">oss</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> 1 <span class="kwd">as</span> [|???????????????? <span class="id">IH</span>| | |???????? <span class="id">Hins</span> <span class="id">Houts</span> ? <span class="id">Heqs</span> <span class="id">IH</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.sem_node_mult">Indexed.sem_node_mult</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_equation</span> := <span class="kwd">fun</span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.sem_equation">Indexed.sem_equation</a></span> <span class="id">G</span> <span class="id">b</span> <span class="id">H</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd.sem_equation">CoInd.sem_equation</a></span> <span class="id">G</span> (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_history">tr_history</a></span> <span class="id">H</span>) (<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.tr_stream">tr_stream</a></span> <span class="id">b</span>) <span class="id">e</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Def&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl_from">sem_var_impl_from</a></span>; <span class="id">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;App&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3:<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.bools_ofs_impl">bools_ofs_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_history_var">tr_history_var</a></span>, <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_clocks_of">tr_clocks_of</a></span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.wf_streams_mask">wf_streams_mask</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">k</span>; <span class="id">destruct</span> (<span class="id">IH</span> <span class="id">k</span>) <span class="kwd">as</span> (<span class="id">Sem</span> &amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.sem_node_wf">Indexed.sem_node_wf</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (?&amp;?); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl">sem_var_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intro</span> <span class="id">k</span>; <span class="id">destruct</span> (<span class="id">IH</span> <span class="id">k</span>) <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- 2 <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.mask_impl">mask_impl</a></span>; <span class="id">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr.wf_streams_mask">wf_streams_mask</a></span>; <span class="id">intro</span> <span class="id">n'</span>; <span class="id">destruct</span> (<span class="id">IH</span> <span class="id">n'</span>) <span class="kwd">as</span> (<span class="id">Sem</span> &amp;?);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed.sem_node_wf">Indexed.sem_node_wf</a></span> <span class="kwd">in</span> <span class="id">Sem</span> <span class="kwd">as</span> (?&amp;?); <span class="id">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.bools_ofs_impl">bools_ofs_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl">sem_var_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.reset_fby_impl">reset_fby_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl">sem_var_impl</a></span>; <span class="id">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Last&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4:<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.bools_ofs_impl">bools_ofs_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl">sem_var_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_clocked_var_impl">sem_clocked_var_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl">sem_var_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.reset_fby_impl">reset_fby_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr.sem_var_impl">sem_var_impl</a></span>; <span class="id">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">CESem.assert_const_length</span> <span class="id">xss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_vars_impl">sem_vars_impl</a></span> <span class="kwd">in</span> <span class="id">Hins</span>. <span class="id">simpl_Forall</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_vars_impl">sem_vars_impl</a></span> <span class="kwd">in</span> <span class="id">Houts</span>. <span class="id">simpl_Forall</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_clocks_of">tr_clocks_of</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.sem_clocked_vars_impl">sem_clocked_vars_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span>; <span class="id">eauto</span>. <span class="id">intros</span>; <span class="id">destruct_conjs</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.tr_clocks_of">tr_clocks_of</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND.Global">Global</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND">NLINDEXEDTOCOIND</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="NLIndexedToCoindFun">NLIndexedToCoindFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span>     : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span>      : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span>   : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span>      <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cks</span>     : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>             <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CESyn</span>   : <span class="id"><a href="Velus.CoreExpr.CESyntax.html#CESYNTAX">CESYNTAX</a></span>           <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span>     : <span class="id"><a href="Velus.NLustre.NLSyntax.html#NLSYNTAX">NLSYNTAX</a></span>           <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">IStr</span>    : <span class="id"><a href="Velus.IndexedStreams.html#INDEXEDSTREAMS">INDEXEDSTREAMS</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CStr</span>    : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span>       <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ICStr</span>   : <span class="id"><a href="Velus.IndexedToCoind.html#INDEXEDTOCOIND">INDEXEDTOCOIND</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span>           <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr">CStr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ord</span>     : <span class="id"><a href="Velus.NLustre.NLOrdered.html#NLORDERED">NLORDERED</a></span>          <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CESem</span>   : <span class="id"><a href="Velus.CoreExpr.CESemantics.html#CESEMANTICS">CESEMANTICS</a></span>        <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Indexed</span> : <span class="id"><a href="Velus.NLustre.NLIndexedSemantics.html#NLINDEXEDSEMANTICS">NLINDEXEDSEMANTICS</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ord">Ord</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem">CESem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Interp</span>  : <span class="id"><a href="Velus.CoreExpr.CEInterpreter.html#CEINTERPRETER">CEINTERPRETER</a></span>      <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span>     <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem">CESem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CoInd</span>   : <span class="id"><a href="Velus.NLustre.NLCoindSemantics.html#NLCOINDSEMANTICS">NLCOINDSEMANTICS</a></span>   <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ord">Ord</a></span>)<br/>
&lt;: <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND">NLINDEXEDTOCOIND</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr">ICStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ord">Ord</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem">CESem</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed">Indexed</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp">Interp</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd">CoInd</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLINDEXEDTOCOIND">NLINDEXEDTOCOIND</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#ICStr">ICStr</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Ord">Ord</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CESem">CESem</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Indexed">Indexed</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#Interp">Interp</a></span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#CoInd">CoInd</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.NLustre.NLIndexedToCoind.html#NLIndexedToCoindFun">NLIndexedToCoindFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
