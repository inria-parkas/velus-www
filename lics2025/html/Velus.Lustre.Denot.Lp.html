
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Lp</title>
<meta name="description" content="Documentation of Coq module Lp" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h1 class="title">Module Lp</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html">Datatypes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CommonList.html">CommonList</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CommonTyping.html">CommonTyping</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.StaticEnv.html">Lustre.StaticEnv</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span> <span class="id"><a href="Velus.Lustre.LTyping.html">Lustre.LTyping</a></span> <span class="id"><a href="Velus.Lustre.LOrdered.html">Lustre.LOrdered</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.html">Lustre.Denot.Cpo</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.CommonDS.html">CommonDS</a></span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html">SDfuns</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html">SD</a></span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html">CommonList2</a></span>.<br/>
<br/>
<br/>
<h2> Propriété de commutativité du préfixe </h2>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="LP">LP</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span>       <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Typ</span>   : <span class="id"><a href="Velus.Lustre.LTyping.html#LTYPING">LTYPING</a></span>       <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span>      <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Den</span>   : <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD">SD</a></span>            <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Lord">Lord</a></span>).<br/>
<br/>
<br/>
<div class="doc">Utilities  </div>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_np_of_env">take_np_of_env</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">env</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;0 &lt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env</span>) == <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.np_of_env">np_of_env</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|<span class="id">i</span> [|<span class="id">j</span>]]; <span class="id">intros</span> * <span class="id">Hl</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;- <span class="id">cbn</span>; <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_proj">take_env_proj</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.np_of_env_cons">np_of_env_cons</a></span> <span class="id">i</span> (<span class="id">j</span> :: <span class="id">l</span>)), &lt;- <span class="id">IHl</span>; [| <span class="id">simpl</span>; <span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_cons">lift_cons</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) _ (<span class="id">env</span> <span class="id">i</span>) (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.np_of_env">np_of_env</a></span> (<span class="id">j</span> :: <span class="id">l</span>) <span class="id">env</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_proj">take_env_proj</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_env_of_np">take_env_of_np</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">l</span>)) <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.env_of_np">env_of_np</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">np</span>) == <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.env_of_np">env_of_np</a></span> <span class="id">l</span> <span class="id">np</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_proj">take_env_proj</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.env_of_np_eq">env_of_np_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_Some">mem_nth_Some</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nth_lift">nth_lift</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_env_of_np_ext">take_env_of_np_ext</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> <span class="id">m</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span>) <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.env_of_np_ext">env_of_np_ext</a></span> <span class="id">l</span> <span class="id">np</span> <span class="id">env</span>) == <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.env_of_np_ext">env_of_np_ext</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">np</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_proj">take_env_proj</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.env_of_np_ext_eq">env_of_np_ext_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_proj">take_env_proj</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">HH</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_Some">mem_nth_Some</a></span> <span class="kwd">in</span> <span class="id">HH</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nth_lift">nth_lift</a></span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<h2> On montre que chaque opérateur du langage a cette propriété </h2>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_bss">take_bss</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> (<span class="id">env</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">l</span> &lt;&gt; [] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>) == <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">l</span> <span class="id">env</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|<span class="id">i</span> [|<span class="id">j</span> ]]; <span class="id">intros</span> * <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;- <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss_cons">bss_cons</a></span>; <span class="id">simpl</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> [] _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip">take_zip</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_proj">take_env_proj</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE_eq">CTE_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#AC">AC</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#MAP_map">MAP_map</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#zip_take_const">zip_take_const</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss_cons">bss_cons</a></span> <span class="id">i</span>), <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip">take_zip</a></span>, &lt;- <span class="id">IHl</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_proj">take_env_proj</a></span>; [|<span class="id">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#AC">AC</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#MAP_map">MAP_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_sbools_of">take_sbools_of</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> (<span class="id">mp</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span>) <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;0 &lt; <span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.sbools_of">sbools_of</a></span> <span class="id">mp</span>) == <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.sbools_of">sbools_of</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">mp</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">clear</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hle</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.sbools_of">sbools_of</a></span>; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m</span> <span class="kwd">as</span> [|[|<span class="id">m</span>]].<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hle</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 4 <span class="id">Fold_eq'</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip">take_zip</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_hd">lift_hd</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#zip_take_const">zip_take_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.sbool_of">sbool_of</a></span>; <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#MAP_map">MAP_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id">Fold_eq'</span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m</span>)), <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip">take_zip</a></span>, 3 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_hd">lift_hd</a></span>, 3 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_tl">lift_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHm</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">arith</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.sbool_of">sbool_of</a></span>; <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#MAP_map">MAP_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_sunop">take_sunop</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">op</span> : <span class="id">A</span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">B</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sunop">sunop</a></span> <span class="id">op</span> <span class="id">xs</span>) == <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sunop">sunop</a></span> <span class="id">op</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sunop">sunop</a></span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_sbinop">take_sbinop</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span> <span class="id">D</span> (<span class="id">op</span> : <span class="id">A</span> -&gt; <span class="id">B</span>-&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">D</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">xs</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span> <span class="id">op</span> <span class="id">xs</span> <span class="id">ys</span>) == <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span> <span class="id">op</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip">take_zip</a></span>.<br/>
Qed.</div></details>
<br/>
<div class="doc">pour fby/fby1, c'est compliqué, on le fait en deux temps </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_fby1_le1">take_fby1_le1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">n</span> <span class="id">oa</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">ys</span>) &lt;= <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> <span class="id">xs</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_bot1">fby1_bot1</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ _)) <span class="kwd">as</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> <span class="id">xs</span> <span class="id">ys</span>)) <span class="kwd">as</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">U</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSleEps">DSleEps</a></span>, <span class="id">Cof</span>; <span class="id">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">clear</span> <span class="id">Cof</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">xs</span>) <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">X</span> &amp; <span class="id">Hx</span>).<br/>
&nbsp;&nbsp;{ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_cons">fby1_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span>. }<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_eq">fby1_eq</a></span> <span class="kwd">in</span> <span class="id">HU</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_eq">fby1_eq</a></span> <span class="kwd">in</span> <span class="id">HV</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span> <span class="kwd">in</span> <span class="id">HV</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#Con_eq_simpl">Con_eq_simpl</a></span> <span class="kwd">in</span> <span class="id">HU</span> <span class="kwd">as</span> [? <span class="id">HU</span>]; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;3-6: <span class="id">now</span> <span class="id">rewrite</span> <span class="id">HV</span>, <span class="id">HU</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;plus&nbsp;que&nbsp;2&nbsp;cas&nbsp;identique&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#cons_decomp">cons_decomp</a></span> <span class="kwd">in</span> <span class="id">HV</span> <span class="kwd">as</span> (<span class="id">V'</span> &amp; <span class="id">Hd</span> &amp; <span class="id">HV</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>; <span class="id">clear</span> <span class="id">Hd</span> <span class="id">Hx</span> <span class="id">V</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;on&nbsp;cherche&nbsp;is_cons&nbsp;y&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">U</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSleEps">DSleEps</a></span>, <span class="id">Cof</span>; <span class="id">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">clear</span> <span class="id">Cof</span>].<br/>
<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">ys</span>) <span class="kwd">as</span> (<span class="id">y</span> &amp; <span class="id">Y</span> &amp; <span class="id">Hy</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_cons">fby1AP_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span> |].<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id">Hy</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span> <span class="kwd">in</span> <span class="id">HU</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id">Hy</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span> <span class="kwd">in</span> <span class="id">HV</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">change</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSle">DSle</a></span> _ _) <span class="kwd">with</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#cons">cons</a></span> <span class="id">s</span> <span class="id">U</span> &lt;= <span class="id">V'</span>).<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">cases</span>; <span class="id">rewrite</span> <span class="id">HU</span>, &lt;- <span class="id">HV</span>, &lt;- ?<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_fby1_le2">take_fby1_le2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">n</span> <span class="id">oa</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> <span class="id">xs</span> <span class="id">ys</span>) &lt;= <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_bot1">fby1_bot1</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ _)) <span class="kwd">as</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> <span class="id">xs</span> <span class="id">ys</span>)) <span class="kwd">as</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">U</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSleEps">DSleEps</a></span>, <span class="id">Cof</span>; <span class="id">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">clear</span> <span class="id">Cof</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">xs</span>) <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">X</span> &amp; <span class="id">Hx</span>).<br/>
&nbsp;&nbsp;{ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_cons">fby1_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span>. }<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_eq">fby1_eq</a></span> <span class="kwd">in</span> <span class="id">HV</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_eq">fby1_eq</a></span> <span class="kwd">in</span> <span class="id">HU</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#Con_eq_simpl">Con_eq_simpl</a></span> <span class="kwd">in</span> <span class="id">HU</span> <span class="kwd">as</span> [? <span class="id">HU</span>]; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;3-6: <span class="id">now</span> <span class="id">rewrite</span> <span class="id">HV</span>, <span class="id">HU</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;plus&nbsp;que&nbsp;2&nbsp;cas&nbsp;identique&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#cons_decomp">cons_decomp</a></span> <span class="kwd">in</span> <span class="id">HV</span> <span class="kwd">as</span> (<span class="id">V'</span> &amp; <span class="id">Hd</span> &amp; <span class="id">HV</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>; <span class="id">clear</span> <span class="id">Hd</span> <span class="id">Hx</span> <span class="id">V</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;on&nbsp;cherche&nbsp;is_cons&nbsp;y&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">U</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSleEps">DSleEps</a></span>, <span class="id">Cof</span>; <span class="id">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">clear</span> <span class="id">Cof</span>].<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">ys</span>) <span class="kwd">as</span> (<span class="id">y</span> &amp; <span class="id">Y</span> &amp; <span class="id">Hy</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_cons">fby1AP_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span> |].<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id">Hy</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span> <span class="kwd">in</span> <span class="id">HV</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id">Hy</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span> <span class="kwd">in</span> <span class="id">HU</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">change</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSle">DSle</a></span> _ _) <span class="kwd">with</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#cons">cons</a></span> <span class="id">s</span> <span class="id">U</span> &lt;= <span class="id">V'</span>).<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">cases</span>; <span class="id">rewrite</span> <span class="id">HU</span>, &lt;- <span class="id">HV</span>, &lt;- ?<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_fby1">take_fby1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">n</span> <span class="id">oa</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> <span class="id">xs</span> <span class="id">ys</span>) == <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">oa</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_fby1_le2">take_fby1_le2</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_fby1_le1">take_fby1_le1</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_fby_le1">take_fby_le1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">n</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">ys</span>) &lt;= <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> <span class="id">xs</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_bot">fby_bot</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ _)) <span class="kwd">as</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> <span class="id">xs</span> <span class="id">ys</span>)) <span class="kwd">as</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">U</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSleEps">DSleEps</a></span>, <span class="id">Cof</span>; <span class="id">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">clear</span> <span class="id">Cof</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">xs</span>) <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">X</span> &amp; <span class="id">Hx</span>).<br/>
&nbsp;&nbsp;{ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_cons">fby_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span>. }<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_eq">fby_eq</a></span> <span class="kwd">in</span> <span class="id">HU</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_eq">fby_eq</a></span> <span class="kwd">in</span> <span class="id">HV</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span> <span class="kwd">in</span> <span class="id">HV</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#Con_eq_simpl">Con_eq_simpl</a></span> <span class="kwd">in</span> <span class="id">HU</span> <span class="kwd">as</span> [? <span class="id">HU</span>]; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;3: <span class="id">now</span> <span class="id">rewrite</span> <span class="id">HV</span>, <span class="id">HU</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;plus&nbsp;que&nbsp;2&nbsp;cas&nbsp;presque&nbsp;identiques&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#cons_decomp">cons_decomp</a></span> <span class="kwd">in</span> <span class="id">HV</span> <span class="kwd">as</span> (<span class="id">V'</span> &amp; <span class="id">Hd</span> &amp; <span class="id">HV</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>; <span class="id">clear</span> <span class="id">Hd</span> <span class="id">Hx</span> <span class="id">V</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;on&nbsp;cherche&nbsp;is_cons&nbsp;y&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">U</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSleEps">DSleEps</a></span>, <span class="id">Cof</span>; <span class="id">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">clear</span> <span class="id">Cof</span>].<br/>
&nbsp;&nbsp;1: <span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">ys</span>) <span class="kwd">as</span> (<span class="id">y</span> &amp; <span class="id">Y</span> &amp; <span class="id">Hy</span>);<br/>
&nbsp;&nbsp;[ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fbyA_cons">fbyA_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span> |].<br/>
&nbsp;&nbsp;2: <span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">ys</span>) <span class="kwd">as</span> (<span class="id">y</span> &amp; <span class="id">Y</span> &amp; <span class="id">Hy</span>);<br/>
&nbsp;&nbsp;[ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_cons">fby1AP_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span> |].<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id">Hy</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span>, ?<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span>, ?<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fbyA_eq">fbyA_eq</a></span> <span class="kwd">in</span> <span class="id">HU</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id">Hy</span>, ?<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span>, ?<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fbyA_eq">fbyA_eq</a></span> <span class="kwd">in</span> <span class="id">HV</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">change</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSle">DSle</a></span> _ _) <span class="kwd">with</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#cons">cons</a></span> <span class="id">s</span> <span class="id">U</span> &lt;= <span class="id">V'</span>).<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">cases</span>; <span class="id">rewrite</span> <span class="id">HU</span>, &lt;- <span class="id">HV</span>, ?<span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_fby1">take_fby1</a></span>, &lt;- ?<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_fby_le2">take_fby_le2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">n</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> <span class="id">xs</span> <span class="id">ys</span>) &lt;= <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_bot">fby_bot</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ _)) <span class="kwd">as</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> <span class="id">xs</span> <span class="id">ys</span>)) <span class="kwd">as</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">U</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSleEps">DSleEps</a></span>, <span class="id">Cof</span>; <span class="id">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">clear</span> <span class="id">Cof</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">xs</span>) <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">X</span> &amp; <span class="id">Hx</span>).<br/>
&nbsp;&nbsp;{ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_cons">fby_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span>. }<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_eq">fby_eq</a></span> <span class="kwd">in</span> <span class="id">HV</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_eq">fby_eq</a></span> <span class="kwd">in</span> <span class="id">HU</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#Con_eq_simpl">Con_eq_simpl</a></span> <span class="kwd">in</span> <span class="id">HU</span> <span class="kwd">as</span> [? <span class="id">HU</span>]; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;3: <span class="id">now</span> <span class="id">rewrite</span> <span class="id">HV</span>, <span class="id">HU</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;plus&nbsp;que&nbsp;2&nbsp;cas&nbsp;presque&nbsp;identiques&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#cons_decomp">cons_decomp</a></span> <span class="kwd">in</span> <span class="id">HV</span> <span class="kwd">as</span> (<span class="id">V'</span> &amp; <span class="id">Hd</span> &amp; <span class="id">HV</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>; <span class="id">clear</span> <span class="id">Hd</span> <span class="id">Hx</span> <span class="id">V</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;on&nbsp;cherche&nbsp;is_cons&nbsp;y&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">U</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> <span class="id">HU</span>; <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSleEps">DSleEps</a></span>, <span class="id">Cof</span>; <span class="id">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">clear</span> <span class="id">Cof</span>].<br/>
&nbsp;&nbsp;1: <span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">ys</span>) <span class="kwd">as</span> (<span class="id">y</span> &amp; <span class="id">Y</span> &amp; <span class="id">Hy</span>);<br/>
&nbsp;&nbsp;[ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fbyA_cons">fbyA_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span> |].<br/>
&nbsp;&nbsp;2: <span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">ys</span>) <span class="kwd">as</span> (<span class="id">y</span> &amp; <span class="id">Y</span> &amp; <span class="id">Hy</span>);<br/>
&nbsp;&nbsp;[ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_cons">fby1AP_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span> |].<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id">Hy</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_cons">take_cons</a></span>, ?<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span>, ?<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fbyA_eq">fbyA_eq</a></span> <span class="kwd">in</span> <span class="id">HV</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id">Hy</span>, ?<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span>, ?<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fbyA_eq">fbyA_eq</a></span> <span class="kwd">in</span> <span class="id">HU</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">change</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DSle">DSle</a></span> _ _) <span class="kwd">with</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#cons">cons</a></span> <span class="id">s</span> <span class="id">U</span> &lt;= <span class="id">V'</span>).<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">cases</span>; <span class="id">rewrite</span> <span class="id">HU</span>, &lt;- <span class="id">HV</span>, ?<span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_fby1">take_fby1</a></span>, &lt;- ?<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_fby">take_fby</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">n</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> <span class="id">xs</span> <span class="id">ys</span>) == <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_fby_le2">take_fby_le2</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_fby_le1">take_fby_le1</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="LP.take_lift_fby">take_lift_fby</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">n</span> <span class="id">m</span> (<span class="id">xs</span> <span class="id">ys</span> : @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id">A</span>)) <span class="id">m</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2">lift2</a></span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> <span class="id">xs</span> <span class="id">ys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;==  <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2">lift2</a></span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_fby">take_fby</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_fby">take_fby</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod_eq_intro">Dprod_eq_intro</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_fby">take_fby</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">IHm</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_swhenv">take_swhenv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">n</span> <span class="id">xs</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.swhenv">swhenv</a></span> <span class="id">b</span> <span class="id">xs</span> <span class="id">cs</span>) == <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.swhenv">swhenv</a></span> <span class="id">b</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">cs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.swhenv">swhenv</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#swhen">swhen</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip">take_zip</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="LP.take_lift_swhenv">take_lift_swhenv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">n</span> <span class="id">m</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span>) <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#llift">llift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.swhenv">swhenv</a></span> <span class="id">b</span>) <span class="id">np</span> <span class="id">cs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#llift">llift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.swhenv">swhenv</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">np</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">cs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_swhenv">take_swhenv</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_swhenv">take_swhenv</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod_eq_intro">Dprod_eq_intro</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">np</span> <span class="kwd">as</span> (<span class="id">t1</span>,<span class="id">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#llift_simpl">llift_simpl</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.swhenv">swhenv</a></span> <span class="id">b</span>) _ <span class="id">cs</span> <span class="id">t1</span> <span class="id">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_swhenv">take_swhenv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">IHm</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_smergev">take_smergev</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">xs</span> <span class="id">np</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.smergev">smergev</a></span> <span class="id">l</span> <span class="id">xs</span> <span class="id">np</span>) == <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.smergev">smergev</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">np</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.smergev">smergev</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#smerge_eq">smerge_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|<span class="id">i</span> <span class="id">l</span>].<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#Foldi_nil">Foldi_nil</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#Foldi_cons">Foldi_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_tl">lift_tl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_hd">lift_hd</a></span>, &lt;- <span class="id">IHl</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip3">take_zip3</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="LP.take_lift_smergev">take_lift_smergev</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">xs</span> <span class="id">m</span> (<span class="id">np</span> : @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span>) _) <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.smergev">smergev</a></span> <span class="id">l</span> <span class="id">xs</span>) <span class="id">np</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.smergev">smergev</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>)) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>)) <span class="id">np</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_smergev">take_smergev</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod_simpl">lift_nprod_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons_Oeq_compat">nprod_cons_Oeq_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_smergev">take_smergev</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_lift">lift_lift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_ext">lift_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_lift">lift_lift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_ext">lift_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m</span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_scasev">take_scasev</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">xs</span> <span class="id">np</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scasev">scasev</a></span> <span class="id">l</span> <span class="id">xs</span> <span class="id">np</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scasev">scasev</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">np</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scasev">scasev</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_eq">scase_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|<span class="id">i</span> <span class="id">l</span>].<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#Foldi_nil">Foldi_nil</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#Foldi_cons">Foldi_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_tl">lift_tl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_hd">lift_hd</a></span>, &lt;- <span class="id">IHl</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip3">take_zip3</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="LP.take_lift_scasev">take_lift_scasev</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">xs</span> <span class="id">m</span> (<span class="id">np</span> : @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span>) _) <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scasev">scasev</a></span> <span class="id">l</span> <span class="id">xs</span>) <span class="id">np</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scasev">scasev</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>)) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>)) <span class="id">np</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_scasev">take_scasev</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod_simpl">lift_nprod_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons_Oeq_compat">nprod_cons_Oeq_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_scasev">take_scasev</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_lift">lift_lift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_ext">lift_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_lift">lift_lift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_ext">lift_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m</span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_scase_defv">take_scase_defv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">xs</span> <span class="id">ds</span> <span class="id">np</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scase_defv">scase_defv</a></span> <span class="id">l</span> <span class="id">xs</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> <span class="id">ds</span> <span class="id">np</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scase_defv">scase_defv</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">ds</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">np</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scase_defv">scase_defv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_def_eq">scase_def_eq</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_def__eq">scase_def__eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|<span class="id">i</span> <span class="id">l</span>].<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#Foldi_nil">Foldi_nil</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip">take_zip</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#Foldi_cons">Foldi_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_tl">lift_tl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_hd">lift_hd</a></span>, &lt;- <span class="id">IHl</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_zip3">take_zip3</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="LP.take_lift_scase_defv">take_lift_scase_defv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">xs</span> <span class="id">m</span> (<span class="id">np</span> : @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span>) _) <span class="id">ds</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scase_defv">scase_defv</a></span> <span class="id">l</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> <span class="id">ds</span> <span class="id">np</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.scase_defv">scase_defv</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">xs</span>)) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) <span class="id">ds</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>)) <span class="id">np</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_scase_defv">take_scase_defv</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod_simpl">lift_nprod_simpl</a></span>, 4 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_cons">lift_cons</a></span>, <span class="id">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons_Oeq_compat">nprod_cons_Oeq_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_scase_defv">take_scase_defv</a></span> _ <span class="id">xs</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_hd">nprod_hd</a></span> <span class="id">ds</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_hd">nprod_hd</a></span> <span class="id">np</span>)), 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_lift">lift_lift</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_hd">lift_hd</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons_Oeq_compat">nprod_cons_Oeq_compat</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_ext">lift_ext</a></span>; <span class="id">destruct</span> <span class="id">m</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_tl">lift_tl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_cons">lift_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons_Oeq_compat">nprod_cons_Oeq_compat</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_lift">lift_lift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_ext">lift_ext</a></span>; <span class="id">destruct</span> <span class="id">m</span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_sreset_aux_le1">take_sreset_aux_le1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hf</span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envI</span>, <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) == <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id">f</span> <span class="id">envI</span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">rs</span> <span class="id">X</span> <span class="id">Y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> <span class="id">f</span> <span class="id">rs</span> <span class="id">X</span> <span class="id">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;= <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">rs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">X</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">Y</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_bot">sreset_aux_bot</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> _ _ _ _) <span class="id">i</span>) <span class="kwd">as</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> _ _ _ _ <span class="id">i</span>) <span class="kwd">as</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">revert_all</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>; [|].<br/>
&nbsp;&nbsp;{ <span class="id">constructor</span>; <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> *; <span class="id">eapply</span> <span class="id">Cof</span>; <span class="id">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Cof</span>; <span class="id">rewrite</span> <span class="id">HU</span>, <span class="id">HV</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_le_elim">Dprodi_le_elim</a></span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">rs</span>) <span class="kwd">as</span> (<span class="id">r</span> &amp; <span class="id">rs'</span> &amp; <span class="id">Hr</span>); [| <span class="id">clear</span> <span class="id">HU</span> <span class="id">HV</span> ].<br/>
&nbsp;&nbsp;{ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#is_cons_sreset_aux">is_cons_sreset_aux</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_proj">take_env_proj</a></span>, &lt;- <span class="id">HU</span>. }<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 3 (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)), (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_eq">take_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#app_cons">app_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_cons">rem_cons</a></span>, 2 (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> <span class="id">f</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_app_env">app_app_env</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_rem_take_env">app_rem_take_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)), (<span class="id">Hf</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)), &lt;- 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_rem_env">take_rem_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id">f</span> <span class="id">X</span>)), <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_app_env">app_app_env</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_app_env">app_app_env</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_rem_take_env">app_rem_take_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- 2 (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)), &lt;- 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_rem_env">take_rem_env</a></span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_sreset_aux_le2">take_sreset_aux_le2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hf</span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envI</span>, <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) == <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id">f</span> <span class="id">envI</span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">rs</span> <span class="id">X</span> <span class="id">Y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">rs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">X</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;= <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> <span class="id">f</span> <span class="id">rs</span> <span class="id">X</span> <span class="id">Y</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_bot">sreset_aux_bot</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> _ _ _ _ <span class="id">i</span>) <span class="kwd">as</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> _ _ _ _) <span class="id">i</span>) <span class="kwd">as</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">revert_all</span>; <span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>; <span class="id">destruct</span> <span class="id">U</span>; [|].<br/>
&nbsp;&nbsp;{ <span class="id">constructor</span>; <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#eqEps">eqEps</a></span> <span class="kwd">in</span> *; <span class="id">eapply</span> <span class="id">Cof</span>; <span class="id">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Cof</span>; <span class="id">rewrite</span> <span class="id">HU</span>, <span class="id">HV</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_le_elim">Dprodi_le_elim</a></span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> _ <span class="id">rs</span>) <span class="kwd">as</span> (<span class="id">r</span> &amp; <span class="id">rs'</span> &amp; <span class="id">Hr</span>); [| <span class="id">clear</span> <span class="id">HU</span> <span class="id">HV</span> ].<br/>
&nbsp;&nbsp;{ <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_is_cons">take_is_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#is_cons_sreset_aux">is_cons_sreset_aux</a></span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id">HU</span>. }<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 3 (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)), (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_eq">take_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#app_cons">app_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_cons">rem_cons</a></span>, 2 (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> <span class="id">f</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_app_env">app_app_env</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_rem_take_env">app_rem_take_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)), (<span class="id">Hf</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)), &lt;- 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_rem_env">take_rem_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id">f</span> <span class="id">X</span>)), <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_app_env">app_app_env</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_app_env">app_app_env</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#app_rem_take_env">app_rem_take_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- 2 (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_eq">take_env_eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)), &lt;- 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_rem_env">take_rem_env</a></span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_sreset_aux">take_sreset_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hf</span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envI</span>, <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) == <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id">f</span> <span class="id">envI</span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">rs</span> <span class="id">X</span> <span class="id">Y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">rs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">X</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> <span class="id">f</span> <span class="id">rs</span> <span class="id">X</span> <span class="id">Y</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_sreset_aux_le2">take_sreset_aux_le2</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_sreset_aux_le1">take_sreset_aux_le1</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="LP.take_sreset">take_sreset</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hf</span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envI</span>, <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) == <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id">f</span> <span class="id">envI</span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">rs</span> <span class="id">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset">sreset</a></span> <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> <span class="id">rs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset">sreset</a></span> <span class="id">f</span> <span class="id">rs</span> <span class="id">X</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_eq">sreset_eq</a></span>, <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_sreset_aux">take_sreset_aux</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LP.sreset_aux_false">sreset_aux_false</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">R</span> (<span class="id">X</span> <span class="id">Y</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.SI">SI</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">R</span> == <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> <span class="id">f</span> <span class="id">R</span> <span class="id">X</span> <span class="id">Y</span> == <span class="id">Y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_Oeq">take_env_Oeq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#take_sreset_aux_false">take_sreset_aux_false</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span>, <span class="id">Hr</span>.<br/>
Qed.</div></details>
<br/>
<br/>
<h2> Raisonnement sur les nœuds </h2>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="LP.LP_node">LP_node</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id"><a name="LP.LP_node.PSyn">PSyn</a></span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.decl">decl</a></span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>}.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id"><a name="LP.LP_node.Prefs">Prefs</a></span> : <span class="id"><a href="Velus.Common.Common.html#PS.t">PS.t</a></span>}.<br/>
&nbsp;&nbsp;<span class="kwd">Variables</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="LP.LP_node.G">G</a></span> : @<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.Prefs">Prefs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="LP.LP_node.envG">envG</a></span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.FI">FI</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LP.LP_node.Hnode">Hnode</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">n</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) == <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">f</span> <span class="id">envI</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LP.take_var">take_var</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">x</span> <span class="id">n</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_var">denot_var</a></span> <span class="id">ins</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>) <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>).<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_var">denot_var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_proj">take_env_proj</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LP.lift_IH">lift_IH</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp">denot_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp">denot_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exps">denot_exps</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exps">denot_exps</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span>; <span class="id">intros</span> * <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl</span>; <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exps_nil">denot_exps_nil</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exps_eq">denot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_app">lift_app</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LP.lift_IHs">lift_IHs</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op.enumtag">enumtag</a></span> * _)) <span class="id">m</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp">denot_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp">denot_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_expss">denot_expss</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">ess</span> <span class="id">m</span> <span class="id">envG</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>)) (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_expss">denot_expss</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">ess</span> <span class="id">m</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|(<span class="id">x</span>,<span class="id">es</span>)]; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_expss_nil">denot_expss_nil</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_bot">lift_bot</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_expss_eq">denot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-_ == _ (_ (_ ?<span class="id">a</span>) ?<span class="id">b</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_cons">lift_cons</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>)) _ <span class="id">a</span> <span class="id">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lift_IH">lift_IH</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_bot">lift_bot</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_bot">lift_bot</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LP.lp_exp">lp_exp</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Γ</span> <span class="id">ins</span> <span class="id">e</span> <span class="id">n</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ins</span> &lt;&gt; [] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">Γ</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp">denot_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp">denot_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hins</span> <span class="id">Hwt</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.exp_ind2">exp_ind2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Econst&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sconst">sconst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#MAP_map">MAP_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_bss">take_bss</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eenum&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sconst">sconst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#MAP_map">MAP_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_bss">take_bss</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_map">take_map</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Evar&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_var">take_var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Elast&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eunop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.Eunop">Eunop</a></span> _ _ _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">IHe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.numstreams">numstreams</a></span> _ = _) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.typeof">typeof</a></span> _ = _) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cbv</span> <span class="id">zeta</span>; <span class="id">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">IHe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_sunop">take_sunop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id">IHe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ebinop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.Ebinop">Ebinop</a></span> _ _ _ _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">IHe1</span> <span class="id">IHe2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 2 (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.numstreams">numstreams</a></span> _ = _) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>; <span class="id">clear</span> <span class="id">it</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 2 (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.typeof">typeof</a></span> _ = _) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>; <span class="id">clear</span> <span class="id">it</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cbv</span> <span class="id">zeta</span>; <span class="id">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">t3</span> <span class="id">t4</span> <span class="id">IHe1</span> <span class="id">IHe2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_sbinop">take_sbinop</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eextcall&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Efby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_exp">wt_exp</a></span> _ _) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.wl_exp">wl_exp</a></span> _ ) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lift_IH">lift_IH</a></span> <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">revert</span> <span class="id">H</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.Efby">Efby</a></span> _ _ _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>; <span class="id">cases</span>; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">t3</span> <span class="id">t4</span> <span class="id">Eq1</span> <span class="id">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_lift_fby">take_lift_fby</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Earrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">induction</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">a</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod_eq_pair">Dprod_eq_pair</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ewhen&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_exp">wt_exp</a></span> _ _) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.wl_exp">wl_exp</a></span> _ ) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lift_IH">lift_IH</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">revert</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.Ewhen">Ewhen</a></span> _ _ _ _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>; <span class="id">cases</span>; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_lift_swhenv">take_lift_swhenv</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_var">take_var</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Emerge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.Emerge">Emerge</a></span> _ _ _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">IH</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lift_IHs">lift_IHs</a></span> <span class="id">ins</span> <span class="id">es</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eassert</span> (<span class="id">Heq</span>: _ == _); [<span class="id">apply</span> <span class="id">IH</span>; <span class="id">simpl_Forall</span>; <span class="id">auto</span>|<span class="id">clear</span> <span class="id">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cbv</span> <span class="id">zeta</span>; <span class="id">revert</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>; <span class="id">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_lift_nprod">lift_lift_nprod</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_lift_smergev">take_lift_smergev</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_var">take_var</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">d</span> <span class="kwd">as</span> [<span class="id">des</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Ecase&nbsp;défaut&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.typesof">typesof</a></span> <span class="id">des</span>) <span class="kwd">as</span> <span class="id">tys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_exp">wt_exp</a></span> _ _) <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.wl_exp">wl_exp</a></span> _ ) <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lift_IH">lift_IH</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">IH</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lift_IHs">lift_IHs</a></span> <span class="id">ins</span> <span class="id">es</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eassert</span> (<span class="id">Eq</span>: _ == _); [<span class="id">apply</span> <span class="id">IH</span>; <span class="id">simpl_Forall</span>; <span class="id">auto</span>|<span class="id">clear</span> <span class="id">H</span> <span class="id">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.Ecase">Ecase</a></span> _ _ _ _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cbv</span> <span class="id">zeta</span>; <span class="id">revert</span> <span class="id">IHe</span> <span class="id">H0</span> <span class="id">Eq</span>; <span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hl</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.numstreams">numstreams</a></span> <span class="id">des</span>) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">subst</span> <span class="id">tys</span>; <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.length_typesof_annots">length_typesof_annots</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.annots_numstreams">annots_numstreams</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span> = 1) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>, <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.numstreams">numstreams</a></span> _). <span class="comment">(*&nbsp;dans&nbsp;les&nbsp;types...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">t3</span> <span class="id">t4</span> <span class="id">t5</span> <span class="id">t6</span> <span class="id">Eq1</span> <span class="id">Eq2</span> <span class="id">Eq3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_lift_scase_defv">take_lift_scase_defv</a></span>, <span class="id">Eq1</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}{ <span class="comment">(*&nbsp;Ecase&nbsp;total&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.Ecase">Ecase</a></span> _ _ _ _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">IH</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lift_IHs">lift_IHs</a></span> <span class="id">ins</span> <span class="id">es</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eassert</span> (<span class="id">Heq</span>: _ == _); [<span class="id">apply</span> <span class="id">IH</span>; <span class="id">simpl_Forall</span>; <span class="id">auto</span>|<span class="id">clear</span> <span class="id">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cbv</span> <span class="id">zeta</span>; <span class="id">revert</span> <span class="id">IHe</span> <span class="id">Heq</span>; <span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span> = 1) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">t3</span> <span class="id">t4</span> <span class="id">Eq1</span> <span class="id">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_lift_nprod">lift_lift_nprod</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_lift_scasev">take_lift_scasev</a></span>, <span class="id">Eq1</span>; <span class="id">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eapp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_exp">wt_exp</a></span> _ _) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.wl_exp">wl_exp</a></span> _ ) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lift_IH">lift_IH</a></span> <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">revert</span> <span class="id">H</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exp_eq">denot_exp_eq</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.Eapp">Eapp</a></span> _ _ _ _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> = _) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> _ = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> _) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hl</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.n_in">n_in</a></span> <span class="id">n0</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">now</span> <span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.idents">idents</a></span>; <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> * ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">a</span> = _) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>, <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>; <span class="id">cases</span>; <span class="id">try</span> (<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span> <span class="kwd">in</span> *; <span class="id">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">t3</span> <span class="id">t4</span> <span class="id">Eq1</span> <span class="id">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_eq">sreset_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_np_of_env">take_np_of_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.n_outgt0">n_outgt0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;clear&nbsp;-&nbsp;Eq1&nbsp;Eq2&nbsp;Hnode.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.numstreams">numstreams</a></span> <span class="id">er</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;s'il&nbsp;n'y&nbsp;a&nbsp;pas&nbsp;de&nbsp;signal&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#take_sreset_aux_false">take_sreset_aux_false</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">f</span>)), <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.sreset_aux_false">sreset_aux_false</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.Hnode">Hnode</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_env_of_np">take_env_of_np</a></span>, <span class="id">Eq1</span>; <span class="id">auto</span>; <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;sinon&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_sreset_aux">take_sreset_aux</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_env_of_np">take_env_of_np</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.Hnode">Hnode</a></span>; <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_sbools_of">take_sbools_of</a></span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">arith</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.Hnode">Hnode</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_env_of_np">take_env_of_np</a></span>, <span class="id">Eq1</span>, <span class="id">Eq2</span>; <span class="id">auto</span>; <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LP.lp_exps">lp_exps</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Γ</span> <span class="id">ins</span> <span class="id">es</span> <span class="id">n</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ins</span> &lt;&gt; [] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">Γ</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exps">denot_exps</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exps">denot_exps</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [|<span class="id">e</span> <span class="id">es</span>]; <span class="id">intros</span> * <span class="id">Hins</span> <span class="id">Hwt</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exps_nil">denot_exps_nil</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_bot">lift_bot</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_bot">take_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_exps_eq">denot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-_ == _ (_ (_ ?<span class="id">a</span>) ?<span class="id">b</span>) =&gt; <span class="id">setoid_rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_app">lift_app</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take">take</a></span> <span class="id">n</span>) _ <span class="id">a</span> _ <span class="id">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lp_exp">lp_exp</a></span>, <span class="id">IHes</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LP.lp_block">lp_block</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Γ</span> <span class="id">ins</span> <span class="id">blk</span> <span class="id">n</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">acc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ins</span> &lt;&gt; [] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_block">wt_block</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">Γ</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.wl_block">wl_block</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_block">denot_block</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">blk</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">acc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_block">denot_block</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">ins</span> <span class="id">blk</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span> <span class="id">acc</span>).<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hins</span> <span class="id">Hwt</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_block_eq">denot_block_eq</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.wl_equation">wl_equation</a></span> _ _) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_equation">wt_equation</a></span> _ _ _) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.take_env_of_np_ext">take_env_of_np_ext</a></span>; <span class="id">eauto</span> 3 <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lp_exps">lp_exps</a></span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LP.lp_node">lp_node</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">nd</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_node">wt_node</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_node">denot_node</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">nd</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_node">denot_node</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.G">G</a></span> <span class="id">nd</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">nd</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_node_eq">denot_node_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_top_block_eq">denot_top_block_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_node_wl_node">wt_node_wl_node</a></span> <span class="kwd">in</span> <span class="id">Hwt</span> <span class="kwd">as</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">Hwl</span> <span class="kwd">as</span> [? <span class="id">HH</span>]; <span class="id">revert</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">Hwt</span> <span class="kwd">as</span> [????? <span class="id">HH</span>]; <span class="id">revert</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>); <span class="id">intros</span> <span class="id">Hwt</span> <span class="id">Hwl</span>; <span class="id">try</span> <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_bot">take_env_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_scope">wt_scope</a></span> _ _ _ _) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.wl_scope">wl_scope</a></span> _ _ _) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_blocks_eq">denot_blocks_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">blks</span> <span class="kwd">as</span> [|<span class="id">b</span> <span class="id">blks</span>]; <span class="id">simpl</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_right">fold_right</a></span> _ _ _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#symmetry">symmetry</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_bot">take_env_bot</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 2 <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ (_::_)) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lp_block">lp_block</a></span>; <span class="id">auto</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.n_ingt0">n_ingt0</a></span> <span class="id">nd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>); <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">congruence</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.LP_node">LP_node</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="LP.lp_global">lp_global</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_global">wt_global</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">n</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_global">denot_global</a></span> <span class="id">G</span> <span class="id">f</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> <span class="id">envI</span>) == <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_global">denot_global</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">envI</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_global">denot_global</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;point&nbsp;fixe&nbsp;global&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#FIXP_fixp">FIXP_fixp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fixp_ind">fixp_ind</a></span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;admissible&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?????.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#lub_fun_eq">lub_fun_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#lub_comp_eq">lub_comp_eq</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#lub_eq_compat">lub_eq_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fmon_eq_intro">fmon_eq_intro</a></span>; <span class="id">intro</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;bot&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_bot">take_env_bot</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">envG</span> <span class="id">HenvG</span> <span class="id">f</span> <span class="id">n</span> <span class="id">envI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcontit">fcontit</a></span> ?<span class="id">a</span> ?<span class="id">b</span>) <span class="kwd">with</span> (<span class="id">a</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den.denot_global_eq">denot_global_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span>) <span class="id">eqn</span>:<span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_bot">take_env_bot</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;On&nbsp;ne&nbsp;peut&nbsp;pas&nbsp;prouver&nbsp;l'égalité&nbsp;directement&nbsp;avec&nbsp;fixp_ind,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;car&nbsp;[take_env&nbsp;n&nbsp;envI]&nbsp;est&nbsp;pris&nbsp;dans&nbsp;le&nbsp;point&nbsp;fixe.&nbsp;On&nbsp;prouve&nbsp;donc<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l'inégalité&nbsp;dans&nbsp;les&nbsp;deux&nbsp;sens&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;&lt;=&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#FIXP_fixp">FIXP_fixp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fixp_ind">fixp_ind</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;admissibilité,&nbsp;pas&nbsp;trop&nbsp;dur&nbsp;:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ? <span class="id">Hf</span>; <span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#lub_le">lub_le</a></span> <span class="id">Hf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;itération&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">env</span> <span class="id">Hle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP_eq">FIXP_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lp_node">lp_node</a></span>; <span class="id">eauto</span> 2 <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_global_node">wt_global_node</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_monotonic">fcont_monotonic</a></span>, <span class="id">Hle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;&gt;=&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#FIXP_fixp">FIXP_fixp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fixp_ind">fixp_ind</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;admissibilité&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">g</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#lub_comp_eq">lub_comp_eq</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env">take_env</a></span> <span class="id">n</span>) <span class="id">g</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcontinuous">fcontinuous</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;init&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#take_env_bot">take_env_bot</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;itération&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">env</span> <span class="id">Hle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcontit">fcontit</a></span> ?<span class="id">a</span> ?<span class="id">b</span>) <span class="kwd">with</span> (<span class="id">a</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP_eq">FIXP_eq</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP.lp_node">lp_node</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ.wt_global_node">wt_global_node</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP">LP</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="LpFun">LpFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Typ</span>   : <span class="id"><a href="Velus.Lustre.LTyping.html#LTYPING">LTYPING</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span>     <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Den</span>   : <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD">SD</a></span>           <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Lord">Lord</a></span>)<br/>
&lt;: <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP">LP</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ">Typ</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den">Den</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LP">LP</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Typ">Typ</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#Den">Den</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.Lp.html#LpFun">LpFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
