
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module ClightToAsm</title>
<meta name="description" content="Documentation of Coq module ClightToAsm" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h1 class="title">Module ClightToAsm</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html">lib.Coqlib</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html">common.Errors</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html">common.AST</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html">common.Linking</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html">common.Smallstep</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html">common.Behaviors</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html">cfrontend.Clight</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html">driver.Compopts</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Complements.html">driver.Complements</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html">driver.Compiler</a></span>.<br/>
<br/>
<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html">Asm</a></span>.<br/>
<br/>
<div class="doc">Compilation from Clight to Asm </div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transf_clight2_program">transf_clight2_program</a></span> (<span class="id">p</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#program">Clight.program</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#program">Asm.program</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">p</span><br/>
&nbsp;&nbsp;@@@ <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#time">time</a></span> <span class="string">"C#minor generation"</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cshmgen.html#transl_program">Cshmgen.transl_program</a></span><br/>
&nbsp;&nbsp;@@@ <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#time">time</a></span> <span class="string">"Cminor generation"</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cminorgen.html#transl_program">Cminorgen.transl_program</a></span><br/>
&nbsp;&nbsp;@@@ <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#transf_cminor_program">transf_cminor_program</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">linking_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="clight2_to_asm_passes">clight2_to_asm_passes</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cshmgenproof.html#match_prog">Cshmgenproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cminorgenproof.html#match_prog">Cminorgenproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Selectionproof.html#match_prog">Selectionproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.RTLgenproof.html#match_prog">RTLgenproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if">match_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_tailcalls">Compopts.optim_tailcalls</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Tailcallproof.html#match_prog">Tailcallproof.match_prog</a></span>)<br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Inliningproof.html#match_prog">Inliningproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Renumberproof.html#match_prog">Renumberproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if">match_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_constprop">Compopts.optim_constprop</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Constpropproof.html#match_prog">Constpropproof.match_prog</a></span>)<br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if">match_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_constprop">Compopts.optim_constprop</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Renumberproof.html#match_prog">Renumberproof.match_prog</a></span>)<br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if">match_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_CSE">Compopts.optim_CSE</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.CSEproof.html#match_prog">CSEproof.match_prog</a></span>)<br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if">match_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_redundancy">Compopts.optim_redundancy</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Deadcodeproof.html#match_prog">Deadcodeproof.match_prog</a></span>)<br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Unusedglobproof.html#match_prog">Unusedglobproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Allocproof.html#match_prog">Allocproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Tunnelingproof.html#match_prog">Tunnelingproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Linearizeproof.html#match_prog">Linearizeproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.CleanupLabelsproof.html#match_prog">CleanupLabelsproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if">match_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#debug">Compopts.debug</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Debugvarproof.html#match_prog">Debugvarproof.match_prog</a></span>)<br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Stackingproof.html#match_prog">Stackingproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#mkpass">mkpass</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asmgenproof.html#match_prog">Asmgenproof.match_prog</a></span><br/>
&nbsp;&nbsp;::: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#pass_nil">pass_nil</a></span> _.<br/>
<br/>
<div class="doc">Composing the <span class="bracket"><span class="id">match_prog</span></span> relations above, we obtain the relation
  between Clight sources and Asm code that characterize CompCert's
  compilation. </div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_prog">match_prog</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#program">Clight.program</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#program">Asm.program</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#pass_match">pass_match</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#compose_passes">compose_passes</a></span> <span class="id"><a href="Velus.ClightToAsm.html#clight2_to_asm_passes">clight2_to_asm_passes</a></span>).<br/>
<br/>
<br/>
<div class="doc">The <span class="bracket"><span class="id">transf_clight2_program</span></span> function, when successful, produces
  assembly code that is in the <span class="bracket"><span class="id">match_prog</span></span> relation with the source C program. </div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transf_clight_program_match">transf_clight_program_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ClightToAsm.html#transf_clight2_program">transf_clight2_program</a></span> <span class="id">p</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">tp</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ClightToAsm.html#match_prog">match_prog</a></span> <span class="id">p</span> <span class="id">tp</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">tp</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ClightToAsm.html#transf_clight2_program">transf_clight2_program</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#time">time</a></span> <span class="kwd">in</span> <span class="id">T</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cshmgen.html#transl_program">Cshmgen.transl_program</a></span> <span class="id">p</span>) <span class="kwd">as</span> [<span class="id">p3</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P3</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cminorgen.html#transl_program">Cminorgen.transl_program</a></span> <span class="id">p3</span>) <span class="kwd">as</span> [<span class="id">p4</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P4</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#transf_cminor_program">transf_cminor_program</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#time">time</a></span> <span class="kwd">in</span> <span class="id">T</span>. <span class="id">rewrite</span> ! <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#compose_print_identity">compose_print_identity</a></span> <span class="kwd">in</span> <span class="id">T</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.backend.Selection.html#sel_program">Selection.sel_program</a></span> <span class="id">p4</span>) <span class="kwd">as</span> [<span class="id">p5</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P5</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.backend.RTLgen.html#transl_program">RTLgen.transl_program</a></span> <span class="id">p5</span>) <span class="kwd">as</span> [<span class="id">p6</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P6</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#transf_rtl_program">transf_rtl_program</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#time">time</a></span> <span class="kwd">in</span> <span class="id">T</span>. <span class="id">rewrite</span> ! <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#compose_print_identity">compose_print_identity</a></span> <span class="kwd">in</span> <span class="id">T</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">p7</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#total_if">total_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_tailcalls">optim_tailcalls</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Tailcall.html#transf_program">Tailcall.transf_program</a></span> <span class="id">p6</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.backend.Inlining.html#transf_program">Inlining.transf_program</a></span> <span class="id">p7</span>) <span class="kwd">as</span> [<span class="id">p8</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P8</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">p9</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Renumber.html#transf_program">Renumber.transf_program</a></span> <span class="id">p8</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">p10</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#total_if">total_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_constprop">optim_constprop</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Constprop.html#transf_program">Constprop.transf_program</a></span> <span class="id">p9</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">p11</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#total_if">total_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_constprop">optim_constprop</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Renumber.html#transf_program">Renumber.transf_program</a></span> <span class="id">p10</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#partial_if">partial_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_CSE">optim_CSE</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.CSE.html#transf_program">CSE.transf_program</a></span> <span class="id">p11</span>) <span class="kwd">as</span> [<span class="id">p12</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P12</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#partial_if">partial_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#optim_redundancy">optim_redundancy</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Deadcode.html#transf_program">Deadcode.transf_program</a></span> <span class="id">p12</span>) <span class="kwd">as</span> [<span class="id">p13</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P13</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.backend.Unusedglob.html#transform_program">Unusedglob.transform_program</a></span> <span class="id">p13</span>) <span class="kwd">as</span> [<span class="id">p14</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P14</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.backend.Allocation.html#transf_program">Allocation.transf_program</a></span> <span class="id">p14</span>) <span class="kwd">as</span> [<span class="id">p15</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P15</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">p16</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Tunneling.html#tunnel_program">Tunneling.tunnel_program</a></span> <span class="id">p15</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.backend.Linearize.html#transf_program">Linearize.transf_program</a></span> <span class="id">p16</span>) <span class="kwd">as</span> [<span class="id">p17</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P17</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">p18</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.backend.CleanupLabels.html#transf_program">CleanupLabels.transf_program</a></span> <span class="id">p17</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#partial_if">partial_if</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compopts.html#debug">debug</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Debugvar.html#transf_program">Debugvar.transf_program</a></span> <span class="id">p18</span>) <span class="kwd">as</span> [<span class="id">p19</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P19</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.backend.Stacking.html#transf_program">Stacking.transf_program</a></span> <span class="id">p19</span>) <span class="kwd">as</span> [<span class="id">p20</span>|<span class="id">e</span>] <span class="id">eqn</span>:<span class="id">P20</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ClightToAsm.html#match_prog">match_prog</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p3</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cshmgenproof.html#transf_program_match">Cshmgenproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p4</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cminorgenproof.html#transf_program_match">Cminorgenproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p5</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Selectionproof.html#transf_program_match">Selectionproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p6</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.RTLgenproof.html#transf_program_match">RTLgenproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p7</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#total_if_match">total_if_match</a></span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Tailcallproof.html#transf_program_match">Tailcallproof.transf_program_match</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p8</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Inliningproof.html#transf_program_match">Inliningproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p9</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Renumberproof.html#transf_program_match">Renumberproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p10</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#total_if_match">total_if_match</a></span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Constpropproof.html#transf_program_match">Constpropproof.transf_program_match</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p11</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#total_if_match">total_if_match</a></span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Renumberproof.html#transf_program_match">Renumberproof.transf_program_match</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p12</span>; <span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#partial_if_match">partial_if_match</a></span>; <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.CSEproof.html#transf_program_match">CSEproof.transf_program_match</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p13</span>; <span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#partial_if_match">partial_if_match</a></span>; <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Deadcodeproof.html#transf_program_match">Deadcodeproof.transf_program_match</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p14</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Unusedglobproof.html#transf_program_match">Unusedglobproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p15</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Allocproof.html#transf_program_match">Allocproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p16</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Tunnelingproof.html#transf_program_match">Tunnelingproof.transf_program_match</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p17</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Linearizeproof.html#transf_program_match">Linearizeproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p18</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.CleanupLabelsproof.html#transf_program_match">CleanupLabelsproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p19</span>; <span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#partial_if_match">partial_if_match</a></span>; <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Debugvarproof.html#transf_program_match">Debugvarproof.transf_program_match</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">p20</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Stackingproof.html#transf_program_match">Stackingproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">tp</span>; <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asmgenproof.html#transf_program_match">Asmgenproof.transf_program_match</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div></details>
<br/>
<br/>
<div class="doc">Missing result from Clight.v: receptiveness of the Clight2 semantics </div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="clight2_semantics_receptive">clight2_semantics_receptive</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">p</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#program">Clight.program</a></span>), <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#receptive">receptive</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">Clight.semantics2</a></span> <span class="id">p</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">Clight.semantics2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">ge</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#globalenv">Clight.globalenv</a></span> <span class="id">p</span>). <span class="id">constructor</span>; <span class="id">simpl</span>; <span class="id">intros</span>.<br/>
<span class="comment">(*&nbsp;receptiveness&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">t1</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#E0">Events.E0</a></span> -&gt; <span class="kwd">exists</span> <span class="id">s2</span>, <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#step2">Clight.step2</a></span> <span class="id">ge</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">s2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">subst</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="kwd">exists</span> <span class="id">s1</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#external_call_receptive">Events.external_call_receptive</a></span>; <span class="id">eauto</span>. <span class="id">intros</span> [<span class="id">vres2</span> [<span class="id">m2</span> <span class="id">EC2</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;external&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#external_call_receptive">Events.external_call_receptive</a></span>; <span class="id">eauto</span>. <span class="id">intros</span> [<span class="id">vres2</span> [<span class="id">m2</span> <span class="id">EC2</span>]].<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#Returnstate">Clight.Returnstate</a></span> <span class="id">vres2</span> <span class="id">k</span> <span class="id">m2</span>). <span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;trace&nbsp;length&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red</span>; <span class="id">simpl</span>; <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">simpl</span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#external_call_trace_length">Events.external_call_trace_length</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Events.html#external_call_trace_length">Events.external_call_trace_length</a></span>; <span class="id">eauto</span>.<br/>
Qed.</div></details>
<br/>
<br/>
<div class="doc">Semantic preservation (forward and backward simulation) between Clight and Asm </div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="clight2_semantic_preservation">clight2_semantic_preservation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ClightToAsm.html#match_prog">match_prog</a></span> <span class="id">p</span> <span class="id">tp</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">Clight.semantics2</a></span> <span class="id">p</span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#semantics">Asm.semantics</a></span> <span class="id">tp</span>) /\<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#backward_simulation">backward_simulation</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">Clight.semantics2</a></span> <span class="id">p</span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#semantics">Asm.semantics</a></span> <span class="id">tp</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">tp</span> <span class="id">M</span>. <span class="id">unfold</span> <span class="id"><a href="Velus.ClightToAsm.html#match_prog">match_prog</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Linking.html#pass_match">pass_match</a></span> <span class="kwd">in</span> <span class="id">M</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">M</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">DestructM</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">H</span>: <span class="kwd">exists</span> <span class="id">p</span>, _ /\ _ |- _ ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">p</span> := <span class="id">fresh</span> <span class="string">"p"</span> <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">M</span> := <span class="id">fresh</span> <span class="string">"M"</span> <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">MM</span> := <span class="id">fresh</span> <span class="string">"MM"</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">p</span> &amp; <span class="id">M</span> &amp; <span class="id">MM</span>); <span class="id">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">DestructM</span>. <span class="id">subst</span> <span class="id">tp</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">Clight.semantics2</a></span> <span class="id">p</span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#semantics">Asm.semantics</a></span> <span class="id">p19</span>)).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cshmgenproof.html#transl_program_correct">Cshmgenproof.transl_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Cminorgenproof.html#transl_program_correct">Cminorgenproof.transl_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Selectionproof.html#transf_program_correct">Selectionproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.RTLgenproof.html#transf_program_correct">RTLgenproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if_simulation">match_if_simulation</a></span>. <span class="id">eassumption</span>. <span class="id">exact</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Tailcallproof.html#transf_program_correct">Tailcallproof.transf_program_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Inliningproof.html#transf_program_correct">Inliningproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>. <span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Renumberproof.html#transf_program_correct">Renumberproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if_simulation">match_if_simulation</a></span>. <span class="id">eassumption</span>. <span class="id">exact</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Constpropproof.html#transf_program_correct">Constpropproof.transf_program_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if_simulation">match_if_simulation</a></span>. <span class="id">eassumption</span>. <span class="id">exact</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Renumberproof.html#transf_program_correct">Renumberproof.transf_program_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if_simulation">match_if_simulation</a></span>. <span class="id">eassumption</span>. <span class="id">exact</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.CSEproof.html#transf_program_correct">CSEproof.transf_program_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if_simulation">match_if_simulation</a></span>. <span class="id">eassumption</span>. <span class="id">exact</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Deadcodeproof.html#transf_program_correct">Deadcodeproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Unusedglobproof.html#transf_program_correct">Unusedglobproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Allocproof.html#transf_program_correct">Allocproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Tunnelingproof.html#transf_program_correct">Tunnelingproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Linearizeproof.html#transf_program_correct">Linearizeproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.CleanupLabelsproof.html#transf_program_correct">CleanupLabelsproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.driver.Compiler.html#match_if_simulation">match_if_simulation</a></span>. <span class="id">eassumption</span>. <span class="id">exact</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Debugvarproof.html#transf_program_correct">Debugvarproof.transf_program_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#compose_forward_simulations">compose_forward_simulations</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Stackingproof.html#transf_program_correct">Stackingproof.transf_program_correct</a></span> <span class="kwd">with</span> (<span class="id">return_address_offset</span> := <span class="id"><a href="../../CompCert/doc/html/compcert.backend.Asmgenproof0.html#return_address_offset">Asmgenproof0.return_address_offset</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> <span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asmgenproof.html#return_address_exists">Asmgenproof.return_address_exists</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asmgenproof.html#transf_program_correct">Asmgenproof.transf_program_correct</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Smallstep.html#forward_to_backward_simulation">forward_to_backward_simulation</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ClightToAsm.html#clight2_semantics_receptive">clight2_semantics_receptive</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#semantics_determinate">Asm.semantics_determinate</a></span>.<br/>
Qed.</div></details>
<br/>
<br/>
<div class="doc">The corollary for Tim and Lelio </div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="diverges_trace_preservation">diverges_trace_preservation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ClightToAsm.html#transf_clight2_program">transf_clight2_program</a></span> <span class="id">p</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">tp</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#program_behaves">program_behaves</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">Clight.semantics2</a></span> <span class="id">p</span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#Diverges">Diverges</a></span> <span class="id">t</span>) -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#program_behaves">program_behaves</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#semantics">Asm.semantics</a></span> <span class="id">tp</span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#Diverges">Diverges</a></span> <span class="id">t</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">M</span>: <span class="id"><a href="Velus.ClightToAsm.html#match_prog">match_prog</a></span> <span class="id">p</span> <span class="id">tp</span>) <span class="kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="Velus.ClightToAsm.html#transf_clight_program_match">transf_clight_program_match</a></span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Velus.ClightToAsm.html#clight2_semantic_preservation">clight2_semantic_preservation</a></span>; <span class="id">eauto</span>. <span class="id">intros</span> [<span class="id">FWD</span> <span class="id">BACK</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#forward_simulation_behavior_improves">forward_simulation_behavior_improves</a></span>; <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">beh</span> &amp; <span class="id">B</span> &amp; <span class="id">I</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">I</span>. <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (? &amp; ? &amp; ?); <span class="id">discriminate</span>.<br/>
Qed.</div></details>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="reacts_trace_preservation">reacts_trace_preservation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ClightToAsm.html#transf_clight2_program">transf_clight2_program</a></span> <span class="id">p</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">tp</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#program_behaves">program_behaves</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#semantics2">Clight.semantics2</a></span> <span class="id">p</span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#Reacts">Reacts</a></span> <span class="id">T</span>) -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#program_behaves">program_behaves</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.x86.Asm.html#semantics">Asm.semantics</a></span> <span class="id">tp</span>) (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#Reacts">Reacts</a></span> <span class="id">T</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">M</span>: <span class="id"><a href="Velus.ClightToAsm.html#match_prog">match_prog</a></span> <span class="id">p</span> <span class="id">tp</span>) <span class="kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="Velus.ClightToAsm.html#transf_clight_program_match">transf_clight_program_match</a></span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Velus.ClightToAsm.html#clight2_semantic_preservation">clight2_semantic_preservation</a></span>; <span class="id">eauto</span>. <span class="id">intros</span> [<span class="id">FWD</span> <span class="id">BACK</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Behaviors.html#forward_simulation_behavior_improves">forward_simulation_behavior_improves</a></span>; <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">beh</span> &amp; <span class="id">B</span> &amp; <span class="id">I</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">I</span>. <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">t</span> &amp; ? &amp; ?); <span class="id">discriminate</span>.<br/>
Qed.</div></details>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
