
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module NLCoindToIndexed</title>
<meta name="description" content="Documentation of Coq module NLCoindToIndexed" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h1 class="title">Module NLCoindToIndexed</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html">Sorting.Permutation</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Tactics.html">Program.Tactics</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.FSets.FMapPositive.html">FSets.FMapPositive</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.FunctionalEnvironment.html">FunctionalEnvironment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoreExpr.CESyntax.html">CoreExpr.CESyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLustre.NLSyntax.html">NLustre.NLSyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLustre.NLOrdered.html">NLustre.NLOrdered</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.IndexedStreams.html">IndexedStreams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoindStreams.html">CoindStreams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoindToIndexed.html">CoindToIndexed</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoreExpr.CESemantics.html">CoreExpr.CESemantics</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLustre.NLIndexedSemantics.html">NLustre.NLIndexedSemantics</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLustre.NLCoindSemantics.html">NLustre.NLCoindSemantics</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Setoids.Setoid.html">Setoid</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="NLCOINDTOINDEXED">NLCOINDTOINDEXED</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span>      <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>             <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">CESyn</span> : <span class="id"><a href="Velus.CoreExpr.CESyntax.html#CESYNTAX">CESYNTAX</a></span>           <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.NLustre.NLSyntax.html#NLSYNTAX">NLSYNTAX</a></span>           <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">IStr</span>  : <span class="id"><a href="Velus.IndexedStreams.html#INDEXEDSTREAMS">INDEXEDSTREAMS</a></span>     <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">CStr</span>  : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span>       <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">CIStr</span> : <span class="id"><a href="Velus.CoindToIndexed.html#COINDTOINDEXED">COINDTOINDEXED</a></span>     <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span>           <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr">IStr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ord</span>   : <span class="id"><a href="Velus.NLustre.NLOrdered.html#NLORDERED">NLORDERED</a></span>          <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CESem</span>        : <span class="id"><a href="Velus.CoreExpr.CESemantics.html#CESEMANTICS">CESEMANTICS</a></span>        <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span>     <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr">IStr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Indexed</span>      : <span class="id"><a href="Velus.NLustre.NLIndexedSemantics.html#NLINDEXEDSEMANTICS">NLINDEXEDSEMANTICS</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ord">Ord</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem">CESem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CoInd</span>        : <span class="id"><a href="Velus.NLustre.NLCoindSemantics.html#NLCOINDSEMANTICS">NLCOINDSEMANTICS</a></span>   <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ord">Ord</a></span>).<br/>
<br/>
<h1> SEMANTICS CORRESPONDENCE </h1>
<br/>
<h2> Variables </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_vars_impl">sem_vars_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">xs</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>)) <span class="id">xs</span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_vars">CESem.sem_vars</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">xs</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams">tr_Streams</a></span> <span class="id">xss</span>).<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_vars">CESem.sem_vars</a></span>, <span class="id">IStr.lift'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">F</span> ?. <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_vars_instant">CESem.sem_vars_instant</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams">tr_Streams</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.sem_var">sem_var</a></span> _ _ _) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>. <span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;<span class="id">Global</span> <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_vars_impl</span> : <span class="id">indexedstreams</span> <span class="id">coindstreams</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NLCOINDTOINDEXED.Global">Global</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="NLCOINDTOINDEXED.Global.G">G</a></span> : <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Syn.global">global</a></span>.<br/>
<br/>
<h2> Semantics of exps </h2>
<br/>
<div class="doc">State the correspondence for <span class="bracket"><span class="id">exp</span></span>.
        Goes by induction on the coinductive semantics of <span class="bracket"><span class="id">exp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_exp_impl">sem_exp_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_exp">CoInd.sem_exp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_exp">CESem.sem_exp</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof with</summary>
<div class="proofscript">
 <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> 1 <span class="kwd">as</span> [? ? ? ? <span class="id">Hconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? ? <span class="id">Henum</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? ? <span class="id">Hvar</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? ? <span class="id">Hlast</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? ? ? ? ? ? ? ? <span class="id">Hvar</span> <span class="id">Hwhen</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? ? ? ? ? ? <span class="id">Hlift1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? ? ? ? ? ? ? ? ? ? <span class="id">Hlift2</span>]; <span class="id">intro</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.const_spec">const_spec</a></span> <span class="kwd">in</span> <span class="id">Hconst</span>; <span class="id">rewrite</span> <span class="id">Hconst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.enum_spec">enum_spec</a></span> <span class="kwd">in</span> <span class="id">Henum</span>; <span class="id">rewrite</span> <span class="id">Henum</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span> <span class="kwd">in</span> <span class="id">Hvar</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span> <span class="kwd">in</span> <span class="id">Hlast</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHsem_exp</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span> <span class="kwd">in</span> <span class="id">Hvar</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_var">IStr.sem_var</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.lift">IStr.lift</a></span> <span class="kwd">in</span> <span class="id">Hvar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Hvar</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.when_spec">when_spec</a></span> <span class="kwd">in</span> <span class="id">Hwhen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">Hwhen</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [(<span class="id">Hes</span> &amp; <span class="id">Hxs</span> &amp; <span class="id">Hos</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|[(? &amp; ? &amp; <span class="id">Hes</span> &amp; <span class="id">Hxs</span> &amp; ? &amp; <span class="id">Hos</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(? &amp; <span class="id">Hes</span> &amp; <span class="id">Hxs</span> &amp; <span class="id">Hos</span>)]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hos</span>; <span class="id">rewrite</span> <span class="id">Hes</span> <span class="kwd">in</span> <span class="id">IHsem_exp</span>; <span class="id">rewrite</span> <span class="id">Hxs</span> <span class="kwd">in</span> <span class="id">Hvar</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHsem_exp</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">IHsem_exp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.lift1_spec">lift1_spec</a></span> <span class="kwd">in</span> <span class="id">Hlift1</span>; <span class="id">destruct</span> (<span class="id">Hlift1</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [(<span class="id">Hes</span> &amp; <span class="id">Hos</span>)|(?&amp;?&amp; <span class="id">Hes</span> &amp; ? &amp; <span class="id">Hos</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hos</span>; <span class="id">rewrite</span> <span class="id">Hes</span> <span class="kwd">in</span> <span class="id">IHsem_exp</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHsem_exp1</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">IHsem_exp2</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.lift2_spec">lift2_spec</a></span> <span class="kwd">in</span> <span class="id">Hlift2</span>; <span class="id">destruct</span> (<span class="id">Hlift2</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [(<span class="id">Hes1</span> &amp; <span class="id">Hes2</span> &amp; <span class="id">Hos</span>)|(?&amp;?&amp;?&amp; <span class="id">Hes1</span> &amp; <span class="id">Hes2</span> &amp;?&amp; <span class="id">Hos</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hos</span>; <span class="id">rewrite</span> <span class="id">Hes1</span> <span class="kwd">in</span> <span class="id">IHsem_exp1</span>; <span class="id">rewrite</span> <span class="id">Hes2</span> <span class="kwd">in</span> <span class="id">IHsem_exp2</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_exp_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_exps_impl">sem_exps_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">es</span> <span class="id">ess</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_exp">CoInd.sem_exp</a></span> <span class="id">H</span> <span class="id">b</span>) <span class="id">es</span> <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_exps">CESem.sem_exps</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">es</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams">tr_Streams</a></span> <span class="id">ess</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> 1; <span class="id">simpl</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_exp_impl">sem_exp_impl</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHForall2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_exps_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<div class="doc">Give an indexed specification for annotated <span class="bracket"><span class="id">exp</span></span>, using the previous
        lemma. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_aexp_index">sem_aexp_index</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">le</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_aexp">CoInd.sem_aexp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">le</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_clock_instant">sem_clock_instant</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.var_env">CESem.var_env</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span> <span class="id">n</span>)) <span class="id">ck</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_exp_instant">CESem.sem_exp_instant</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span> <span class="id">n</span>) <span class="id">le</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.absent">absent</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_clock_instant">sem_clock_instant</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.var_env">CESem.var_env</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span> <span class="id">n</span>)) <span class="id">ck</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_exp_instant">CESem.sem_exp_instant</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span> <span class="id">n</span>) <span class="id">le</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.present">present</a></span> <span class="id">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.present">present</a></span> <span class="id">e</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span> * <span class="id">Indexed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inversion_clear</span> <span class="id">Indexed</span> <span class="kwd">as</span> [? ? ? ? ? ? ? <span class="id">Indexed'</span> <span class="id">Hck</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? ? ? <span class="id">Indexed'</span> <span class="id">Hck</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_exp_impl">sem_exp_impl</a></span> <span class="kwd">in</span> <span class="id">Indexed'</span>; <span class="id">specialize</span> (<span class="id">Indexed'</span> 0);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span>; <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span> <span class="kwd">in</span> <span class="id">Indexed'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_clock_impl">sem_clock_impl</a></span>) <span class="kwd">in</span> <span class="id">Hck</span>; <span class="id">specialize</span> (<span class="id">Hck</span> 0); <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span> <span class="kwd">in</span> <span class="id">Hck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>. <span class="id">eexists</span>. <span class="id">eauto</span> <span class="kwd">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>; <span class="id">auto</span> <span class="kwd">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inversion_clear</span> <span class="id">Indexed</span> <span class="kwd">as</span> [? ? ? ? ? ? ? <span class="id">Indexed'</span>|? ? ? ? ? ? <span class="id">Indexed'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_exp_impl">sem_exp_impl</a></span> <span class="kwd">in</span> <span class="id">Indexed'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">take</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_annot">CoInd.sem_annot</a></span> _ _ _ _ _ _) <span class="id">and</span> <span class="id">eapply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> [|]; <span class="id">destruct_conjs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">left</span>|<span class="id">right</span>; <span class="id">do</span> 2 <span class="id">esplit</span>]; <span class="id">try</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>; <span class="id">try</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history_tl">tr_history_tl</a></span>; <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">We deduce from the previous lemma the correspondence for annotated
        <span class="bracket"><span class="id">exp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_aexp_impl">sem_aexp_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_aexp">CoInd.sem_aexp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_aexp">CESem.sem_aexp</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">ck</span> <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Indexed</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_aexp_index">sem_aexp_index</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">Indexed</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Indexed</span> <span class="kwd">as</span> [(? &amp; ? &amp; <span class="id">Hes</span>)|(? &amp; ? &amp; ? &amp; <span class="id">Hes</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hes</span>; <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_aexp_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">fby</span></span> is not a predicate but a function, so we directly state the
        correspondence.  </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.fby_impl">fby_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.sfby">sfby</a></span> <span class="id">c</span> <span class="id">xs</span>) <span class="id">≈</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.fby">Indexed.fby</a></span> <span class="id">c</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">xs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">n</span>; <span class="id">revert</span> <span class="id">c</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="kwd">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.fby">Indexed.fby</a></span>; <span class="id">simpl</span>; <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="kwd">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.fby">Indexed.fby</a></span>; <span class="id">simpl</span>; <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHn</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.fby">Indexed.fby</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">xs</span> <span class="id">n</span>); <span class="id">auto</span>; <span class="id">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">IHn</span>; <span class="id">induction</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>; <span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">xs</span> <span class="id">n</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="NLCOINDTOINDEXED.all_absent_or_presence">all_absent_or_presence</a></span> : <span class="kwd">forall</span> (<span class="id">xs</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.svalue">svalue</a></span>) <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">m</span> &lt;= <span class="id">n</span> -&gt; <span class="id">xs</span> # <span class="id">m</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.absent">absent</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">m</span> <span class="id">x</span>, <span class="id">m</span> &lt; <span class="id">n</span> /\ <span class="id">xs</span> # <span class="id">m</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.present">present</a></span> <span class="id">x</span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">m</span> &lt; <span class="id">n</span> -&gt; <span class="id">xs</span> # <span class="id">m</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.absent">absent</a></span>) /\ <span class="kwd">exists</span> <span class="id">x</span>, <span class="id">xs</span> # <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.present">present</a></span> <span class="id">x</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> (<span class="id">xs</span> # 0) <span class="id">eqn</span>:<span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>. <span class="id">intros</span> ? <span class="id">Hle</span>. <span class="id">inv</span> <span class="id">Hle</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">do</span> 2 <span class="id">right</span>. <span class="id">split</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ? <span class="id">Hlt</span>. <span class="id">inv</span> <span class="id">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">IHn</span> <span class="kwd">as</span> [?|[(?&amp;?&amp;<span class="id">Hmn</span>&amp;<span class="id">Hx</span>)|(<span class="id">Hm</span>&amp;?&amp;<span class="id">Hx</span>)]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> (<span class="id">xs</span> # (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)) <span class="id">eqn</span>:<span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">left</span>. <span class="id">intros</span> ? <span class="id">Hmn</span>. <span class="id">inv</span> <span class="id">Hmn</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">do</span> 2 <span class="id">right</span>. <span class="id">split</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ? <span class="id">Hlt</span>. <span class="id">apply</span> <span class="id">H</span>; <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="id">left</span>. <span class="kwd">exists</span> <span class="id">x</span>. <span class="kwd">exists</span> <span class="id">x0</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="id">left</span>. <span class="kwd">exists</span> <span class="id">n</span>. <span class="kwd">exists</span> <span class="id">x</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">We also directly state the correspondence for <span class="bracket"><span class="id">reset</span></span> </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.reset_impl">reset_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v0</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.reset">CoInd.reset</a></span> <span class="id">v0</span> <span class="id">xs</span> <span class="id">rs</span>) <span class="id">≈</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.reset">Indexed.reset</a></span> <span class="id">v0</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">xs</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">rs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.reset">CoInd.reset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">n</span>. <span class="id">revert</span> <span class="id">v0</span> <span class="id">xs</span> <span class="id">rs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">unfold_Stv</span> <span class="id">rs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_hd">tr_Stream_hd</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">unfold_Stv</span> <span class="id">rs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_tl">tr_Stream_tl</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2-4:<span class="id">erewrite</span> <span class="id">IHn</span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.reset_shift">Indexed.reset_shift</a></span>; <span class="id">eauto</span>. 2:<span class="id">left</span>; <span class="kwd">exists</span> <span class="id">v</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Difficult&nbsp;case.&nbsp;Three&nbsp;possibilities&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;there&nbsp;is&nbsp;no&nbsp;present&nbsp;before&nbsp;n,&nbsp;so&nbsp;in&nbsp;particular&nbsp;xs&nbsp;n&nbsp;is&nbsp;absent,&nbsp;so&nbsp;both&nbsp;are&nbsp;absent<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;there&nbsp;is&nbsp;a&nbsp;present&nbsp;strictly&nbsp;before&nbsp;n,&nbsp;in&nbsp;which&nbsp;case&nbsp;the&nbsp;"doreset"&nbsp;flag&nbsp;is&nbsp;lowered<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;xs&nbsp;n&nbsp;is&nbsp;the&nbsp;first&nbsp;present,&nbsp;in&nbsp;which&nbsp;case&nbsp;both&nbsp;are&nbsp;equal&nbsp;to&nbsp;v0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.all_absent_or_presence">all_absent_or_presence</a></span> <span class="id">xs</span> <span class="id">n</span>) <span class="kwd">as</span> [?|[(?&amp;?&amp;<span class="id">Hmn</span>&amp;<span class="id">Hx</span>)|(<span class="id">Hm</span>&amp;?&amp;<span class="id">Hx</span>)]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">H</span> <span class="id">n</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.le_refl">Nat.le_refl</a></span> _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.reset1_absent">CoInd.reset1_absent</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.reset_spec">Indexed.reset_spec</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.reset1_present1">CoInd.reset1_present1</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span>, <span class="id">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Indexed.reset_shift'</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.reset1_present2">CoInd.reset1_present2</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.reset_spec">Indexed.reset_spec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 2 <span class="id">right</span>. <span class="kwd">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.doreset_spec">Indexed.doreset_spec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="kwd">exists</span> 0. <span class="id">repeat</span> <span class="id">split</span>; <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_0_succ">Nat.lt_0_succ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ? <span class="id">Hk</span> <span class="id">Hl</span>. <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span>. <span class="id">destruct</span> <span class="id">k</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hm</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLCOINDTOINDEXED.reset_fby_impl">reset_fby_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v0</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.reset">CoInd.reset</a></span> <span class="id">v0</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.sfby">sfby</a></span> <span class="id">v0</span> <span class="id">xs</span>) <span class="id">rs</span>) <span class="id">≈</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.reset">Indexed.reset</a></span> <span class="id">v0</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.fby">Indexed.fby</a></span> <span class="id">v0</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">xs</span>)) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">rs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.reset_impl">reset_impl</a></span>. <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.reset">Indexed.reset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.fby_impl">fby_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.sfby">sfby</a></span> <span class="id">v0</span> <span class="id">xs</span>) <span class="id">n</span>) <span class="id">eqn</span>:<span class="id">Hfby</span>; <span class="id">setoid_rewrite</span> <span class="id">Hfby</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Hfby</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> _ _); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.fby_impl">fby_impl</a></span>. <span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> _ _); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<h2> Semantics of cexps </h2>
<br/>
<div class="doc">State the correspondence for <span class="bracket"><span class="id">cexp</span></span>.
        Goes by induction on the coinductive semantics of <span class="bracket"><span class="id">cexp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_cexp_impl">sem_cexp_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_cexp">CoInd.sem_cexp</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_cexp">CESem.sem_cexp</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> 1 <span class="kwd">as</span> [? ? ? ? ? ? ? ? ? <span class="id">Hvar</span> <span class="id">Hsem</span> <span class="id">IH</span> <span class="id">Hmerge</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? ? ? ? ? <span class="id">He</span> <span class="id">Hsem</span> <span class="id">IH</span> <span class="id">Hcase</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? <span class="id">He</span>] <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_cexp_ind2">CoInd.sem_cexp_ind2</a></span>; <span class="id">intro</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span> <span class="kwd">in</span> <span class="id">Hvar</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_var">IStr.sem_var</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.lift">IStr.lift</a></span> <span class="kwd">in</span> <span class="id">Hvar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Hvar</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.merge_spec">merge_spec</a></span> <span class="kwd">in</span> <span class="id">Hmerge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">Hmerge</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [(<span class="id">Hxs</span> &amp; <span class="id">Habs</span> &amp; <span class="id">Hos</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(? &amp; ? &amp; <span class="id">Hxs</span> &amp; <span class="id">Hpres</span> &amp; <span class="id">Habs</span> &amp; <span class="id">Hos</span>)]; <span class="id">clear</span> <span class="id">Hmerge</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hos</span>; <span class="id">rewrite</span> <span class="id">Hxs</span> <span class="kwd">in</span> <span class="id">Hvar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> - <span class="id">IH</span> <span class="id">Habs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span> <span class="kwd">in</span> <span class="id">IH</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ? (?&amp;<span class="id">Hin</span>&amp;<span class="id">He</span>). <span class="id">specialize</span> (<span class="id">He</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#length_in_right_combine">length_in_right_combine</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess</span>)) <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_seq">length_seq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="id">eauto</span>; <span class="id">simpl</span> <span class="kwd">in</span> *. <span class="id">now</span> <span class="id">rewrite</span> &lt;-<span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es</span>) <span class="kwd">as</span> <span class="id">Hlen</span> <span class="kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">IH</span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists_exists">Exists_exists</a></span> <span class="kwd">in</span> <span class="id">Hpres</span> <span class="kwd">as</span> ((<span class="id">k</span>&amp;?)&amp;<span class="id">Hin</span>&amp;?&amp;?); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_combine_seq">In_combine_seq</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> <span class="id">Hnth1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IH'</span>:=<span class="id">IH</span>). <span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#nth_error_Forall2">nth_error_Forall2</a></span> <span class="kwd">in</span> <span class="id">IH'</span> <span class="kwd">as</span> (?&amp;<span class="id">Hnth2</span>&amp;<span class="id">He</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">He</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hnth2'</span>:=<span class="id">Hnth2</span>). <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_split">nth_error_split</a></span> <span class="kwd">in</span> <span class="id">Hnth2'</span> <span class="kwd">as</span> (<span class="id">es1</span>&amp;<span class="id">es2</span>&amp;?&amp;<span class="id">Hles1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="id">rewrite</span> &lt;-<span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="id">intros</span> ? <span class="id">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="kwd">exists</span> <span class="id">k'</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id">es</span> <span class="id">k'</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x3</span> /\ <span class="id">k'</span> &lt;&gt; <span class="id">x0</span>) <span class="kwd">as</span> (<span class="id">k'</span>&amp;<span class="id">Hnth3</span>&amp;<span class="id">Hneq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> <span class="id">Hin'</span> <span class="kwd">as</span> [<span class="id">Hin'</span>|<span class="id">Hin'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">In_nth_error</a></span> <span class="kwd">in</span> <span class="id">Hin'</span> <span class="kwd">as</span> (<span class="id">k'</span>&amp;<span class="id">Hnth</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">exists</span> <span class="id">k'</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">k'</span> &lt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es1</span>) <span class="kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_Some">nth_error_Some</a></span>; <span class="id">intros</span> ?; <span class="id">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_app1">nth_error_app1</a></span>; <span class="id">auto</span>. <span class="id">split</span>; <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es1</span> + <span class="id">k'</span>)); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_app2">nth_error_app2</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_succ_l">Nat.sub_succ_l</a></span>; <span class="id">simpl</span>. 2,3:<span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es1</span> + <span class="id">k'</span> - <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es1</span>) <span class="kwd">with</span> <span class="id">k'</span> <span class="kwd">by</span> <span class="id">lia</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#nth_error_Forall2">nth_error_Forall2</a></span> <span class="kwd">in</span> <span class="id">IH</span> <span class="kwd">as</span> (?&amp;<span class="id">Hnth4</span>&amp;<span class="id">He'</span>); <span class="id">eauto</span>. <span class="id">specialize</span> (<span class="id">He'</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_combine_seq">In_combine_seq</a></span> <span class="kwd">in</span> <span class="id">Hnth4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Habs</span>; [|<span class="id">eapply</span> <span class="id">Hnth4</span>]; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id">Habs</span>; <span class="id">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_exp_impl">sem_exp_impl</a></span> <span class="kwd">in</span> <span class="id">He</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">He</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.case_spec">case_spec</a></span> <span class="kwd">in</span> <span class="id">Hcase</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">Hcase</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [(<span class="id">Hxs</span> &amp; <span class="id">Habs</span> &amp; _ &amp; <span class="id">Hos</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|[(? &amp; ? &amp; <span class="id">Hxs</span> &amp; <span class="id">Habs</span> &amp; <span class="id">Heq</span> &amp; _ &amp; <span class="id">Hos</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(? &amp; ? &amp; <span class="id">Hxs</span> &amp; ? &amp; ? &amp; [] &amp; <span class="id">Hos</span>)]]; <span class="id">clear</span> <span class="id">Hcase</span>; <span class="id">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hos</span>; <span class="id">rewrite</span> <span class="id">Hxs</span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> - <span class="id">IH</span> <span class="id">Habs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span> <span class="kwd">in</span> <span class="id">IH</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ? (?&amp;<span class="id">Hin</span>&amp;<span class="id">He</span>). <span class="id">specialize</span> (<span class="id">He</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#length_in_right_combine">length_in_right_combine</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess</span>)) <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_seq">length_seq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="id">eauto</span>; <span class="id">simpl</span> <span class="kwd">in</span> *. <span class="id">now</span> <span class="id">rewrite</span> &lt;-<span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">es</span>) <span class="kwd">as</span> <span class="id">Hlen</span> <span class="kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">IH</span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="kwd">exists</span> <span class="id">vs</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">es</span> <span class="id">v</span> =&gt; <span class="id">es</span> # <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.present">present</a></span> <span class="id">v</span>) <span class="id">ess</span> <span class="id">vs</span>) <span class="kwd">as</span> (<span class="id">vs</span> &amp; <span class="id">Hpres</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">clear</span> - <span class="id">Habs</span>. <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span> <span class="kwd">with</span> (<span class="id">Q</span>:=<span class="kwd">fun</span> '(_, <span class="id">es</span>) =&gt; <span class="id">es</span> # <span class="id">n</span> &lt;&gt; <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.absent">absent</a></span>), <span class="id">Forall2_combine''</span> <span class="kwd">in</span> <span class="id">Habs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_seq">length_seq</a></span>. 2:(<span class="id">intros</span> (?&amp;?) ?; <span class="id">simpl</span>; <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Habs</span> <span class="kwd">as</span> [|???? <span class="id">He</span>]; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.not_absent_present">not_absent_present</a></span> <span class="kwd">in</span> <span class="id">He</span> <span class="kwd">as</span> (<span class="id">v</span> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHHabs</span> <span class="kwd">as</span> (<span class="id">vs</span> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">v</span> :: <span class="id">vs</span>); <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id">clear</span> <span class="id">Habs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists_exists">Exists_exists</a></span> <span class="kwd">in</span> <span class="id">Heq</span> <span class="kwd">as</span> ((<span class="id">k</span>&amp;?)&amp;<span class="id">Hin</span>&amp;?&amp;?); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_combine_seq">In_combine_seq</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> <span class="id">Hnth1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IH'</span>:=<span class="id">IH</span>). <span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#nth_error_Forall2">nth_error_Forall2</a></span> <span class="kwd">in</span> <span class="id">IH'</span> <span class="kwd">as</span> (?&amp;<span class="id">Hnth2</span>&amp;<span class="id">He1</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">He1</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hnth2'</span>:=<span class="id">Hnth2</span>). <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_split">nth_error_split</a></span> <span class="kwd">in</span> <span class="id">Hnth2'</span> <span class="kwd">as</span> (<span class="id">es1</span>&amp;<span class="id">es2</span>&amp;?&amp;<span class="id">Hles1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.Scase_pres">CESem.Scase_pres</a></span> <span class="kwd">with</span> (<span class="id">vs</span>:=<span class="id">vs</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Hpres</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="id">eauto</span>]; <span class="id">intros</span> ?? _ _ (?&amp;?&amp;<span class="id">He2</span>&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">He2</span> <span class="id">n</span>); <span class="id">simpl</span> <span class="kwd">in</span> *. <span class="id">now</span> <span class="id">rewrite</span> &lt;-<span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#nth_error_Forall2">nth_error_Forall2</a></span> <span class="kwd">in</span> <span class="id">Hpres</span> <span class="kwd">as</span> (?&amp;<span class="id">Hnth3</span>&amp;?); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_exp_impl">sem_exp_impl</a></span> <span class="kwd">in</span> <span class="id">He</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="kwd">in</span> *; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_cexp_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<h2> Semantics of cexps </h2>
<br/>
<div class="doc">State the correspondence for <span class="bracket"><span class="id">cexp</span></span>.
        Goes by induction on the coinductive semantics of <span class="bracket"><span class="id">cexp</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_rhs_impl">sem_rhs_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_rhs">CoInd.sem_rhs</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_rhs">CESem.sem_rhs</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sem</span> <span class="id">n</span>; <span class="id">inv</span> <span class="id">Sem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;extcall&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.liftn_spec">liftn_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [(?&amp;<span class="id">Hes</span>)|(?&amp;?&amp;?&amp;?&amp;<span class="id">Hes</span>)]; <span class="id">rewrite</span> <span class="id">Hes</span>; <span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">simpl_Forall</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_exp">CoInd.sem_exp</a></span> _ _ _ _) <span class="id">and</span> <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_exp_impl">sem_exp_impl</a></span> <span class="kwd">in</span> <span class="id">it</span>. <span class="id">specialize</span> (<span class="id">it</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span> <span class="kwd">in</span> <span class="id">it</span>. <span class="id">now</span> <span class="id">setoid_rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">H0</span>; [|<span class="id">eauto</span>]. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_exp">CoInd.sem_exp</a></span> _ _ _ _) <span class="id">and</span> <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_exp_impl">sem_exp_impl</a></span> <span class="kwd">in</span> <span class="id">it</span>. <span class="id">specialize</span> (<span class="id">it</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span> <span class="kwd">in</span> <span class="id">it</span>. <span class="id">now</span> <span class="id">setoid_rewrite</span> <span class="id">H8</span> <span class="kwd">in</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;cexp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_cexp_impl">sem_cexp_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_arhs_index">sem_arhs_index</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">le</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_arhs">CoInd.sem_arhs</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">le</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_clock_instant">sem_clock_instant</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.var_env">CESem.var_env</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span> <span class="id">n</span>)) <span class="id">ck</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_rhs_instant">CESem.sem_rhs_instant</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span> <span class="id">n</span>) <span class="id">le</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.absent">absent</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.absent">absent</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_clock_instant">sem_clock_instant</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.var_env">CESem.var_env</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span> <span class="id">n</span>)) <span class="id">ck</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_rhs_instant">CESem.sem_rhs_instant</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span> <span class="id">n</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span> <span class="id">n</span>) <span class="id">le</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.present">present</a></span> <span class="id">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">es</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.present">present</a></span> <span class="id">e</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span> * <span class="id">Indexed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inversion_clear</span> <span class="id">Indexed</span> <span class="kwd">as</span> [? ? ? ? ? ? ? <span class="id">Indexed'</span> <span class="id">Hck</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|? ? ? ? ? ? <span class="id">Indexed'</span> <span class="id">Hck</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_rhs_impl">sem_rhs_impl</a></span> <span class="kwd">in</span> <span class="id">Indexed'</span>; <span class="id">specialize</span> (<span class="id">Indexed'</span> 0);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span>; <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span> <span class="kwd">in</span> <span class="id">Indexed'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_clock_impl">sem_clock_impl</a></span>) <span class="kwd">in</span> <span class="id">Hck</span>; <span class="id">specialize</span> (<span class="id">Hck</span> 0); <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span> <span class="kwd">in</span> <span class="id">Hck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>. <span class="id">eexists</span>; <span class="id">eauto</span> <span class="kwd">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>; <span class="id">auto</span> <span class="kwd">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inversion_clear</span> <span class="id">Indexed</span> <span class="kwd">as</span> [? ? ? ? ? ? ? <span class="id">Indexed'</span>|? ? ? ? ? ? <span class="id">Indexed'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_rhs_impl">sem_rhs_impl</a></span> <span class="kwd">in</span> <span class="id">Indexed'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">take</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_annot">CoInd.sem_annot</a></span> _ _ _ _ _ _) <span class="id">and</span> <span class="id">eapply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> [|]; <span class="id">destruct_conjs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">left</span>|<span class="id">right</span>; <span class="id">do</span> 2 <span class="id">esplit</span>]; <span class="id">try</span> <span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_tl">tr_Stream_tl</a></span>; <span class="id">try</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history_tl">tr_history_tl</a></span>; <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_arhs_impl">sem_arhs_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> <span class="id">es</span> <span class="id">ck</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_arhs">CoInd.sem_arhs</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">ck</span> <span class="id">e</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_arhs">CESem.sem_arhs</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">ck</span> <span class="id">e</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">es</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Indexed</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_arhs_index">sem_arhs_index</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">Indexed</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Indexed</span> <span class="kwd">as</span> [(? &amp; ? &amp; <span class="id">Hes</span>)|(? &amp; ? &amp; ? &amp; <span class="id">Hes</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hes</span>; <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_arhs_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<h1> RESET CORRESPONDENCE  </h1>
<br/>
<div class="doc">We state the correspondence for <span class="bracket"><span class="id">bools_of</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.bools_of_impl">bools_of_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.bools_of">CStr.bools_of</a></span> <span class="id">xs</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.bools_of">Indexed.bools_of</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">xs</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">rs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ** <span class="id">n</span>; <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">xs</span>; <span class="id">revert</span> <span class="id">rs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span> * <span class="id">Rst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">inv</span> <span class="id">Rst</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold_Stv</span> <span class="id">xs</span>; <span class="id">inv</span> <span class="id">Rst</span>; <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">And for <span class="bracket"><span class="id">bools_ofs</span></span> </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.bools_ofs_impl">bools_ofs_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xss</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.bools_ofs">CStr.bools_ofs</a></span> <span class="id">xss</span> <span class="id">rs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.bools_ofs">Indexed.bools_ofs</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">xss</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">rs</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.bools_ofs">CStr.bools_ofs</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.bools_ofs">Indexed.bools_ofs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * (<span class="id">rss</span>&amp;<span class="id">Bools1</span>&amp;<span class="id">Bools2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">rss</span>). <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="id">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.bools_of_impl">bools_of_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.Str_nth_EqSt">Str_nth_EqSt</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">Bools2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.disj_str_spec">disj_str_spec</a></span> <span class="kwd">in</span> <span class="id">Bools2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span>, <span class="id">Bools2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_map">existsb_map</a></span>. <span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#existsb_ext">existsb_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?. <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_nth">tr_Stream_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">bools_ofs_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<h2> Properties about <span class="bracket"><span class="id">count</span></span> and <span class="bracket"><span class="id">mask</span></span> </h2>
<br/>
<div class="doc">When a reset occurs initially, the count at <span class="bracket"><span class="id">n</span></span> is the count at <span class="bracket"><span class="id">n</span></span>
        forgetting the first instant, plus one if no reset occurs at <span class="bracket"><span class="id">n</span></span> when
        shifting. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.count_true_shift">count_true_shift</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count">IStr.count</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id">⋅</span> <span class="id">r</span>)) <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="kwd">if</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count">IStr.count</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span>) <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count">IStr.count</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span>) <span class="id">n</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> 0); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHn</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> <span class="id">n</span>) <span class="id">eqn</span>: <span class="id">E'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)); <span class="id">rewrite</span> <span class="id">IHn</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">When no reset occurs initially, the count at <span class="bracket"><span class="id">n</span></span> is the count at <span class="bracket"><span class="id">n</span></span>
        forgetting the first instant, minus one if a reset occurs at <span class="bracket"><span class="id">n</span></span> when
        shifting. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.count_false_shift">count_false_shift</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count">IStr.count</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">⋅</span> <span class="id">r</span>)) <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="kwd">if</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count">IStr.count</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span>) <span class="id">n</span> - 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count">IStr.count</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span>) <span class="id">n</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> 0); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHn</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> <span class="id">n</span>) <span class="id">eqn</span>: <span class="id">E'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)); <span class="id">rewrite</span> <span class="id">IHn</span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_succ_l">Nat.sub_succ_l</a></span>; <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count_true_ge_1">count_true_ge_1</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> &lt;-<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_succ_l">Nat.sub_succ_l</a></span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count_true_ge_1">count_true_ge_1</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">State the correspondence for <span class="bracket"><span class="id">count</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.count_impl">count_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.count">CStr.count</a></span> <span class="id">r</span>) <span class="id">≈</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count">IStr.count</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ** <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.count">CStr.count</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">r</span>; <span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.count_acc">count_acc</a></span> 0 <span class="id">r</span>)); <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.count_acc">count_acc</a></span> 0 <span class="id">r</span>)); <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>. <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">r</span>) <span class="id">eqn</span>: <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="kwd">at</span> 1; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="kwd">in</span> <span class="id">IHn</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Str_nth</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.count_S_nth">count_S_nth</a></span>, <span class="id">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">r</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">rewrite</span> <span class="id">R</span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.count_true_shift">count_true_shift</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">r</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">rewrite</span> <span class="id">R</span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.count_false_shift">count_false_shift</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span> <span class="id">n</span>) <span class="id">eqn</span>: <span class="id">R'</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count_true_ge_1">count_true_ge_1</a></span> <span class="kwd">in</span> <span class="id">R'</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<div class="doc">State the correspondence for <span class="bracket"><span class="id">mask</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.mask_impl">mask_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">r</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams">tr_Streams</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.maskv">CStr.maskv</a></span> <span class="id">k</span> <span class="id">r</span>) <span class="id">xss</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">≈</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.mask">IStr.mask</a></span> <span class="id">k</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams">tr_Streams</a></span> <span class="id">xss</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xss</span> <span class="kwd">as</span> [|<span class="id">xs</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">intros</span> * <span class="id">n</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.mask">IStr.mask</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> (<span class="id">k</span> =? <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.count">IStr.count</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">r</span>) <span class="id">n</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="kwd">at</span> 1; <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.maskv_nth">maskv_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHxss</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.count_impl">count_impl</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_sym">Nat.eqb_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
<h1> FINAL LEMMAS </h1>
<br/>
<br/>
<div class="doc">Correspondence for <span class="bracket"><span class="id">clocks_of</span></span>, used to give a base clock for node
        applications. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.tr_clocks_of">tr_clocks_of</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.clock_of">CESem.clock_of</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams">tr_Streams</a></span> <span class="id">xss</span>) <span class="id">≈</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.clocks_of">CStr.clocks_of</a></span> <span class="id">xss</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.clock_of">CESem.clock_of</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">xss</span> <span class="id">n</span>; <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">xss</span>; <span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="kwd">at</span> 1; <span class="id">simpl</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams_hd">tr_Streams_hd</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xss</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> <span class="kwd">at</span> 1; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_S">tr_Stream_S</a></span>, &lt;-<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams_tl">tr_Streams_tl</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">tr_clocks_of</span> : <span class="id">indexedstreams</span>.<br/>
<br/>
<div class="doc">Give an indexed specification for Streams synchronization. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.aligned_index">aligned_index</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">xs</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.svalue">svalue</a></span>) <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.aligned">aligned</a></span> <span class="id">xs</span> <span class="id">bs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">bs</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &lt;-&gt; <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">xs</span> <span class="id">n</span> &lt;&gt; <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.absent">absent</a></span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Sync</span> <span class="id">n</span>; <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">xs</span>; <span class="id">revert</span> <span class="id">bs</span>; <span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inversion_clear</span> <span class="id">Sync</span>; <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_0">tr_Stream_0</a></span>; <span class="id">auto</span> <span class="kwd">with</span> *; <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> &lt;-2 <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream_tl">tr_Stream_tl</a></span>; <span class="id">apply</span> <span class="id">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Sync</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_clocked_var_impl">sem_clocked_var_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">ck</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.sem_var">sem_var</a></span> <span class="id">H</span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_clocked_var">CoInd.sem_clocked_var</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">x</span> <span class="id">ck</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_clocked_var">CESem.sem_clocked_var</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">x</span> <span class="id">ck</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Var</span> (<span class="id">Sem</span> &amp; <span class="id">Sem'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Var</span> <span class="kwd">as</span> <span class="id">Var'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Sem</span> <span class="kwd">in</span> <span class="id">Var</span> <span class="kwd">as</span> (<span class="id">bs</span> &amp; <span class="id">Clock</span> &amp; <span class="id">Sync</span>); <span class="id">rename</span> <span class="id">Var'</span> <span class="id">into</span> <span class="id">Var</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span> <span class="kwd">in</span> <span class="id">Var</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_clock_impl">sem_clock_impl</a></span> <span class="kwd">in</span> <span class="id">Clock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.aligned_index">aligned_index</a></span> _ _ <span class="id">Sync</span>) <span class="kwd">as</span> <span class="id">Spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Var</span> <span class="id">n</span>); <span class="id">specialize</span> (<span class="id">Clock</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> * <span class="id">Clock'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_clock_instant_det">IStr.sem_clock_instant_det</a></span> <span class="kwd">in</span> <span class="id">Clock</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry</span> <span class="kwd">in</span> <span class="id">Clock</span>; <span class="id">apply</span> <span class="id">Spec</span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.not_absent_present">not_absent_present</a></span> <span class="kwd">in</span> <span class="id">Clock</span> <span class="kwd">as</span> (?&amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> <span class="id">Var</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> (?&amp; <span class="id">Var'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_var_instant_det">IStr.sem_var_instant_det</a></span> <span class="kwd">in</span> <span class="id">Var</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">bs</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="kwd">as</span> &lt;-; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Spec</span>; <span class="id">intro</span>; <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> * <span class="id">Clock'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_clock_instant_det">IStr.sem_clock_instant_det</a></span> <span class="kwd">in</span> <span class="id">Clock</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry</span> <span class="kwd">in</span> <span class="id">Clock</span>; <span class="id">rewrite</span> &lt;-<span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#not_true_iff_false">Bool.not_true_iff_false</a></span>, <span class="id">Spec</span> <span class="kwd">in</span> <span class="id">Clock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.absent">absent</a></span>) <span class="kwd">as</span> &lt;-; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#not_not">Decidable.not_not</a></span> <span class="kwd">in</span> <span class="id">Clock</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux.decidable_eq_svalue">decidable_eq_svalue</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">Var'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr.sem_var_instant_det">IStr.sem_var_instant_det</a></span> <span class="kwd">in</span> <span class="id">Var</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">bs</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="kwd">as</span> &lt;-; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#not_true_iff_false">Bool.not_true_iff_false</a></span>, <span class="id">Spec</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_clocked_var_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NLCOINDTOINDEXED.sem_clocked_vars_impl">sem_clocked_vars_impl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">H</span> <span class="id">b</span> <span class="id">xcs</span> <span class="id">xss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(_, (_, <span class="id">islast</span>)) =&gt; <span class="id">islast</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">xcs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> '(<span class="id">x</span>, _) =&gt; <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr.sem_var">sem_var</a></span> <span class="id">H</span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>)) <span class="id">xcs</span> <span class="id">xss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_clocked_vars">CoInd.sem_clocked_vars</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">xcs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_clocked_vars">CESem.sem_clocked_vars</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">xcs</span>.<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">NoLast</span> <span class="id">Vars</span> <span class="id">Sem</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_clocked_vars">CESem.sem_clocked_vars</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem.sem_clocked_vars_instant">CESem.sem_clocked_vars_instant</a></span>, <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_clocked_vars">CoInd.sem_clocked_vars</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span> <span class="kwd">in</span> <span class="id">Vars</span>. <span class="id">simpl_Forall</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_clocked_var_impl">sem_clocked_var_impl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sem_clocked_vars_impl</span> : <span class="id">nlsem</span>.<br/>
<br/>
<div class="doc">The final theorem stating the correspondence for nodes applications.
        We have to use a custom mutually recursive induction scheme <span class="bracket"><span class="id">sem_node_mult</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="NLCOINDTOINDEXED.implies">implies</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">xss</span> <span class="id">yss</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_node">CoInd.sem_node</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.Global.G">G</a></span> <span class="id">f</span> <span class="id">xss</span> <span class="id">yss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.sem_node">Indexed.sem_node</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.Global.G">G</a></span> <span class="id">f</span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams">tr_Streams</a></span> <span class="id">xss</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Streams">tr_Streams</a></span> <span class="id">yss</span>).<br/>
<details>
&nbsp;&nbsp;&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> 1 <span class="kwd">as</span> [|????????????? <span class="id">Vars</span> <span class="id">Bools</span> <span class="id">IH</span>| | |?????????? <span class="id">Same</span> <span class="id">Heqs</span> <span class="id">IH</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_node_mult">CoInd.sem_node_mult</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_equation</span> := <span class="kwd">fun</span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd.sem_equation">CoInd.sem_equation</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.Global.G">G</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed.sem_equation">Indexed.sem_equation</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.Global.G">G</a></span> (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_Stream">tr_Stream</a></span> <span class="id">b</span>) (<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.tr_history">tr_history</a></span> <span class="id">H</span>) <span class="id">e</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span> <span class="id">indexedstreams</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;App&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">indexedstreams</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intro</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.tr_clocks_of">tr_clocks_of</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_clock_impl">sem_clock_impl</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intro</span> <span class="id">k</span>; <span class="id">destruct</span> (<span class="id">IH</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> &lt;- 2 <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.mask_impl">mask_impl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">auto</span>; <span class="id">subst</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.reset_fby_impl">reset_fby_impl</a></span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">indexedstreams</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Last&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">nlsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>. <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.reset_fby_impl">reset_fby_impl</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr.sem_var_impl">sem_var_impl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_vars_impl">sem_vars_impl</a></span>; <span class="id">simpl_Forall</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intro</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.tr_clocks_of">tr_clocks_of</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.sem_clocked_vars_impl">sem_clocked_vars_impl</a></span> <span class="kwd">with</span> (<span class="id">xss</span>:=<span class="id">xss</span>) <span class="kwd">in</span> <span class="id">Same</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">simpl_Forall</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.tr_clocks_of">tr_clocks_of</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED.Global">Global</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED">NLCOINDTOINDEXED</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="NLCoindToIndexedFun">NLCoindToIndexedFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span>     : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span>      : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span>   : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span>      <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cks</span>     : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>             <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CESyn</span>   : <span class="id"><a href="Velus.CoreExpr.CESyntax.html#CESYNTAX">CESYNTAX</a></span>           <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span>     : <span class="id"><a href="Velus.NLustre.NLSyntax.html#NLSYNTAX">NLSYNTAX</a></span>           <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">IStr</span>    : <span class="id"><a href="Velus.IndexedStreams.html#INDEXEDSTREAMS">INDEXEDSTREAMS</a></span>     <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CStr</span>    : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span>       <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CIStr</span>   : <span class="id"><a href="Velus.CoindToIndexed.html#COINDTOINDEXED">COINDTOINDEXED</a></span>     <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span>           <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr">IStr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ord</span>     : <span class="id"><a href="Velus.NLustre.NLOrdered.html#NLORDERED">NLORDERED</a></span>          <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CESem</span>   : <span class="id"><a href="Velus.CoreExpr.CESemantics.html#CESEMANTICS">CESEMANTICS</a></span>        <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span>     <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr">IStr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Indexed</span> : <span class="id"><a href="Velus.NLustre.NLIndexedSemantics.html#NLINDEXEDSEMANTICS">NLINDEXEDSEMANTICS</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ord">Ord</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem">CESem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CoInd</span>   : <span class="id"><a href="Velus.NLustre.NLCoindSemantics.html#NLCOINDSEMANTICS">NLCOINDSEMANTICS</a></span>   <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ord">Ord</a></span>)<br/>
&lt;: <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED">NLCOINDTOINDEXED</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr">CIStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ord">Ord</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem">CESem</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed">Indexed</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd">CoInd</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCOINDTOINDEXED">NLCOINDTOINDEXED</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ids">Ids</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Op">Op</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Cks">Cks</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESyn">CESyn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Syn">Syn</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#IStr">IStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CStr">CStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CIStr">CIStr</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Ord">Ord</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CESem">CESem</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#Indexed">Indexed</a></span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#CoInd">CoInd</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.NLustre.NLCoindToIndexed.html#NLCoindToIndexedFun">NLCoindToIndexedFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
