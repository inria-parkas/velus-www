
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Infty</title>
<meta name="description" content="Documentation of Coq module Infty" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h1 class="title">Module Infty</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.html">Lustre.Denot.Cpo</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html">SDfuns</a></span> <span class="id"><a href="Velus.Lustre.Denot.CommonDS.html">CommonDS</a></span>.<br/>
<br/>
<h1> Infinity of streams defined in SDfuns  </h1>
<br/>
<span class="kwd">Ltac</span> <span class="id">solve_err</span> :=<br/>
&nbsp;&nbsp;<span class="id">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> _ ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_eq">DS_const_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_cons">rem_cons</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> (<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_DS_const">is_ncons_DS_const</a></span> || <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_consn_DS_const">is_consn_DS_const</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id">now</span> <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_cons_DS_const">is_cons_DS_const</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_consn_DS_const">is_consn_DS_const</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_DS_const">is_ncons_DS_const</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<h2> Productivity of Lustre operators </h2>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Ncons_ops">Ncons_ops</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id"><a name="Ncons_ops.A">A</a></span> <span class="id"><a name="Ncons_ops.B">B</a></span> <span class="id"><a name="Ncons_ops.D">D</a></span> : <span class="kwd">Type</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_sconst">is_ncons_sconst</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span> : <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>) <span class="id">bs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">bs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sconst">sconst</a></span> <span class="id">c</span> <span class="id">bs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sconst_inf">sconst_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span> : <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>) <span class="id">bs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">bs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sconst">sconst</a></span> <span class="id">c</span> <span class="id">bs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf_iff">nrem_inf_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sconst">is_ncons_sconst</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_sunop">is_ncons_sunop</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span>) <span class="id">s</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sunop">sunop</a></span> <span class="id">f</span> <span class="id">s</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sunop_inf">sunop_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">op</span> : <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span>) <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sunop">sunop</a></span> <span class="id">op</span> <span class="id">s</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf_iff">nrem_inf_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sunop">is_ncons_sunop</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_sbinop">is_ncons_sbinop</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.D">D</a></span>) <span class="id">s1</span> <span class="id">s2</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">s1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span> <span class="id">f</span> <span class="id">s1</span> <span class="id">s2</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_zip">is_ncons_zip</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sbinop_inf">sbinop_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.D">D</a></span>) <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">s1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span> <span class="id">f</span> <span class="id">s1</span> <span class="id">s2</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf_iff">nrem_inf_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sbinop">is_ncons_sbinop</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inf_sbinop">inf_sbinop</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.D">D</a></span>) <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span> <span class="id">f</span> <span class="id">s1</span> <span class="id">s2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">s1</span> /\ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">s2</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">intros</span> * <span class="id">H</span>%<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#inf_zip">inf_zip</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_cons_fby">is_cons_fby</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> <span class="id">xs</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> (?&amp;?&amp;-&gt;).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_eq">fby_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_S_fby1">is_ncons_S_fby1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">v</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1">fby1</a></span> <span class="id">v</span> <span class="id">xs</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span> * <span class="id">Hx</span> <span class="id">Hy</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> (?&amp;?&amp;-&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_eq">fby1_eq</a></span>; <span class="id">simpl</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_elim2">is_ncons_elim2</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> (<span class="id">x1</span> &amp; <span class="id">x2</span> &amp; <span class="id">xs'</span> &amp; <span class="id">Hx</span> &amp; <span class="id">Hcx'</span> &amp; <span class="id">Hccx'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_elim">is_ncons_elim</a></span> <span class="kwd">in</span> <span class="id">Hy</span> <span class="kwd">as</span> (<span class="id">y1</span> &amp; <span class="id">ys'</span> &amp; <span class="id">Hy</span> &amp; <span class="id">Hcy'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id">Hy</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1_eq">fby1_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_SS">is_ncons_SS</a></span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_cons">rem_cons</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_cons">is_ncons_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_S">is_ncons_S</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span>; <span class="id">cases</span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_cons">is_ncons_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_S">is_ncons_S</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_S_fby">is_ncons_S_fby</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">fby</a></span> <span class="id">xs</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span> * <span class="id">Hx</span> <span class="id">Hy</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> (?&amp;?&amp;-&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_eq">fby_eq</a></span>; <span class="id">simpl</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_elim2">is_ncons_elim2</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> (<span class="id">x1</span> &amp; <span class="id">x2</span> &amp; <span class="id">xs'</span> &amp; <span class="id">Hx</span> &amp; <span class="id">Hcx'</span> &amp; <span class="id">Hccx'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_elim">is_ncons_elim</a></span> <span class="kwd">in</span> <span class="id">Hy</span> <span class="kwd">as</span> (<span class="id">y1</span> &amp; <span class="id">ys'</span> &amp; <span class="id">Hy</span> &amp; <span class="id">Hcy'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx</span>, <span class="id">Hy</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby_eq">fby_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_SS">is_ncons_SS</a></span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_cons">rem_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fbyA_eq">fbyA_eq</a></span>; <span class="id">cases</span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_cons">is_ncons_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_S">is_ncons_S</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby1AP_eq">fby1AP_eq</a></span>; <span class="id">cases</span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_S_fby1">is_ncons_S_fby1</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_cons">is_ncons_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_S">is_ncons_S</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_cons">is_ncons_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_S">is_ncons_S</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_fby">is_ncons_fby</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">SDfuns.fby</a></span> <span class="id">xs</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">n</span> <span class="kwd">as</span> [|[]]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_cons_fby">is_cons_fby</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_S_fby">is_ncons_S_fby</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_S">is_ncons_S</a></span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fby_inf">fby_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">xs</span> <span class="id">ys</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">SDfuns.fby</a></span> <span class="id">xs</span> <span class="id">ys</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf_iff">nrem_inf_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_fby">is_ncons_fby</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_cons_swhen">is_cons_swhen</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">xs</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#swhen">swhen</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">k</span> <span class="id">xs</span> <span class="id">cs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hx</span> <span class="id">Hc</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> (?&amp;?&amp;-&gt;).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Hc</span> <span class="kwd">as</span> (?&amp;?&amp;-&gt;).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#swhen_eq">swhen_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_swhen">is_ncons_swhen</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">n</span> <span class="id">xs</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#swhen">swhen</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">k</span> <span class="id">xs</span> <span class="id">cs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span> <span class="kwd">as</span> [|[]]; <span class="id">simpl</span>; <span class="id">intros</span> * <span class="id">Hx</span> <span class="id">Hc</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_cons_swhen">is_cons_swhen</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_is_cons">is_ncons_is_cons</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> <span class="id">Hx'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_is_cons">is_ncons_is_cons</a></span> <span class="kwd">in</span> <span class="id">Hc</span> <span class="kwd">as</span> <span class="id">Hc'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_cons_rem">is_cons_rem</a></span> <span class="kwd">in</span> <span class="id">Hx'</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp; <span class="id">Hx'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_cons_rem">is_cons_rem</a></span> <span class="kwd">in</span> <span class="id">Hc'</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp; <span class="id">Hc'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hx'</span>, <span class="id">Hc'</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#swhen_eq">swhen_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_cons">rem_cons</a></span> <span class="kwd">in</span> *; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;reste&nbsp;les&nbsp;cas&nbsp;d'erreur&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span> _ _ _ _ (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)); <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_zip">is_ncons_zip</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="swhen_inf">swhen_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">xs</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#swhen">swhen</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">k</span> <span class="id">xs</span> <span class="id">cs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf_iff">nrem_inf_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_swhen">is_ncons_swhen</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_zip3">is_ncons_zip3</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> (<span class="id">op</span> : <span class="id">A</span> -&gt; <span class="id">B</span> -&gt; <span class="id">C</span> -&gt; <span class="id">D</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">xs</span> /\ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">ys</span> /\ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">zs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#ZIP3">ZIP3</a></span> <span class="id">op</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">zs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * (<span class="id">Cx</span> &amp; <span class="id">Cy</span> &amp; <span class="id">Cz</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#zip3_eq">zip3_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_zip">is_ncons_zip</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_smerge">is_ncons_smerge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> <span class="id">xs</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> _ <span class="id">n</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#smerge">smerge</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">xs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hc</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#smerge_eq">smerge_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_Foldi">forall_nprod_Foldi</a></span> <span class="kwd">in</span> <span class="id">Hx</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_zip3">is_ncons_zip3</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="smerge_inf">smerge_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">xs</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> _) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#smerge">smerge</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">xs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf_iff">nrem_inf_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Inf</span> <span class="id">Hf</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_smerge">is_ncons_smerge</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#inf_nrem">inf_nrem</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_impl">forall_nprod_impl</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_scase">is_ncons_scase</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> <span class="id">xs</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> _ <span class="id">n</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase">scase</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">xs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hc</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_eq">scase_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_Foldi">forall_nprod_Foldi</a></span> <span class="kwd">in</span> <span class="id">Hx</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_zip3">is_ncons_zip3</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="scase_inf">scase_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">xs</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> _) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase">scase</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">xs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf_iff">nrem_inf_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Inf</span> <span class="id">Hf</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_scase">is_ncons_scase</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#inf_nrem">inf_nrem</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_impl">forall_nprod_impl</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_scase_def_">is_ncons_scase_def_</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> <span class="id">cs</span> <span class="id">ds</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">ds</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> _ <span class="id">n</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_def_">scase_def_</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">ds</span> <span class="id">xs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hc</span> <span class="id">Hd</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_def__eq">scase_def__eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_Foldi">forall_nprod_Foldi</a></span> <span class="kwd">with</span> (<span class="id">Q</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_zip3">is_ncons_zip3</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_zip">is_ncons_zip</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_scase_def">is_ncons_scase_def</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> <span class="id">cs</span> <span class="id">dxs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> _ <span class="id">n</span>) <span class="id">dxs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_def">scase_def</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">dxs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hc</span> [<span class="id">Hh</span> <span class="id">Ht</span>] % <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_inv">forall_nprod_inv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_hd_tl">nprod_hd_tl</a></span> <span class="id">dxs</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_def_eq">scase_def_eq</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_scase_def_">is_ncons_scase_def_</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="scase_def__inf">scase_def__inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">ds</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">ds</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> _) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_def_">scase_def_</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">ds</span> <span class="id">xs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf_iff">nrem_inf_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Infc</span> <span class="id">Infd</span> <span class="id">Infx</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_scase_def_">is_ncons_scase_def_</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#inf_nrem">inf_nrem</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_impl">forall_nprod_impl</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="scase_def_inf">scase_def_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">dxs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">cs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> _) <span class="id">dxs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_def">scase_def</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.B">B</a></span> <span class="id">T</span> <span class="id">OT</span> <span class="id">TB</span> <span class="id">l</span> <span class="id">cs</span> <span class="id">dxs</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf_iff">nrem_inf_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Infc</span> <span class="id">Infd</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_scase_def">is_ncons_scase_def</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#inf_nrem">inf_nrem</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_impl">forall_nprod_impl</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_cons_sreset">is_cons_sreset</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>) -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)) <span class="id">R</span> <span class="id">X</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">envI</span>, (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (<span class="id">envI</span> <span class="id">x</span>)) -&gt; (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (<span class="id">f</span> <span class="id">envI</span> <span class="id">x</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (<span class="id">X</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset">sreset</a></span> <span class="id">I</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id">f</span> <span class="id">R</span> <span class="id">X</span> <span class="id">x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Cf</span> <span class="id">Cr</span> <span class="id">Cx</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Cr</span> <span class="kwd">as</span> (<span class="id">vr</span> &amp; <span class="id">R'</span> &amp; <span class="id">Hr</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_eq">sreset_eq</a></span>, <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">try</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_cons_DS_const">is_cons_DS_const</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#APP_env_eq">APP_env_eq</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_app">is_cons_app</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_cons_sreset_aux">is_cons_sreset_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>) -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)) <span class="id">R</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">envI</span>, (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (<span class="id">envI</span> <span class="id">x</span>)) -&gt; (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (<span class="id">f</span> <span class="id">envI</span> <span class="id">x</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (<span class="id">X</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (<span class="id">Y</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> <span class="id">I</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id">f</span> <span class="id">R</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Cf</span> <span class="id">Cr</span> <span class="id">Cx</span> <span class="id">Cy</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Cr</span> <span class="kwd">as</span> (<span class="id">vr</span> &amp; <span class="id">R'</span> &amp; <span class="id">Hr</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">try</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_cons_DS_const">is_cons_DS_const</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#APP_env_eq">APP_env_eq</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_app">is_cons_app</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_ncons_sreset">is_ncons_sreset</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>) -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)) <span class="id">R</span> <span class="id">X</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span> <span class="id">envI</span>, (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id">envI</span> <span class="id">x</span>)) -&gt; (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id">f</span> <span class="id">envI</span> <span class="id">x</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id">X</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset">sreset</a></span> <span class="id">I</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id">f</span> <span class="id">R</span> <span class="id">X</span> <span class="id">x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Cf</span> <span class="id">n</span> <span class="id">Cr</span> <span class="id">Cx</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_eq">sreset_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hy</span> : <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id">f</span> <span class="id">X</span> <span class="id">x</span>)) <span class="kwd">by</span> (<span class="id">subst</span>; <span class="id">intros</span>; <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">remember</span> (_ <span class="id">f</span> <span class="id">X</span>) <span class="kwd">as</span> <span class="id">Y</span> <span class="id">eqn</span>:<span class="id">HH</span>; <span class="id">clear</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_cons_sreset_aux">is_cons_sreset_aux</a></span>; <span class="id">auto</span>; <span class="id">now</span> <span class="id">apply</span> (<span class="id">Cf</span> 1). }<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_is_cons">is_ncons_is_cons</a></span> <span class="kwd">in</span> <span class="id">Cr</span> <span class="kwd">as</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Hr</span> <span class="kwd">as</span> (<span class="id">vr</span> &amp; <span class="id">R'</span> &amp; <span class="id">Hr</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Cr</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_cons">rem_cons</a></span> <span class="kwd">in</span> <span class="id">Cr</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#APP_env_eq">APP_env_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_SS">is_ncons_SS</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_app">rem_app</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_is_cons">is_ncons_is_cons</a></span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id">IHn</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#REM_env_eq">REM_env_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">Cf</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>))); <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sreset_inf">sreset_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>) -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)) <span class="id">R</span> <span class="id">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">envI</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#all_infinite">all_infinite</a></span> <span class="id">envI</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#all_infinite">all_infinite</a></span> (<span class="id">f</span> <span class="id">envI</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#all_infinite">all_infinite</a></span> <span class="id">X</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#all_infinite">all_infinite</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset">sreset</a></span> <span class="id">I</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span> <span class="id">f</span> <span class="id">R</span> <span class="id">X</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">If</span> <span class="id">Ir</span> <span class="id">Ix</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_eq">sreset_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#all_infinite">all_infinite</a></span> (<span class="id">f</span> <span class="id">X</span>)) <span class="kwd">as</span> <span class="id">Iy</span> <span class="kwd">by</span> (<span class="id">subst</span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">remember</span> (_ <span class="id">f</span> <span class="id">X</span>) <span class="kwd">as</span> <span class="id">Y</span> <span class="id">eqn</span>:<span class="id">HH</span>; <span class="id">clear</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> _ _ _ _ _) <span class="kwd">as</span> <span class="id">tx</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">tx</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">Ir</span> <span class="kwd">as</span> [<span class="id">Hc</span> <span class="id">IIr</span>].<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Hc</span> <span class="kwd">as</span> (<span class="id">vr</span> &amp; <span class="id">R'</span> &amp; <span class="id">Hr</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_cons">rem_cons</a></span> <span class="kwd">in</span> <span class="id">IIr</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#REM_env_inf">REM_env_inf</a></span> <span class="kwd">in</span> <span class="id">Iy</span> <span class="kwd">as</span> <span class="id">Iry</span>, <span class="id">Ix</span> <span class="kwd">as</span> <span class="id">Irx</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> <span class="kwd">in</span> <span class="id">Htx</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">Iy</span> <span class="id">x</span>), (<span class="id">If</span> <span class="id">X</span> <span class="id">Ix</span> <span class="id">x</span>). <span class="comment">(*&nbsp;utile&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">Htx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#APP_env_eq">APP_env_eq</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_app">is_cons_app</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_eq_compat">rem_eq_compat</a></span> <span class="kwd">in</span> <span class="id">Htx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">Iy</span> <span class="id">x</span>), (<span class="id">If</span> <span class="id">X</span> <span class="id">Ix</span> <span class="id">x</span>). <span class="comment">(*&nbsp;pour&nbsp;plus&nbsp;tard&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> <span class="kwd">in</span> <span class="id">Htx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#APP_env_eq">APP_env_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_app">rem_app</a></span> <span class="kwd">in</span> <span class="id">Htx</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">eapply</span> <span class="id">Cof</span> <span class="kwd">in</span> <span class="id">Htx</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#REM_env_inf">REM_env_inf</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sreset_inf_dom">sreset_inf_dom</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>) -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> (<span class="kwd">fun</span> _ : <span class="id">I</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops.A">A</a></span>)) <span class="id">R</span> <span class="id">X</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">outs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">envI</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> <span class="id">envI</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> (<span class="id">f</span> <span class="id">envI</span>) <span class="id">outs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> <span class="id">X</span> <span class="id">ins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset">sreset</a></span> <span class="id">f</span> <span class="id">R</span> <span class="id">X</span>) <span class="id">outs</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">If</span> <span class="id">Ir</span> <span class="id">Ix</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_eq">sreset_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> (<span class="id">f</span> <span class="id">X</span>) <span class="id">outs</span>) <span class="kwd">as</span> <span class="id">Iy</span> <span class="kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (_ <span class="id">f</span> <span class="id">X</span>) <span class="kwd">as</span> <span class="id">Y</span> <span class="id">eqn</span>:<span class="id">HH</span>; <span class="id">clear</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id">remember_ds</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> _ _ _ _ _) <span class="kwd">as</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Ir</span> <span class="id">Ix</span> <span class="id">Iy</span> <span class="id">Ht</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">R</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">x</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">Cof</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_decomp">infinite_decomp</a></span> <span class="kwd">in</span> <span class="id">Ir</span> <span class="kwd">as</span> (<span class="id">r</span> &amp; <span class="id">R'</span> &amp; <span class="id">Hr</span> &amp; <span class="id">Ir'</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> <span class="kwd">in</span> <span class="id">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#REM_env_inf_dom">REM_env_inf_dom</a></span> <span class="kwd">in</span> <span class="id">Ix</span> <span class="kwd">as</span> <span class="id">Irx</span>, <span class="id">Iy</span> <span class="kwd">as</span> <span class="id">Iry</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">Iy</span> <span class="id">x</span>), (<span class="id">If</span> <span class="id">X</span> <span class="id">Ix</span> <span class="id">x</span>); <span class="id">auto</span>. <span class="comment">(*&nbsp;pour&nbsp;plus&nbsp;tard&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">If</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#REM_env_inf_dom">REM_env_inf_dom</a></span> <span class="kwd">in</span> <span class="id">Ix</span> <span class="kwd">as</span> <span class="id">Ifx</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">cases</span>; <span class="id">rewrite</span> <span class="id">Ht</span>, ?<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#APP_env_eq">APP_env_eq</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#app_is_cons">app_is_cons</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_eq_compat">rem_eq_compat</a></span> <span class="kwd">in</span> <span class="id">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">r</span>; [<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> <span class="kwd">in</span> <span class="id">Ht</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#APP_env_eq">APP_env_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_app">rem_app</a></span> <span class="kwd">in</span> <span class="id">Ht</span>; <span class="id">eauto</span> 2.<br/>
Qed.</div></details>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#Ncons_ops">Ncons_ops</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
