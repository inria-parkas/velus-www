
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module LSemDeterminism</title>
<meta name="description" content="Documentation of Coq module LSemDeterminism" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module LSemDeterminism</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CommonList.html">CommonList</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.FunctionalEnvironment.html">FunctionalEnvironment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoindStreams.html">CoindStreams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.StaticEnv.html">Lustre.StaticEnv</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span> <span class="id"><a href="Velus.Lustre.LTyping.html">Lustre.LTyping</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html">Lustre.LCausality</a></span> <span class="id"><a href="Velus.Lustre.LOrdered.html">Lustre.LOrdered</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html">Lustre.LSemantics</a></span>.<br/>
<br/>
<h2> Proof of the determinism of the coinductive semantics
    We can proove that the semantics of a causal program are deterministic:
    That is, a node always return the same output for a given input.
 </h2>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="LSEMDETERMINISM">LSEMDETERMINISM</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Typ</span>   : <span class="id"><a href="Velus.Lustre.LTyping.html#LTYPING">LTYPING</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">LCA</span>   : <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY">LCAUSALITY</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">CStr</span>  : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Sem</span>   : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS">LSEMANTICS</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr">CStr</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<br/>
<div class="doc">Induction hypothesis over the program </div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMDETERMINISM.det_nodes">det_nodes</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) := <span class="kwd">forall</span> <span class="id">f</span> <span class="id">n</span> <span class="id">ins1</span> <span class="id">ins2</span> <span class="id">outs1</span> <span class="id">outs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">ins1</span> <span class="id">ins2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_node">sem_node</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">ins1</span> <span class="id">outs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_node">sem_node</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">ins2</span> <span class="id">outs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">outs1</span> <span class="id">outs2</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_nodes_ins">det_nodes_ins</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">f</span> <span class="id">ins</span> <span class="id">outs1</span> <span class="id">outs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_node">sem_node</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">ins</span> <span class="id">outs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_node">sem_node</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">ins</span> <span class="id">outs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> <span class="id">outs1</span> <span class="id">outs2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdet</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_EqSts">EqStN_EqSts</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hdet</span>. 2,3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_same">Forall2_same</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.EqStN_mask">EqStN_mask</a></span> {<span class="id">A</span>} (<span class="id">absent</span> : <span class="id">A</span>) : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> <span class="id">xs1</span> <span class="id">xs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask">mask</a></span> <span class="id">absent</span> <span class="id">k</span> <span class="id">rs1</span> <span class="id">xs1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask">mask</a></span> <span class="id">absent</span> <span class="id">k</span> <span class="id">rs2</span> <span class="id">xs2</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heqr</span> <span class="id">Heqx</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask_nth">mask_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> ((<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.count">count</a></span> <span class="id">rs1</span>) # <span class="id">k0</span> = (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.count">count</a></span> <span class="id">rs2</span>) # <span class="id">k0</span>) <span class="kwd">as</span> <span class="id">Hcount</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.count_EqStN">count_EqStN</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hcount</span>; <span class="tactic">clear</span> <span class="id">Hcount</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">_</span> =? <span class="id">_</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMDETERMINISM.EqStNs_mask">EqStNs_mask</a></span> {<span class="id">A</span>} (<span class="id">absent</span> : <span class="id">A</span>) : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> <span class="id">xs1</span> <span class="id">xs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask">mask</a></span> <span class="id">absent</span> <span class="id">k</span> <span class="id">rs1</span>) <span class="id">xs1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask">mask</a></span> <span class="id">absent</span> <span class="id">k</span> <span class="id">rs2</span>) <span class="id">xs2</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_mask">EqStN_mask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">EqStN_mask</span> <span class="id">EqStNs_mask</span> : <span class="id">coindstreams</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.EqStN_unmask">EqStN_unmask</a></span> {<span class="id">A</span>} (<span class="id">absent</span> : <span class="id">A</span>) : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> <span class="id">xs1</span> <span class="id">xs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask">mask</a></span> <span class="id">absent</span> <span class="id">k</span> <span class="id">rs1</span> <span class="id">xs1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask">mask</a></span> <span class="id">absent</span> <span class="id">k</span> <span class="id">rs2</span> <span class="id">xs2</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> ((<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.count">count</a></span> <span class="id">rs1</span>) # <span class="id">k</span> = (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.count">count</a></span> <span class="id">rs2</span>) # <span class="id">k</span>) <span class="kwd">as</span> <span class="id">Hcount</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.count_EqStN">count_EqStN</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Heq2</span> ((<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.count">count</a></span> <span class="id">rs1</span>) # <span class="id">k</span>)). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span> <span class="kwd">in</span> <span class="id">Heq2</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask_nth">mask_nth</a></span>, <span class="id">Hcount</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_refl">Nat.eqb_refl</a></span> <span class="kwd">in</span> <span class="id">Heq2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMDETERMINISM.EqStNs_unmask">EqStNs_unmask</a></span> {<span class="id">A</span>} (<span class="id">absent</span> : <span class="id">A</span>) : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> <span class="id">xs1</span> <span class="id">xs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask">mask</a></span> <span class="id">absent</span> <span class="id">k</span> <span class="id">rs1</span>) <span class="id">xs1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.mask">mask</a></span> <span class="id">absent</span> <span class="id">k</span> <span class="id">rs2</span>) <span class="id">xs2</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">xs1</span> <span class="id">xs2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span> <span class="kwd">in</span> <span class="id">Heq2</span>. <span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span> <span class="kwd">in</span> <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span>; <span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">specialize</span> (<span class="id">Heq2</span> 0). <span class="id">now</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_unmask">EqStN_unmask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">Heq2</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">Heq2</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Heq2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">EqStN_unmask</span> <span class="id">EqStNs_unmask</span> : <span class="id">coindstreams</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMDETERMINISM.sem_equation_det">sem_equation_det</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">PSyn</span> : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">prefs</span> : <span class="id"><a href="Velus.Common.Common.html#PS.t">PS.t</a></span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="LSEMDETERMINISM.sem_equation_det.G">G</a></span> : @<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.prefs">prefs</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMDETERMINISM.sem_equation_det.HdetG">HdetG</a></span> : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> Γ : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.static_env">static_env</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> <span class="id">n</span> (<span class="id">H1</span> <span class="id">H2</span> : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.history">history</a></span>) : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">cx</span> =&gt; <span class="kwd">forall</span> <span class="id">x</span> <span class="id">vs1</span> <span class="id">vs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">H1</span>) <span class="id">x</span> <span class="id">vs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">H2</span>) <span class="id">x</span> <span class="id">vs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">vs1</span> <span class="id">vs2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">H1</span>) <span class="id">x</span> <span class="id">vs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">H2</span>) <span class="id">x</span> <span class="id">vs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">vs1</span> <span class="id">vs2</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMDETERMINISM.def_stream">def_stream</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#const">Streams.const</a></span> (@<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux.absent">absent</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op.value">value</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LSEMDETERMINISM.det_exp_inv">det_exp_inv</a></span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">bs1</span> <span class="id">bs2</span> : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">e</span> <span class="id">k</span> =&gt; <span class="kwd">forall</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H1</span> <span class="id">bs1</span> <span class="id">e</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H2</span> <span class="id">bs2</span> <span class="id">e</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k</span> <span class="id">ss1</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k</span> <span class="id">ss2</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.P_exps_det_exp_inv">P_exps_det_exp_inv</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">es</span> <span class="id">k</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_inv">det_exp_inv</a></span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">bs1</span> <span class="id">bs2</span>) <span class="id">es</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H1</span> <span class="id">bs1</span>) <span class="id">es</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H2</span> <span class="id">bs2</span>) <span class="id">es</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss1</span>) <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss2</span>) <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hwt</span> <span class="id">Hp</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hsem1</span>; <span class="id">inv</span> <span class="id">Hsem2</span>; <span class="tactic">simpl</span>. <span class="id">inv</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">y</span> = <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.numstreams">numstreams</a></span> <span class="id">a</span>) <span class="kwd">as</span> <span class="id">Hlen1</span> <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">y0</span> = <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.numstreams">numstreams</a></span> <span class="id">a</span>) <span class="kwd">as</span> <span class="id">Hlen2</span> <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;now&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nth1">app_nth1</a></span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H11</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;later&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nth2">app_nth2</a></span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hlen2</span>, <span class="id">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHes</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.Forall2Brs_det_exp_inv">Forall2Brs_det_exp_inv</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">es</span> <span class="id">k</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_inv">det_exp_inv</a></span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">bs1</span> <span class="id">bs2</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>) <span class="id">k</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H1</span> <span class="id">bs1</span>) <span class="id">es</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H2</span> <span class="id">bs2</span>) <span class="id">es</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xs1</span> <span class="id">xs2</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs2</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k</span> <span class="id">ss1</span> []) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k</span> <span class="id">ss2</span> []).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hlen</span> <span class="id">Hwt</span> <span class="id">Hp</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hsem1</span>; <span class="id">inv</span> <span class="id">Hsem2</span>; <span class="tactic">simpl</span>; <span class="id">inv</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>]. <span class="tactic">rewrite</span> <span class="id">H</span>. 2:<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#dec_lt">Compare_dec.dec_lt</a></span> <span class="id">k</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H0</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>]. <span class="tactic">rewrite</span> <span class="id">H0</span>. 2:<span class="tactic">auto</span>. <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_overflow">nth_overflow</a></span>; <span class="tactic">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv">P_exps_det_exp_inv</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> <span class="id">Heq1</span>. 3:<span class="tactic">eauto</span>. 2,3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHes</span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> <span class="id">Heq2</span>. 3-5:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_length">Forall3_length</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> (?&amp;?). <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vs1</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vs0</span>)) <span class="kwd">as</span> <span class="id">Hlen0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">H9</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hlen</span> <span class="id">Hlen0</span> <span class="id">H8</span> <span class="id">H12</span> <span class="id">Heq1</span> <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">H1</span> <span class="tactic">at</span> 1; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">H4</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.P_exps_det_exp_inv_all">P_exps_det_exp_inv_all</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">es</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">k</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.annots">annots</a></span> <span class="id">es</span>) -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_inv">det_exp_inv</a></span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">bs1</span> <span class="id">bs2</span>) <span class="id">es</span> <span class="id">k</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H1</span> <span class="id">bs1</span>) <span class="id">es</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H2</span> <span class="id">bs2</span>) <span class="id">es</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss2</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwt</span> <span class="id">Hk</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss1</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.annots">annots</a></span> <span class="id">es</span>)) <span class="kwd">as</span> <span class="id">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss2</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.annots">annots</a></span> <span class="id">es</span>)) <span class="kwd">as</span> <span class="id">Hlen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span>; <span class="tactic">split</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hn</span> ? ?; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_indep">nth_indep</a></span> <span class="kwd">with</span> (<span class="id">d</span>:=<span class="id">a</span>) (<span class="id">d</span>':=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_indep">nth_indep</a></span> <span class="kwd">with</span> (<span class="id">d</span>:=<span class="id">b</span>) (<span class="id">d</span>':=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv">P_exps_det_exp_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hk</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.EqSts_mask">EqSts_mask</a></span> : <span class="kwd">forall</span> <span class="id">k</span> <span class="id">r</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> <span class="id">ss1</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.maskv">maskv</a></span> <span class="id">k</span> <span class="id">r</span>) <span class="id">ss1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.maskv">maskv</a></span> <span class="id">k</span> <span class="id">r</span>) <span class="id">ss2</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span> ?? <span class="id">_</span> <span class="id">_</span> <span class="id">Hab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.EqSts_unmask">EqSts_unmask</a></span> : <span class="kwd">forall</span> <span class="id">r</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.maskv">maskv</a></span> <span class="id">k</span> <span class="id">r</span>) <span class="id">ss1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.maskv">maskv</a></span> <span class="id">k</span> <span class="id">r</span>) <span class="id">ss2</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> <span class="id">ss1</span> <span class="id">ss2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss2</span>) <span class="kwd">as</span> <span class="id">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">specialize</span> (<span class="id">Heq</span> 0). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Heq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span>. <span class="tactic">split</span>; <span class="tactic">auto</span>; <span class="tactic">intros</span> ????? <span class="id">Hl</span> ??; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSt_unmask">EqSt_unmask</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Heq</span> <span class="id">k</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">Heq</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Heq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Heq</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_nth">map_nth</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">We first establish the determinism of all the coinductive operators,
        as well as the expression semantics.
        We show that they are deterministic "up-to-n" : that is they preserve
        the equality "up-to-n".
        Proving this for any n is stronger than just proving that they output the
        same stream for the same input, as we can use `EqStN_EqSt` to rewrite
        the conclusion and hypotheses.
    </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Constructors</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#EqStN">EqStN</a></span> : <span class="id">core</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.const_detn">const_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.const">const</a></span> <span class="id">bs1</span> <span class="id">c</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.const">const</a></span> <span class="id">bs2</span> <span class="id">c</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Hbs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hbs</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.const_Cons">const_Cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.enum_detn">enum_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.enum">enum</a></span> <span class="id">bs1</span> <span class="id">c</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.enum">enum</a></span> <span class="id">bs2</span> <span class="id">c</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Hbs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hbs</span>. <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.enum">enum</a></span> (<span class="id">_</span> ⋅ <span class="id">xs1</span>) <span class="id">_</span>)), (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#unfold_Stream">unfold_Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.enum">enum</a></span> (<span class="id">_</span> ⋅ <span class="id">xs2</span>) <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.lift1_detn">lift1_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">op</span> <span class="id">ty</span> <span class="id">xs1</span> <span class="id">xs2</span> <span class="id">ys1</span> <span class="id">ys2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.lift1">lift1</a></span> <span class="id">op</span> <span class="id">ty</span> <span class="id">xs1</span> <span class="id">ys1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.lift1">lift1</a></span> <span class="id">op</span> <span class="id">ty</span> <span class="id">xs2</span> <span class="id">ys2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">ys1</span> <span class="id">ys2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq</span> <span class="id">Hl1</span> <span class="id">Hl2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq</span>; <span class="id">inv</span> <span class="id">Hl1</span>; <span class="id">inv</span> <span class="id">Hl2</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">now</span> <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.lift2_detn">lift2_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">op</span> <span class="id">ty1</span> <span class="id">ty2</span> <span class="id">xs11</span> <span class="id">xs12</span> <span class="id">xs21</span> <span class="id">xs22</span> <span class="id">ys1</span> <span class="id">ys2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs11</span> <span class="id">xs21</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs12</span> <span class="id">xs22</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.lift2">lift2</a></span> <span class="id">op</span> <span class="id">ty1</span> <span class="id">ty2</span> <span class="id">xs11</span> <span class="id">xs12</span> <span class="id">ys1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.lift2">lift2</a></span> <span class="id">op</span> <span class="id">ty1</span> <span class="id">ty2</span> <span class="id">xs21</span> <span class="id">xs22</span> <span class="id">ys2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">ys1</span> <span class="id">ys2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Hl1</span> <span class="id">Hl2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>; <span class="id">inv</span> <span class="id">Hl1</span>; <span class="id">inv</span> <span class="id">Hl2</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="id">now</span> <span class="id">inv</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.liftn_detn">liftn_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">f</span> <span class="id">tyins</span> <span class="id">tyout</span> <span class="id">xss1</span> <span class="id">xss2</span> <span class="id">ys1</span> <span class="id">ys2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xss1</span> &lt;&gt; [] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">xss1</span> <span class="id">xss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.liftn">liftn</a></span> (<span class="kwd">fun</span> <span class="id">vs</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op.sem_extern">sem_extern</a></span> <span class="id">f</span> <span class="id">tyins</span> <span class="id">vs</span> <span class="id">tyout</span> <span class="id">v</span>) <span class="id">xss1</span> <span class="id">ys1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.liftn">liftn</a></span> (<span class="kwd">fun</span> <span class="id">vs</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op.sem_extern">sem_extern</a></span> <span class="id">f</span> <span class="id">tyins</span> <span class="id">vs</span> <span class="id">tyout</span> <span class="id">v</span>) <span class="id">xss2</span> <span class="id">ys2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">ys1</span> <span class="id">ys2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hnnil</span> <span class="id">Heqsts</span> <span class="id">Hl1</span> <span class="id">Hl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span>; <span class="tactic">intros</span> * <span class="id">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.liftn_spec">liftn_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">k</span>) <span class="kwd">in</span> <span class="id">Hl1</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.liftn_spec">liftn_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">k</span>) <span class="kwd">in</span> <span class="id">Hl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hl1</span> <span class="kwd">as</span> [(?&amp;?)|(?&amp;?&amp;?&amp;?&amp;?)], <span class="id">Hl2</span> <span class="kwd">as</span> [(?&amp;?)|(?&amp;?&amp;?&amp;?&amp;?)]; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heqsts</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">_</span> <span class="id">x1</span> <span class="id">y</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">contra</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id">_</span> = <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux.absent">absent</a></span>) <span class="id">and</span> <span class="tactic">setoid_rewrite</span> <span class="id">it</span> <span class="kwd">in</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id">_</span> = <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux.present">present</a></span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">setoid_rewrite</span> <span class="id">it</span> <span class="kwd">in</span> <span class="id">contra</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_ignore2">Forall2_ignore2</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heqsts</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">_</span> <span class="id">x1</span> <span class="id">y</span>) <span class="id">and</span> <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">contra</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id">_</span> = <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux.absent">absent</a></span>) <span class="id">and</span> <span class="tactic">setoid_rewrite</span> <span class="id">it</span> <span class="kwd">in</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id">_</span> = <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux.present">present</a></span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">setoid_rewrite</span> <span class="id">it</span> <span class="kwd">in</span> <span class="id">contra</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">take</span> (<span class="id">ys1</span> # <span class="id">k</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id">ys2</span> # <span class="id">k</span> = <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op.sem_extern_det">sem_extern_det</a></span>; <span class="tactic">eauto</span>. <span class="tactic">replace</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id">x1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hlt</span> <span class="id">Heqsts</span> <span class="id">H</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Heqsts</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">H2</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hlt</span> <span class="id">H2</span>. <span class="tactic">induction</span> <span class="id">H2</span>; <span class="id">destruct_conjs</span>; <span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">setoid_rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">now</span> <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMDETERMINISM.fby_detn">fby_detn</a></span> {<span class="id">A</span>} : <span class="kwd">forall</span> <span class="id">n</span> (<span class="id">xs1</span> <span class="id">xs2</span> <span class="id">ys1</span> <span class="id">ys2</span> <span class="id">zs1</span> <span class="id">zs2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux.synchronous">synchronous</a></span> <span class="id">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">ys1</span> <span class="id">ys2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.fby">fby</a></span> <span class="id">xs1</span> <span class="id">ys1</span> <span class="id">zs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.fby">fby</a></span> <span class="id">xs2</span> <span class="id">ys2</span> <span class="id">zs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">zs1</span> <span class="id">zs2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Hfby1</span> <span class="id">Hfby2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfby1</span>; <span class="id">inv</span> <span class="id">Hfby2</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">IHn</span>. <span class="id">revert</span> <span class="id">y</span> <span class="id">xs0</span> <span class="id">xs1</span> <span class="id">xs3</span> <span class="id">xs2</span> <span class="id">rs</span> <span class="id">rs0</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H6</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Hfby1</span> <span class="id">Hfby2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfby1</span>; <span class="id">inv</span> <span class="id">Hfby2</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.arrow_detn">arrow_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span> <span class="id">ys1</span> <span class="id">ys2</span> <span class="id">zs1</span> <span class="id">zs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">ys1</span> <span class="id">ys2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.arrow">arrow</a></span> <span class="id">xs1</span> <span class="id">ys1</span> <span class="id">zs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.arrow">arrow</a></span> <span class="id">xs2</span> <span class="id">ys2</span> <span class="id">zs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">zs1</span> <span class="id">zs2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Hfby1</span> <span class="id">Hfby2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfby1</span>; <span class="id">inv</span> <span class="id">Hfby2</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">IHn</span>. <span class="id">revert</span> <span class="id">xs0</span> <span class="id">xs1</span> <span class="id">xs3</span> <span class="id">xs2</span> <span class="id">rs</span> <span class="id">rs0</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H6</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Hfby1</span> <span class="id">Hfby2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfby1</span>; <span class="id">inv</span> <span class="id">Hfby2</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.when_detn">when_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">xs1</span> <span class="id">xs2</span> <span class="id">ys1</span> <span class="id">ys2</span> <span class="id">zs1</span> <span class="id">zs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">ys1</span> <span class="id">ys2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when">when</a></span> <span class="id">k</span> <span class="id">xs1</span> <span class="id">ys1</span> <span class="id">zs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when">when</a></span> <span class="id">k</span> <span class="id">xs2</span> <span class="id">ys2</span> <span class="id">zs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">zs1</span> <span class="id">zs2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Hwhen1</span> <span class="id">Hwhen2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwhen1</span>; <span class="id">inv</span> <span class="id">Hwhen2</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.merge_detn">merge_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">cs1</span> <span class="id">cs2</span> <span class="id">xss1</span> <span class="id">xss2</span> <span class="id">ys1</span> <span class="id">ys2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">xss1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">xss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id">xss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">cs1</span> <span class="id">cs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xs1</span> <span class="id">xs2</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs2</span>)) <span class="id">xss1</span> <span class="id">xss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.merge">merge</a></span> <span class="id">cs1</span> <span class="id">xss1</span> <span class="id">ys1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.merge">merge</a></span> <span class="id">cs2</span> <span class="id">xss2</span> <span class="id">ys2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">ys1</span> <span class="id">ys2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Hfst</span> <span class="id">Hnd</span> <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Hmerge1</span> <span class="id">Hmerge2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hmerge1</span>; <span class="id">inv</span> <span class="id">Hmerge2</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,3:<span class="tactic">eapply</span> <span class="id">IHn</span>. 5,6,11,12:<span class="tactic">eauto</span>. 1-8:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,4:<span class="id">erewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id">xss1</span>), <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id">xss2</span>); <span class="tactic">eauto</span>; <span class="tactic">intros</span> (?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,3:<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_map">NoDupMembers_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">simpl_Forall</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">_</span>) <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hfst</span> <span class="id">Hnd</span> <span class="id">Heq2</span> <span class="id">H3</span> <span class="id">H5</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Heq2</span>; <span class="id">inv</span> <span class="id">H3</span>; <span class="id">inv</span> <span class="id">H5</span>; <span class="id">inv</span> <span class="id">Hnd</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">Hfst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">y</span>, <span class="id">H1</span>, <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H1</span>, &lt;-<span class="id">H3</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="tactic">destruct</span> <span class="id">y</span>, <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>, <span class="id">H6</span>, &lt;-<span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="tactic">subst</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="tactic">destruct</span> <span class="id">y</span>, <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>, &lt;-<span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="tactic">subst</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.case_detn">case_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">cs1</span> <span class="id">cs2</span> <span class="id">xss1</span> <span class="id">xss2</span> <span class="id">ys1</span> <span class="id">ys2</span> <span class="id">ds1</span> <span class="id">ds2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">xss1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">xss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id">xss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">cs1</span> <span class="id">cs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xs1</span> <span class="id">xs2</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs2</span>)) <span class="id">xss1</span> <span class="id">xss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">d1</span> <span class="id">d2</span>, <span class="id">ds1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d1</span> -&gt; <span class="id">ds2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d2</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">d1</span> <span class="id">d2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">case</span> <span class="id">cs1</span> <span class="id">xss1</span> <span class="id">ds1</span> <span class="id">ys1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">case</span> <span class="id">cs2</span> <span class="id">xss2</span> <span class="id">ds2</span> <span class="id">ys2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">ys1</span> <span class="id">ys2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Hfst</span> <span class="id">Hnd</span> <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Heq3</span> <span class="id">Hcase1</span> <span class="id">Hcase2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hcase1</span>; <span class="id">inv</span> <span class="id">Hcase2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHn</span>. 6,7:<span class="tactic">eauto</span>. 1-5:<span class="tactic">intros</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id">xss1</span>), <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id">xss2</span>); <span class="tactic">eauto</span>; <span class="tactic">intros</span> (?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_map">NoDupMembers_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">_</span>) <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_equalities</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Heq3</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>). <span class="id">inv</span> <span class="id">Heq3</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">clear</span> - <span class="id">Hfst</span> <span class="id">Hnd</span> <span class="id">Heq2</span> <span class="id">H8</span> <span class="id">H12</span>. <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Heq2</span>; <span class="id">inv</span> <span class="id">H8</span>; <span class="id">inv</span> <span class="id">H12</span>; <span class="id">inv</span> <span class="id">Hnd</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">Hfst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">y</span>, <span class="id">H1</span>, <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H1</span>, &lt;-<span class="id">H3</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exfalso</span>. <span class="tactic">destruct</span> <span class="id">y</span>, <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>, <span class="id">H6</span>, &lt;-<span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="tactic">subst</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exfalso</span>. <span class="tactic">destruct</span> <span class="id">y</span>, <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>, &lt;-<span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Exists</span>; <span class="tactic">subst</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHn</span>. 6,7:<span class="tactic">eauto</span>. 1-5:<span class="tactic">intros</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id">xss1</span>), <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id">xss2</span>); <span class="tactic">eauto</span>; <span class="tactic">intros</span> (?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_map">NoDupMembers_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">_</span>) <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_equalities</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Heq3</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>). <span class="id">inv</span> <span class="id">Heq3</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="id">simpl_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="tactic">setoid_rewrite</span> <span class="id">Hfst</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#InMembers_In">InMembers_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unshelve</span> <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="id">simpl_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="tactic">setoid_rewrite</span> &lt;-<span class="id">Hfst</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#InMembers_In">InMembers_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unshelve</span> <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">specialize</span> (<span class="id">Heq3</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>). <span class="id">inv</span> <span class="id">Heq3</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHn</span>. 6,7:<span class="tactic">eauto</span>. 1-5:<span class="tactic">intros</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> 2 <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id">xss1</span>), <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span> <span class="kwd">with</span> (<span class="id">l</span>:=<span class="id">xss2</span>); <span class="tactic">eauto</span>; <span class="tactic">intros</span> (?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span>, &lt;-<span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span> (?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (?&amp;?) (?&amp;?) <span class="id">_</span> <span class="id">_</span> <span class="id">Heq</span>; <span class="id">inv</span> <span class="id">Heq</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Heq3</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>). <span class="id">inv</span> <span class="id">Heq3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.bools_of_detn">bools_of_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.bools_of">bools_of</a></span> <span class="id">xs1</span> <span class="id">bs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.bools_of">bools_of</a></span> <span class="id">xs2</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq</span> <span class="id">Hbools1</span> <span class="id">Hbools2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq</span>; <span class="id">inv</span> <span class="id">Hbools1</span>; <span class="id">inv</span> <span class="id">Hbools2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.disj_str_detn">disj_str_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">xss1</span> <span class="id">xss2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">xss1</span> <span class="id">xss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bs1</span> ≡ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.disj_str">disj_str</a></span> <span class="id">xss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bs2</span> ≡ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.disj_str">disj_str</a></span> <span class="id">xss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq</span> <span class="id">Hdisj1</span> <span class="id">Hdisj2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span>. <span class="tactic">intros</span> * <span class="id">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#eqst_ntheq">eqst_ntheq</a></span> <span class="kwd">in</span> <span class="id">Hdisj1</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#eqst_ntheq">eqst_ntheq</a></span> <span class="kwd">in</span> <span class="id">Hdisj2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hdisj1</span>, <span class="id">Hdisj2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.disj_str_spec">disj_str_spec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Heq</span> <span class="id">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Heq</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHHeq</span>. <span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMDETERMINISM.bools_ofs_detn">bools_ofs_detn</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">xss1</span> <span class="id">xss2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">xss1</span> <span class="id">xss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.bools_ofs">bools_ofs</a></span> <span class="id">xss1</span> <span class="id">bs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.bools_ofs">bools_ofs</a></span> <span class="id">xss2</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq</span> (?&amp;<span class="id">Hb1</span>&amp;<span class="id">Hdisj1</span>) (?&amp;<span class="id">Hb2</span>&amp;<span class="id">Hdisj2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.disj_str_detn">disj_str_detn</a></span>. 2,3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Heq</span> <span class="id">Hb1</span> <span class="id">Hb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">x</span> <span class="id">x0</span> <span class="id">Hb1</span> <span class="id">Hb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Heq</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">Hb1</span>; <span class="id">inv</span> <span class="id">Hb2</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.bools_of_detn">bools_of_detn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id">det_exps_n</span>' : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">es</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="kwd">forall</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> <span class="id">e</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> <span class="id">e</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">ss1</span> <span class="id">ss2</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ) <span class="id">es</span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span>) <span class="id">es</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span>) <span class="id">es</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss2</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hf</span>. <span class="id">revert</span> <span class="id">ss1</span> <span class="id">ss2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hf</span>; <span class="tactic">intros</span> * <span class="id">Hwt</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hsem1</span>; <span class="id">inv</span> <span class="id">Hsem2</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2_app">Forall2_app</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">Forall2Brs_det_exp_n</span>' : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">es</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">es</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H1</span> <span class="id">bs1</span> <span class="id">e</span> <span class="id">ss1</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H2</span> <span class="id">bs2</span> <span class="id">e</span> <span class="id">ss2</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">ss1</span> <span class="id">ss2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H1</span> <span class="id">bs1</span>) <span class="id">es</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs">Forall2Brs</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">H2</span> <span class="id">bs2</span>) <span class="id">es</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xs1</span> <span class="id">xs2</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs2</span>))) <span class="id">ss1</span> <span class="id">ss2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">es</span>; <span class="tactic">intros</span> * <span class="id">Hf</span> <span class="id">Hlen</span> <span class="id">Hwt</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hsem1</span>; <span class="id">inv</span> <span class="id">Hsem2</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">revert</span> <span class="id">ss2</span> <span class="id">Hlen</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>; <span class="tactic">intros</span> * <span class="id">Hl</span> <span class="id">Hf2</span>; <span class="tactic">destruct</span> <span class="id">ss2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>; <span class="id">inv</span> <span class="id">Hf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHes</span> <span class="kwd">in</span> <span class="id">H4</span>. 3-5:<span class="tactic">eauto</span>. <span class="tactic">clear</span> <span class="id">IHes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_length">Forall3_length</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> (?&amp;?). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_length">Forall3_length</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">det_exps_n</span>' <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H3</span> <span class="id">H4</span> <span class="id">H10</span> <span class="id">H14</span>. <span class="id">revert</span> <span class="id">vs2</span> <span class="id">vs3</span> <span class="id">H10</span> <span class="id">H14</span> <span class="id">H3</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vs0</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vs1</span>); <span class="tactic">clear</span> <span class="id">vs0</span> <span class="id">vs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hf1</span>. <span class="id">revert</span> <span class="id">l</span> <span class="id">ss2</span> <span class="id">vs3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hf1</span>; <span class="tactic">intros</span> * <span class="id">Hf2</span> <span class="id">Heq1</span> <span class="id">Heq2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>; <span class="id">inv</span> <span class="id">Hf2</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">The clocking hypothesis could be replaced with a typing one.
        The important point is that all the variables appearing in the expression
        are in `env`.
        I chose a clocking hypothesis because this lemma is used in the
        clocked-semantics proof. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_exp_n">det_exp_n</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">e</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> <span class="id">e</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> <span class="id">e</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) <span class="id">ss1</span> <span class="id">ss2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hn</span> <span class="id">Hbs</span>. <span class="id">revert</span> <span class="id">ss1</span> <span class="id">ss2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>; <span class="id">inv</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;const&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hs1</span>. <span class="id">inv</span> <span class="id">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>, <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.const_detn">const_detn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;enum&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hs1</span>. <span class="id">inv</span> <span class="id">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span>, <span class="id">H8</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.enum_detn">enum_detn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hs1</span>. <span class="id">inv</span> <span class="id">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hn</span> <span class="kwd">as</span> (<span class="id">Hn1</span>&amp;<span class="id">_</span>). <span class="tactic">left</span>; <span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hn1</span>; <span class="tactic">eauto</span>. <span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;last&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hs1</span>. <span class="id">inv</span> <span class="id">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.causl_last">causl_last</a></span> <span class="id">e</span>) <span class="id">eqn</span>:<span class="id">Hcaus</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hn</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hn2</span>). <span class="tactic">right</span>; <span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hn2</span>; <span class="tactic">eauto</span>. <span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | |???????? <span class="id">Hse1</span> <span class="id">Hty1</span> <span class="id">Hl1</span>| | | | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | |???????? <span class="id">Hse2</span> <span class="id">Hty2</span> <span class="id">Hl2</span>| | | | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hty2</span> <span class="kwd">in</span> <span class="id">Hty1</span>; <span class="id">inv</span> <span class="id">Hty1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHe</span> <span class="kwd">in</span> <span class="id">Hse1</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">Hse1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.lift1_detn">lift1_detn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | |??????????? <span class="id">Hse11</span> <span class="id">Hse12</span> <span class="id">Hty11</span> <span class="id">Hty12</span> <span class="id">Hl1</span>| | | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | |??????????? <span class="id">Hse21</span> <span class="id">Hse22</span> <span class="id">Hty21</span> <span class="id">Hty22</span> <span class="id">Hl2</span>| | | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hty21</span> <span class="kwd">in</span> <span class="id">Hty11</span>; <span class="id">inv</span> <span class="id">Hty11</span>. <span class="tactic">rewrite</span> <span class="id">Hty22</span> <span class="kwd">in</span> <span class="id">Hty12</span>; <span class="id">inv</span> <span class="id">Hty12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHe1</span> <span class="kwd">in</span> <span class="id">Hse21</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">IHe2</span> <span class="kwd">in</span> <span class="id">Hse22</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hse21</span>. <span class="id">inv</span> <span class="id">Hse22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.lift2_detn">lift2_detn</a></span>. 3,4:<span class="tactic">eauto</span>. 1,2:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;extcall&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | |????????? <span class="id">Hty1</span> <span class="id">Hse1</span> <span class="id">Hl1</span>| | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | |????????? <span class="id">Hty2</span> <span class="id">Hse2</span> <span class="id">Hl2</span>| | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">tyins1</span> = <span class="id">tyins0</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_eq">Forall2_eq</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Hty1</span>. 2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>, <span class="id">Hty2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.liftn_detn">liftn_detn</a></span>. 3,4:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>; [|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.typesof_annots">typesof_annots</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.annots">annots</a></span> <span class="id">es</span>), (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">det_exps_n</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | |???????? <span class="id">Hse11</span> <span class="id">Hse12</span> <span class="id">Hfby1</span>| | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | |???????? <span class="id">Hse21</span> <span class="id">Hse22</span> <span class="id">Hfby2</span>| | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">det_exps_n</span>' <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">det_exps_n</span>' <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H</span> <span class="id">H0</span> <span class="id">Hfby1</span> <span class="id">Hfby2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite_Forall_forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">setoid_rewrite</span> &lt;-<span class="id">H4</span>. <span class="tactic">setoid_rewrite</span> &lt;-<span class="id">H7</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.fby_detn">fby_detn</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H2</span> <span class="kwd">with</span> (<span class="id">a</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">b</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">n</span>:=<span class="id">n0</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">with</span> (<span class="id">a</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">b</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">n</span>:=<span class="id">n0</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> &lt;-<span class="id">H6</span>. <span class="tactic">setoid_rewrite</span> <span class="id">H7</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H8</span>; <span class="tactic">eauto</span>. <span class="tactic">setoid_rewrite</span> <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H5</span>; <span class="tactic">eauto</span>. <span class="tactic">setoid_rewrite</span> &lt;-<span class="id">H</span>. <span class="tactic">setoid_rewrite</span> <span class="id">H7</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;arrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | |???????? <span class="id">Hse11</span> <span class="id">Hse12</span> <span class="id">Harrow1</span>| | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | |???????? <span class="id">Hse21</span> <span class="id">Hse22</span> <span class="id">Harrow2</span>| | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">det_exps_n</span>' <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">det_exps_n</span>' <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H</span> <span class="id">H0</span> <span class="id">Harrow1</span> <span class="id">Harrow2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite_Forall_forall</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.arrow_detn">arrow_detn</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H2</span> <span class="kwd">with</span> (<span class="id">a</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">b</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">n</span>:=<span class="id">n0</span>); <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">with</span> (<span class="id">a</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">b</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">n</span>:=<span class="id">n0</span>); <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H8</span>; <span class="tactic">eauto</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H5</span>; <span class="tactic">eauto</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | | |?????????? <span class="id">Hse1</span> <span class="id">Hsv1</span> <span class="id">Hwhen1</span>| | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | | |?????????? <span class="id">Hse2</span> <span class="id">Hsv2</span> <span class="id">Hwhen2</span>| | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">det_exps_n</span>' <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasType">HasType</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>; <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hn</span> <span class="kwd">as</span> (<span class="id">Hn1</span>&amp;<span class="id">_</span>). <span class="tactic">left</span>; <span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hn1</span> <span class="kwd">in</span> <span class="id">Hsv1</span>; <span class="tactic">eauto</span>. 2:<span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H</span> <span class="id">Hsv1</span> <span class="id">Hwhen1</span> <span class="id">Hwhen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite_Forall_forall</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.when_detn">when_detn</a></span>. 2:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H0</span> <span class="kwd">with</span> (<span class="id">a</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">b</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) (<span class="id">n</span>:=<span class="id">n0</span>); <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H4</span>; <span class="tactic">eauto</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H2</span>; <span class="tactic">eauto</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | | | |????????? <span class="id">Hsv1</span> <span class="id">Hse1</span> <span class="id">Hmerge1</span>| | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | | | |????????? <span class="id">Hsv2</span> <span class="id">Hse2</span> <span class="id">Hmerge2</span>| | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>; <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hn</span> <span class="kwd">as</span> (<span class="id">Hn1</span>&amp;<span class="id">_</span>). <span class="tactic">left</span>; <span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hn1</span> <span class="kwd">in</span> <span class="id">Hsv1</span>; <span class="tactic">eauto</span>. 2:<span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Forall2Brs_det_exp_n</span>' <span class="kwd">in</span> <span class="id">H</span>. 3-5:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_length1">Forall2Brs_length1</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_length1">Forall2Brs_length1</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3:<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span>); <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3:<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hse1</span>; <span class="id">inv</span> <span class="id">Hse2</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="id">exfalso</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hmerge1</span> <span class="id">Hmerge2</span> <span class="id">Hsv1</span> <span class="id">H</span> <span class="id">H5</span> <span class="id">Hse1</span> <span class="id">Hse2</span>. <span class="id">revert</span> <span class="id">vs0</span> <span class="id">ss2</span> <span class="id">Hsv1</span> <span class="id">Hmerge2</span> <span class="id">H</span> <span class="id">Hse1</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hmerge1</span>; <span class="tactic">intros</span> * <span class="id">Hsv1</span> <span class="id">Hmerge2</span> <span class="id">Heq</span> <span class="id">Hse1</span> <span class="id">Hse2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq</span>; <span class="id">inv</span> <span class="id">Hmerge2</span>; <span class="id">inv</span> <span class="id">Hse1</span>; <span class="id">inv</span> <span class="id">Hse2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.merge_detn">merge_detn</a></span>. 5,6:<span class="tactic">eauto</span>. 1-4:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id">H6</span>, <span class="id">H5</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq_NoDup">seq_NoDup</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | | | | |????????? <span class="id">Hsv1</span> <span class="id">Hse1</span> <span class="id">Hcase1</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | | | | |????????? <span class="id">Hsv2</span> <span class="id">Hse2</span> <span class="id">Hcase2</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHe</span> <span class="kwd">in</span> <span class="id">Hsv2</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_singl">Forall2_singl</a></span> <span class="kwd">in</span> <span class="id">Hsv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Forall2Brs_det_exp_n</span>' <span class="kwd">in</span> <span class="id">H</span>. 3-5:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_length1">Forall2Brs_length1</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_length1">Forall2Brs_length1</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3:<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span>); <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3:<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H10</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hse1</span>; <span class="id">inv</span> <span class="id">Hse2</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="id">exfalso</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_map_2">Forall3_map_2</a></span> <span class="kwd">in</span> <span class="id">Hcase1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_map_2">Forall3_map_2</a></span> <span class="kwd">in</span> <span class="id">Hcase2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hcase1</span> <span class="id">Hcase2</span> <span class="id">Hsv2</span> <span class="id">H</span> <span class="id">H8</span> <span class="id">Hse1</span> <span class="id">Hse2</span>. <span class="id">revert</span> <span class="id">vs0</span> <span class="id">ss2</span> <span class="id">Hsv2</span> <span class="id">Hcase2</span> <span class="id">H</span> <span class="id">Hse1</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hcase1</span>; <span class="tactic">intros</span> * <span class="id">Hsv2</span> <span class="id">Hcase2</span> <span class="id">Heq</span> <span class="id">Hse1</span> <span class="id">Hse2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq</span>; <span class="id">inv</span> <span class="id">Hcase2</span>; <span class="id">inv</span> <span class="id">Hse1</span>; <span class="id">inv</span> <span class="id">Hse2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.case_detn">case_detn</a></span>. 6,7:<span class="tactic">eauto</span>. 1-5:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id">H3</span>, <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq_NoDup">seq_NoDup</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;case&nbsp;(default)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | | | | | |?????????? <span class="id">Hsv1</span> <span class="id">_</span> <span class="id">Hse1</span> <span class="id">Hd1</span> <span class="id">Hcase1</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | | | | | |?????????? <span class="id">Hsv2</span> <span class="id">_</span> <span class="id">Hse2</span> <span class="id">Hd2</span> <span class="id">Hcase2</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHe</span> <span class="kwd">in</span> <span class="id">Hsv2</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_singl">Forall2_singl</a></span> <span class="kwd">in</span> <span class="id">Hsv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Forall2Brs_det_exp_n</span>' <span class="kwd">in</span> <span class="id">H</span>. 3-5:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_length1">Forall2Brs_length1</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_length1">Forall2Brs_length1</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3:<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span>); <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3:<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H11</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hse1</span>; <span class="id">inv</span> <span class="id">Hse2</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="id">exfalso</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">det_exps_n</span>' <span class="kwd">in</span> <span class="id">Hd2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_map_2">Forall3_map_2</a></span> <span class="kwd">in</span> <span class="id">Hcase1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_map_2">Forall3_map_2</a></span> <span class="kwd">in</span> <span class="id">Hcase2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hcase1</span> <span class="id">Hcase2</span> <span class="id">Hsv2</span> <span class="id">H</span> <span class="id">H9</span> <span class="id">Hse1</span> <span class="id">Hse2</span> <span class="id">Hd2</span>. <span class="id">revert</span> <span class="id">Hcase1</span> <span class="id">Hsv2</span> <span class="id">Hcase2</span> <span class="id">H</span> <span class="id">Hse1</span> <span class="id">Hse2</span> <span class="id">Hd2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vd</span>). <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">vd0</span>). <span class="tactic">intros</span> * <span class="id">Hcase1</span>. <span class="id">revert</span> <span class="id">vs0</span> <span class="id">l</span> <span class="id">ss2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hcase1</span>; <span class="tactic">intros</span> * <span class="id">Hsv2</span> <span class="id">Hcase2</span> <span class="id">Heq</span> <span class="id">Hse1</span> <span class="id">Hse2</span> <span class="id">Hd2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq</span>; <span class="id">inv</span> <span class="id">Hcase2</span>; <span class="id">inv</span> <span class="id">Hse1</span>; <span class="id">inv</span> <span class="id">Hse2</span>; <span class="id">inv</span> <span class="id">Hd2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.case_detn">case_detn</a></span>. 6,7:<span class="tactic">eauto</span>. 1-5:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id">H5</span>, &lt;-<span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?? <span class="id">Heq1</span> <span class="id">Heq2</span>. <span class="id">inv</span> <span class="id">Heq1</span>. <span class="id">inv</span> <span class="id">Heq2</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | | | | | | |?????????? <span class="id">Hes1</span> <span class="id">Her1</span> <span class="id">Hbools1</span> <span class="id">Hn1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | | | | | | |?????????? <span class="id">Hes2</span> <span class="id">Her2</span> <span class="id">Hbools2</span> <span class="id">Hn2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">det_exps_n</span>' <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span> <span class="kwd">in</span> <span class="id">Her1</span>, <span class="id">Her2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">det_exps_n</span>' <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#concat_map_singl1">concat_map_singl1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.bools_ofs_detn">bools_ofs_detn</a></span> <span class="kwd">in</span> <span class="id">Hbools2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStNs_unmask">EqStNs_unmask</a></span>; [<span class="tactic">eapply</span> <span class="id">Hbools2</span>|]; <span class="tactic">intros</span>. <span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.HdetG">HdetG</a></span>. 2,3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStNs_mask">EqStNs_mask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMDETERMINISM.det_exps_n">det_exps_n</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">es</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span>) <span class="id">es</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span>) <span class="id">es</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss2</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span> <span class="id">Hbs</span> <span class="id">Hwt</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_concat">Forall2_concat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Hsem2</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>, <span class="id">Hsem1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span> ?? <span class="id">_</span> <span class="id">_</span> (?&amp;<span class="id">Hin</span>'&amp;(<span class="id">Hs1</span>&amp;<span class="id">Hs2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_n">det_exp_n</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMDETERMINISM.det_exp">det_exp</a></span> : <span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">e</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> <span class="id">ss1</span> <span class="id">ss2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_EqSts">EqStN_EqSts</a></span>. <span class="tactic">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_n">det_exp_n</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">_</span> ???.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_EqSt">EqStN_EqSt</a></span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_det">sem_var_det</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LSEMDETERMINISM.det_exps">det_exps</a></span> : <span class="kwd">forall</span> <span class="id">Hi</span> <span class="id">bs</span> <span class="id">es</span> <span class="id">ss1</span> <span class="id">ss2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi</span> <span class="id">bs</span>) <span class="id">es</span> <span class="id">ss1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi</span> <span class="id">bs</span>) <span class="id">es</span> <span class="id">ss2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss2</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_EqSts">EqStN_EqSts</a></span>. <span class="tactic">intros</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exps_n">det_exps_n</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">_</span> ???.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_EqSt">EqStN_EqSt</a></span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_det">sem_var_det</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">We reason inductively on the length of streams.
        Given that all the streams in the environnement are equal "up-to",
        we need to proove that they are equal "up-to" n+1.
        This can be established using causality, by following the causal order of the variables.
        The interesting case is the fby operator, where the causality hypothesis doesn't tell us
        anything about the expression on the right.
        Fortunately, the following lemma indicates that we only need to know about equality "up-to" n
        for the right-side stream of a fby, as the output only depends on its previous value.
     </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.fby_det_Sn">fby_det_Sn</a></span> {<span class="id">A</span>} : <span class="kwd">forall</span> <span class="id">n</span> (<span class="id">xs1</span> <span class="id">xs2</span> <span class="id">ys1</span> <span class="id">ys2</span> <span class="id">zs1</span> <span class="id">zs2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux.synchronous">synchronous</a></span> <span class="id">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">ys1</span> <span class="id">ys2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.fby">fby</a></span> <span class="id">xs1</span> <span class="id">ys1</span> <span class="id">zs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.fby">fby</a></span> <span class="id">xs2</span> <span class="id">ys2</span> <span class="id">zs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">zs1</span> <span class="id">zs2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Hfby1</span> <span class="id">Hfby2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfby1</span>; <span class="id">inv</span> <span class="id">Hfby2</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">IHn</span>. <span class="id">revert</span> <span class="id">y</span> <span class="id">xs0</span> <span class="id">xs1</span> <span class="id">xs3</span> <span class="id">xs2</span> <span class="id">rs</span> <span class="id">rs0</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H6</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">Hfby1</span> <span class="id">Hfby2</span>; <span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfby1</span>; <span class="id">inv</span> <span class="id">Hfby2</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_exp_S">det_exp_S</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">e</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_exp">wt_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_free_left">Is_free_left</a></span> Γ <span class="id">x</span> <span class="id">k</span> <span class="id">e</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_inv">det_exp_inv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">e</span> <span class="id">k</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hn</span> <span class="id">Hwt</span> <span class="id">Hnum</span> <span class="id">Hbs</span> <span class="id">HSn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.exp_causal_ind">exp_causal_ind</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">P_exp</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_inv">det_exp_inv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-13:<span class="tactic">clear</span> <span class="id">Hwt</span> <span class="id">HSn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;const&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ??? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hs1</span>. <span class="id">inv</span> <span class="id">Hs2</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>, <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.const_detn">const_detn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;enum&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ???? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hs1</span>. <span class="id">inv</span> <span class="id">Hs2</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H5</span>, <span class="id">H6</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.enum_detn">enum_detn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ???? <span class="id">Hvar</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hs1</span>. <span class="id">inv</span> <span class="id">Hs2</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hvar</span> <span class="kwd">as</span> (<span class="id">Hv</span>&amp;<span class="id">_</span>). <span class="tactic">eapply</span> <span class="id">Hv</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;last&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ???? <span class="id">Hvar</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hs1</span>. <span class="id">inv</span> <span class="id">Hs2</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hvar</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hv</span>). <span class="tactic">eapply</span> <span class="id">Hv</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ??? <span class="id">He1</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | |???????? <span class="id">Hse1</span> <span class="id">Hty1</span> <span class="id">Hl1</span>| | | | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | |???????? <span class="id">Hse2</span> <span class="id">Hty2</span> <span class="id">Hl2</span>| | | | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hty2</span> <span class="kwd">in</span> <span class="id">Hty1</span>; <span class="id">inv</span> <span class="id">Hty1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">He1</span> <span class="kwd">in</span> <span class="id">Hse2</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.lift1_detn">lift1_detn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ???? <span class="id">He1</span> <span class="id">He2</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | |??????????? <span class="id">Hse11</span> <span class="id">Hse12</span> <span class="id">Hty11</span> <span class="id">Hty12</span> <span class="id">Hl1</span>| | | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | |??????????? <span class="id">Hse21</span> <span class="id">Hse22</span> <span class="id">Hty21</span> <span class="id">Hty22</span> <span class="id">Hl2</span>| | | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hty21</span> <span class="kwd">in</span> <span class="id">Hty11</span>; <span class="id">inv</span> <span class="id">Hty11</span>. <span class="tactic">rewrite</span> <span class="id">Hty22</span> <span class="kwd">in</span> <span class="id">Hty12</span>; <span class="id">inv</span> <span class="id">Hty12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">He1</span> <span class="kwd">in</span> <span class="id">Hse21</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">He2</span> <span class="kwd">in</span> <span class="id">Hse22</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.lift2_detn">lift2_detn</a></span>. 3,4:<span class="tactic">eauto</span>. 1,2:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;extcall&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hes</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | |????????? <span class="id">Hty1</span> <span class="id">Hse1</span> <span class="id">Hl1</span>| | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | |????????? <span class="id">Hty2</span> <span class="id">Hse2</span> <span class="id">Hl2</span>| | | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">tyins1</span> = <span class="id">tyins0</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_eq">Forall2_eq</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Hty1</span>. 2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>, <span class="id">Hty2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.liftn_detn">liftn_detn</a></span>. 3,4:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>; [|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.typesof_annots">typesof_annots</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.annots">annots</a></span> <span class="id">es</span>), (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv_all">P_exps_det_exp_inv_all</a></span> <span class="kwd">in</span> <span class="id">Hes</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ???? <span class="id">Hk</span> <span class="id">He0s</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | |???????? <span class="id">Hse11</span> <span class="id">Hse12</span> <span class="id">Hfby1</span>| | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | |???????? <span class="id">Hse21</span> <span class="id">Hse22</span> <span class="id">Hfby2</span>| | | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv">P_exps_det_exp_inv</a></span> <span class="kwd">in</span> <span class="id">He0s</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exps_n">det_exps_n</a></span> <span class="kwd">in</span> <span class="id">Hse22</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_weaken">EqStN_weaken</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">s0ss</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ann0</span>) <span class="kwd">as</span> <span class="id">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hse11</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typesof_annots">length_typesof_annots</a></span>, <span class="id">H5</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hse11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">s0ss0</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ann0</span>) <span class="kwd">as</span> <span class="id">Hlen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hse21</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typesof_annots">length_typesof_annots</a></span>, <span class="id">H5</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hse21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.fby_det_Sn">fby_det_Sn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">Hse22</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Heq</span>). <span class="tactic">eapply</span> <span class="id">Heq</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_length">Forall3_length</a></span> <span class="kwd">in</span> <span class="id">Hfby1</span> <span class="kwd">as</span> (<span class="id">Hl1</span>&amp;<span class="id">Hl2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> &lt;-<span class="id">Hl1</span>. <span class="tactic">setoid_rewrite</span> <span class="id">Hlen1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">Hfby1</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">Hfby1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hfby1</span> <span class="kwd">with</span> (<span class="id">b</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>); <span class="tactic">eauto</span>. <span class="tactic">setoid_rewrite</span> <span class="id">Hlen1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">Hfby2</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">Hfby2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hfby2</span> <span class="kwd">with</span> (<span class="id">b</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>); <span class="tactic">eauto</span>. <span class="tactic">setoid_rewrite</span> <span class="id">Hlen2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;arrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ???? <span class="id">Hk</span> <span class="id">He0s</span> <span class="id">He1s</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | |???????? <span class="id">Hse11</span> <span class="id">Hse12</span> <span class="id">Harrow1</span>| | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | |???????? <span class="id">Hse21</span> <span class="id">Hse22</span> <span class="id">Harrow2</span>| | | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv">P_exps_det_exp_inv</a></span> <span class="kwd">in</span> <span class="id">He0s</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv">P_exps_det_exp_inv</a></span> <span class="kwd">in</span> <span class="id">He1s</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">s0ss</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ann0</span>) <span class="kwd">as</span> <span class="id">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hse11</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typesof_annots">length_typesof_annots</a></span>, <span class="id">H5</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hse11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">s0ss0</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ann0</span>) <span class="kwd">as</span> <span class="id">Hlen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hse21</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typesof_annots">length_typesof_annots</a></span>, <span class="id">H5</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">Hse21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.arrow_detn">arrow_detn</a></span>. <span class="tactic">eapply</span> <span class="id">He0s</span>. <span class="tactic">eapply</span> <span class="id">He1s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">Harrow1</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">Harrow1</span>). <span class="tactic">eapply</span> <span class="id">Harrow1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">Harrow2</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">Harrow2</span>). <span class="tactic">eapply</span> <span class="id">Harrow2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ??????? <span class="id">Hk</span> <span class="id">Hes</span> <span class="id">Hin</span> <span class="id">Hvar</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="id">inv</span> <span class="id">Hwt</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | | |?????????? <span class="id">Hse1</span> <span class="id">Hsv1</span> <span class="id">Hwhen1</span>| | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | | |?????????? <span class="id">Hse2</span> <span class="id">Hsv2</span> <span class="id">Hwhen2</span>| | | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hvar</span> <span class="kwd">in</span> <span class="id">Hsv2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv">P_exps_det_exp_inv</a></span> <span class="kwd">in</span> <span class="id">Hes</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.typesof">typesof</a></span> <span class="id">es</span>)) <span class="kwd">as</span> <span class="id">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typesof_annots">length_typesof_annots</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">ss0</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.typesof">typesof</a></span> <span class="id">es</span>)) <span class="kwd">as</span> <span class="id">Hlen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exps_numstreams">sem_exps_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typesof_annots">length_typesof_annots</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hk</span> <span class="id">Hlen1</span> <span class="id">Hlen2</span> <span class="id">Hsv2</span> <span class="id">Hes</span> <span class="id">Hwhen1</span> <span class="id">Hwhen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite_Forall_forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.when_detn">when_detn</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">Hes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">Hsv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?????? <span class="id">Hk</span> <span class="id">Hin</span> <span class="id">Hvar</span> <span class="id">Hes</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="tactic">assert</span> (<span class="id">Hwt</span>':=<span class="id">Hwt</span>). <span class="id">inv</span> <span class="id">Hwt</span>'. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">as</span> <span class="id">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hs1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">as</span> <span class="id">Hlen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hs2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | | | |????????? <span class="id">Hsv1</span> <span class="id">Hse1</span> <span class="id">Hmerge1</span>| | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | | | |????????? <span class="id">Hsv2</span> <span class="id">Hse2</span> <span class="id">Hmerge2</span>| | |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hvar</span> <span class="kwd">in</span> <span class="id">Hsv1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xs1</span> <span class="id">xs2</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs2</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k0</span> <span class="id">vs</span> []) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k0</span> <span class="id">vs0</span> [])) <span class="kwd">as</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.Forall2Brs_det_exp_inv">Forall2Brs_det_exp_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">Hmerge1</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">Hmerge1</span> <span class="kwd">as</span> (?&amp;<span class="id">Hmerge1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">Hmerge2</span> <span class="kwd">as</span> (?&amp;<span class="id">Hmerge2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.merge_detn">merge_detn</a></span>. 5:<span class="tactic">eapply</span> <span class="id">Hmerge1</span>; <span class="tactic">eauto</span>. 6:<span class="tactic">eapply</span> <span class="id">Hmerge2</span>; <span class="tactic">eauto</span>. 3,4:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3,4:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>]. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hse1</span>, <span class="id">Hse2</span>; <span class="tactic">auto</span>. 1,2:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id">Hse1</span>, <span class="id">H5</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq_NoDup">seq_NoDup</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ????? <span class="id">Hk</span> <span class="id">Hse</span> <span class="id">Hvar</span> <span class="id">Hes</span> ?? <span class="id">Hwt</span> <span class="id">Hs1</span> <span class="id">Hs2</span>. <span class="tactic">assert</span> (<span class="id">Hwt</span>':=<span class="id">Hwt</span>). <span class="id">inv</span> <span class="id">Hwt</span>'; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;total&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">as</span> <span class="id">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hs1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">as</span> <span class="id">Hlen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hs2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | | | | |????????? <span class="id">Hsv1</span> <span class="id">Hse1</span> <span class="id">Hcase1</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | | | | |????????? <span class="id">Hsv2</span> <span class="id">Hse2</span> <span class="id">Hcase2</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hse</span> <span class="kwd">in</span> <span class="id">Hsv1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>. <span class="tactic">specialize</span> (<span class="id">Hsv1</span> <span class="id">Hsv2</span>). <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hsv1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xs1</span> <span class="id">xs2</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs2</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k0</span> <span class="id">vs</span> []) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k0</span> <span class="id">vs0</span> [])) <span class="kwd">as</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.Forall2Brs_det_exp_inv">Forall2Brs_det_exp_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_length">Forall3_length</a></span> <span class="kwd">in</span> <span class="id">Hcase1</span> <span class="kwd">as</span> (?&amp;?). <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">Hcase1</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hcase1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">Hcase2</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hcase2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.case_detn">case_detn</a></span>. 6:<span class="tactic">eapply</span> <span class="id">Hcase1</span>; <span class="tactic">eauto</span>. 7:<span class="tactic">eapply</span> <span class="id">Hcase2</span>; <span class="tactic">eauto</span>. 1-5:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4,5:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>]. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hse1</span>, <span class="id">Hse2</span>; <span class="tactic">auto</span>. 1,2:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id">Hse1</span>, <span class="id">H6</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq_NoDup">seq_NoDup</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> ??. <span class="tactic">instantiate</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="tactic">instantiate</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="tactic">intros</span> <span class="id">Hnth1</span> <span class="id">Hnth2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_nth">map_nth</a></span> <span class="kwd">with</span> (<span class="id">d</span>:=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux.bool_velus_type">bool_velus_type</a></span>) <span class="kwd">in</span> <span class="id">Hnth1</span>. <span class="id">inv</span> <span class="id">Hnth1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;default&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.typesof">typesof</a></span> <span class="id">d0</span>)) <span class="kwd">as</span> <span class="id">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hs1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">ss2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.typesof">typesof</a></span> <span class="id">d0</span>)) <span class="kwd">as</span> <span class="id">Hlen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp_numstreams">sem_exp_numstreams</a></span> <span class="kwd">in</span> <span class="id">Hs2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">ltyping</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [| | | | | | | | | | | |?????????? <span class="id">Hsv1</span> <span class="id">_</span> <span class="id">Hse1</span> <span class="id">Hd1</span> <span class="id">Hcase1</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [| | | | | | | | | | | |?????????? <span class="id">Hsv2</span> <span class="id">_</span> <span class="id">Hse2</span> <span class="id">Hd2</span> <span class="id">Hcase2</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hse</span> <span class="kwd">in</span> <span class="id">Hsv1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>. <span class="tactic">specialize</span> (<span class="id">Hsv1</span> <span class="id">Hsv2</span>). <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hsv1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="kwd">fun</span> <span class="id">xs1</span> <span class="id">xs2</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">xs2</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k0</span> <span class="id">vs</span> []) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k0</span> <span class="id">vs0</span> [])) <span class="kwd">as</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.Forall2Brs_det_exp_inv">Forall2Brs_det_exp_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_length">Forall3_length</a></span> <span class="kwd">in</span> <span class="id">Hcase1</span> <span class="kwd">as</span> (?&amp;?). <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv">P_exps_det_exp_inv</a></span> <span class="kwd">in</span> <span class="id">Hes</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Forall2Brs_fst">Forall2Brs_fst</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">Hcase1</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hcase1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall3_forall3">Forall3_forall3</a></span> <span class="kwd">in</span> <span class="id">Hcase2</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hcase2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.case_detn">case_detn</a></span>. 6:<span class="tactic">eapply</span> <span class="id">Hcase1</span>; <span class="tactic">eauto</span>. 7:<span class="tactic">eapply</span> <span class="id">Hcase2</span>; <span class="tactic">eauto</span>. 1-5:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4,5:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>]. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hse2</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hse1</span>, <span class="id">Hse2</span>; <span class="tactic">auto</span>. 1,2:<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hse1</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, <span class="id">Hse1</span>, &lt;-<span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> ??. <span class="tactic">instantiate</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="tactic">instantiate</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="tactic">intros</span> <span class="id">Hnth1</span> <span class="id">Hnth2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">map_nth</span>' <span class="kwd">with</span> (<span class="id">d</span>':=<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.def_stream">def_stream</a></span>) <span class="kwd">in</span> <span class="id">Hnth1</span>, <span class="id">Hnth2</span>. <span class="id">inv</span> <span class="id">Hnth1</span>. <span class="id">inv</span> <span class="id">Hnth2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">setoid_rewrite</span> &lt;-<span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">setoid_rewrite</span> &lt;-<span class="id">H1</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;app&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ????? <span class="id">Hlen</span> <span class="id">Hes</span> <span class="id">Her</span> ?? <span class="id">Hwt</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>. <span class="id">inv</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hsem1</span> <span class="kwd">as</span> [| | | | | | | | | | | | |?????????? <span class="id">Hes1</span> <span class="id">Her1</span> <span class="id">Hbools1</span> <span class="id">Hn1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hsem2</span> <span class="kwd">as</span> [| | | | | | | | | | | | |?????????? <span class="id">Hes2</span> <span class="id">Her2</span> <span class="id">Hbools2</span> <span class="id">Hn2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv_all">P_exps_det_exp_inv_all</a></span> <span class="kwd">in</span> <span class="id">Hes</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span> <span class="kwd">in</span> <span class="id">Her1</span>, <span class="id">Her2</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv_all">P_exps_det_exp_inv_all</a></span> <span class="kwd">in</span> <span class="id">Her</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#concat_map_singl1">concat_map_singl1</a></span> <span class="kwd">in</span> <span class="id">Her</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.bools_ofs_detn">bools_ofs_detn</a></span> <span class="kwd">in</span> <span class="id">Hbools2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall2">Forall2</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)) <span class="id">ss1</span> <span class="id">ss2</span>) <span class="kwd">as</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">Heq</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Heq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Heq</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Hn1</span> 0). <span class="id">inv</span> <span class="id">Hn1</span>. <span class="tactic">rewrite</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.idents">idents</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_1">Forall2_map_1</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_map_2">Forall2_map_2</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H2</span>, &lt;-<span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStNs_unmask">EqStNs_unmask</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.HdetG">HdetG</a></span>. 2,3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStNs_mask">EqStNs_mask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LSEMDETERMINISM.sem_equation_det.Hnd">Hnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> Γ)).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_equation_S">det_equation_S</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">xs</span> <span class="id">es</span> <span class="id">k</span> <span class="id">cx</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_equation">wt_equation</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> Γ (<span class="id">xs</span>, <span class="id">es</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_equation">Sem.sem_equation</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> (<span class="id">xs</span>, <span class="id">es</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_equation">Sem.sem_equation</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> (<span class="id">xs</span>, <span class="id">es</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_inv">det_exp_inv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>) <span class="id">es</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k</span> <span class="id">xs</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>) <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="comment">(*&nbsp;Hn&nbsp;&nbsp;*)</span>(<span class="id">Hwt1</span>&amp;<span class="id">Hwt2</span>) <span class="id">Hsem1</span> <span class="id">Hsem2</span> <span class="id">Hnum</span> <span class="id">HSn</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem1</span>. <span class="id">inv</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.P_exps_det_exp_inv">P_exps_det_exp_inv</a></span> <span class="kwd">in</span> <span class="id">HSn</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ???. <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span>' <span class="id">Hv1</span> <span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> (<span class="id">Hl1</span>&amp;<span class="id">Heq1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_forall2">Forall2_forall2</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> (<span class="id">Hl2</span>&amp;<span class="id">Heq2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_snd_det">HasCaus_snd_det</a></span> <span class="kwd">in</span> <span class="id">Hin</span>; <span class="tactic">eauto</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_morph">EqStN_morph</a></span>. 3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_det">sem_var_det</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.NoDup_HasCaus_HasLastCaus">NoDup_HasCaus_HasLastCaus</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_equation_det">sem_equation_det</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.sem_clock_detN">sem_clock_detN</a></span> <span class="id">n</span> Γ : <span class="kwd">forall</span> <span class="id">ck</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">Hi1</span> <span class="id">Hl1</span> <span class="id">Hi2</span> <span class="id">Hl2</span> <span class="id">bs1</span>' <span class="id">bs2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.wx_clock">wx_clock</a></span> Γ <span class="id">ck</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks.Is_free_in_clock">Is_free_in_clock</a></span> <span class="id">x</span> <span class="id">ck</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> (<span class="id">Hi1</span>, <span class="id">Hl1</span>) (<span class="id">Hi2</span>, <span class="id">Hl2</span>) <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_clock">sem_clock</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> <span class="id">ck</span> <span class="id">bs1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_clock">sem_clock</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> <span class="id">ck</span> <span class="id">bs2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span>' <span class="id">bs2</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ck</span>; <span class="tactic">intros</span> * <span class="id">Hbs</span> <span class="id">Hwx</span> <span class="id">Hck</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>; <span class="id">inv</span> <span class="id">Hwx</span>; <span class="id">inv</span> <span class="id">Hsem1</span>; <span class="id">inv</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">H0</span>, &lt;-<span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hck</span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks.Is_free_in_clock">Is_free_in_clock</a></span> <span class="kwd">with</span> <span class="id">senv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.enums_of_detn">enums_of_detn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_var_inv_mask">det_var_inv_mask</a></span> : <span class="kwd">forall</span> Γ <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">rs1</span> <span class="id">Hi1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">rs2</span> <span class="id">Hi2</span>) <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq</span> <span class="id">Hdet</span> ????.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">Hv1</span> <span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:(<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_mask_inv">sem_var_mask_inv</a></span> <span class="kwd">in</span> <span class="id">Hv1</span> <span class="kwd">as</span> (?&amp;<span class="id">Hv1</span>&amp;<span class="id">Heq1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_mask_inv">sem_var_mask_inv</a></span> <span class="kwd">in</span> <span class="id">Hv2</span> <span class="kwd">as</span> (?&amp;<span class="id">Hv2</span>&amp;<span class="id">Heq2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heq1</span>, <span class="id">Heq2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_mask">EqStN_mask</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hdet</span> <span class="kwd">in</span> <span class="id">Hv2</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_var_inv_unmask">det_var_inv_unmask</a></span> : <span class="kwd">forall</span> Γ <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">rs1</span> <span class="id">rs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">rs1</span> <span class="id">Hi1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">rs2</span> <span class="id">Hi2</span>) <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq</span> <span class="id">Hdet</span> ???.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">Hv1</span> <span class="id">Hv2</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_unmask">EqStN_unmask</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>; [<span class="id">edestruct</span> <span class="id">Hdet</span> <span class="kwd">as</span> (<span class="id">Hd</span>&amp;<span class="id">_</span>)|<span class="id">edestruct</span> <span class="id">Hdet</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hd</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hd</span>; <span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_mask">sem_var_mask</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.EqStN_fwhen">EqStN_fwhen</a></span> {<span class="id">A</span>} (<span class="id">absent</span> : <span class="id">A</span>) : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">sc1</span> <span class="id">sc2</span> <span class="id">xs1</span> <span class="id">xs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">sc1</span> <span class="id">sc2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.fwhen">fwhen</a></span> <span class="id">absent</span> <span class="id">c</span> <span class="id">sc1</span> <span class="id">xs1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.fwhen">fwhen</a></span> <span class="id">absent</span> <span class="id">c</span> <span class="id">sc2</span> <span class="id">xs2</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span> * <span class="id">Heq1</span> <span class="id">Heq2</span> <span class="id">k</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coindstreams</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heq1</span>; <span class="id">inv</span> <span class="id">Heq2</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.fwhen_Cons">fwhen_Cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">k</span> <span class="kwd">as</span> [|[|]], <span class="id">x2</span>; <span class="tactic">try</span> (<span class="tactic">solve</span> [<span class="tactic">constructor</span>; <span class="tactic">auto</span>]).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.EqStN_unwhen">EqStN_unwhen</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">tx</span> <span class="id">tn</span> <span class="id">sc1</span> <span class="id">sc2</span> <span class="id">xs1</span> <span class="id">xs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tn</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.wt_stream">wt_stream</a></span> <span class="id">sc1</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op.Tenum">Tenum</a></span> <span class="id">tx</span> <span class="id">tn</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.wt_stream">wt_stream</a></span> <span class="id">sc2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op.Tenum">Tenum</a></span> <span class="id">tx</span> <span class="id">tn</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">sc1</span> <span class="id">sc2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">sel</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">sel</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tn</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">xs1</span>' <span class="id">xs2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when">when</a></span> <span class="id">sel</span> <span class="id">xs1</span> <span class="id">sc1</span> <span class="id">xs1</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when">when</a></span> <span class="id">sel</span> <span class="id">xs2</span> <span class="id">sc2</span> <span class="id">xs2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span>' <span class="id">xs2</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">xs1</span> <span class="id">xs2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Htn</span> <span class="id">Hwt1</span> <span class="id">Hwt2</span> <span class="id">Heq1</span> <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span>. <span class="tactic">intros</span> ? <span class="id">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span> <span class="kwd">in</span> <span class="id">Heq1</span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span> <span class="kwd">in</span> <span class="id">Hwt1</span>; <span class="tactic">instantiate</span> (1:=<span class="id">k</span>) <span class="kwd">in</span> <span class="id">Hwt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonStreams.html#SForall_forall">SForall_forall</a></span> <span class="kwd">in</span> <span class="id">Hwt2</span>; <span class="tactic">instantiate</span> (1:=<span class="id">k</span>) <span class="kwd">in</span> <span class="id">Hwt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sc2</span> # <span class="id">k</span>) <span class="id">eqn</span>:<span class="id">Heq3</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">rewrite</span> <span class="id">Heq1</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">Hwt1</span>; <span class="id">inv</span> <span class="id">Hwt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">Heq2</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hf1</span>&amp;<span class="id">Hf2</span>&amp;<span class="id">Heq</span>). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_seq">in_seq</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_spec">when_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">k</span>) <span class="kwd">in</span> <span class="id">Hf1</span> <span class="kwd">as</span> [|[|]]; <span class="id">destruct_conjs</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_spec">when_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">k</span>) <span class="kwd">in</span> <span class="id">Hf2</span> <span class="kwd">as</span> [|[|]]; <span class="id">destruct_conjs</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">v0</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tn</span>))) <span class="kwd">as</span> <span class="id">Hin</span> <span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_seq">in_seq</a></span>; <span class="id">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Heq2</span> <span class="id">_</span> <span class="id">Hin</span>) <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hf1</span>&amp;<span class="id">Hf2</span>&amp;<span class="id">Heq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_spec">when_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">k</span>) <span class="kwd">in</span> <span class="id">Hf1</span> <span class="kwd">as</span> [|[|]]; <span class="id">destruct_conjs</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_spec">when_spec</a></span> <span class="kwd">with</span> (<span class="id">n</span>:=<span class="id">k</span>) <span class="kwd">in</span> <span class="id">Hf2</span> <span class="kwd">as</span> [|[|]]; <span class="id">destruct_conjs</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_spec">EqStN_spec</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>, <span class="id">H4</span>, &lt;-<span class="id">H3</span>, <span class="id">Heq</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_var_inv_when">det_var_inv_when</a></span> : <span class="kwd">forall</span> Γ <span class="id">n</span> <span class="id">sc1</span> <span class="id">sc2</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>' <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">sc1</span> <span class="id">sc2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.when_hist">when_hist</a></span> <span class="id">c</span> <span class="id">Hi1</span> <span class="id">sc1</span> <span class="id">Hi1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.when_hist">when_hist</a></span> <span class="id">c</span> <span class="id">Hi2</span> <span class="id">sc2</span> <span class="id">Hi2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>' <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Heq</span> <span class="id">Hdet</span> * (<span class="id">Hf11</span>&amp;<span class="id">Hf12</span>) (<span class="id">Hf21</span>&amp;<span class="id">Hf22</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">Hv1</span> <span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_when_inv">sem_var_when_inv</a></span> <span class="kwd">in</span> <span class="id">Hv1</span> <span class="kwd">as</span> (?&amp;<span class="id">Hv1</span>&amp;<span class="id">Heq1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_when_inv">sem_var_when_inv</a></span> <span class="kwd">in</span> <span class="id">Hv2</span> <span class="kwd">as</span> (?&amp;<span class="id">Hv2</span>&amp;<span class="id">Heq2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_fwhen">when_fwhen</a></span> <span class="kwd">in</span> <span class="id">Heq1</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_fwhen">when_fwhen</a></span> <span class="kwd">in</span> <span class="id">Heq2</span>. <span class="tactic">rewrite</span> <span class="id">Heq1</span>, <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_fwhen">EqStN_fwhen</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hdet</span> <span class="kwd">in</span> <span class="id">Hv2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_when_inv">sem_var_when_inv</a></span> <span class="kwd">in</span> <span class="id">Hv1</span> <span class="kwd">as</span> (?&amp;<span class="id">Hv1</span>&amp;<span class="id">Heq1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_when_inv">sem_var_when_inv</a></span> <span class="kwd">in</span> <span class="id">Hv2</span> <span class="kwd">as</span> (?&amp;<span class="id">Hv2</span>&amp;<span class="id">Heq2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_fwhen">when_fwhen</a></span> <span class="kwd">in</span> <span class="id">Heq1</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_fwhen">when_fwhen</a></span> <span class="kwd">in</span> <span class="id">Heq2</span>. <span class="tactic">rewrite</span> <span class="id">Heq1</span>, <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_fwhen">EqStN_fwhen</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hdet</span> <span class="kwd">in</span> <span class="id">Hv2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_var_inv_unwhen">det_var_inv_unwhen</a></span> : <span class="kwd">forall</span> Γ <span class="id">tx</span> <span class="id">tn</span> <span class="id">n</span> <span class="id">sc1</span> <span class="id">sc2</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tn</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.wt_stream">wt_stream</a></span> <span class="id">sc1</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op.Tenum">Tenum</a></span> <span class="id">tx</span> <span class="id">tn</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.wt_stream">wt_stream</a></span> <span class="id">sc2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op.Tenum">Tenum</a></span> <span class="id">tx</span> <span class="id">tn</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">sc1</span> <span class="id">sc2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">c</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#seq">seq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tn</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">y</span> <span class="id">x</span> -&gt; <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">y</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">Hi1</span>') /\ <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">y</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">Hi2</span>'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.when_hist">when_hist</a></span> <span class="id">c</span> <span class="id">Hi1</span> <span class="id">sc1</span> <span class="id">Hi1</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.when_hist">when_hist</a></span> <span class="id">c</span> <span class="id">Hi2</span> <span class="id">sc2</span> <span class="id">Hi2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>' <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, ~<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">y</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hn</span> <span class="id">Hwt1</span> <span class="id">Hwt2</span> <span class="id">Heq</span> <span class="id">Hdet</span> <span class="id">Hnin</span> ???.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">Hv1</span> <span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_unwhen">EqStN_unwhen</a></span>. 4:<span class="tactic">eauto</span>. 1-3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hin</span>'. <span class="id">edestruct</span> <span class="id">Hdet</span> <span class="kwd">as</span> (<span class="id">Hi1</span>'&amp;<span class="id">Hi2</span>'&amp;(<span class="id">Hin1</span>&amp;<span class="id">Hin2</span>)&amp;(<span class="id">Hf1</span>&amp;<span class="id">_</span>)&amp;(<span class="id">Hf2</span>&amp;<span class="id">_</span>)&amp;<span class="id">Hdet</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="tactic">exists</span> <span class="id">vs1</span>', <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">Hi1</span>') <span class="id">x0</span> <span class="id">vs1</span>') <span class="kwd">as</span> (?&amp;<span class="id">Hvar1</span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id">Hin1</span>; <span class="tactic">do</span> 2 <span class="tactic">econstructor</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="tactic">exists</span> <span class="id">vs1</span>', <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">Hi2</span>') <span class="id">x0</span> <span class="id">vs1</span>') <span class="kwd">as</span> (?&amp;<span class="id">Hvar2</span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id">Hin2</span>; <span class="tactic">do</span> 2 <span class="tactic">econstructor</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hvar1</span>':=<span class="id">Hvar1</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_when_inv">sem_var_when_inv</a></span> <span class="kwd">in</span> <span class="id">Hvar1</span>' <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hv1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hvar2</span>':=<span class="id">Hvar2</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_when_inv">sem_var_when_inv</a></span> <span class="kwd">in</span> <span class="id">Hvar2</span>' <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hv2</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">Hv1</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">Hv2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">Hv1</span>, <span class="id">Hv2</span> <span class="kwd">in</span> *. <span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_fwhen">when_fwhen</a></span> <span class="kwd">in</span> <span class="id">Hv1</span>'. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.when_fwhen">when_fwhen</a></span> <span class="kwd">in</span> <span class="id">Hv2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hdet</span>' <span class="kwd">as</span> (<span class="id">Hdet1</span>&amp;<span class="id">_</span>). <span class="tactic">eapply</span> <span class="id">Hdet1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hnin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMDETERMINISM.det_var_inv_weaken">det_var_inv_weaken</a></span> Γ <span class="id">n</span> : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdet</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>; [<span class="id">edestruct</span> <span class="id">Hdet</span> <span class="kwd">as</span> (<span class="id">Hdet1</span>&amp;<span class="id">_</span>)|<span class="id">edestruct</span> <span class="id">Hdet</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hdet2</span>)]; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_weaken">EqStN_weaken</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMDETERMINISM.det_var_inv_local">det_var_inv_local</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ (<span class="id">locs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op.type">type</a></span> * <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks.clock">clock</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.exp">exp</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>)))) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">Hl1</span> <span class="id">Hl2</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>' <span class="id">Hl1</span>' <span class="id">Hl2</span>' <span class="id">n</span> <span class="id">cx</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">x</span> <span class="id">locs</span> -&gt; ~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">Hi1</span>' &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsVar">IsVar</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">Hi2</span>' &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsVar">IsVar</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">Hl1</span>' &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsLast">IsLast</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">Hl2</span>' &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsLast">IsLast</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> (<span class="id">Hi1</span>, <span class="id">Hl1</span>) (<span class="id">Hi2</span>, <span class="id">Hl2</span>) <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">n</span> (<span class="id">Hi1</span>', <span class="id">Hl1</span>') (<span class="id">Hi2</span>', <span class="id">Hl2</span>') <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (Γ ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">n</span> (<span class="id">Hi1</span> + <span class="id">Hi1</span>', <span class="id">Hl1</span> + <span class="id">Hl1</span>') (<span class="id">Hi2</span> + <span class="id">Hi2</span>', <span class="id">Hl2</span> + <span class="id">Hl2</span>') <span class="id">cx</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hnd</span> <span class="comment">(*&nbsp;Hdoml1&nbsp;Hdoml2&nbsp;&nbsp;*)</span><span class="id">Hdom1</span> <span class="id">Hdom2</span> <span class="id">Hdoml1</span> <span class="id">Hdoml2</span> <span class="comment">(*&nbsp;Hrefl1&nbsp;Hrefl2&nbsp;&nbsp;*)</span><span class="id">Hsc1</span> <span class="id">Hsc2</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">Hv1</span> <span class="id">Hv2</span>; <span class="id">inv</span> <span class="id">Hin</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">Hin</span>|<span class="id">Hin</span>]; <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">Hsc1</span> <span class="kwd">as</span> (<span class="id">Hinv</span>&amp;<span class="id">_</span>); [|<span class="tactic">eapply</span> <span class="id">Hinv</span>]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">senv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_union">sem_var_union</a></span> <span class="kwd">in</span> <span class="id">Hv1</span> <span class="kwd">as</span> [<span class="id">Hv1</span>|<span class="id">Hv1</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hnd</span>. 2:<span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsVar_senv_of_locs">IsVar_senv_of_locs</a></span>, <span class="id">Hdom1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_var_In">sem_var_In</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_union">sem_var_union</a></span> <span class="kwd">in</span> <span class="id">Hv2</span> <span class="kwd">as</span> [<span class="id">Hv2</span>|<span class="id">Hv2</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hnd</span>. 2:<span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsVar_senv_of_locs">IsVar_senv_of_locs</a></span>, <span class="id">Hdom2</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_var_In">sem_var_In</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">Hsc2</span> <span class="kwd">as</span> (<span class="id">Hinv</span>&amp;<span class="id">_</span>); [|<span class="tactic">eapply</span> <span class="id">Hinv</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">left</span>. 1,2:<span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">sem_var_union</span>' <span class="kwd">in</span> <span class="id">Hv1</span> <span class="kwd">as</span> [(<span class="id">Hn</span>&amp;<span class="id">Hv1</span>)|<span class="id">Hv1</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hn</span>, <span class="id">Hdom1</span>. <span class="tactic">constructor</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">sem_var_union</span>' <span class="kwd">in</span> <span class="id">Hv2</span> <span class="kwd">as</span> [(<span class="id">Hn</span>&amp;<span class="id">Hv2</span>)|<span class="id">Hv2</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hn</span>, <span class="id">Hdom2</span>. <span class="tactic">constructor</span>. <span class="id">solve_In</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">Hsc1</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hinv</span>); [|<span class="tactic">eapply</span> <span class="id">Hinv</span>]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">senv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_union">sem_var_union</a></span> <span class="kwd">in</span> <span class="id">Hv1</span> <span class="kwd">as</span> [<span class="id">Hv1</span>|<span class="id">Hv1</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hnd</span>. 2:<span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsLast_senv_of_locs">IsLast_senv_of_locs</a></span>, <span class="id">Hdoml1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_var_In">sem_var_In</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_union">sem_var_union</a></span> <span class="kwd">in</span> <span class="id">Hv2</span> <span class="kwd">as</span> [<span class="id">Hv2</span>|<span class="id">Hv2</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hnd</span>. 2:<span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsLast_senv_of_locs">IsLast_senv_of_locs</a></span>, <span class="id">Hdoml2</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_var_In">sem_var_In</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id">Hsc2</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hinv</span>); [|<span class="tactic">eapply</span> <span class="id">Hinv</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">right</span>. 1,2:<span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">sem_var_union</span>' <span class="kwd">in</span> <span class="id">Hv1</span> <span class="kwd">as</span> [(<span class="id">Hn</span>&amp;<span class="id">Hv1</span>)|<span class="id">Hv1</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hn</span>, <span class="id">Hdoml1</span>. <span class="tactic">econstructor</span>. <span class="id">solve_In</span>. <span class="tactic">simpl</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">sem_var_union</span>' <span class="kwd">in</span> <span class="id">Hv2</span> <span class="kwd">as</span> [(<span class="id">Hn</span>&amp;<span class="id">Hv2</span>)|<span class="id">Hv2</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">Hn</span>, <span class="id">Hdoml2</span>. <span class="tactic">econstructor</span>. <span class="id">solve_In</span>. <span class="tactic">simpl</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMDETERMINISM.det_var_inv_branch">det_var_inv_branch</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">caus</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">Hl1</span> <span class="id">Hl2</span> <span class="id">n</span> <span class="id">cx</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> (<span class="id">Hi1</span>, <span class="id">Hl1</span>) (<span class="id">Hi2</span>, <span class="id">Hl2</span>) <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">vs1</span> <span class="id">vs2</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, <span class="id">cx</span>) <span class="id">caus</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hi1</span> <span class="id">x</span> <span class="id">vs1</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hi2</span> <span class="id">x</span> <span class="id">vs2</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">vs1</span> <span class="id">vs2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.replace_idcaus">replace_idcaus</a></span> <span class="id">caus</span> Γ) <span class="id">n</span> (<span class="id">Hi1</span>, <span class="id">Hl1</span>) (<span class="id">Hi2</span>, <span class="id">Hl2</span>) <span class="id">cx</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsc1</span> <span class="id">Hsc2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">Hv1</span> <span class="id">Hv2</span>; <span class="id">inv</span> <span class="id">Hin</span>; <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#assoc_ident">assoc_ident</a></span> <span class="id">x</span> <span class="id">caus</span>) <span class="id">eqn</span>:<span class="id">Hassoc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.Common.html#assoc_ident_In">assoc_ident_In</a></span> <span class="kwd">in</span> <span class="id">Hassoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hsc2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">edestruct</span> <span class="id">Hsc1</span> <span class="kwd">as</span> (<span class="id">Hinv</span>&amp;<span class="id">_</span>); [|<span class="tactic">eapply</span> <span class="id">Hinv</span>]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">senv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.ann_with_caus_causl_last">ann_with_caus_causl_last</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hsc1</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hinv</span>); [|<span class="tactic">eapply</span> <span class="id">Hinv</span>]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">senv</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det">sem_block_det</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">PSyn</span> : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">prefs</span> : <span class="id"><a href="Velus.Common.Common.html#PS.t">PS.t</a></span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="LSEMDETERMINISM.sem_block_det.G">G</a></span>: @<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.prefs">prefs</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det.sem_scope">sem_scope</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">A</span> : <span class="kwd">Type</span>}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det.sem_scope.sem_block">sem_block</a></span> : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.history">history</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.history">history</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_scope.A">A</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LSEMDETERMINISM.sem_scope_det">sem_scope_det</a></span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">envS</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.history">history</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.scope">scope</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_scope.A">A</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMDETERMINISM.Sscope">Sscope</a></span> : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>' <span class="id">Hl1</span> <span class="id">Hl2</span> <span class="id">Hl1</span>' <span class="id">Hl2</span>' <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">locs</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">Hi1</span>' &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsVar">IsVar</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">Hi2</span>' &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsVar">IsVar</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">Hl1</span>' &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsLast">IsLast</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.In">FEnv.In</a></span> <span class="id">x</span> <span class="id">Hl2</span>' &lt;-&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsLast">IsLast</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span>) -&gt;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">ck</span> <span class="id">cx</span> <span class="id">e0</span> <span class="id">clx</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, (<span class="id">ty</span>, <span class="id">ck</span>, <span class="id">cx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">e0</span>, <span class="id">clx</span>))) <span class="id">locs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">vs0</span> <span class="id">vs1</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> (<span class="id">Hi1</span> + <span class="id">Hi1</span>', <span class="id">Hl1</span> + <span class="id">Hl1</span>') <span class="id">bs1</span> <span class="id">e0</span> [<span class="id">vs0</span>] /\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hi1</span>' <span class="id">x</span> <span class="id">vs1</span> /\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.fby">fby</a></span> <span class="id">vs0</span> <span class="id">vs1</span> <span class="id">vs</span> /\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hl1</span>' <span class="id">x</span> <span class="id">vs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">ck</span> <span class="id">cx</span> <span class="id">e0</span> <span class="id">clx</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">x</span>, (<span class="id">ty</span>, <span class="id">ck</span>, <span class="id">cx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">e0</span>, <span class="id">clx</span>))) <span class="id">locs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">vs0</span> <span class="id">vs1</span> <span class="id">vs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> (<span class="id">Hi2</span> + <span class="id">Hi2</span>', <span class="id">Hl2</span> + <span class="id">Hl2</span>') <span class="id">bs2</span> <span class="id">e0</span> [<span class="id">vs0</span>] /\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hi2</span>' <span class="id">x</span> <span class="id">vs1</span> /\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.fby">fby</a></span> <span class="id">vs0</span> <span class="id">vs1</span> <span class="id">vs</span> /\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hl2</span>' <span class="id">x</span> <span class="id">vs</span>) -&gt;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_scope.sem_block">sem_block</a></span> (<span class="id">Hi1</span> + <span class="id">Hi1</span>', <span class="id">Hl1</span> + <span class="id">Hl1</span>') (<span class="id">Hi2</span> + <span class="id">Hi2</span>', <span class="id">Hl2</span> + <span class="id">Hl2</span>') <span class="id">blks</span> -&gt;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">n</span> (<span class="id">Hi1</span>', <span class="id">Hl1</span>') (<span class="id">Hi2</span>', <span class="id">Hl2</span>'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">envS</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id">Hi1</span>', <span class="id">Hl1</span>') (<span class="id">Hi2</span>', <span class="id">Hl2</span>') <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_scope_det</span> <span class="id">n</span> <span class="id">envS</span> (<span class="id">Hi1</span>, <span class="id">Hl1</span>) (<span class="id">Hi2</span>, <span class="id">Hl2</span>) <span class="id">bs1</span> <span class="id">bs2</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_scope">sem_scope</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det.sem_branch">sem_branch</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">A</span> : <span class="kwd">Type</span>}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det.sem_branch.sem_block">sem_block</a></span> : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_branch.A">A</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LSEMDETERMINISM.sem_branch_det">sem_branch_det</a></span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">envS</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.history">history</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.history">history</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.branch">branch</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_branch.A">A</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMDETERMINISM.Sbranch">Sbranch</a></span> : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">Hl1</span> <span class="id">Hl2</span> <span class="id">caus</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_branch.sem_block">sem_block</a></span> <span class="id">blks</span> -&gt;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">x</span>, <span class="id">_</span>) =&gt; <span class="kwd">forall</span> <span class="id">vs1</span> <span class="id">vs2</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hi1</span> <span class="id">x</span> <span class="id">vs1</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hi2</span> <span class="id">x</span> <span class="id">vs2</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">vs1</span> <span class="id">vs2</span>) <span class="id">caus</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">x</span>, <span class="id">cx</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> <span class="id">envS</span> -&gt; <span class="kwd">forall</span> <span class="id">vs1</span> <span class="id">vs2</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hi1</span> <span class="id">x</span> <span class="id">vs1</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var">sem_var</a></span> <span class="id">Hi2</span> <span class="id">x</span> <span class="id">vs2</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">vs1</span> <span class="id">vs2</span>) <span class="id">caus</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_branch_det</span> <span class="id">n</span> <span class="id">envS</span> (<span class="id">Hi1</span>, <span class="id">Hl1</span>) (<span class="id">Hi2</span>, <span class="id">Hl2</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">sem_branch_det</span>' : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.branch">branch</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_branch.A">A</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Sbranch</span>' : <span class="kwd">forall</span> <span class="id">caus</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_branch.sem_block">sem_block</a></span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_branch_det</span>' (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.sem_branch">sem_branch</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">envS</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) : <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.history">history</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.history">history</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Stream">Stream</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMDETERMINISM.Sdetbeq">Sdetbeq</a></span> : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">eq</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_equation">sem_equation</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> <span class="id">eq</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_equation">sem_equation</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> <span class="id">eq</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block_det</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Beq">Beq</a></span> <span class="id">eq</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMDETERMINISM.Sdetreset">Sdetreset</a></span> : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blocks</span> <span class="id">er</span> <span class="id">sr1</span> <span class="id">sr2</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> <span class="id">er</span> [<span class="id">sr1</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> <span class="id">er</span> [<span class="id">sr2</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.bools_of">bools_of</a></span> <span class="id">sr1</span> <span class="id">r1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.bools_of">bools_of</a></span> <span class="id">sr2</span> <span class="id">r2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id">sem_block_det</span> <span class="id">n</span> <span class="id">envS</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">r1</span> <span class="id">Hi1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">r2</span> <span class="id">Hi2</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.maskb">maskb</a></span> <span class="id">k</span> <span class="id">r1</span> <span class="id">bs1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.maskb">maskb</a></span> <span class="id">k</span> <span class="id">r2</span> <span class="id">bs2</span>)) <span class="id">blocks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block_det</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Breset">Breset</a></span> <span class="id">blocks</span> <span class="id">er</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMDETERMINISM.Sdetswitch">Sdetswitch</a></span> : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">branches</span> <span class="id">ec</span> <span class="id">sc1</span> <span class="id">sc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> <span class="id">ec</span> [<span class="id">sc1</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> <span class="id">ec</span> [<span class="id">sc2</span>] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.wt_streams">wt_streams</a></span> [<span class="id">sc1</span>] (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.typeof">typeof</a></span> <span class="id">ec</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.wt_streams">wt_streams</a></span> [<span class="id">sc2</span>] (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.typeof">typeof</a></span> <span class="id">ec</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> =&gt; <span class="tactic">exists</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.when_hist">when_hist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">Hi1</span> <span class="id">sc1</span> <span class="id">Hi1</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.when_hist">when_hist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">Hi2</span> <span class="id">sc2</span> <span class="id">Hi2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">let</span> <span class="id">bi1</span> := <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.fwhenb">fwhenb</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">sc1</span> <span class="id">bs1</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">bi2</span> := <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.fwhenb">fwhenb</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">blks</span>) <span class="id">sc2</span> <span class="id">bs2</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_branch_det">sem_branch_det</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id">sem_block_det</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>' <span class="id">bi1</span> <span class="id">bi2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">blks</span>)) <span class="id">branches</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block_det</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="LSEMDETERMINISM.Sdetlocal">Sdetlocal</a></span> : <span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_scope_det">sem_scope_det</a></span> (<span class="kwd">fun</span> <span class="id">Hi1</span> <span class="id">Hi2</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id">sem_block_det</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>)) <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_block_det</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Blocal">Blocal</a></span> <span class="id">s</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_branch</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_branch_det">sem_branch_det</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span>; <span class="id">destruct_conjs</span>; <span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">sem_branch_det</span>' <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span>; <span class="id">destruct_conjs</span>; <span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; (<span class="id">Syn.inv_branch</span> || <span class="id">Typ.inv_branch</span> || <span class="id">Sem.inv_branch</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_scope</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_scope_det">sem_scope_det</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span>; <span class="id">destruct_conjs</span>; <span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; (<span class="id">Syn.inv_scope</span> || <span class="id">Typ.inv_scope</span> || <span class="id">Sem.inv_scope</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">inv_block</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; (<span class="id">Syn.inv_block</span> || <span class="id">Typ.inv_block</span> || <span class="id">Sem.inv_block</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.sem_scope_det_0">sem_scope_det_0</a></span> {<span class="id">A</span>} <span class="id">P_blk1</span> <span class="id">P_blk2</span> (<span class="id">P_blk3</span>: <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">locs</span> (<span class="id">blks</span>: <span class="id">A</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_scope">sem_scope</a></span> (<span class="kwd">fun</span> <span class="id">Hi1</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> <span class="id">e</span>) <span class="id">P_blk1</span> <span class="id">Hi1</span> <span class="id">bs1</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_scope">sem_scope</a></span> (<span class="kwd">fun</span> <span class="id">Hi2</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_exp">sem_exp</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> <span class="id">e</span>) <span class="id">P_blk2</span> <span class="id">Hi2</span> <span class="id">bs2</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">Hi1</span> <span class="id">Hi2</span>, <span class="id">P_blk1</span> <span class="id">Hi1</span> <span class="id">blks</span> -&gt; <span class="id">P_blk2</span> <span class="id">Hi2</span> <span class="id">blks</span> -&gt; <span class="id">P_blk3</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_scope_det">sem_scope_det</a></span> <span class="id">P_blk3</span> 0 [] <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem1</span> <span class="id">Hsem2</span> <span class="id">Hblk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem1</span>. <span class="id">inv</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>. 7:<span class="tactic">eauto</span>. <span class="id">all</span>:<span class="id">simpl_Forall</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSt0">EqSt0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> ???. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSt0">EqSt0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.sem_branch_det_0">sem_branch_det_0</a></span> {<span class="id">A</span>} <span class="id">P_blk1</span> <span class="id">P_blk2</span> (<span class="id">P_blk3</span>: <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">caus</span> (<span class="id">blks</span>: <span class="id">A</span>) <span class="id">Hi1</span> <span class="id">Hi2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_branch">sem_branch</a></span> <span class="id">P_blk1</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_branch">sem_branch</a></span> <span class="id">P_blk2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_blk1</span> <span class="id">blks</span> -&gt; <span class="id">P_blk2</span> <span class="id">blks</span> -&gt; <span class="id">P_blk3</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_branch_det">sem_branch_det</a></span> <span class="id">P_blk3</span> 0 [] <span class="id">Hi1</span> <span class="id">Hi2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hsem1</span> <span class="id">Hsem2</span> <span class="id">Hblk</span>. <span class="tactic">repeat</span> <span class="id">inv_branch</span>. <span class="tactic">destruct</span> <span class="id">Hi1</span>, <span class="id">Hi2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">all</span>:<span class="id">simpl_Forall</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSt0">EqSt0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="id">now</span> <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det_0">sem_block_det_0</a></span> : <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> 0 [] <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hsem1</span> <span class="id">Hsem2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem1</span>; <span class="id">inv</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H7</span> <span class="id">k</span>). <span class="tactic">specialize</span> (<span class="id">H10</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>. <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_branch_det_0">sem_branch_det_0</a></span>; [<span class="tactic">apply</span> <span class="id">H4</span>|<span class="tactic">apply</span> <span class="id">H7</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;locals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_scope_det_0">sem_scope_det_0</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_scope_S">det_scope_S</a></span> {<span class="id">A</span>} <span class="id">P_nd</span> <span class="id">P_wt</span> <span class="id">f_idcaus</span> <span class="id">P_blk1</span> (<span class="id">P_blk2</span>: <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">n</span> <span class="id">envS</span> <span class="id">locs</span> (<span class="id">blks</span>: <span class="id">A</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.NoDupScope">NoDupScope</a></span> <span class="id">P_nd</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_scope">wt_scope</a></span> <span class="id">P_wt</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> Γ (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_scope">idcaus_of_scope</a></span> <span class="id">f_idcaus</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>))) <span class="id">envS</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_scope_det">sem_scope_det</a></span> <span class="id">P_blk1</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> Γ <span class="id">Hi1</span> <span class="id">Hi2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_nd</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_wt</span> Γ <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id">f_idcaus</span> <span class="id">blks</span>)) <span class="id">envS</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_blk1</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_blk2</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_scope_det">sem_scope_det</a></span> <span class="id">P_blk2</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) [] <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdet</span> <span class="id">Hndl</span> <span class="id">Hwt</span> <span class="id">Hbs</span> <span class="comment">(*&nbsp;Hdoml1&nbsp;Hdoml2&nbsp;&nbsp;*)</span><span class="id">Hsc</span> <span class="id">Hincl</span> <span class="id">Hsem</span> <span class="id">Hind</span>; <span class="tactic">repeat</span> <span class="id">inv_scope</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>. 5,6:<span class="tactic">eauto</span>. <span class="id">all</span>:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">Hind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.map_fst_senv_of_locs">map_fst_senv_of_locs</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_local">det_var_inv_local</a></span> <span class="kwd">with</span> (<span class="id">Hl1</span>:=<span class="id">Hl1</span>) (<span class="id">Hi1</span>':=<span class="id">Hi1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> * <span class="id">Hcaus</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv_In">idcaus_of_senv_In</a></span> <span class="kwd">in</span> <span class="id">Hcaus</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H13</span>, <span class="id">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>. <span class="tactic">left</span>; <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>. 2:<span class="tactic">eapply</span> <span class="id">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ??. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H13</span>, <span class="id">Hincl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> *. <span class="tactic">left</span>; <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_Forall</span>. <span class="id">now</span> <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_branch_S">det_branch_S</a></span> {<span class="id">A</span>} <span class="id">P_nd</span> <span class="id">P_wt</span> <span class="id">f_idcaus</span> <span class="id">P_blk1</span> (<span class="id">P_blk2</span>: <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">n</span> <span class="id">envS</span> <span class="id">locs</span> (<span class="id">blks</span>: <span class="id">A</span>) <span class="id">Hi1</span> <span class="id">Hi2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.NoDupBranch">NoDupBranch</a></span> <span class="id">P_nd</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_branch">wt_branch</a></span> <span class="id">P_wt</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_branch">idcaus_of_branch</a></span> <span class="id">f_idcaus</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">locs</span> <span class="id">blks</span>))) <span class="id">envS</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_branch_det">sem_branch_det</a></span> <span class="id">P_blk1</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_nd</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_wt</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id">f_idcaus</span> <span class="id">blks</span>)) <span class="id">envS</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_blk1</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_blk2</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_branch_det">sem_branch_det</a></span> <span class="id">P_blk2</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) [] <span class="id">Hi1</span> <span class="id">Hi2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">locs</span> <span class="id">blks</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdet</span> <span class="id">Hndl</span> <span class="id">Hwt</span> <span class="comment">(*&nbsp;Hdoml1&nbsp;Hdoml2&nbsp;&nbsp;*)</span><span class="id">Hsc</span> <span class="id">Hincl</span> <span class="id">Hsem</span> <span class="id">Hind</span>; <span class="tactic">repeat</span> <span class="id">inv_branch</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">Hind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>. 2:<span class="tactic">eapply</span> <span class="id">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ??. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H5</span>, <span class="id">Hincl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> *. <span class="tactic">left</span>; <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_Forall</span>. <span class="tactic">intros</span>. <span class="id">now</span> <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_block_S">det_block_S</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">blk</span> Γ <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.NoDupLocals">NoDupLocals</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_block">wt_block</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> Γ <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_locals">idcaus_of_locals</a></span> <span class="id">blk</span>)) <span class="id">envS</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) [] <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">HdetG</span> <span class="id">Hndl</span> <span class="id">Hwt</span> <span class="id">Hbs</span> <span class="comment">(*&nbsp;Hdoml1&nbsp;Hdoml2&nbsp;&nbsp;*)</span><span class="id">Hsc</span> <span class="id">Hincl</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hndl</span>; <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H14</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> *; <span class="tactic">intros</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_n">det_exp_n</a></span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.bools_of_detn">bools_of_detn</a></span> <span class="kwd">in</span> <span class="id">H13</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_mask">EqStN_mask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_mask">det_var_inv_mask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>. 2:<span class="tactic">eapply</span> <span class="id">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ??. <span class="id">solve_In</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>. <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_n">det_exp_n</a></span> <span class="kwd">in</span> <span class="id">H10</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_branch_S">det_branch_S</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_when">det_var_inv_when</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>. 2:<span class="tactic">eapply</span> <span class="id">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ??. <span class="id">simpl_In</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_fwhen">EqStN_fwhen</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>; [|<span class="tactic">eauto</span>]. <span class="tactic">intros</span> ??; <span class="id">solve_In</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;locals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_scope_S">det_scope_S</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>; [|<span class="tactic">eauto</span>]. <span class="tactic">intros</span> ??; <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det_sem_block1">sem_block_det_sem_block1</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">blk</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H10</span> <span class="id">k</span>). <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_branch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;locals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.Sscope">Sem.Sscope</a></span> <span class="kwd">with</span> (<span class="id">Hi</span>':=<span class="id">Hi1</span>') (<span class="id">Hl</span>':=<span class="id">Hl1</span>'); <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det_sem_block2">sem_block_det_sem_block2</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">blk</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H10</span> <span class="id">k</span>). <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_branch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;locals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">sem_block_det_sem_block1</span> <span class="id">sem_block_det_sem_block2</span> : <span class="id">ldet</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_var_inv_incl">det_var_inv_incl</a></span> : <span class="kwd">forall</span> Γ Γ' <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> Γ Γ' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ' <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hincl1</span> <span class="id">Hdet</span> ???.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">Hv1</span> <span class="id">Hv2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id">Hdet</span> <span class="kwd">in</span> <span class="id">Hv2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">senv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Permutation</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.sem_block_det_Perm">sem_block_det_Perm</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">blk</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">xs</span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> <span class="id">xs</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> <span class="id">ys</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.block_ind2">block_ind2</a></span>; <span class="tactic">intros</span> * <span class="id">Hperm</span> <span class="id">Hsem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">H10</span> <span class="id">k</span>). <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">esplit</span>. <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_branch</span>. <span class="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-3:<span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id">Hperm</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">inv_scope</span>. <span class="tactic">econstructor</span>. 5,6:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> <span class="id">ys</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hperm</span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_scope_cons">det_scope_cons</a></span> {<span class="id">A</span>} <span class="id">f_idcaus</span> <span class="id">P_nd</span> <span class="id">P_vd</span> <span class="id">P_wt</span> (<span class="id">P_blk1</span> <span class="id">P_blk2</span> : <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) <span class="id">P_def</span> <span class="id">P_last</span> <span class="id">P_dep</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">locs</span> (<span class="id">blks</span>: <span class="id">A</span>) Γ <span class="id">xs</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">cy</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> Γ ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_scope">idcaus_of_scope</a></span> <span class="id">f_idcaus</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.NoDupScope">NoDupScope</a></span> <span class="id">P_nd</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefinedScope">VarsDefinedScope</a></span> <span class="id">P_vd</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_scope">wt_scope</a></span> <span class="id">P_wt</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> Γ (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_scope_det">sem_scope_det</a></span> <span class="id">P_blk1</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_defined_in_scope">Is_defined_in_scope</a></span> <span class="id">P_def</span> Γ <span class="id">cy</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_last_in_scope">Is_last_in_scope</a></span> <span class="id">P_last</span> <span class="id">cy</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">bs1</span> <span class="id">bs2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.depends_on_scope">depends_on_scope</a></span> <span class="id">P_dep</span> Γ <span class="id">cy</span> <span class="id">cx</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">cx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_scope">idcaus_of_scope</a></span> <span class="id">f_idcaus</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.depends_on_scope">depends_on_scope</a></span> <span class="id">P_dep</span> Γ <span class="id">cy</span> <span class="id">cx</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> <span class="id">envS</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> Γ <span class="id">xs</span> <span class="id">Hi1</span> <span class="id">Hi2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> Γ ++ <span class="id">f_idcaus</span> <span class="id">blks</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_nd</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_vd</span> <span class="id">blks</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_wt</span> Γ <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_blk1</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P_def</span> Γ <span class="id">blks</span> \/ <span class="id">P_last</span> <span class="id">blks</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">bs1</span> <span class="id">bs2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_dep</span> Γ <span class="id">cy</span> <span class="id">cx</span> <span class="id">blks</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">cx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id">f_idcaus</span> <span class="id">blks</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_dep</span> Γ <span class="id">cy</span> <span class="id">cx</span> <span class="id">blks</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> <span class="id">envS</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">y</span> <span class="id">cy</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">P_blk2</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">y</span> <span class="id">cy</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_scope_det">sem_scope_det</a></span> <span class="id">P_blk2</span> <span class="id">n</span> (<span class="id">cy</span>::<span class="id">envS</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">HdetG</span> <span class="id">Hnd1</span> <span class="id">Hnd</span> <span class="id">Hnd2</span> <span class="id">Hvars</span> <span class="id">Hincl</span> <span class="id">Hn</span> <span class="id">Hwt</span> <span class="id">Hsem</span> <span class="id">Hbs</span> <span class="id">HSbs</span> <span class="id">HSn</span> <span class="id">HenvS</span> <span class="id">Hind</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hnd2</span>; <span class="id">inv</span> <span class="id">Hvars</span>; <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">x</span> <span class="id">locs</span> -&gt; ~ <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rename</span> <span class="id">it</span> <span class="id">into</span> <span class="id">Hnd2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hind</span> <span class="kwd">with</span> (Γ:=Γ ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="kwd">as</span> (<span class="id">Hdet</span>'&amp;<span class="id">Hcons</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_app">NoDupMembers_app</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.NoDupMembers_senv_of_locs">NoDupMembers_senv_of_locs</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.InMembers_senv_of_locs">InMembers_senv_of_locs</a></span>. <span class="tactic">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hnd2</span>; <span class="tactic">eauto</span>. <span class="id">solve_In</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv_app">idcaus_of_senv_app</a></span>, &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_NoDup">Permutation_NoDup</a></span>; [|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_Permutation_app</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.map_fst_senv_of_locs">map_fst_senv_of_locs</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.map_fst_senv_of_locs">map_fst_senv_of_locs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">incl_appl</span>'; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">intros</span> * <span class="id">_</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_local">det_var_inv_local</a></span> <span class="kwd">with</span> (<span class="id">Hl1</span>:=<span class="id">Hl1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> ? <span class="id">Hin</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H20</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv_In">idcaus_of_senv_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="id">solve_In</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">intros</span> * [<span class="id">Hdef</span>|<span class="id">Hlast</span>]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">lcaus</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">intros</span> * <span class="id">_</span> <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_local">det_var_inv_local</a></span> <span class="kwd">with</span> (<span class="id">Hl1</span>:=<span class="id">Hl1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">HSn</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>)))) <span class="kwd">as</span> <span class="id">Hin</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv_In">idcaus_of_senv_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="id">solve_In</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H21</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">H21</span>, <span class="id">HenvS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">intros</span> * <span class="id">Hin</span> <span class="id">Hdep</span>. <span class="tactic">apply</span> <span class="id">HenvS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hxs</span> <span class="id">Hinenv</span> ???.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin3</span> <span class="id">Hv1</span> <span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_snd_det">HasCaus_snd_det</a></span> <span class="kwd">in</span> <span class="id">Hinenv</span>; <span class="tactic">eauto</span>; <span class="tactic">subst</span>. 2:<span class="id">solve_NoDup_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~<span class="id"><a href="Velus.Common.CommonList.html#InMembers">InMembers</a></span> <span class="id">y</span> <span class="id">locs</span>) <span class="kwd">as</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span> ?. <span class="tactic">eapply</span> <span class="id">Hnd2</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hdet</span>' <span class="kwd">as</span> (<span class="id">Hd1</span>&amp;<span class="id">_</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_app">HasCaus_app</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hd1</span>; [<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_app">HasCaus_app</a></span>| |]; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_union2">sem_var_union2</a></span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">H2</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">H8</span>; <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.IsVar_senv_of_locs">IsVar_senv_of_locs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.NoDup_HasCaus_HasLastCaus">NoDup_HasCaus_HasLastCaus</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_NoDup_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>. 5,6:<span class="tactic">eauto</span>. <span class="id">all</span>:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="tactic">intros</span> ?? [|<span class="id">HinS</span>]; <span class="tactic">subst</span>; [|<span class="id">simpl_Forall</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_In</span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv_In">idcaus_of_senv_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> [<span class="id">Hca</span>|<span class="id">Hca</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> ???; <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hca</span>' <span class="id">Hv1</span> <span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.NoDup_HasCaus_HasLastCaus">NoDup_HasCaus_HasLastCaus</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_NoDup_app</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_snd_det">HasCaus_snd_det</a></span> <span class="kwd">in</span> <span class="id">Hca</span>; <span class="tactic">eauto</span>; <span class="tactic">subst</span>. 2:<span class="id">solve_NoDup_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hdet</span>' <span class="kwd">as</span> (<span class="id">Hd1</span>&amp;<span class="id">_</span>). 2:<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_app">HasCaus_app</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="id">inv</span> <span class="id">Hca</span>'. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#or_intror">or_intror</a></span>. <span class="id">solve_In</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hd1</span>; [<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_app">HasCaus_app</a></span>| |]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id">sem_var_union3</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> ???; <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hca</span>' <span class="id">Hv1</span> <span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.NoDup_HasCaus_HasLastCaus">NoDup_HasCaus_HasLastCaus</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_NoDup_app</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus_snd_det">HasLastCaus_snd_det</a></span> <span class="kwd">in</span> <span class="id">Hca</span>; <span class="tactic">eauto</span>; <span class="tactic">subst</span>. 2:<span class="id">solve_NoDup_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hca</span>'; <span class="id">simpl_In</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">H13</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;<span class="id">He1</span>&amp;<span class="id">Hvi1</span>&amp;?&amp;<span class="id">Hvl1</span>); <span class="tactic">eauto</span>. <span class="id">edestruct</span> <span class="id">H14</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;<span class="id">He2</span>&amp;<span class="id">Hvi2</span>&amp;?&amp;<span class="id">Hvl2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">Hv1</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">Hv2</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;-<span class="id">Hv1</span>, &lt;-<span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> (Γ ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> (Γ ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (Γ ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) <span class="id">n</span> (<span class="id">Hi0</span> + <span class="id">Hi1</span>', <span class="id">Hl1</span> + <span class="id">Hl1</span>') (<span class="id">Hi3</span> + <span class="id">Hi2</span>', <span class="id">Hl2</span> + <span class="id">Hl2</span>') <span class="id">cx</span>) <span class="kwd">as</span> <span class="id">Hdetl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span> * <span class="id">_</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_local">det_var_inv_local</a></span> <span class="kwd">with</span> (<span class="id">Hl1</span>:=<span class="id">Hl1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ??. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H20</span>; <span class="tactic">eauto</span>. 2:<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv_In">idcaus_of_senv_In</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.fby_det_Sn">fby_det_Sn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_S">det_exp_S</a></span> <span class="kwd">with</span> (Γ:=Γ++<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_locs">senv_of_locs</a></span> <span class="id">locs</span>) (<span class="id">k</span>:=0) <span class="kwd">in</span> <span class="id">He1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">lcaus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">He1</span> <span class="id">He2</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typeof_numstreams">length_typeof_numstreams</a></span>, <span class="id">H0</span>; <span class="tactic">simpl</span>. <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">intros</span> * <span class="id">Hfree</span> <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_local">det_var_inv_local</a></span> <span class="kwd">with</span> (<span class="id">Hl1</span>:=<span class="id">Hl1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">HSn</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.DepOnScope2">DepOnScope2</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_Exists</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Hin</span>''. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv_In">idcaus_of_senv_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span>''; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H21</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H21</span>, <span class="id">HenvS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>. <span class="tactic">left</span>; <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.DepOnScope2">DepOnScope2</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_Exists</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">edestruct</span> <span class="id">Hdetl</span> <span class="kwd">as</span> (<span class="id">Hdetl1</span>&amp;<span class="id">_</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_app">HasCaus_app</a></span>. <span class="tactic">left</span>; <span class="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="id">solve_In</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hdetl1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">sem_var_union3</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_app">HasCaus_app</a></span>. <span class="tactic">right</span>. <span class="tactic">econstructor</span>; <span class="id">solve_In</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_branch_cons">det_branch_cons</a></span> {<span class="id">A</span>} <span class="id">f_idcaus</span> <span class="id">P_nd</span> <span class="id">P_vd</span> <span class="id">P_wt</span> (<span class="id">P_blk1</span> <span class="id">P_blk2</span> : <span class="id">_</span> -&gt; <span class="kwd">Prop</span>) <span class="id">P_dep</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">caus</span> (<span class="id">blks</span>: <span class="id">A</span>) Γ <span class="id">xs</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cy</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> Γ ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_branch">idcaus_of_branch</a></span> <span class="id">f_idcaus</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.NoDupBranch">NoDupBranch</a></span> <span class="id">P_nd</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefinedBranch">VarsDefinedBranch</a></span> <span class="id">P_vd</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_branch">wt_branch</a></span> <span class="id">P_wt</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_branch_det">sem_branch_det</a></span> <span class="id">P_blk1</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.depends_on_branch">depends_on_branch</a></span> <span class="id">P_dep</span> Γ <span class="id">cy</span> <span class="id">cx</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">cx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_branch">idcaus_of_branch</a></span> <span class="id">f_idcaus</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.depends_on_branch">depends_on_branch</a></span> <span class="id">P_dep</span> Γ <span class="id">cy</span> <span class="id">cx</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> <span class="id">envS</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">let</span> Γ := <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.replace_idcaus">replace_idcaus</a></span> <span class="id">caus</span> Γ <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> Γ ++ <span class="id">f_idcaus</span> <span class="id">blks</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_nd</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_vd</span> <span class="id">blks</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_wt</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_blk1</span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_dep</span> Γ <span class="id">cy</span> <span class="id">cx</span> <span class="id">blks</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">cx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id">f_idcaus</span> <span class="id">blks</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P_dep</span> Γ <span class="id">cy</span> <span class="id">cx</span> <span class="id">blks</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> <span class="id">envS</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">y</span> <span class="id">cy</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">P_blk2</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">y</span> <span class="id">cy</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_branch_det">sem_branch_det</a></span> <span class="id">P_blk2</span> <span class="id">n</span> (<span class="id">cy</span>::<span class="id">envS</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Branch">Branch</a></span> <span class="id">caus</span> <span class="id">blks</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">HdetG</span> <span class="id">Hnd1</span> <span class="id">Hnd</span> <span class="id">Hnd2</span> <span class="id">Hvars</span> <span class="id">Hincl</span> <span class="id">Hn</span> <span class="id">Hwt</span> <span class="id">Hsem</span> <span class="id">HSn</span> <span class="id">HenvS</span> <span class="id">Hind</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hnd2</span>; <span class="id">inv</span> <span class="id">Hvars</span>; <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hind</span>  <span class="kwd">as</span> (<span class="id">Hdet</span>'&amp;<span class="id">Hcons</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_map">NoDupMembers_map</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.replace_idcaus_NoDup">replace_idcaus_NoDup</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.map_fst_replace_idcaus">map_fst_replace_idcaus</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">intros</span> * <span class="id">_</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_branch">det_var_inv_branch</a></span> <span class="kwd">with</span> (<span class="id">Hl1</span>:=<span class="id">Hl1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>. <span class="id">simpl_Forall</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">intros</span> * <span class="id">_</span> <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_branch">det_var_inv_branch</a></span> <span class="kwd">with</span> (<span class="id">Hl1</span>:=<span class="id">Hl1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">HSn</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Hin</span>. <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">H10</span>, <span class="id">HenvS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>. <span class="tactic">left</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:{ <span class="tactic">intros</span> * <span class="id">Hin</span> <span class="id">Hdep</span>. <span class="tactic">apply</span> <span class="id">HenvS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hxs</span> <span class="id">Hinenv</span> ???.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">y</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">caus</span>)); <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intros</span>; <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.NoDup_HasCaus_HasLastCaus">NoDup_HasCaus_HasLastCaus</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_NoDup_app</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hcaus</span> <span class="id">Hv1</span> <span class="id">Hv2</span>. <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_snd_det">HasCaus_snd_det</a></span> <span class="kwd">in</span> <span class="id">Hinenv</span>; <span class="tactic">eauto</span>; <span class="tactic">subst</span>. 2:<span class="id">solve_NoDup_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H10</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">HenvS</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">lcaus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>. <span class="tactic">left</span>; <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin3</span> <span class="id">Hv1</span> <span class="id">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_snd_det">HasCaus_snd_det</a></span> <span class="kwd">in</span> <span class="id">Hinenv</span>; <span class="tactic">eauto</span>; <span class="tactic">subst</span>. 2:<span class="id">solve_NoDup_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.replace_idcaus">replace_idcaus</a></span> <span class="id">caus</span> Γ) <span class="id">y</span> <span class="id">cy</span>) <span class="kwd">as</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.replace_idcaus_HasCaus2">replace_idcaus_HasCaus2</a></span>; <span class="tactic">auto</span>. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hdet</span>' <span class="kwd">as</span> (<span class="id">Hd1</span>&amp;<span class="id">_</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.NoDup_HasCaus_HasLastCaus">NoDup_HasCaus_HasLastCaus</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_NoDup_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">intros</span> [|<span class="id">HinS</span>]; <span class="tactic">subst</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">i</span> <span class="id">xs</span>) <span class="kwd">as</span> <span class="id">Hinxs</span> <span class="tactic">by</span> (<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">_</span> <span class="id">xs</span>) <span class="id">and</span> <span class="tactic">apply</span> <span class="id">it</span>; <span class="id">solve_In</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.replace_idcaus">replace_idcaus</a></span> <span class="id">caus</span> Γ) <span class="id">i</span> <span class="id">i0</span>) <span class="kwd">as</span> <span class="id">Hca</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">Hincl</span> <span class="kwd">in</span> <span class="id">Hinxs</span>. <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.replace_idcaus_HasCaus1">replace_idcaus_HasCaus1</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">senv</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">edestruct</span> <span class="id">Hdet</span>' <span class="kwd">as</span> (<span class="id">Hd1</span>&amp;<span class="id">_</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_block_cons">det_block_cons</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envS</span> <span class="id">blk</span> Γ <span class="id">xs</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">cy</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> Γ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> Γ ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_locals">idcaus_of_locals</a></span> <span class="id">blk</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.NoDupLocals">NoDupLocals</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefined">VarsDefined</a></span> <span class="id">blk</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id">xs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_block">wt_block</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> Γ <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> <span class="id">envS</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_defined_in">Is_defined_in</a></span> Γ <span class="id">cy</span> <span class="id">blk</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_last_in">Is_last_in</a></span> <span class="id">cy</span> <span class="id">blk</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">bs1</span> <span class="id">bs2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasLastCaus">HasLastCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.depends_on">depends_on</a></span> Γ <span class="id">cy</span> <span class="id">cx</span> <span class="id">blk</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">cx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_locals">idcaus_of_locals</a></span> <span class="id">blk</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.depends_on">depends_on</a></span> Γ <span class="id">cy</span> <span class="id">cx</span> <span class="id">blk</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> <span class="id">envS</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">y</span> <span class="id">cy</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">cy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> (<span class="id">cy</span>::<span class="id">envS</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blk</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">blk</span> <span class="kwd">as</span> [(<span class="id">xs</span>&amp;<span class="id">es</span>)| | |] <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.block_ind2">block_ind2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">HdetG</span> <span class="id">Hnd1</span> <span class="id">Hnd</span> <span class="id">Hnd2</span> <span class="id">Hvars</span> <span class="id">Hincl</span> <span class="id">Hn</span> <span class="id">Hwt</span> <span class="id">Hsem</span> <span class="id">Hbs</span> <span class="id">HSbs</span> <span class="id">HSn</span> <span class="id">HenvS</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hsem</span>':=<span class="id">Hsem</span>); <span class="id">inv</span> <span class="id">Hnd2</span>; <span class="id">inv</span> <span class="id">Hvars</span>; <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;equation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [|<span class="tactic">constructor</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hinxs</span> <span class="id">Hinenv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth">In_nth</a></span> <span class="kwd">in</span> <span class="id">Hinxs</span> <span class="kwd">as</span> (?&amp;<span class="id">Hlen</span>&amp;<span class="id">Hnth</span>). <span class="tactic">instantiate</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>) <span class="kwd">in</span> <span class="id">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span> <span class="kwd">in</span> <span class="id">Hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_equation_S">det_equation_S</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Pexp_Pexps">Pexp_Pexps</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_S">det_exp_S</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">HSbs</span>; <span class="tactic">left</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;-<span class="id">Hnth</span>. <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_In">nth_In</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> ? <span class="id">IsF</span>. <span class="tactic">assert</span> (<span class="id">IsF</span>':=<span class="id">IsF</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_free_left_list_In_snd">Is_free_left_list_In_snd</a></span> <span class="kwd">in</span> <span class="id">IsF</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">HSn</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">Hnth</span> <span class="kwd">in</span> *. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id">nth_error_nth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hf2</span>). <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_length">Forall2_length</a></span> <span class="kwd">in</span> <span class="id">Hf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typesof_annots">length_typesof_annots</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hnth</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;reset&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>) <span class="kwd">as</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.bools_of_detn">bools_of_detn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_n">det_exp_n</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_singl">Forall2_singl</a></span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_weaken">EqStN_weaken</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_defined_in">Is_defined_in</a></span> Γ <span class="id">cy</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Breset">Breset</a></span> <span class="id">blocks</span> <span class="id">er</span>) \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_last_in">Is_last_in</a></span> <span class="id">cy</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Breset">Breset</a></span> <span class="id">blocks</span> <span class="id">er</span>) -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">r1</span> <span class="id">r2</span>) <span class="kwd">as</span> <span class="id">HSr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span> * <span class="id">Hdef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.bools_of_detn">bools_of_detn</a></span>. 2,3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_S">det_exp_S</a></span> <span class="kwd">with</span> (<span class="id">k</span>:=0) (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typeof_numstreams">length_typeof_numstreams</a></span>, <span class="id">H7</span>; <span class="tactic">simpl</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> ? <span class="id">IsF</span>. <span class="tactic">assert</span> (<span class="id">IsF</span>':=<span class="id">IsF</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_free_left_In_snd">Is_free_left_In_snd</a></span> <span class="kwd">in</span> <span class="id">IsF</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">HSn</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.DepOnReset2">DepOnReset2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> =&gt; (<span class="kwd">forall</span> <span class="id">y</span> <span class="id">xs</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefined">VarsDefined</a></span> <span class="id">blks</span> <span class="id">xs</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">y</span> <span class="id">cy</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">r1</span> <span class="id">Hi1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">r2</span> <span class="id">Hi2</span>) <span class="id">cy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> (<span class="id">cy</span>::<span class="id">envS</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">r1</span> <span class="id">Hi1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.mask_hist">mask_hist</a></span> <span class="id">k</span> <span class="id">r2</span> <span class="id">Hi2</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.maskb">maskb</a></span> <span class="id">k</span> <span class="id">r1</span> <span class="id">bs1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.maskb">maskb</a></span> <span class="id">k</span> <span class="id">r2</span> <span class="id">bs2</span>) <span class="id">blks</span>) <span class="id">blocks</span>) <span class="kwd">as</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span> *. <span class="tactic">specialize</span> (<span class="id">H15</span> <span class="id">k</span>). <span class="id">simpl_Forall</span>. <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">H</span> <span class="kwd">with</span> (<span class="id">xs</span>:=<span class="id">xs</span>). 9:<span class="tactic">eauto</span>. <span class="id">all</span>:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.NoDup_locals_inv">NoDup_locals_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_concat">incl_concat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_mask">det_var_inv_mask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_mask">EqStN_mask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">Hdef</span>'. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_mask">EqStN_mask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">HSr</span>. <span class="tactic">destruct</span> <span class="id">Hdef</span>'; [<span class="tactic">left</span>|<span class="tactic">right</span>]; <span class="tactic">econstructor</span>; <span class="id">solve_Exists</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">HSbs</span>. <span class="tactic">destruct</span> <span class="id">Hdef</span>'; [<span class="tactic">left</span>|<span class="tactic">right</span>]; <span class="tactic">econstructor</span>; <span class="id">solve_Exists</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>' <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_mask">det_var_inv_mask</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">HSr</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.depends_on_def_last">depends_on_def_last</a></span>. <span class="tactic">econstructor</span>; <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">HSn</span>; <span class="tactic">eauto</span>. <span class="tactic">constructor</span>. <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>' <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id">HenvS</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="tactic">constructor</span>; <span class="id">solve_Exists</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdef</span>' <span class="id">Hin</span>' <span class="id">Hca</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefined_det">VarsDefined_det</a></span> <span class="kwd">in</span> <span class="id">Hdef</span>; <span class="tactic">eauto</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hdef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * <span class="id">Hinxs</span> <span class="id">Hca</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_concat">in_concat</a></span> <span class="kwd">in</span> <span class="id">Hinxs</span> <span class="kwd">as</span> (?&amp;<span class="id">Hin1</span>&amp;<span class="id">Hin2</span>). <span class="id">inv_VarsDefined</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_unmask">det_var_inv_unmask</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id">HSr</span>; <span class="tactic">eauto</span>. <span class="tactic">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_defined_in_Is_defined_in">Is_defined_in_Is_defined_in</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="id">solve_Exists</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefined_Is_defined">VarsDefined_Is_defined</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; [|<span class="tactic">eauto</span>]. <span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_concat">incl_concat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">specialize</span> (<span class="id">Hf</span> <span class="id">k</span>). <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">k</span>. <span class="tactic">specialize</span> (<span class="id">Hf</span> <span class="id">k</span>). <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">sc1</span> <span class="id">sc2</span>) <span class="kwd">as</span> <span class="id">Hsc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_n">det_exp_n</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#Forall2_singl">Forall2_singl</a></span> <span class="kwd">in</span> <span class="id">H12</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_defined_in">Is_defined_in</a></span> Γ <span class="id">cy</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>) \/ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_last_in">Is_last_in</a></span> <span class="id">cy</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span>) -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">sc1</span> <span class="id">sc2</span>) <span class="kwd">as</span> <span class="id">HSsc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span> * <span class="id">Hdef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_exp_S">det_exp_S</a></span> <span class="kwd">with</span> (<span class="id">k</span>:=0) (<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">H9</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">H9</span> <span class="kwd">in</span> <span class="id">H12</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H12</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.length_typeof_numstreams">length_typeof_numstreams</a></span>, <span class="id">H6</span>; <span class="tactic">simpl</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> ? <span class="id">IsF</span>. <span class="tactic">assert</span> (<span class="id">IsF</span>':=<span class="id">IsF</span>). <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_free_left_In_snd">Is_free_left_In_snd</a></span> <span class="kwd">in</span> <span class="id">IsF</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">HSn</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.DepOnSwitch2">DepOnSwitch2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">k</span>, <span class="id">s</span>) =&gt; <span class="tactic">exists</span> <span class="id">Hi1</span>' <span class="id">Hi2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.when_hist">when_hist</a></span> <span class="id">k</span> <span class="id">Hi1</span> <span class="id">sc1</span> <span class="id">Hi1</span>' /\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.when_hist">when_hist</a></span> <span class="id">k</span> <span class="id">Hi2</span> <span class="id">sc2</span> <span class="id">Hi2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">y</span> <span class="id">cy</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span>' <span class="id">Hi2</span>' <span class="id">cy</span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_branch_det">sem_branch_det</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> (<span class="id">cy</span>::<span class="id">envS</span>) <span class="id">Hi1</span>' <span class="id">Hi2</span>' (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.fwhenb">fwhenb</a></span> <span class="id">k</span> <span class="id">sc1</span> <span class="id">bs1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.fwhenb">fwhenb</a></span> <span class="id">k</span> <span class="id">sc2</span> <span class="id">bs2</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">n</span> (<span class="id">cy</span> :: <span class="id">envS</span>) <span class="id">Hi1</span>' <span class="id">Hi2</span>' <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">branches</span>) <span class="kwd">as</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">simpl_Forall</span>. <span class="tactic">destruct</span> <span class="id">b</span>. <span class="tactic">do</span> 2 <span class="id">esplit</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_branch_cons">det_branch_cons</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.NoDup_locals_inv2">NoDup_locals_inv2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_when">det_var_inv_when</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_weaken">EqStN_weaken</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>' <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_when">det_var_inv_when</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">HSsc</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.depends_on_def_last">depends_on_def_last</a></span>. <span class="tactic">econstructor</span>; <span class="id">solve_Exists</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">HSn</span>; <span class="tactic">eauto</span>. <span class="tactic">constructor</span>. <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>' <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id">HenvS</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="tactic">constructor</span>; <span class="id">solve_Exists</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> =&gt; (<span class="kwd">forall</span> <span class="id">y</span> <span class="id">xs</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefined">VarsDefined</a></span> <span class="id">blks</span> <span class="id">xs</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ0 <span class="id">y</span> <span class="id">cy</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id">h1</span>, <span class="id">h2</span>) (<span class="id">h</span>, <span class="id">h0</span>) <span class="id">cy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> (<span class="id">cy</span>::<span class="id">envS</span>) (<span class="id">h1</span>, <span class="id">h2</span>) (<span class="id">h</span>, <span class="id">h0</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.fwhenb">fwhenb</a></span> <span class="id">e</span> <span class="id">sc1</span> <span class="id">bs1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.fwhenb">fwhenb</a></span> <span class="id">e</span> <span class="id">sc2</span> <span class="id">bs2</span>) <span class="id">blks</span>) <span class="id">l0</span>) <span class="kwd">as</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">simpl_Forall</span>. <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">H</span> <span class="kwd">with</span> (Γ:=Γ0). 9:<span class="tactic">eauto</span>. <span class="id">all</span>:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.NoDup_locals_inv">NoDup_locals_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; <span class="tactic">eauto</span>. <span class="tactic">subst</span> Γ0. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.map_fst_replace_idcaus">map_fst_replace_idcaus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_concat">incl_concat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">subst</span> Γ0. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_block_incl">wt_block_incl</a></span>. 3:<span class="tactic">eauto</span>. 1,2:<span class="tactic">intros</span>; (<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.replace_idcaus_HasType">replace_idcaus_HasType</a></span>||<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.replace_idcaus_IsLast">replace_idcaus_IsLast</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_fwhen">EqStN_fwhen</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">Hdef</span>'. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.EqStN_fwhen">EqStN_fwhen</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">HSsc</span>. 2:<span class="tactic">eapply</span> <span class="id">HSbs</span>. 1,2:(<span class="tactic">destruct</span> <span class="id">Hdef</span>'; [<span class="tactic">left</span>|<span class="tactic">right</span>]); <span class="tactic">do</span> 2 (<span class="tactic">econstructor</span>; <span class="id">solve_Exists</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>' <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id">H25</span>; <span class="tactic">eauto</span>. <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>' <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id">H26</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">solve_Exists</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdef</span>' <span class="id">Hin</span>' <span class="id">Hca</span>. <span class="tactic">eapply</span> <span class="id">H20</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefined_det">VarsDefined_det</a></span> <span class="kwd">in</span> <span class="id">Hdef</span>; <span class="tactic">eauto</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hdef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span> <span class="id">Hca</span>. <span class="tactic">rewrite</span> &lt;-<span class="id">H27</span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_concat">in_concat</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_VarsDefined</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="tactic">clear</span> <span class="id">H</span> <span class="id">H19</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">repeat</span> (<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.wt_streams">wt_streams</a></span> [<span class="id">_</span>] (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.typeof">typeof</a></span> <span class="id">ec</span>)) <span class="id">and</span> <span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">it</span>; <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_singl">Forall2_singl</a></span> <span class="kwd">in</span> <span class="id">it</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hinxs</span> <span class="id">Hca</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv_unwhen">det_var_inv_unwhen</a></span> <span class="kwd">with</span> (<span class="id">sc1</span>:=<span class="id">sc1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">tn</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_sym">Permutation_sym</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_nil">Permutation_nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_eq_nil">map_eq_nil</a></span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id">HSsc</span>; <span class="tactic">eauto</span>. <span class="tactic">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.Is_defined_in_Is_defined_in">Is_defined_in_Is_defined_in</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefined_Is_defined">VarsDefined_Is_defined</a></span>; <span class="tactic">eauto</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; [|<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>]. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> * <span class="id">Hseq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="tactic">exists</span> <span class="id">blks</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">c</span>, <span class="id">blks</span>) <span class="id">branches</span>) <span class="kwd">as</span> (<span class="id">blks</span>&amp;<span class="id">Hinbrs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;-<span class="id">H8</span> <span class="kwd">in</span> <span class="id">Hseq</span>. <span class="id">simpl_In</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">do</span> 2 <span class="id">esplit</span>. <span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">Hcaus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus_snd_det">HasCaus_snd_det</a></span> <span class="kwd">in</span> <span class="id">Hca</span>; <span class="tactic">eauto</span>; <span class="tactic">subst</span>. 2:<span class="id">simpl_app</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDup_app_l">NoDup_app_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">blks</span>. <span class="tactic">split</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_branch_defined1">sem_branch_defined1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">inv</span> <span class="id">H13</span>; <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det_sem_block1">sem_block_det_sem_block1</a></span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det_sem_block2">sem_block_det_sem_block2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> * <span class="id">Hnin</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.NoDup_HasCaus_HasLastCaus">NoDup_HasCaus_HasLastCaus</a></span>; <span class="tactic">eauto</span>. <span class="id">solve_NoDup_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;locals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_scope_cons">det_scope_cons</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> (?&amp;?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> [|]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">lcaus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">HSn</span>; <span class="tactic">eauto</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">HenvS</span>; <span class="tactic">eauto</span>. <span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">blks</span> =&gt; (<span class="kwd">forall</span> <span class="id">y</span> <span class="id">xs</span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefined">VarsDefined</a></span> <span class="id">blks</span> <span class="id">xs</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.HasCaus">HasCaus</a></span> Γ0 <span class="id">y</span> <span class="id">cy</span> -&gt; <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> Γ0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi0</span> <span class="id">Hi3</span> <span class="id">cy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> (<span class="id">cy</span>::<span class="id">envS</span>) <span class="id">Hi0</span> <span class="id">Hi3</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">blks</span>) <span class="id">blocks</span>) <span class="kwd">as</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">simpl_Forall</span>. <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">H</span> <span class="kwd">with</span> (<span class="id">xs</span>:=<span class="id">xs1</span>). 11:<span class="tactic">eauto</span>. <span class="id">all</span>:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.NoDup_locals_inv">NoDup_locals_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etransitivity</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#incl_concat">incl_concat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">Hdef</span>'. <span class="tactic">eapply</span> <span class="id">H12</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hdef</span>'; [<span class="tactic">left</span>|<span class="tactic">right</span>]; <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>' <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id">H13</span>; <span class="tactic">eauto</span>. <span class="id">solve_Exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span>' <span class="id">Hdep</span>. <span class="tactic">eapply</span> <span class="id">H14</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id">solve_Exists</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hdef</span>' <span class="id">Hin</span>' <span class="id">Hca</span>. <span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.VarsDefined_det">VarsDefined_det</a></span> <span class="kwd">in</span> <span class="id">Hdef</span>; <span class="tactic">eauto</span>. <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-<span class="id">Hdef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hin</span> <span class="id">Hca</span>. <span class="id">destruct_conjs</span>. <span class="id">take</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="tactic">rewrite</span> &lt;-<span class="id">it</span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_concat">in_concat</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_VarsDefined</span>; <span class="id">simpl_Forall</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_vars_n">det_vars_n</a></span> : <span class="kwd">forall</span> <span class="id">nd</span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_node">wt_node</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.node_causal">node_causal</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_inout">senv_of_inout</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_inout">senv_of_inout</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>)) <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> [] <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_inout">senv_of_inout</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_locals">idcaus_of_locals</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_locals">idcaus_of_locals</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>))) <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">HdetG</span> <span class="id">Hwtn</span> <span class="id">Hcaus</span> <span class="id">Hins</span> <span class="id">Hbs</span> <span class="id">Hn</span> <span class="id">Hblk</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.node_causal_ind">node_causal_ind</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> ?? <span class="id">Hperm</span> (<span class="id">Hblk</span>'&amp;<span class="id">Hvars</span>'). <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;-<span class="id">Hperm</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det_Perm">sem_block_det_Perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> * <span class="id">Hin</span> (<span class="id">HSn</span>&amp;<span class="id">Hblk</span>') <span class="id">Hdep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_defd">n_defd</a></span> <span class="id">nd</span>) <span class="kwd">as</span> (?&amp;<span class="id">Hdef</span>&amp;<span class="id">Hperm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcaus</span> <span class="kwd">as</span> (<span class="id">Hnd</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_block_cons">det_block_cons</a></span> <span class="kwd">in</span> <span class="id">Hblk</span>' <span class="kwd">as</span> (<span class="id">Hdet</span>&amp;?); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_weaken">EqStN_weaken</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">simpl_In</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> <span class="id">Hin1</span> <span class="kwd">as</span> [|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hins</span>; <span class="tactic">eauto</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id">Hdet</span>; <span class="tactic">eauto</span>. 2:<span class="tactic">econstructor</span>; <span class="id">solve_In</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>. 2,3:<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hperm</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_map">NoDupMembers_map</a></span>, <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_nodup">n_nodup</a></span>. <span class="tactic">intros</span>; <span class="id">destruct_conjs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">clear</span> - <span class="id">Hnd</span>. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_senv_inout">idcaus_of_senv_inout</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.map_fst_senv_of_inout">map_fst_senv_of_inout</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.node_NoDupLocals">node_NoDupLocals</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.map_fst_senv_of_inout">map_fst_senv_of_inout</a></span>, <span class="id">Hperm</span>. <span class="id">solve_incl_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * [<span class="id">Hin</span>'|<span class="id">Hin</span>']; <span class="id">inv</span> <span class="id">Hin</span>'; <span class="id">simpl_In</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hn</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">Hn</span>; <span class="id">solve_In</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">Hwtn</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> * [<span class="id">Hca</span>|<span class="id">Hca</span>] <span class="id">Hdep</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id">inv</span> <span class="id">Hca</span>; <span class="id">simpl_In</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Hdep</span> <span class="id">_</span> <span class="id">Hdep</span>'). <span class="id">simpl_Forall</span>. <span class="tactic">eapply</span> <span class="id">HSn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hca</span>. <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_vars">det_vars</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nd</span> <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_node">wt_node</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.node_causal">node_causal</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN">EqStN</a></span> <span class="id">n</span> <span class="id">bs1</span> <span class="id">bs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi1</span> <span class="id">bs1</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_block">sem_block</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det.G">G</a></span> <span class="id">Hi2</span> <span class="id">bs2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_inout">senv_of_inout</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>)) <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_inout">senv_of_inout</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>)) <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>))).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">HdetG</span> <span class="id">Hwtn</span> <span class="id">Hcaus</span> <span class="id">Hbs</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span> <span class="id">Hins</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_inout">senv_of_inout</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>)) <span class="id">n</span> <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">nd</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_locals">idcaus_of_locals</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span> <span class="id">n</span> [] <span class="id">Hi1</span> <span class="id">Hi2</span> <span class="id">bs1</span> <span class="id">bs2</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>)) <span class="kwd">as</span> (<span class="id">Hvars</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_impl_In">Forall_impl_In</a></span>; [|<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_incl">Forall_incl</a></span>; [<span class="tactic">eapply</span> <span class="id">Hvars</span>|]]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_app">idcaus_app</a></span>. <span class="id">solve_incl_app</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;everyone&nbsp;is&nbsp;equal&nbsp;up&nbsp;to&nbsp;0&nbsp;anyway&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>. <span class="tactic">intros</span> ??????. <span class="tactic">split</span>; <span class="tactic">intros</span>; <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det_0">sem_block_det_0</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;use&nbsp;the&nbsp;causal&nbsp;induction&nbsp;to&nbsp;step&nbsp;once&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHn</span> <span class="kwd">as</span> (<span class="id">Hvars</span>&amp;<span class="id">Hblk</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_weaken">EqStN_weaken</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>; [|<span class="tactic">eapply</span> <span class="id">Hins</span>]; <span class="tactic">intros</span> ?????.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">Hv1</span> <span class="id">Hv2</span>; <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqStN_weaken">EqStN_weaken</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">Hv1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_vars_n">det_vars_n</a></span> <span class="kwd">in</span> <span class="id">Hblk</span> <span class="kwd">as</span> (<span class="id">Hvars</span>'&amp;<span class="id">Hblk</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">Hwtn</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_nodup">n_nodup</a></span> <span class="id">nd</span>) <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">Hnd2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_block_S">det_block_S</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.map_fst_senv_of_inout">map_fst_senv_of_inout</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> * <span class="id">Hca</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.idcaus_of_senv_In">idcaus_of_senv_In</a></span> <span class="kwd">in</span> <span class="id">Hca</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_of_senv_inout">idcaus_of_senv_inout</a></span> <span class="kwd">in</span> <span class="id">Hca</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>'; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Hvars</span>'; <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>. <span class="tactic">left</span>; <span class="id">solve_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">solve_incl_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span> <span class="kwd">in</span> <span class="id">Hvars</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_app">Forall_app</a></span> <span class="kwd">in</span> <span class="id">Hvars</span> <span class="kwd">as</span> (?&amp;?); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.sem_block_det">sem_block_det</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LSEMDETERMINISM.det_global_n">det_global_n</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_global">wt_global</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.node_causal">node_causal</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.nodes">nodes</a></span> <span class="id">G</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes">det_nodes</a></span> <span class="id">G</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">nodes0</span> <span class="kwd">as</span> [|<span class="id">nd</span> <span class="id">nds</span>]; <span class="tactic">intros</span> <span class="id">Hwt</span> <span class="id">Hcaus</span> ?????? <span class="id">Heqins</span> <span class="id">Hs1</span> <span class="id">Hs2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hcaus</span>. <span class="id">now</span> <span class="id">inv</span> <span class="id">Hs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs1</span> <span class="kwd">as</span> [?????? <span class="id">Hfind1</span> <span class="id">Hins1</span> <span class="id">Houts1</span> <span class="id">Hbcks1</span> <span class="id">Hbk1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion_clear</span> <span class="id">Hs2</span> <span class="kwd">as</span> [?????? <span class="id">Hfind2</span> <span class="id">Hins2</span> <span class="id">Houts2</span> <span class="id">Hbcks2</span> <span class="id">Hbk2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfind1</span> <span class="kwd">in</span> <span class="id">Hfind2</span>. <span class="id">inv</span> <span class="id">Hfind2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_name">n_name</a></span> <span class="id">nd</span>) <span class="id">f</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id">Hfind2</span>:=<span class="id">Hfind1</span>). <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.find_node_now">find_node_now</a></span> <span class="kwd">in</span> <span class="id">Hfind2</span>; <span class="tactic">auto</span>; <span class="id">inv</span> <span class="id">Hfind2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord.Is_node_in_block">Is_node_in_block</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_name">n_name</a></span> <span class="id">n1</span>) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_block">n_block</a></span> <span class="id">n1</span>)) <span class="kwd">as</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord.find_node_not_Is_node_in">find_node_not_Is_node_in</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord.wl_global_Ordered_nodes">wl_global_Ordered_nodes</a></span> <span class="kwd">with</span> <span class="id">ltyping</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_block_cons1">sem_block_cons1</a></span> <span class="kwd">in</span> <span class="id">Hbcks1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord.wl_global_Ordered_nodes">wl_global_Ordered_nodes</a></span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_block_cons1">sem_block_cons1</a></span> <span class="kwd">in</span> <span class="id">Hbcks2</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord.wl_global_Ordered_nodes">wl_global_Ordered_nodes</a></span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_var_inv">det_var_inv</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv.senv_of_inout">senv_of_inout</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">n1</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">n1</span>)) <span class="id">n</span> (<span class="id">H</span>, @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.empty">FEnv.empty</a></span> <span class="id">_</span>) (<span class="id">H0</span>, @<span class="id"><a href="Velus.FunctionalEnvironment.html#FEnv.empty">FEnv.empty</a></span> <span class="id">_</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">n1</span>)))) <span class="kwd">as</span> <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.node_causal_NoDup">node_causal_NoDup</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">Hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Heqins</span> <span class="id">Hins1</span> <span class="id">Hins2</span> <span class="id">Hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">n1</span>)) (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">n1</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">n1</span>))) <span class="kwd">as</span> <span class="id">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus_app">idcaus_app</a></span>. <span class="id">solve_incl_app</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">ins1</span> <span class="id">ins2</span> <span class="id">Hins1</span> <span class="id">Hins2</span> <span class="id">Heqins</span> <span class="id">Hnd</span> <span class="id">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">n1</span> ++ <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_out">n_out</a></span> <span class="id">n1</span>) <span class="kwd">as</span> <span class="id">cenv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.n_in">n_in</a></span> <span class="id">n1</span>) <span class="kwd">as</span> [|(?&amp;(?&amp;?)&amp;?)]; <span class="tactic">intros</span> * <span class="id">Hins1</span> <span class="id">Hins2</span> <span class="id">Heqins</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hins1</span>; <span class="id">inv</span> <span class="id">Hins2</span>; <span class="id">inv</span> <span class="id">Heqins</span>; <span class="tactic">constructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span> ???. <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">Hin</span> <span class="id">Hv1</span> <span class="id">Hv2</span>; <span class="id">inv</span> <span class="id">Hin</span>; <span class="id">simpl_In</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">Hincl</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_eq">in_eq</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDup_snd_det">NoDup_snd_det</a></span> <span class="kwd">in</span> <span class="id">Hincl</span>; [|<span class="tactic">eauto</span>|<span class="id">solve_In</span>]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.sem_var_det">sem_var_det</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H3</span>, <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">incl_cons</span>'; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_vars">det_vars</a></span> <span class="kwd">in</span> <span class="id">Hins</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_trans_ex">Forall2_trans_ex</a></span> <span class="kwd">in</span> <span class="id">Houts2</span>; [|<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_swap_args">Forall2_swap_args</a></span>, <span class="id">Houts1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall2_impl_In">Forall2_impl_In</a></span>; [|<span class="tactic">eauto</span>]; <span class="tactic">intros</span> ?? <span class="id">_</span> <span class="id">_</span> (?&amp;<span class="id">Hin</span>&amp;<span class="id">Hv1</span>&amp;<span class="id">Hv2</span>). <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.idcaus">idcaus</a></span> <span class="kwd">in</span> <span class="id">Hins</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_map">Forall_map</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_map">Forall_map</a></span> <span class="kwd">in</span> <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">Hins</span>; [|<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hins</span> <span class="kwd">in</span> <span class="id">Hv2</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>. <span class="id">solve_In</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>. 1,2:<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id">IHnds</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">destruct</span> <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.clocks_of_EqStN">clocks_of_EqStN</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.find_node_other">find_node_other</a></span> <span class="kwd">in</span> <span class="id">Hfind1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHnds</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">H4</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_block_cons1">sem_block_cons1</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord.wl_global_Ordered_nodes">wl_global_Ordered_nodes</a></span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord.wl_global_Ordered_nodes">wl_global_Ordered_nodes</a></span> <span class="kwd">with</span> <span class="id">ltyping</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="LSEMDETERMINISM.det_global">det_global</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">f</span> <span class="id">ins</span> <span class="id">outs1</span> <span class="id">outs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ.wt_global">wt_global</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA.node_causal">node_causal</a></span> (<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn.nodes">nodes</a></span> <span class="id">G</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_node">sem_node</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">ins</span> <span class="id">outs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem.sem_node">sem_node</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">ins</span> <span class="id">outs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr.EqSts">EqSts</a></span> <span class="id">outs1</span> <span class="id">outs2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hwt</span> <span class="id">Hcaus</span> <span class="id">Hsem1</span> <span class="id">Hsem2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_nodes_ins">det_nodes_ins</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM.det_global_n">det_global_n</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM">LSEMDETERMINISM</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="LSemDeterminismFun">LSemDeterminismFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Typ</span>   : <span class="id"><a href="Velus.Lustre.LTyping.html#LTYPING">LTYPING</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LCA</span>   : <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY">LCAUSALITY</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CStr</span>  : <span class="id"><a href="Velus.CoindStreams.html#COINDSTREAMS">COINDSTREAMS</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sem</span>   : <span class="id"><a href="Velus.Lustre.LSemantics.html#LSEMANTICS">LSEMANTICS</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr">CStr</a></span>)<br/>
&lt;: <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM">LSEMDETERMINISM</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ">Typ</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA">LCA</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr">CStr</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem">Sem</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSEMDETERMINISM">LSEMDETERMINISM</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Typ">Typ</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LCA">LCA</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#CStr">CStr</a></span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#Sem">Sem</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.LSemDeterminism.html#LSemDeterminismFun">LSemDeterminismFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
