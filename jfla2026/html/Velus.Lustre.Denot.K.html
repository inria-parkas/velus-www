
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module K</title>
<meta name="description" content="Documentation of Coq module K" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h1 class="title">Module K</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html">BinPos</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span> <span class="id"><a href="Velus.Ident.html">Ident</a></span> <span class="id"><a href="Velus.Operators.html">Operators</a></span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span> <span class="id"><a href="Velus.CoindStreams.html">CoindStreams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.StaticEnv.html">Lustre.StaticEnv</a></span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html">Lustre.LSemantics</a></span> <span class="id"><a href="Velus.Lustre.LOrdered.html">Lustre.LOrdered</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.html">Lustre.Denot.Cpo</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus.Lustre.Denot.Cpo</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html">Cpo_streams_type</a></span>.<br/>
<br/>
<span class="kwd">Close</span> <span class="kwd">Scope</span> <span class="id">equiv_scope</span>. <br/>
<span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">ListNotations</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html">CommonList2</a></span> <span class="id"><a href="Velus.Lustre.Denot.Kfuns.html">Kfuns</a></span> <span class="id"><a href="Velus.Lustre.Denot.Kenv.html">Kenv</a></span> <span class="id"><a href="Velus.Lustre.Denot.Kauto.html">Kauto</a></span>.<br/>
<br/>
<h1> Une sémantique Kahnienne pour Vélus </h1>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="LKAHN">LKAHN</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span>       <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span>      <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn">Syn</a></span>).<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="LKAHN.KDenot_node">KDenot_node</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id"><a name="LKAHN.KDenot_node.PSyn">PSyn</a></span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.decl">decl</a></span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>}.<br/>
<span class="kwd">Context</span> {<span class="id"><a name="LKAHN.KDenot_node.Prefs">Prefs</a></span> : <span class="id"><a href="Velus.Common.Common.html#PS.t">PS.t</a></span>}.<br/>
<span class="kwd">Variable</span> (<span class="id"><a name="LKAHN.KDenot_node.G">G</a></span> : @<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.Prefs">Prefs</a></span>).<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="LKAHN.SEnv">SEnv</a></span> := (@<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#env">env</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>)).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.FEnv">FEnv</a></span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> (<span class="kwd">fun</span> <span class="id">f</span>:<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> =&gt; (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">errTy'</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>) := <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> (<span class="id">err'</span> <span class="id">error_Ty'</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">np_of_env'</span> (<span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) : <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">l</span>).<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [| <span class="id">x</span> <span class="id">l</span>].<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, 0.<br/>
&nbsp;&nbsp;- <span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span>)) <span class="id">IHl</span>).<br/>
Defined.
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">env_of_np'</span> (<span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) {<span class="id">n</span>} : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> _ _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#key">key</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth">mem_nth</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> <span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">l</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">n</span> <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">x</span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kwhenv">kwhenv</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">get_tag</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.Venum">Venum</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> | _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#kwhen">kwhen</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> <span class="id">get_tag</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kmergev">kmergev</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">get_tag</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.Venum">Venum</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> | _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#kmerge">kmerge</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> <span class="id">get_tag</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_eq">Nat.eqb_eq</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kcasev">kcasev</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">get_tag</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.Venum">Venum</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> | _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#kcase">kcase</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> <span class="id">get_tag</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_eq">Nat.eqb_eq</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kcase_defv">kcase_defv</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">get_tag</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.Venum">Venum</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> | _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#kcase_def">kcase_def</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> <span class="id">get_tag</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_eq">Nat.eqb_eq</a></span>.<br/>
<br/>
<br/>
<div class="doc">On définit tout de suite <span class="bracket"><span class="id">kdenot_exps_</span></span> en fonction de <span class="bracket"><span class="id">kdenot_exp_</span></span>
    pour simplifier le raisonnement dans kdenot_exp_eq </div>
<span class="kwd">Section</span> <span class="id"><a name="LKAHN.KDenot_node.KDenot_exps">KDenot_exps</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LKAHN.KDenot_node.KDenot_exps.kdenot_exp_">kdenot_exp_</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> : <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>)) (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_exps_">kdenot_exps_</a></span> (<span class="id">es</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [|<span class="id">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_app">nprod_app</a></span> @2_ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.KDenot_exps.kdenot_exp_">kdenot_exp_</a></span> <span class="id">a</span>)) <span class="id">IHes</span>).<br/>
&nbsp;&nbsp;Defined.
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_expss_">kdenot_expss_</a></span> {<span class="id">A</span>} (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>)) (<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>)) <span class="id">n</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|[? <span class="id">es</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) <span class="id">n</span>) <span class="kwd">as</span> [&lt;-|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> @2_ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id">es</span>)) <span class="id">IHess</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exact</span> 0.<br/>
&nbsp;&nbsp;Defined.
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.KDenot_exps">KDenot_exps</a></span>.<br/>
<br/>
<br/>
<div class="doc">Casts a <span class="bracket"><span class="id">nprod</span></span> into a single stream </div>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.cast_1">cast_1</a></span> {<span class="id">n</span>} : @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>)) <span class="id">n</span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">n</span> <span class="kwd">as</span> <span class="id">m</span> <span class="kwd">return</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span> -<span class="id">C</span>-&gt; @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>)) 1 <span class="kwd">with</span><br/>
&nbsp;&nbsp;| 1 =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#ID">ID</a></span> _<br/>
&nbsp;&nbsp;| _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span> _ _ <span class="id">errTy'</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_exp_">kdenot_exp_</a></span><br/>
&nbsp;&nbsp;(<span class="id">e</span> : <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>)) (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">ctx</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> _ _).<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;<span class="kwd">fix</span> <span class="id">kdenot_exp_</span> 1.<br/>
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span> <span class="id">eqn</span>:<span class="id">He</span>; <span class="id">simpl</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> _).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#val">val</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.Vscalar">Vscalar</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.sem_cconst">sem_cconst</a></span> <span class="id">c</span>))))).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span> _ _ (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#val">val</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.Venum">Venum</a></span> <span class="id">e0</span>)))).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">i</span>) @_ (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">i</span>) @_ (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.typeof">typeof</a></span> <span class="id">e0</span>) <span class="kwd">as</span> [|<span class="id">ty</span> []].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id">errTy'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#kunop">kunop</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.sem_unop">sem_unop</a></span> <span class="id">u</span> <span class="id">v</span> <span class="id">ty</span>) @_ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> @_ <span class="id">kdenot_exp_</span> <span class="id">e0</span>).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.typeof">typeof</a></span> <span class="id">e0_1</span>) <span class="kwd">as</span> [|<span class="id">ty1</span> []], (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.typeof">typeof</a></span> <span class="id">e0_2</span>) <span class="kwd">as</span> [|<span class="id">ty2</span> []].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-4,6-9: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id">errTy'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> ((<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#kbinop">kbinop</a></span> (<span class="kwd">fun</span> <span class="id">v1</span> <span class="id">v2</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.sem_binop">sem_binop</a></span> <span class="id">b</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">v2</span> <span class="id">ty2</span>) @2_<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> @_ <span class="id">kdenot_exp_</span> <span class="id">e0_1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> @_ <span class="id">kdenot_exp_</span> <span class="id">e0_2</span>)).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, 0.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">e0s</span>, <span class="id">l0</span> <span class="id">into</span> <span class="id">es</span>, <span class="id">l1</span> <span class="id">into</span> <span class="id">anns</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">s0s</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id">kdenot_exp_</span> <span class="id">e0s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id">kdenot_exp_</span> <span class="id">es</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e0s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [<span class="id">Heq1</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e0s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">anns</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [<span class="id">Heq2</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Heq1</span> <span class="kwd">in</span> <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2">lift2</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#APP">APP</a></span> _) @2_ <span class="id">s0s</span>) <span class="id">ss</span>).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">e0s</span>, <span class="id">l0</span> <span class="id">into</span> <span class="id">es</span>, <span class="id">l1</span> <span class="id">into</span> <span class="id">anns</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">s0s</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id">kdenot_exp_</span> <span class="id">e0s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id">kdenot_exp_</span> <span class="id">es</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e0s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [<span class="id">Heq1</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e0s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">anns</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [<span class="id">Heq2</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Heq1</span> <span class="kwd">in</span> <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2">lift2</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#APP">APP</a></span> _) @2_ <span class="id">s0s</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#REM">REM</a></span> _) @_ <span class="id">ss</span>)).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">es</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,<span class="id">ck</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p</span> <span class="kwd">as</span> (<span class="id">i</span>,<span class="id">ty</span>). <span class="id">clear</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [&lt;-|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id">kdenot_exp_</span> <span class="id">es</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#llift">llift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kwhenv">kwhenv</a></span> <span class="id">e0</span>) @2_ <span class="id">ss</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">i</span>) @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">ies</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,<span class="id">ck</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p</span> <span class="kwd">as</span> [<span class="id">i</span> <span class="id">ty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ses</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_">kdenot_expss_</a></span> <span class="id">kdenot_exp_</span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="kwd">in</span> <span class="id">ses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> @_ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kmergev">kmergev</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>)) @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">i</span>) @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _) <span class="id">ses</span>).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">ies</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,<span class="id">ck</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ses</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_">kdenot_expss_</a></span> <span class="id">kdenot_exp_</span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="kwd">in</span> <span class="id">ses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">o</span> <span class="kwd">as</span> [<span class="id">d_es</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">ses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">d_es</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [&lt;-|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">ses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> ((_ @2_ (<span class="id">kdenot_exp_</span> <span class="id">e0</span>)) ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> @2_ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id">kdenot_exp_</span> <span class="id">d_es</span>) <span class="id">ses</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e0</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> @_ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kcase_defv">kcase_defv</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> ((_ @2_ (<span class="id">kdenot_exp_</span> <span class="id">e0</span>)) <span class="id">ses</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e0</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> @_ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kcasev">kcasev</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>))).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">es</span>, <span class="id">l0</span> <span class="id">into</span> <span class="id">er</span>, <span class="id">l1</span> <span class="id">into</span> <span class="id">anns</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.find_node">find_node</a></span> <span class="id">i</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.G">G</a></span>) <span class="kwd">as</span> [<span class="id">n</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_out">n_out</a></span>))) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">anns</span>)) <span class="kwd">as</span> [&lt;-|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id">kdenot_exp_</span> <span class="id">es</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ <span class="id">i</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _ : <span class="id">ctx</span> -<span class="id">C</span>-&gt; _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">np_of_env'</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_out">n_out</a></span> <span class="id">n</span>)) @_<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#ID">ID</a></span> _ ) (<span class="id">env_of_np'</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_in">n_in</a></span> <span class="id">n</span>)) @_ <span class="id">ss</span>)).<br/>
Defined.
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_exp">kdenot_exp</a></span> (<span class="id">e</span> : <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">e</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_exps">kdenot_exps</a></span> (<span class="id">es</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">es</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_exps_eq">kdenot_exps_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> (<span class="id">e</span> :: <span class="id">es</span>) <span class="id">envG</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_app">nprod_app</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span>) (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.forall_kdenot_exps">forall_kdenot_exps</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>) -&gt; <span class="kwd">Prop</span>) <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span>)) <span class="id">es</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span>; <span class="id">intros</span>; <span class="id">simpl</span>; <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">Hs</span>. <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_eq">kdenot_exps_eq</a></span> <span class="kwd">in</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#app_forall_nprod">app_forall_nprod</a></span> <span class="kwd">in</span> <span class="id">Hs</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">IHes</span>.<br/>
&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">Hs</span>. <span class="id">inv</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_eq">kdenot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_app">forall_nprod_app</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">IHes</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_expss">kdenot_expss</a></span> {<span class="id">A</span>} (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>)) (<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>)) <span class="id">n</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_">kdenot_expss_</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">ess</span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_expss_eq">kdenot_expss_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> (<span class="id">x</span> : <span class="id">A</span>) <span class="id">es</span> <span class="id">ess</span> <span class="id">envG</span> <span class="id">env</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> ((<span class="id">x</span>,<span class="id">es</span>) :: <span class="id">ess</span>) <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqn</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> _ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span>) _ <span class="id">eqn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="id">ess</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_">kdenot_expss_</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list_rect">list_rect</a></span> _ _ _ _).<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">es</span>); <span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>; <span class="id">cases</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_expss_nil">kdenot_expss_nil</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="id">A</span> [] <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span> == 0.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.forall_kdenot_expss">forall_kdenot_expss</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>)) <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqn</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> _ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span>) <span class="id">n</span> <span class="id">eqn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; <span class="id">P</span> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">ess</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="id">ess</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span> * <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_eq">kdenot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_bot">forall_nprod_bot</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.forall_forall_kdenot_expss_">forall_forall_kdenot_expss_</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>)) <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>) -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>) <span class="id">envG</span> <span class="id">env</span>)) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span>) (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="id">ess</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span> * <span class="id">Herr</span> <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_eq">kdenot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_bot">forall_nprod_bot</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.forall_forall_kdenot_expss">forall_forall_kdenot_expss</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>)) <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span>) -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.annots">annots</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) = <span class="id">n</span>) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>) <span class="id">envG</span> <span class="id">env</span>)) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span>) (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="id">ess</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span> * <span class="id">Hlen</span> <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_eq">kdenot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *; <span class="id">contradiction</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.Forall_kdenot_expss">Forall_kdenot_expss</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">P</span> (<span class="id">es</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.exp">exp</a></span>)) <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.annots">annots</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) = <span class="id">n</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span>) (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="id">es</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">l</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span>)) <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">clear</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [|[<span class="id">i</span> <span class="id">es</span>] <span class="id">ess</span>]; <span class="id">intros</span> * <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;- <span class="id">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_eq">kdenot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;sans&nbsp;erreurs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> _ _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_cons2">Forall_cons2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- (<span class="id">IHess</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>))); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons_iff">forall_nprod_cons_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.forall_kdenot_exps">forall_kdenot_exps</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> <span class="id">n</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_exps_nil">kdenot_exps_nil</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> [] <span class="id">envG</span> <span class="id">env</span> = 0.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_exps_1">kdenot_exps_1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#list_of_nprod">list_of_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> [<span class="id">e</span>] <span class="id">envG</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#list_of_nprod">list_of_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_eq">kdenot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#list_of_nprod_app">list_of_nprod_app</a></span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_exp_eq">kdenot_exp_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">return</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Econst">Econst</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#val">val</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.Vscalar">Vscalar</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.sem_cconst">sem_cconst</a></span> <span class="id">c</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Eenum">Eenum</a></span> <span class="id">c</span> _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#val">val</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.Venum">Venum</a></span> <span class="id">c</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Evar">Evar</a></span> <span class="id">x</span> _ =&gt; <span class="id">env</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Elast">Elast</a></span> <span class="id">x</span> _ =&gt; <span class="id">env</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Eunop">Eunop</a></span> <span class="id">op</span> <span class="id">e</span> <span class="id">an</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">se</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.typeof">typeof</a></span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">ty</span>] =&gt; <span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#kunop">kunop</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.sem_unop">sem_unop</a></span> <span class="id">op</span> <span class="id">v</span> <span class="id">ty</span>) <span class="id">se</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Ebinop">Ebinop</a></span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">an</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">se1</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e1</span> <span class="id">envG</span> <span class="id">env</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">se2</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e2</span> <span class="id">envG</span> <span class="id">env</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.typeof">typeof</a></span> <span class="id">e1</span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.typeof">typeof</a></span> <span class="id">e2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">ty1</span>],[<span class="id">ty2</span>] =&gt; <span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#kbinop">kbinop</a></span> (<span class="kwd">fun</span> <span class="id">v1</span> <span class="id">v2</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.sem_binop">sem_binop</a></span> <span class="id">op</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">v2</span> <span class="id">ty2</span>) <span class="id">se1</span> <span class="id">se2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _,_ =&gt; <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Eextcall">Eextcall</a></span> _ _ _ =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Efby">Efby</a></span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">an</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">s0s</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">e0s</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">n</span> := (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e0s</span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">m</span> := (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">m</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">n</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">an</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqm</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqan</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> _ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2">lift2</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#APP">APP</a></span> _) <span class="id">s0s</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> _ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ss</span> _ <span class="id">eqm</span>)) _ <span class="id">eqan</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _, _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Earrow">Earrow</a></span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">an</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">s0s</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">e0s</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">n</span> := (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e0s</span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">m</span> := (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">m</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">n</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">an</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqm</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqan</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> _ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2">lift2</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#APP">APP</a></span> _) <span class="id">s0s</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> _ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#REM">REM</a></span> _) <span class="id">ss</span>) _ <span class="id">eqm</span>)) _ <span class="id">eqan</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _, _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Ewhen">Ewhen</a></span> <span class="id">es</span> (<span class="id">x</span>,_) <span class="id">k</span> (<span class="id">tys</span>,_) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqn</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> _ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#llift">llift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kwhenv">kwhenv</a></span> <span class="id">k</span>) <span class="id">ss</span> (<span class="id">env</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span>))) _ <span class="id">eqn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Emerge">Emerge</a></span> (<span class="id">x</span>,_) <span class="id">ies</span> (<span class="id">tys</span>,_) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ss</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span> _ _) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kmergev">kmergev</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>) (<span class="id">env</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span>))) <span class="id">ss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Ecase">Ecase</a></span> <span class="id">ec</span> <span class="id">ies</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id">tys</span>,_) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ss</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span> _ _) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">cs</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">ec</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">ec</span> <span class="kwd">as</span> <span class="id">n</span> <span class="kwd">return</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -&gt; _ <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1 =&gt; <span class="kwd">fun</span> <span class="id">cs</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kcasev">kcasev</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>) <span class="id">cs</span>) <span class="id">ss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; <span class="kwd">fun</span> _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Ecase">Ecase</a></span> <span class="id">ec</span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">eds</span>) (<span class="id">tys</span>,_) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ss</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length_map">length_map</a></span> _ _) <span class="kwd">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">cs</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">ec</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ds</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">eds</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">ec</span> <span class="kwd">as</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">eds</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">return</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -&gt; _ <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqm</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">cs</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kcase_defv">kcase_defv</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>) <span class="id">cs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> _ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ds</span> _ <span class="id">eqm</span>) <span class="id">ss</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _,_ =&gt; <span class="kwd">fun</span> _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Eapp">Eapp</a></span> <span class="id">f</span> <span class="id">es</span> <span class="id">er</span> <span class="id">an</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">rs</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">er</span> <span class="id">envG</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.G">G</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_out">n_out</a></span>))) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">an</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqan</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> _ <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">np_of_env'</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_out">n_out</a></span>)) (<span class="id">envG</span> <span class="id">f</span> (<span class="id">env_of_np'</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.idents">idents</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_in">n_in</a></span>)) <span class="id">ss</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_ <span class="id">eqan</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> _ <span class="id">errTy'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="comment">(*&nbsp;Le&nbsp;système&nbsp;se&nbsp;sent&nbsp;obligé&nbsp;de&nbsp;dérouler&nbsp;deux&nbsp;fois&nbsp;[kdenot_exp_]&nbsp;lors<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d'un&nbsp;appel&nbsp;à&nbsp;[unfold]&nbsp;et&nbsp;c'est&nbsp;très&nbsp;pénible.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cette&nbsp;tactique&nbsp;permet&nbsp;de&nbsp;le&nbsp;renrouler.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">fold_kdenot_exps</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> ?<span class="id">A</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">A</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_">kdenot_expss_</a></span> ?<span class="id">A</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">A</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;On&nbsp;doit&nbsp;souvent&nbsp;abstraire&nbsp;la&nbsp;définition&nbsp;des&nbsp;sous-flots<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pour&nbsp;pouvoir&nbsp;détruire&nbsp;les&nbsp;prédicats&nbsp;d'égalité&nbsp;sous&nbsp;les&nbsp;[eq_rect]&nbsp;etc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cette&nbsp;tactique&nbsp;le&nbsp;fait&nbsp;automatiquement.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">gen_kdenot_sub_exps</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> ?<span class="id">A</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">A</span>); <span class="id">intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> ?<span class="id">A</span> ?<span class="id">B</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps_">kdenot_exps_</a></span> <span class="id">A</span> <span class="id">B</span>); <span class="id">intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_">kdenot_expss_</a></span> ?<span class="id">A</span> ?<span class="id">B</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss_">kdenot_expss_</a></span> <span class="id">A</span> <span class="id">B</span>); <span class="id">intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>; <span class="id">auto</span>; <span class="id">intros</span> <span class="id">envG</span> <span class="id">env</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eunop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">e</span>) <span class="kwd">as</span> <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>) <span class="kwd">as</span> <span class="id">ne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.typeof">typeof</a></span> <span class="id">e</span>) <span class="kwd">as</span> [|? []]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ebinop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">e1</span>) (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">e2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">e1</span>) <span class="kwd">as</span> <span class="id">ss1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="id">e2</span>) <span class="kwd">as</span> <span class="id">ss2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.typeof">typeof</a></span> <span class="id">e1</span>) <span class="kwd">as</span> [|?[]], (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.typeof">typeof</a></span> <span class="id">e2</span>) <span class="kwd">as</span> [|?[]]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Efby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_kdenot_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_kdenot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Earrow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_kdenot_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_kdenot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ewhen&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p</span> <span class="kwd">as</span> (<span class="id">i</span>,?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_kdenot_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_kdenot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Emerge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p</span> <span class="kwd">as</span> (<span class="id">i</span>,<span class="id">ty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_kdenot_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_kdenot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ecase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;defaut&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_kdenot_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_kdenot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;total&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_expss">kdenot_expss</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_kdenot_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_kdenot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eapp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">es</span>, <span class="id">l0</span> <span class="id">into</span> <span class="id">er</span>, <span class="id">l1</span> <span class="id">into</span> <span class="id">anns</span>, <span class="id">i</span> <span class="id">into</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp_">kdenot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_kdenot_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_kdenot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">np_of_env'</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_out">n_out</a></span> <span class="id">n</span>))); <span class="id">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">destruct</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#curry_Curry">curry_Curry</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Curry_simpl">Curry_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_comp_simpl">fcont_comp_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">Global</span> <span class="kwd">Opaque</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">env_ext_var</span> <span class="id">xs</span> <span class="id">ss</span> <span class="id">env</span></span> binds Var(xs) to ss in env </div>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.env_ext_var">env_ext_var</a></span> (<span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) {<span class="id">n</span>} : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> _ _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth">mem_nth</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> <span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">l</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">n</span> <span class="id">errTy'</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span>) @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ <span class="id">x</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.env_ext_var_eq">env_ext_var_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.env_ext_var">env_ext_var</a></span> <span class="id">l</span> <span class="id">np</span> <span class="id">env</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">i</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth">mem_nth</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> <span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">l</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">n</span> <span class="id">errTy'</span> <span class="id">np</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id">env</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">x</span> =&gt; <span class="id">env</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.env_ext_var">env_ext_var</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
Qed.</div></details>
<br/>
<div class="doc"><span class="bracket"><span class="id">env_ext_last</span> <span class="id">xs</span> <span class="id">ss</span> <span class="id">env</span></span> binds Last(xs) to ss in env </div>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.env_ext_last">env_ext_last</a></span> (<span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) {<span class="id">n</span>} : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> _ _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">x</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth">mem_nth</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> <span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">l</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">n</span> <span class="id">errTy'</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">x</span>) @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> _ =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ <span class="id">x</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.env_ext_last_eq">env_ext_last_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.env_ext_last">env_ext_last</a></span> <span class="id">l</span> <span class="id">np</span> <span class="id">env</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">i</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth">mem_nth</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> <span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">l</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">n</span> <span class="id">errTy'</span> <span class="id">np</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id">env</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span> =&gt; <span class="id">env</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.env_ext_last">env_ext_last</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
Qed.</div></details>
<br/>
<div class="doc">union par la gauche de deux environnements </div>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.union_env">union_env</a></span> (<span class="id">dom</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> _ _ _ (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id">i</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident">mem_ident</a></span> <span class="id">x</span> <span class="id">dom</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ <span class="id">i</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ <span class="id">i</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">x</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident">mem_ident</a></span> <span class="id">x</span> <span class="id">dom</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ <span class="id">i</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ <span class="id">i</span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.union_env_simpl">union_env_simpl</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">dom</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> <span class="id">dom</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">i</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident">mem_ident</a></span> <span class="id">i</span> <span class="id">dom</span> <span class="kwd">then</span> <span class="id">e1</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">i</span>) <span class="kwd">else</span> <span class="id">e2</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident">mem_ident</a></span> <span class="id">i</span> <span class="id">dom</span> <span class="kwd">then</span> <span class="id">e1</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">i</span>) <span class="kwd">else</span> <span class="id">e2</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Last">Last</a></span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.tag_of_val">tag_of_val</a></span> (<span class="id">default</span>:<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span>) : <span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#val">val</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.Venum">Venum</a></span> <span class="id">t</span>) =&gt; <span class="id">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; <span class="id">default</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.bool_of_val">bool_of_val</a></span> : <span class="id"><a href="Velus.Lustre.Denot.Kfuns.html#errv">errv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.value">value</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.tag_of_val">tag_of_val</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1 =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.assoc_enumtag">assoc_enumtag</a></span> {<span class="id">A</span>} (<span class="id">x</span>: <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span>) (<span class="id">xs</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> * <span class="id">A</span>)): <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">A</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#find">find</a></span> (<span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">y</span> ==<span class="id">b</span> <span class="id">x</span>) <span class="id">xs</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (_, <span class="id">a</span>) =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_transitions">kdenot_transitions</a></span> (<span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.transition">transition</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|(<span class="id">e</span>,(<span class="id">i</span>,<span class="id">r</span>)) <span class="id">l</span>].<br/>
&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>).<br/>
&nbsp;&nbsp;+ <span class="id">refine</span> ((_ @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#ID">ID</a></span> _) <span class="id">IHl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">epose</span> (<span class="id">ts</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#MAP">MAP</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.bool_of_val">bool_of_val</a></span> @_ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#uncurry">uncurry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span>) @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#ZIP">ZIP</a></span> (<span class="kwd">fun</span> <span class="id">a</span> <span class="id">b</span> =&gt; <span class="kwd">match</span> <span class="id">a</span>,<span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">jr</span>, _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">jr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">i</span>,<span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _) <span class="id">ts</span>).<br/>
Defined.
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_transitions_eq">kdenot_transitions_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_transitions">kdenot_transitions</a></span> <span class="id">l</span> <span class="id">envG</span> <span class="id">env</span> ==<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_right">List.fold_right</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> '(<span class="id">e</span>,(<span class="id">i</span>,<span class="id">r</span>)) <span class="id">acc</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ts</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#map">map</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.bool_of_val">bool_of_val</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#ZIP">ZIP</a></span> (<span class="kwd">fun</span> <span class="id">a</span> <span class="id">b</span> =&gt; <span class="kwd">match</span> <span class="id">a</span>,<span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">jr</span>, _ =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">jr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">i</span>,<span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) <span class="id">acc</span> <span class="id">ts</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|(?&amp;?&amp;?)]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_right">fold_right</a></span> _ _ _).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">IHl</span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="LKAHN.KDenot_node.KDenot_blocks">KDenot_blocks</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LKAHN.KDenot_node.KDenot_blocks.kdenot_block_">kdenot_block_</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> : <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.block">block</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span>.<br/>
<br/>
<div class="doc">accumule le résultat des blocs dans la sortie </div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_blocks_">kdenot_blocks_</a></span> (<span class="id">blks</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.block">block</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">blks</span> <span class="kwd">as</span> [|<span class="id">b</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">refine</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> <span class="id">IHblks</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.KDenot_blocks.kdenot_block_">kdenot_block_</a></span> <span class="id">b</span>)).<br/>
&nbsp;&nbsp;Defined.
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_blocks__simpl">kdenot_blocks__simpl</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">envG</span> <span class="id">blks</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks_">kdenot_blocks_</a></span> <span class="id">blks</span> (<span class="id">envG</span>,<span class="id">env</span>) == <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="kwd">fun</span> <span class="id">env</span> <span class="id">b</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.KDenot_blocks.kdenot_block_">kdenot_block_</a></span> <span class="id">b</span> (<span class="id">envG</span>,<span class="id">env</span>)) <span class="id">blks</span> <span class="id">env</span>.<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">blks</span>; <span class="id">intros</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> _ _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">IHblks</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_scope_">kdenot_scope_</a></span> (<span class="id">decls</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.decl">decl</a></span>) (<span class="id">blks</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.block">block</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">vars</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">decls</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> ((<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> <span class="id">vars</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> ((<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks_">kdenot_blocks_</a></span> <span class="id">blks</span> @_ (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PAIR">PAIR</a></span> _ _ @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _) _)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> ((<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> <span class="id">vars</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _)).<br/>
&nbsp;&nbsp;Defined.
<br/>
<br/>
<div class="doc">The denotation of a local scope is done by computing the fixpoint
    of sub-blocks and by removing the local variables from the resulting
    environment </div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_scope__eq">kdenot_scope__eq</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">decls</span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope_">kdenot_scope_</a></span> <span class="id">decls</span> <span class="id">blks</span> (<span class="id">envG</span>,<span class="id">env</span>) ==<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">vars</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">decls</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">env'</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks_">kdenot_blocks_</a></span> <span class="id">blks</span> @_<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PAIR">PAIR</a></span> _ _ @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> <span class="id">vars</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _))) (<span class="id">envG</span>, <span class="id">env</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> <span class="id">vars</span> <span class="id">env</span> <span class="id">env'</span>.<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope_">kdenot_scope_</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> _ _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.KDenot_blocks">KDenot_blocks</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kswitch">kswitch</a></span> {<span class="id">A</span>} := @<span class="id"><a href="Velus.Lustre.Denot.Kauto.html#switch">Kauto.switch</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">A</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.auto_weak">auto_weak</a></span> {<span class="id">A</span>} := @<span class="id"><a href="Velus.Lustre.Denot.Kauto.html#auto_weak">Kauto.auto_weak</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">A</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.auto_strong">auto_strong</a></span> {<span class="id">A</span>} := @<span class="id"><a href="Velus.Lustre.Denot.Kauto.html#auto_strong">Kauto.auto_strong</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op.enumtag">enumtag</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">A</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="LKAHN.kdenot_block_">kdenot_block_</a></span> (<span class="id">b</span> : <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.block">block</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">refine</span><br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Beq">Beq</a></span> (<span class="id">xs</span>,<span class="id">es</span>) =&gt; (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.env_ext_var">env_ext_var</a></span> <span class="id">xs</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#uncurry">uncurry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span>)) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Blast">Blast</a></span> <span class="id">x</span> <span class="id">e</span> =&gt;  (@<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.env_ext_last">env_ext_last</a></span> [<span class="id">x</span>] 1 @2_<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#APP">APP</a></span> _ @2_ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#uncurry">uncurry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span>) @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _))) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">cs</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#MAP">MAP</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.tag_of_val">tag_of_val</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux.true_tag">true_tag</a></span>) @_ <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#uncurry">uncurry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">ec</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">fs</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">t</span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ <span class="id">l</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t</span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks_">kdenot_blocks_</a></span> <span class="id">kdenot_block_</span> <span class="id">l</span>)) <span class="id">branches</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kswitch">kswitch</a></span> @3_ <span class="id">cs</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> _ _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">fs</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fi</span> =&gt; (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> <span class="id">fi</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span> _ _ 0 <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>))  (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">decls</span> <span class="id">blks</span>) =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope_">kdenot_scope_</a></span> <span class="id">kdenot_block_</span> <span class="id">decls</span> <span class="id">blks</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> (_, <span class="id">ini</span>) <span class="id">states</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">fs</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '((<span class="id">i</span>,_), <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ (_, <span class="kwd">Scope</span> <span class="id">decls</span> (<span class="id">blks</span>, _))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">i</span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope_">kdenot_scope_</a></span> <span class="id">kdenot_block_</span> <span class="id">decls</span> <span class="id">blks</span>)) <span class="id">states</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ft</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '((<span class="id">i</span>,_), <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ (<span class="id">ts</span>, _)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">i</span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_transitions">kdenot_transitions</a></span> <span class="id">ts</span>)) <span class="id">states</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.auto_strong">auto_strong</a></span> <span class="id">ini</span> @3_<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> _ _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">fs</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fi</span> =&gt; (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> <span class="id">fi</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span> _ _ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> _ _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">ft</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fi</span> =&gt; (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> ((<span class="id">fi</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span> _ _ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Weak">Weak</a></span> <span class="id">ck</span> (_, <span class="id">ini</span>) <span class="id">states</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">fs</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '((<span class="id">i</span>,_), <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ (_, <span class="kwd">Scope</span> <span class="id">decls</span> (<span class="id">blks</span>, _))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">i</span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks_">kdenot_blocks_</a></span> <span class="id">kdenot_block_</span> <span class="id">blks</span>)) <span class="id">states</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ft</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '((<span class="id">i</span>,_), <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ (_, <span class="kwd">Scope</span> <span class="id">decls</span> (_, <span class="id">ts</span>))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">i</span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_transitions">kdenot_transitions</a></span> <span class="id">ts</span>)) <span class="id">states</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.auto_weak">auto_weak</a></span> <span class="id">ini</span> @3_<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> _ _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">fs</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fi</span> =&gt; (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> <span class="id">fi</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span> _ _ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> _ _ _<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">ft</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fi</span> =&gt; (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> ((<span class="id">fi</span> @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span> _ _ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Breset">Breset</a></span> <span class="id">blks</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _   <br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
Defined.
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_block">kdenot_block</a></span> (<span class="id">b</span> : <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.block">block</a></span>) : <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_block_">kdenot_block_</a></span> <span class="id">b</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_blocks">kdenot_blocks</a></span> (<span class="id">blks</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.block">block</a></span>) : <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks_">kdenot_blocks_</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_block_">kdenot_block_</a></span> <span class="id">blks</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_scope">kdenot_scope</a></span> (<span class="id">decls</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.decl">decl</a></span>) (<span class="id">blks</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.block">block</a></span>) : <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope_">kdenot_scope_</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_block_">kdenot_block_</a></span> <span class="id">decls</span> <span class="id">blks</span>).<br/>
<br/>
<div class="doc">The denotation of a local scope is done by computing the fixpoint
      of sub-blocks and by removing the local variables from the resulting
      environment </div>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_scope_eq">kdenot_scope_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">decls</span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope">kdenot_scope</a></span> <span class="id">decls</span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">env</span> ==<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">vars</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">decls</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">env'</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks">kdenot_blocks</a></span> <span class="id">blks</span> <span class="id">envG</span> @_ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> <span class="id">vars</span> &lt;<span class="id">___</span>&gt; <span class="id">env</span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> <span class="id">vars</span> <span class="id">env</span> <span class="id">env'</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope">kdenot_scope</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope_">kdenot_scope_</a></span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> _ _).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> _).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">trivial</span>.<br/>
Qed.</div></details>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_block_eq">kdenot_block_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">envG</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_block">kdenot_block</a></span> <span class="id">b</span> <span class="id">envG</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="kwd">match</span> <span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Beq">Beq</a></span> (<span class="id">xs</span>,<span class="id">es</span>) =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.env_ext_var">env_ext_var</a></span> <span class="id">xs</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exps">kdenot_exps</a></span> <span class="id">es</span> <span class="id">envG</span> <span class="id">env</span>) <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Blast">Blast</a></span> <span class="id">x</span> <span class="id">e</span> =&gt; @<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.env_ext_last">env_ext_last</a></span> [<span class="id">x</span>] 1 (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#app">app</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">e</span> <span class="id">envG</span> <span class="id">env</span>)) (<span class="id">env</span> (<span class="id"><a href="Velus.Lustre.Denot.Kenv.html#Var">Var</a></span> <span class="id">x</span>))) <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Bswitch">Bswitch</a></span> <span class="id">ec</span> <span class="id">branches</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">cs</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#map">map</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.tag_of_val">tag_of_val</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux.true_tag">true_tag</a></span>) (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.cast_1">cast_1</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_exp">kdenot_exp</a></span> <span class="id">ec</span> <span class="id">envG</span> <span class="id">env</span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kswitch">kswitch</a></span> <span class="id">cs</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">branches</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ <span class="id">blks</span>) =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks">kdenot_blocks</a></span> <span class="id">blks</span> <span class="id">envG</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0 <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">decls</span> <span class="id">blks</span>) =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope">kdenot_scope</a></span> <span class="id">decls</span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Strong">Strong</a></span> <span class="id">ck</span> (_, <span class="id">ini</span>) <span class="id">states</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">states</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '((<span class="id">a</span>,<span class="id">b</span>),<span class="id">c</span>) =&gt; (<span class="id">a</span>,<span class="id">c</span>)) <span class="id">states</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.auto_strong">auto_strong</a></span> <span class="id">ini</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">states</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ (_, <span class="kwd">Scope</span> <span class="id">decls</span> (<span class="id">blks</span>, _))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_scope">kdenot_scope</a></span> <span class="id">decls</span> <span class="id">blks</span> <span class="id">envG</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">states</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ (<span class="id">ts</span>, _)) =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_transitions">kdenot_transitions</a></span> <span class="id">ts</span> <span class="id">envG</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Bauto">Bauto</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Weak">Weak</a></span> <span class="id">ck</span> (_, <span class="id">ini</span>) <span class="id">states</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">states</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '((<span class="id">a</span>,<span class="id">b</span>),<span class="id">c</span>) =&gt; (<span class="id">a</span>,<span class="id">c</span>)) <span class="id">states</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.auto_weak">auto_weak</a></span> <span class="id">ini</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">states</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ (_, <span class="kwd">Scope</span> <span class="id">decls</span> (<span class="id">blks</span>, <span class="id">ts</span>))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks">kdenot_blocks</a></span> <span class="id">blks</span> <span class="id">envG</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span> <span class="id">i</span> <span class="id">states</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.Branch">Branch</a></span> _ (_, <span class="kwd">Scope</span> <span class="id">decls</span> (<span class="id">blks</span>, <span class="id">ts</span>))) =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_transitions">kdenot_transitions</a></span> <span class="id">ts</span> <span class="id">envG</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| _ =&gt; <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_block">kdenot_block</a></span>; <span class="id">intros</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Bswitch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_elim">fcont_eq_elim</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kswitch">kswitch</a></span> _ _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kswitch">kswitch</a></span> _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR_simpl">Dprodi_DISTR_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|[<span class="id">t</span> [? <span class="id">blks</span>]]]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">t</span> ==<span class="id">b</span> <span class="id">i</span>); <span class="id">auto</span>; <span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Bauto&nbsp;Weak&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_elim">fcont_eq_elim</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.auto_weak">auto_weak</a></span> _ _ _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#fcont_stable2">fcont_stable2</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.auto_weak">auto_weak</a></span> <span class="id">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR_simpl">Dprodi_DISTR_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|[[<span class="id">j</span> ?] [? [? [? []]]]]]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">j</span> ==<span class="id">b</span> <span class="id">i</span>); <span class="id">auto</span>; <span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_intro">fcont_eq_intro</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR_simpl">Dprodi_DISTR_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|[[<span class="id">j</span> ?] [? [? [? []]]]]]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">j</span> ==<span class="id">b</span> <span class="id">i</span>); <span class="id">auto</span>; <span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_intro">fcont_eq_intro</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Bauto&nbsp;Strong&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_elim">fcont_eq_elim</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.auto_strong">auto_strong</a></span> _ _ _).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#fcont_stable2">fcont_stable2</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.auto_strong">auto_strong</a></span> <span class="id">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR_simpl">Dprodi_DISTR_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|[[<span class="id">j</span> ?] [? [? [? []]]]]]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">j</span> ==<span class="id">b</span> <span class="id">i</span>); <span class="id">auto</span>; <span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_intro">fcont_eq_intro</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR_simpl">Dprodi_DISTR_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|[[<span class="id">j</span> ?] [? [? [? []]]]]]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.assoc_enumtag">assoc_enumtag</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">j</span> ==<span class="id">b</span> <span class="id">i</span>); <span class="id">auto</span>; <span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_intro">fcont_eq_intro</a></span>; <span class="id">auto</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_blocks_simpl">kdenot_blocks_simpl</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">envG</span> <span class="id">env</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks">kdenot_blocks</a></span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">env</span> == <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="kwd">fun</span> <span class="id">env</span> <span class="id">b</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_block">kdenot_block</a></span> <span class="id">b</span> <span class="id">envG</span> <span class="id">env</span>) <span class="id">blks</span> <span class="id">env</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks">kdenot_blocks</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#curry_Curry">curry_Curry</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Curry_simpl">Curry_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_blocks__simpl">kdenot_blocks__simpl</a></span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_node">kdenot_node</a></span> (<span class="id">n</span> : @<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.node">node</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node.Prefs">Prefs</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.SEnv">SEnv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span>.<br/>
&nbsp;&nbsp;<span class="id">refine</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> _ @_ _).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span>.<br/>
&nbsp;&nbsp;<span class="id">refine</span> ((<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_block">kdenot_block</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_block">n_block</a></span> <span class="id">n</span>) @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_in">n_in</a></span> <span class="id">n</span>)) @2_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _ @_ <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> _ _) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> _ _ ))).<br/>
Defined.
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_node_eq">kdenot_node_eq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_node">kdenot_node</a></span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> ==<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_block">kdenot_block</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_block">n_block</a></span> <span class="id">n</span>) <span class="id">envG</span> @_ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.union_env">union_env</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.n_in">n_in</a></span> <span class="id">n</span>)) <span class="id">envI</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_node">kdenot_node</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_stable">fcont_stable</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oprodi_eq_intro">Oprodi_eq_intro</a></span>; <span class="id">intro</span> <span class="id">env</span>.<br/>
&nbsp;&nbsp;<span class="id">trivial</span>.<br/>
Qed.</div></details>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KDenot_node">KDenot_node</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="LKAHN.KGlobal">KGlobal</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_global_">kdenot_global_</a></span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>) : <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span>; <span class="id">intro</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_node">kdenot_node</a></span> <span class="id">G</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, 0.<br/>
&nbsp;&nbsp;Defined.
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LKAHN.kdenot_global_eq">kdenot_global_eq</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>) <span class="id">envG</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_global_">kdenot_global_</a></span> <span class="id">G</span> <span class="id">envG</span> <span class="id">f</span> ==<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_node">kdenot_node</a></span> <span class="id">G</span> <span class="id">n</span> <span class="id">envG</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<details>
&nbsp;&nbsp;<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_global_">kdenot_global_</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR_simpl">Dprodi_DISTR_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;Qed.</div></details>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LKAHN.kdenot_global">kdenot_global</a></span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.Denot.K.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>) : <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.FEnv">FEnv</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> _ (<span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.kdenot_global_">kdenot_global_</a></span> <span class="id">G</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN.KGlobal">KGlobal</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN">LKAHN</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="LKahnFun">LKahnFun</a></span><br/>
&nbsp;&nbsp;(<span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span>       <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span>      <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn">Syn</a></span>)<br/>
&lt;: <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN">LKAHN</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Lord">Lord</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKAHN">LKAHN</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.K.html#Lord">Lord</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.K.html#LKahnFun">LKahnFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
