
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module InftyProof</title>
<meta name="description" content="Documentation of Coq module InftyProof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module InftyProof</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html">String</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html">Permutation</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CommonList.html">CommonList</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.FunctionalEnvironment.html">FunctionalEnvironment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.StaticEnv.html">Lustre.StaticEnv</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span> <span class="id"><a href="Velus.Lustre.LTyping.html">Lustre.LTyping</a></span> <span class="id"><a href="Velus.Lustre.LCausality.html">Lustre.LCausality</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html">Lustre.LSemantics</a></span> <span class="id"><a href="Velus.Lustre.LOrdered.html">Lustre.LOrdered</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.html">Lustre.Denot.Cpo</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html">SDfuns</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html">SD</a></span> <span class="id"><a href="Velus.Lustre.Denot.Restr.html">Restr</a></span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html">Infty</a></span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html">CommonList2</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="LDENOTINF">LDENOTINF</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Typ</span>   : <span class="id"><a href="Velus.Lustre.LTyping.html#LTYPING">LTYPING</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">LCA</span>   : <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY">LCAUSALITY</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Restr</span> : <span class="id"><a href="Velus.Lustre.Denot.Restr.html#LRESTR">LRESTR</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Den</span>   : <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD">SD</a></span>     <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord">Lord</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LDENOTINF.Top">Top</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LDENOTINF.Top.HasCausInj">HasCausInj</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id">cx</span> = <span class="id">x</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.HasCausRefl">HasCausRefl</a></span> : <span class="kwd">forall</span> Γ <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#InMembers_In">InMembers_In</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">e</span> <span class="id">Hin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.HasCausInj">HasCausInj</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">First we show that a well-formed node receiving streams of
      length n outputs streams of length n. </div>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="LDENOTINF.Top.Node_n">Node_n</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">PSyn</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.decl">decl</a></span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>}.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">Prefs</span> : <span class="id"><a href="Velus.Common.Common.html#PS.t">PS.t</a></span>}.<br/>
&nbsp;&nbsp;<span class="kwd">Variables</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="LDENOTINF.Top.Node_n.G">G</a></span> : @<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.Prefs">Prefs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="LDENOTINF.Top.Node_n.envG">envG</a></span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.FI">FI</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LDENOTINF.idcaus_map">idcaus_map</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op.type">type</a></span> * <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks.clock">clock</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.idcaus">idcaus</a></span> <span class="id">l</span>) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">l</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.map_fst_senv_of_ins">map_fst_senv_of_ins</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.idcaus">idcaus</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.senv_of_ins">senv_of_ins</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_ext_in_iff">map_ext_in_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">x</span> &amp; (<span class="id">ty</span>&amp;<span class="id">c</span>) &amp;<span class="id">cx</span>) <span class="id">Hin</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.HasCausInj">HasCausInj</a></span> <span class="kwd">with</span> (Γ := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.senv_of_ins">senv_of_ins</a></span> <span class="id">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span>; <span class="id">esplit</span>; <span class="id">split</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LDENOTINF.idcaus_of_decls_map">idcaus_of_decls_map</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op.type">type</a></span> * <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks.clock">clock</a></span> * <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">_</span>, (<span class="id">_</span>, <span class="id">_</span>, <span class="id">_</span>, <span class="id">o</span>)) =&gt; <span class="id">o</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">l</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.idcaus_of_decls">idcaus_of_decls</a></span> <span class="id">l</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.idcaus_of_decls">idcaus_of_decls</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.senv_of_decls">senv_of_decls</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#map_filter_map">map_filter_map</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#map_filter_nil">map_filter_nil</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">simpl_Forall</span>; <span class="id">subst</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_ext_in_iff">map_ext_in_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">x</span> &amp; ([]&amp;?) &amp;<span class="id">cx</span>) <span class="id">Hin</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#symmetry">symmetry</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.HasCausInj">HasCausInj</a></span> <span class="kwd">with</span> (Γ := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span>; <span class="id">esplit</span>; <span class="id">split</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="LDENOTINF.map_fst_idcaus_decls">map_fst_idcaus_decls</a></span> : <span class="kwd">forall</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> '(<span class="id">_</span>, (<span class="id">_</span>, <span class="id">_</span>, <span class="id">_</span>, <span class="id">o</span>)) =&gt; <span class="id">o</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">l</span>)) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">l</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.idcaus_of_senv">idcaus_of_senv</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.senv_of_decls">senv_of_decls</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#map_filter_nil">map_filter_nil</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>. 2:<span class="id">simpl_Forall</span>; <span class="id">subst</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_ext">map_ext</a></span>; <span class="id">eauto</span>. <span class="id">intros</span>; <span class="id">destruct_conjs</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<div class="doc">Invariants pour l'induction causale </div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LDENOTINF.P_var">P_var</a></span> (<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">env</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span>) (<span class="id">x</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> <span class="id">_</span> <span class="id">x</span> <span class="id">env</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LDENOTINF.P_vars">P_vars</a></span> (<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">env</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span>) (<span class="id">cxs</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">cxs</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">x</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LDENOTINF.P_exp">P_exp</a></span> (<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> (<span class="id">e</span> : <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.exp">exp</a></span>) (<span class="id">k</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp">denot_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">k</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.errTy">errTy</a></span> <span class="id">ss</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="LDENOTINF.Top.Node_n.Hnode">Hnode</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">f</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) (<span class="id">nd</span> : <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.node">node</a></span>) (<span class="id">envI</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">envI</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.envG">envG</a></span> <span class="id">f</span> <span class="id">envI</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>))).<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="id">Global</span> <span class="id">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">n</span> : (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="id">n</span>) <span class="kwd">with</span> <span class="id">signature</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oeq">Oeq</a></span> (<span class="id">O</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span>) ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span> <span class="kwd">as</span> <span class="id">P_var_morph</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?? <span class="id">H</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="id">Global</span> <span class="id">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">n</span> : (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span>) <span class="kwd">with</span> <span class="id">signature</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oeq">Oeq</a></span> (<span class="id">O</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span>) ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span> <span class="kwd">as</span> <span class="id">P_vars_morph</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?? <span class="id">H</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">setoid_rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_vars_In">P_vars_In</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">env</span> <span class="id">xs</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_var_S">P_var_S</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">env</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_S">is_ncons_S</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_vars_S">P_vars_S</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">env</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_impl">Forall_impl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var_S">P_var_S</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_vars_O">P_vars_O</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">env</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id">env</span> <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xs</span>; <span class="id">constructor</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_vars_app_l">P_vars_app_l</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">env</span> <span class="id">xs</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">env</span> (<span class="id">xs</span> ++ <span class="id">ys</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">ys</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_vars_app_r">P_vars_app_r</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">env</span> <span class="id">xs</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">env</span> (<span class="id">xs</span> ++ <span class="id">ys</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_exps_k">P_exps_k</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">es</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span> <span class="id">n</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span>) <span class="id">es</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">k</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.errTy">errTy</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exps">denot_exps</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [| <span class="id">e</span> <span class="id">es</span>]; <span class="id">intros</span> * <span class="id">Hp</span> <span class="comment">(*&nbsp;Hwl&nbsp;Hr&nbsp;*)</span>; <span class="id">inv</span> <span class="id">Hp</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exps_eq">denot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_app_nth1">nprod_app_nth1</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.Is_used_inst_list">Is_used_inst_list</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exps_eq">denot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_app_nth2">nprod_app_nth2</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.Is_used_inst_list">Is_used_inst_list</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_expss_k">P_expss_k</a></span> : <span class="kwd">forall</span> <span class="id">n</span> (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.exp">exp</a></span>)) <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">k</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots">annots</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) = <span class="id">m</span>) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span> <span class="id">n</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span>) <span class="id">es</span> <span class="id">k</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">ess</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="kwd">fun</span> <span class="id">np</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">k</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.errTy">errTy</a></span> <span class="id">np</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_expss">denot_expss</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">ins</span> <span class="id">ess</span> <span class="id">m</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hl</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|[<span class="id">j</span> <span class="id">es</span>] <span class="id">ess</span>]. <span class="id">now</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_expss_eq">denot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hl</span>. <span class="id">inv</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">_</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>; <span class="id">cases</span>; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHess</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_exps_impl">P_exps_impl</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">Q</span> (<span class="id">P_exp</span> : <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">es</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">Q</span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span> (<span class="kwd">fun</span> <span class="id">e</span> <span class="id">k</span> =&gt; <span class="id">Q</span> <span class="id">e</span> -&gt; <span class="id">P_exp</span> <span class="id">e</span> <span class="id">k</span>) <span class="id">es</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span> <span class="id">P_exp</span> <span class="id">es</span> <span class="id">k</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [|<span class="id">a</span> <span class="id">es</span>]; <span class="id">intros</span> * <span class="id">Hf</span> <span class="id">Hp</span>; <span class="id">simpl_Forall</span>. <span class="id">inv</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_ge_cases">Nat.lt_ge_cases</a></span> <span class="id">k</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">a</span>)); <span class="id">inv</span> <span class="id">Hp</span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.Forall_P_exps">Forall_P_exps</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P_exp</span> : <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">es</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="kwd">forall</span> <span class="id">k</span>, <span class="id">k</span> &lt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span> -&gt; <span class="id">P_exp</span> <span class="id">e</span> <span class="id">k</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span> <span class="id">P_exp</span> <span class="id">es</span> <span class="id">k</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [|<span class="id">e</span> <span class="id">es</span>]; <span class="id">simpl</span>; <span class="id">intros</span> * <span class="id">Hf</span> <span class="id">Hk</span>. <span class="id">inv</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_ge_cases">Nat.lt_ge_cases</a></span> <span class="id">k</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>)); <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span> 2; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHes</span>; <span class="id">auto</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.Forall_P_expss">Forall_P_expss</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P_exp</span> : <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.exp">exp</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op.enumtag">enumtag</a></span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.exp">exp</a></span>)) <span class="id">k</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="kwd">forall</span> <span class="id">k</span>, <span class="id">k</span> &lt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span> -&gt; <span class="id">P_exp</span> <span class="id">e</span> <span class="id">k</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">ess</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots">annots</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) = <span class="id">m</span>) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span> <span class="id">P_exp</span> <span class="id">es</span> <span class="id">k</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">ess</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Forall_P_exps">Forall_P_exps</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.is_ncons_sbools_of">is_ncons_sbools_of</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span>) <span class="id">np</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.sbools_of">sbools_of</a></span> <span class="id">np</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m</span>; <span class="id">intros</span> * <span class="id">Hf</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_DS_const">is_ncons_DS_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_inv">forall_nprod_inv</a></span> <span class="kwd">in</span> <span class="id">Hf</span> <span class="kwd">as</span> [<span class="id">Hh</span> <span class="id">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.sbools_of">sbools_of</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#Fold_eq">Fold_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_hd">lift_hd</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_tl">lift_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_zip">is_ncons_zip</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> (<span class="id">IHm</span> <span class="id">_</span> <span class="id">Ht</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">solve_err</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> (<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *; <span class="id">congruence</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">try</span> (<span class="id">repeat</span> (<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth_const">get_nth_const</a></span>; [|<span class="id">simpl</span>; <span class="id">cases</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem">nrem</a></span> <span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#map">Cpo_streams_type.map</a></span> <span class="id">_</span> <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">_</span>)); <span class="id">auto</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> (<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_DS_const">is_ncons_DS_const</a></span> || <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_consn_DS_const">is_consn_DS_const</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_vars_env_of_np">P_vars_env_of_np</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">l</span> <span class="id">m</span> (<span class="id">mp</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span>) <span class="id">mp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.env_of_np">env_of_np</a></span> <span class="id">l</span> <span class="id">mp</span>) <span class="id">l</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.env_of_np_eq">env_of_np_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.mem_nth">mem_nth</a></span> <span class="id">l</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">i</span>|] <span class="id">eqn</span>:<span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_k_def">forall_nprod_k_def</a></span>; <span class="id">auto</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_nin">mem_nth_nin</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_vars_app">P_vars_app</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> 1 <span class="id">X</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">Y</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#APP_env">APP_env</a></span> <span class="id">X</span> <span class="id">Y</span>) <span class="id">l</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">intros</span> * <span class="id">Px</span> <span class="id">Py</span> <span class="id">x</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#APP_env_eq">APP_env_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_app">rem_app</a></span>; <span class="id">auto</span>; <span class="id">apply</span> <span class="id">Py</span>, <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_vars_1">P_vars_1</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">X</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">X</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> 1 <span class="id">X</span> <span class="id">l</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_S">P_vars_S</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.is_cons_sreset_aux">is_cons_sreset_aux</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span>:<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span>) <span class="id">ins</span> <span class="id">outs</span> <span class="id">R</span> <span class="id">X</span> <span class="id">Y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">envI</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> 1 <span class="id">envI</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> 1 (<span class="id">f</span> <span class="id">envI</span>) <span class="id">outs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons">is_cons</a></span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> 1 <span class="id">X</span> <span class="id">ins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> 1 <span class="id">Y</span> <span class="id">outs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> 1 (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux">sreset_aux</a></span> <span class="id">f</span> <span class="id">R</span> <span class="id">X</span> <span class="id">Y</span>) <span class="id">outs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Cf</span> <span class="id">Cr</span> <span class="id">Cx</span> <span class="id">Cy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Cr</span> <span class="kwd">as</span> (<span class="id">vr</span> &amp; <span class="id">R</span>' &amp; <span class="id">Hr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">vr</span>; [<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_app">P_vars_app</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_O">P_vars_O</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.is_ncons_sreset">is_ncons_sreset</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span>:<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span>) <span class="id">ins</span> <span class="id">outs</span> <span class="id">R</span> <span class="id">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span> <span class="id">envI</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">envI</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> (<span class="id">f</span> <span class="id">envI</span>) <span class="id">outs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">X</span> <span class="id">ins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset">sreset</a></span> <span class="id">f</span> <span class="id">R</span> <span class="id">X</span>) <span class="id">outs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Cf</span> <span class="id">n</span> <span class="id">Cr</span> <span class="id">Cx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_eq">sreset_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hy</span> : <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> (<span class="id">f</span> <span class="id">X</span>) <span class="id">outs</span>) <span class="kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id">_</span> <span class="id">f</span> <span class="id">X</span>) <span class="kwd">as</span> <span class="id">Y</span> <span class="id">eqn</span>:<span class="id">HH</span>; <span class="id">clear</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">dependent</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">dependent</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">dependent</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.is_cons_sreset_aux">is_cons_sreset_aux</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_is_cons">is_ncons_is_cons</a></span> <span class="kwd">in</span> <span class="id">Cr</span> <span class="kwd">as</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#is_cons_elim">is_cons_elim</a></span> <span class="kwd">in</span> <span class="id">Hr</span> <span class="kwd">as</span> (<span class="id">vr</span> &amp; <span class="id">R</span>' &amp; <span class="id">Hr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hr</span>, <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Cr</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#rem_cons">rem_cons</a></span> <span class="kwd">in</span> <span class="id">Cr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">vr</span>; [<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset_aux_eq">sreset_aux_eq</a></span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_app">P_vars_app</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_1">P_vars_1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHn</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> (<span class="id">Cf</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>))).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.is_ncons_bss">is_ncons_bss</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> (<span class="id">env</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.SI">SI</a></span>) <span class="id">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">l</span> <span class="id">env</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span>; <span class="id">intros</span> * <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_DS_const">is_ncons_DS_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss_cons">bss_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_zip">is_ncons_zip</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_map">is_ncons_map</a></span>, <span class="id">Hv</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.exp_n">exp_n</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">n</span> <span class="id">e</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">envI</span> <span class="id">ins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> Γ <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span> <span class="id">n</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">e</span> <span class="id">k</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">Hk</span> <span class="id">Hr</span> <span class="id">Hwl</span> <span class="id">Hwx</span> <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;cas&nbsp;des&nbsp;variables,&nbsp;mutualisé&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>)) <span class="kwd">as</span> <span class="id">Hvar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="kwd">in</span> <span class="id">Hins</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_var">denot_var</a></span>. <span class="id">cases_eqn</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;in&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident_spec">mem_ident_spec</a></span> <span class="kwd">in</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;out&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident_false">mem_ident_false</a></span> <span class="kwd">in</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">Hn</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.HasCausRefl">HasCausRefl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">dependent</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="id">simpl</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>; <span class="id">try</span> <span class="id">now</span> <span class="id">inv</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Econst&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">k</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">by</span> <span class="id">lia</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sconst">is_ncons_sconst</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.is_ncons_bss">is_ncons_bss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eenum&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">k0</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">by</span> <span class="id">lia</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sconst">is_ncons_sconst</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.is_ncons_bss">is_ncons_bss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Evar&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">k</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">by</span> <span class="id">lia</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwx</span>. <span class="id">now</span> <span class="id">apply</span> <span class="id">Hvar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eunop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">k</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">by</span> <span class="id">lia</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">IHe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.length_typeof_numstreams">length_typeof_numstreams</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">inv</span> <span class="id">Hwx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">cases_eqn</span> <span class="id">HH</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sunop">is_ncons_sunop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unshelve</span> <span class="id">eapply</span> (<span class="id">IHe</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ebinop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">k</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">by</span> <span class="id">lia</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">IHe1</span> <span class="id">IHe2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- 2 <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.length_typeof_numstreams">length_typeof_numstreams</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">inv</span> <span class="id">Hwx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">cases_eqn</span> <span class="id">HH</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sbinop">is_ncons_sbinop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unshelve</span> <span class="id">eapply</span> (<span class="id">IHe1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unshelve</span> <span class="id">eapply</span> (<span class="id">IHe2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Efby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2_nth">lift2_nth</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H0</span>,<span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H0</span>,<span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwx</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H0</span>,<span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_fby">is_ncons_fby</a></span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Forall_P_exps">Forall_P_exps</a></span>; <span class="id">auto</span>; <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ewhen&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#llift_nth">llift_nth</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwx</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_swhen">is_ncons_swhen</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Forall_P_exps">Forall_P_exps</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Emerge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x</span>, <span class="id">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_map">Forall_map</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_concat">Forall_concat</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_concat">Forall_concat</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Forall_P_expss">Forall_P_expss</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_expss_k">P_expss_k</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod_nth">lift_nprod_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_smerge">is_ncons_smerge</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_lift">forall_nprod_lift</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ecase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_map">Forall_map</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_concat">Forall_concat</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_concat">Forall_concat</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Forall_P_expss">Forall_P_expss</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_expss_k">P_expss_k</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">e</span>) <span class="id">and</span> <span class="id">apply</span> <span class="id">IHe</span> <span class="kwd">with</span> (<span class="id">k</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> <span class="id">Hc</span>; <span class="id">auto</span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3: <span class="id">inv</span> <span class="id">Hr</span>; <span class="id">rewrite</span>  &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_concat">Forall_concat</a></span> <span class="kwd">in</span> *; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">d</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;défaut&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Forall_P_exps">Forall_P_exps</a></span> <span class="kwd">with</span> (<span class="id">k</span> := <span class="id">k</span>), <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span>, <span class="id">H13</span>; <span class="id">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H0</span> <span class="id">H</span> <span class="id">Hc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">try</span> <span class="id">congruence</span>; <span class="id">intros</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod_nth">lift_nprod_nth</a></span> <span class="kwd">with</span> (<span class="id">F</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.scase_defv">scase_defv</a></span> <span class="id">_</span> <span class="id">_</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_cons">lift_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_scase_def">is_ncons_scase_def</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_lift">forall_nprod_lift</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;total&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hc</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">try</span> <span class="id">congruence</span>; <span class="id">intros</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod_nth">lift_nprod_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_scase">is_ncons_scase</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_lift">forall_nprod_lift</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eapp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwx</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>; <span class="id">cases</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_k">forall_nprod_k</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">forall_np_of_env</span>'; <span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>; <span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.is_ncons_sreset">is_ncons_sreset</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.is_ncons_sbools_of">is_ncons_sbools_of</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#k_forall_nprod_def">k_forall_nprod_def</a></span> <span class="kwd">with</span> (<span class="id">d</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.errTy">errTy</a></span>); <span class="id">intros</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Forall_P_exps">Forall_P_exps</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_env_of_np">P_vars_env_of_np</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#k_forall_nprod_def">k_forall_nprod_def</a></span> <span class="kwd">with</span> (<span class="id">d</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.errTy">errTy</a></span>); <span class="id">intros</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Forall_P_exps">Forall_P_exps</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.exps_n">exps_n</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">n</span> <span class="id">es</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">envI</span> <span class="id">ins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> Γ) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span> <span class="id">n</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span>) <span class="id">es</span> <span class="id">k</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [| <span class="id">e</span> <span class="id">es</span>]; <span class="id">simpl</span>; <span class="id">intros</span> * <span class="id">Hins</span> <span class="id">Hk</span> <span class="id">Hr</span> <span class="id">Hwl</span> <span class="id">Hwx</span> <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_ge_cases">Nat.lt_ge_cases</a></span> <span class="id">k</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.exp_n">exp_n</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span> 2; <span class="id">auto</span>. <span class="id">apply</span> <span class="id">IHes</span>; <span class="id">auto</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.exp_S">exp_S</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">n</span> <span class="id">e</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">envI</span> <span class="id">ins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.Is_used_inst">Is_used_inst</a></span> Γ <span class="id">x</span> <span class="id">k</span> <span class="id">e</span> -&gt; ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> Γ <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">e</span> <span class="id">k</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hins</span> <span class="id">Hk</span> <span class="id">Hdep</span> <span class="id">Hr</span> <span class="id">Hwl</span> <span class="id">Hwx</span> <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;cas&nbsp;des&nbsp;variables,&nbsp;mutualisé&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hvar</span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">cx</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons">is_ncons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="kwd">in</span> <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">cx</span> <span class="id">Hc</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_var">denot_var</a></span>; <span class="id">cases_eqn</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;in&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident_spec">mem_ident_spec</a></span> <span class="kwd">in</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;out&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident_false">mem_ident_false</a></span> <span class="kwd">in</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.HasCausInj">HasCausInj</a></span> <span class="kwd">in</span> <span class="id">Hc</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hwl</span>' := <span class="id">Hwl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hwx</span>' := <span class="id">Hwx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hwl</span> <span class="id">Hwx</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.exp_causal_ind">exp_causal_ind</a></span> <span class="kwd">with</span> (16 := <span class="id">Hdep</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">clear</span> <span class="id">dependent</span> <span class="id">e</span>; <span class="id">clear</span> <span class="id">k</span>; <span class="id">intros</span>; <span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;cas&nbsp;restreints&nbsp;:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">try</span> <span class="id">now</span> <span class="id">inv</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Econst&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sconst">is_ncons_sconst</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.is_ncons_bss">is_ncons_bss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eenum&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sconst">is_ncons_sconst</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.is_ncons_bss">is_ncons_bss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Evar&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">Hvar</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eunop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.length_typeof_numstreams">length_typeof_numstreams</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">inv</span> <span class="id">Hwx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">cases_eqn</span> <span class="id">HH</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sunop">is_ncons_sunop</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ebinop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- 2 <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.length_typeof_numstreams">length_typeof_numstreams</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">inv</span> <span class="id">Hwx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">cases_eqn</span> <span class="id">HH</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_sbinop">is_ncons_sbinop</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Efby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2_nth">lift2_nth</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwx</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_S_fby">is_ncons_S_fby</a></span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.exps_n">exps_n</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#is_ncons_S">is_ncons_S</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_S">P_vars_S</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ewhen&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwx</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#llift_nth">llift_nth</a></span>; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_swhen">is_ncons_swhen</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>); <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Emerge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ann0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod_nth">lift_nprod_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_smerge">is_ncons_smerge</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_lift">forall_nprod_lift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_denot_expss">forall_denot_expss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">inv</span> <span class="id">Hwx</span>. <span class="id">inv</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>; <span class="id">cases</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ecase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ann0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">inv</span> <span class="id">Hwx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">es</span>) <span class="id">and</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_expss_k">P_expss_k</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">it</span> <span class="kwd">as</span> <span class="id">Hess</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>; <span class="id">simpl_Forall</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">d</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;défaut&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H0</span> <span class="id">H2</span> <span class="id">Hess</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">intros</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod_nth">lift_nprod_nth</a></span> <span class="kwd">with</span> (<span class="id">F</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.scase_defv">scase_defv</a></span> <span class="id">_</span> <span class="id">_</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_cons">lift_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_scase_def">is_ncons_scase_def</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_lift">forall_nprod_lift</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;total&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H0</span> <span class="id">Hess</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">intros</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod_nth">lift_nprod_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#is_ncons_scase">is_ncons_scase</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_lift">forall_nprod_lift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eapp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hwx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span>) <span class="id">eqn</span>:?; <span class="id">cases</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_k">forall_nprod_k</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">forall_np_of_env</span>'; <span class="id">setoid_rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.is_ncons_sreset">is_ncons_sreset</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>); <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.Hnode">Hnode</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node_name">find_node_name</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.is_ncons_sbools_of">is_ncons_sbools_of</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#k_forall_nprod_def">k_forall_nprod_def</a></span> <span class="kwd">with</span> (<span class="id">d</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.errTy">errTy</a></span>); <span class="id">intros</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_env_of_np">P_vars_env_of_np</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#k_forall_nprod_def">k_forall_nprod_def</a></span> <span class="kwd">with</span> (<span class="id">d</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.errTy">errTy</a></span>); <span class="id">intros</span>; <span class="id">solve_err</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_impl">P_exps_impl</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="LDENOTINF.exps_S">exps_S</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">n</span> <span class="id">es</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">envI</span> <span class="id">ins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.Is_used_inst_list">Is_used_inst_list</a></span> Γ <span class="id">x</span> <span class="id">k</span> <span class="id">es</span> -&gt; ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> Γ) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps">P_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exp">P_exp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span>) <span class="id">es</span> <span class="id">k</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [| <span class="id">e</span> <span class="id">es</span>]; <span class="id">simpl</span>; <span class="id">intros</span>; <span class="id">try</span> <span class="id">lia</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_ge_cases">Nat.lt_ge_cases</a></span> <span class="id">k</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps_now">P_exps_now</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.exp_S">exp_S</a></span>; <span class="id">intros</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">and</span> <span class="id">apply</span> <span class="id">it</span>; <span class="id">auto</span>; <span class="id">left</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.P_exps_later">P_exps_later</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHes</span>; <span class="id">auto</span>; <span class="id">try</span> <span class="id">lia</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">and</span> <span class="id">apply</span> <span class="id">it</span>; <span class="id">auto</span>; <span class="id">right</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.P_var_inside_blocks">P_var_inside_blocks</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">blks</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_block">restr_block</a></span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_block">wl_block</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span>) <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_block">wx_block</a></span> Γ) <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">envI</span> <span class="id">ins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">cx</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists">Exists</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.depends_on">depends_on</a></span> Γ <span class="id">x</span> <span class="id">y</span>) <span class="id">blks</span> -&gt; ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">y</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists">Exists</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.Is_defined_in">Syn.Is_defined_in</a></span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>)) <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_blocks">denot_blocks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">ins</span> <span class="id">blks</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.envG">envG</a></span> <span class="id">envI</span> <span class="id">env</span>) <span class="id">x</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hr</span> <span class="id">Hwl</span> <span class="id">Hwx</span> <span class="id">Hins</span> <span class="id">Hn</span> <span class="id">Hdep</span> <span class="id">Hex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">blks</span> <span class="kwd">as</span> [| <span class="id">blk</span> <span class="id">blks</span>]. <span class="id">inversion</span> <span class="id">Hex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_blocks_eq_cons">denot_blocks_eq_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_block_eq">denot_block_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">inv</span> <span class="id">Hwl</span>. <span class="id">inv</span> <span class="id">Hwx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_block">restr_block</a></span> <span class="id">blk</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_block">wl_block</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_block">wx_block</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_equation">wl_equation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_equation">wx_equation</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.env_of_np_ext_eq">env_of_np_ext_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.mem_nth">mem_nth</a></span> <span class="id">xs</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">k</span>|] <span class="id">eqn</span>:<span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_Some">mem_nth_Some</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> <span class="id">Hk</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_error">mem_nth_error</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_exps_k">P_exps_k</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.exps_S">exps_S</a></span>; <span class="id">eauto</span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">y</span> <span class="id">Hiuil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">Hdep</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists_cons_hd">Exists_cons_hd</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.DepOnEq">DepOnEq</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.HasCausRefl">HasCausRefl</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHblks</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hex</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_nin">mem_nth_nin</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="id">try</span> <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.Is_defined_in">Syn.Is_defined_in</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.HasCaus_In">HasCaus_In</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">cx</span> Γ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> Γ).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.locals_restr_blocks">locals_restr_blocks</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">blks</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.block">block</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_block">restr_block</a></span> <span class="id">blks</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#flat_map">flat_map</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.idcaus_of_locals">idcaus_of_locals</a></span> <span class="id">blks</span> = [].<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> 1 <span class="kwd">as</span> [|?? <span class="id">Hr</span>]; <span class="id">auto</span>; <span class="id">now</span> <span class="id">inv</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.get_idcaus_locals">get_idcaus_locals</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.node">node</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.Prefs">Prefs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_node">restr_node</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.get_locals">get_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>)) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.idcaus_of_locals">idcaus_of_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">Hr</span> <span class="kwd">as</span> [?? <span class="id">Hrtb</span> (<span class="id">xs</span> &amp; <span class="id">Vd</span> &amp; <span class="id">Perm</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hrtb</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.locals_restr_blocks">locals_restr_blocks</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.idcaus_of_decls_map">idcaus_of_decls_map</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.map_fst_senv_of_decls">map_fst_senv_of_decls</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.nin_defined">nin_defined</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span> : @<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.node">node</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.Prefs">Prefs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">blks</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_block">n_block</a></span> <span class="id">n</span> = <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">vars</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.senv_of_decls">senv_of_decls</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">n</span>) ++ <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">vars</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.Is_defined_in">Syn.Is_defined_in</a></span> (<span class="id"><a href="Velus.FunctionalEnvironment.html#Var">Var</a></span> <span class="id">x</span>)) <span class="id">blks</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hn</span> <span class="id">Hxin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_nodup">n_nodup</a></span> <span class="id">n</span>) <span class="kwd">as</span> (<span class="id">Nd</span> &amp; <span class="id">Ndl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_defd">n_defd</a></span> <span class="id">n</span>) <span class="kwd">as</span> (?&amp; <span class="id">Vd</span> &amp; <span class="id">Perm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hn</span> <span class="kwd">in</span> <span class="id">Vd</span>, <span class="id">Ndl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Ndl</span>; <span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.NoDupScope">NoDupScope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Vd</span>; <span class="id">Syn.inv_scope</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.Forall_VarsDefined_Is_defined">Forall_VarsDefined_Is_defined</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">_</span>) <span class="id">_</span>) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">x0</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.map_fst_senv_of_decls">map_fst_senv_of_decls</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.NoDupLocals_incl">NoDupLocals_incl</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve_incl_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">_</span>) <span class="id">_</span>) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id">x0</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">L'étape d'induction pour P_var sur les nœuds, qui utilise <span class="bracket"><span class="id">exp_S</span></span>. </div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.denot_S">denot_S</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nd</span> <span class="id">envI</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_node">restr_node</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_node">wl_node</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_node">wx_node</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.node_causal">node_causal</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">envI</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node">denot_node</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">nd</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.envG">envG</a></span> <span class="id">envI</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.get_locals">get_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node">denot_node</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">nd</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.envG">envG</a></span> <span class="id">envI</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.get_locals">get_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>))).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hr</span> <span class="id">Hwl</span> <span class="id">Hwx</span> <span class="id">Hcaus</span> <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set</span> (<span class="id">ins</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set</span> (<span class="id">env</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.node_causal_ind">node_causal_ind</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;le&nbsp;résultat&nbsp;n'est&nbsp;pas&nbsp;vrai&nbsp;sur&nbsp;les&nbsp;ins&nbsp;!&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;with&nbsp;(P_vars&nbsp;:=&nbsp;P_vars&nbsp;(S&nbsp;n)&nbsp;env)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">P_vars</span> := <span class="kwd">fun</span> <span class="id">l</span> =&gt; <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">l</span> -&gt; ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ins</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span> <span class="id">Hcaus</span> <span class="kwd">as</span> (<span class="id">lord</span> &amp; <span class="id">Perm3</span> &amp; <span class="id">Hlord</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">x</span> <span class="id">Hin</span>; <span class="id">apply</span> <span class="id">Hlord</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;on&nbsp;prouve&nbsp;l'inclusion&nbsp;:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">Hr</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Perm3</span>, 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.idcaus_of_decls_map">idcaus_of_decls_map</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.get_idcaus_locals">get_idcaus_locals</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> *; <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;et&nbsp;la&nbsp;non-duplication&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">Nd</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.NoDup_iol">NoDup_iol</a></span> <span class="id">nd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span> <span class="kwd">in</span> <span class="id">Nd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_app_comm">Permutation_app_comm</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.map_fst_senv_of_ins">map_fst_senv_of_ins</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.map_fst_senv_of_decls">map_fst_senv_of_decls</a></span> <span class="kwd">in</span> <span class="id">Nd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDup_app_In">NoDup_app_In</a></span> <span class="kwd">in</span> <span class="id">Nd</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inversion</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">y</span> <span class="id">ys</span> <span class="id">Hxin</span> <span class="id">Hys</span> <span class="id">Hdep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> [] <span class="id">Hxnins</span>; <span class="id">subst</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> <span class="id">Hxin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hxin</span> <span class="kwd">as</span> [<span class="id">Hxin</span>|<span class="id">Hxin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x&nbsp;∈&nbsp;ins,&nbsp;contradiction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.idcaus_map">idcaus_map</a></span> <span class="kwd">in</span> <span class="id">Hxin</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x&nbsp;est&nbsp;une&nbsp;sortie&nbsp;ou&nbsp;une&nbsp;locale,&nbsp;on&nbsp;utilise&nbsp;laborieusement&nbsp;P_var_inside_blocks&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwx</span>; <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">Hr</span> <span class="kwd">as</span> [?? <span class="id">Hrtb</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">Hrtb</span> <span class="kwd">as</span> [???? <span class="id">Hnd</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">Hnd</span> <span class="kwd">in</span> *; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hxin</span>, <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.locals_restr_blocks">locals_restr_blocks</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span> <span class="kwd">in</span> <span class="id">Hxin</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">env</span>; <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP_eq">FIXP_eq</a></span>; <span class="id">fold</span> <span class="id">env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node_eq">denot_node_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_top_block_eq">denot_top_block_eq</a></span>, &lt;- <span class="id">Hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_block">wl_block</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_scope">wl_scope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_block">wx_block</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_scope">wx_scope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var_inside_blocks">P_var_inside_blocks</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">subst</span> Γ' Γ; <span class="id">intros</span> <span class="id">y</span> <span class="id">cy</span> <span class="id">Hin</span> <span class="id">Hnins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.HasCausInj">HasCausInj</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> ?; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.HasCaus_In">HasCaus_In</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.map_fst_senv_of_decls">map_fst_senv_of_decls</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.map_fst_senv_of_ins">map_fst_senv_of_ins</a></span>, &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_or">in_app_or</a></span> <span class="kwd">in</span> <span class="id">Hin</span> <span class="kwd">as</span> []; <span class="id">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> <span class="id">y</span> <span class="id">Hex</span> <span class="id">Hnins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hys</span> <span class="kwd">in</span> <span class="id">Hnins</span>; <span class="id">auto</span>; <span class="id">apply</span> <span class="id">Hdep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">rewrite</span> &lt;- <span class="id">Hnd</span>; <span class="id">constructor</span>; <span class="id">econstructor</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> &lt;- 2 <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.idcaus_of_decls_map">idcaus_of_decls_map</a></span> <span class="kwd">in</span> <span class="id">Hxin</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.nin_defined">nin_defined</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.map_fst_senv_of_decls">map_fst_senv_of_decls</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="LDENOTINF.denot_n">denot_n</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nd</span> <span class="id">envI</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_node">restr_node</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_node">wl_node</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_node">wx_node</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.node_causal">node_causal</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">envI</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node">denot_node</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.G">G</a></span> <span class="id">nd</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n.envG">envG</a></span> <span class="id">envI</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.get_locals">get_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>))).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hr</span> <span class="id">Hwl</span> <span class="id">Hwx</span> <span class="id">Hcaus</span> <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hr</span> <span class="id">Hwl</span> <span class="id">Hwx</span> <span class="id">Hcaus</span> <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">nd</span> <span class="id">envI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_O">P_vars_O</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.denot_S">denot_S</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHn</span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_S">P_vars_S</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top.Node_n">Node_n</a></span>.<br/>
<br/>
<br/>
<div class="doc">Using the well-ordered property of programs, show that all nodes
      receiving streams of length n outputs streams of length n. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="LDENOTINF.denot_global_n">denot_global_n</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">f</span> <span class="id">nd</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_global">restr_global</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ.wt_global">wt_global</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.node_causal">node_causal</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.nodes">nodes</a></span> <span class="id">G</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">envI</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_global">denot_global</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">envI</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.get_locals">get_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>))).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hr</span> <span class="id">Hwt</span> <span class="id">Hcaus</span> <span class="id">Hfind</span> <span class="id">Hins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.Ordered_nodes">Ordered_nodes</a></span> <span class="id">G</span>) <span class="kwd">as</span> <span class="id">Hord</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.wl_global_Ordered_nodes">wl_global_Ordered_nodes</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ.wt_global_wl_global">wt_global_wl_global</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_global">denot_global</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP_eq">FIXP_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_global_eq">denot_global_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.FI">FI</a></span>) (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_global_">denot_global_</a></span> <span class="id">G</span>)) <span class="kwd">as</span> <span class="id">envG</span> <span class="id">eqn</span>:<span class="id">HF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pour&nbsp;réussir&nbsp;l'induction&nbsp;sur&nbsp;(nodes&nbsp;G),&nbsp;on&nbsp;doit&nbsp;relâcher&nbsp;la<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contrainte&nbsp;sur&nbsp;envG&nbsp;:&nbsp;en&nbsp;gardant&nbsp;la&nbsp;définition&nbsp;HF&nbsp;actuelle,&nbsp;on<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ne&nbsp;peut&nbsp;pas&nbsp;espérer&nbsp;réécrire&nbsp;denot_node2_cons&nbsp;sous&nbsp;le&nbsp;point&nbsp;fixe&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="kwd">forall</span> <span class="id">f</span> <span class="id">nd</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">envG</span> <span class="id">f</span> <span class="id">envI</span> == <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node">denot_node</a></span> <span class="id">G</span> <span class="id">nd</span> <span class="id">envG</span> <span class="id">envI</span>)) <span class="kwd">as</span> <span class="id">HenvG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">intros</span> * <span class="id">Hf</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP_eq">FIXP_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_global_eq">denot_global_eq</a></span>, <span class="id">Hf</span> <span class="kwd">at</span> 1. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;maintenant&nbsp;HenvG&nbsp;contient&nbsp;tout&nbsp;ce&nbsp;qu'on&nbsp;doit&nbsp;savoir&nbsp;sur&nbsp;envG&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">HF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;il&nbsp;faut&nbsp;généraliser&nbsp;à&nbsp;tous&nbsp;les&nbsp;nœuds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hins</span> <span class="id">HenvG</span> <span class="id">Hfind</span>. <span class="id">revert</span> <span class="id">envI</span> <span class="id">envG</span> <span class="id">n</span> <span class="id">f</span> <span class="id">nd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">G</span> <span class="kwd">as</span> [<span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>]; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">nds</span> <span class="kwd">as</span> [|<span class="id">a</span> <span class="id">nds</span>]; <span class="id">simpl</span>; <span class="id">intros</span>. <span class="id">inv</span> <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hcaus</span>. <span class="id">inv</span> <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_name">n_name</a></span> <span class="id">a</span>) <span class="id">f</span>); <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;cas&nbsp;intéressant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node_now">find_node_now</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>; <span class="id">inv</span> <span class="id">Hfind</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node_cons">denot_node_cons</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.find_node_not_Is_node_in">find_node_not_Is_node_in</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node_now">find_node_now</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.denot_n">denot_n</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ.wt_global_uncons">wt_global_uncons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ.wt_node_wl_node">wt_node_wl_node</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ.wt_node_wx_node">wt_node_wx_node</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">f</span> <span class="id">nd2</span> <span class="id">envI2</span> <span class="id">Hfind2</span> <span class="id">HI2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.find_node_uncons">find_node_uncons</a></span> <span class="kwd">with</span> (<span class="id">nd</span> := <span class="id">nd</span>) <span class="kwd">in</span> <span class="id">Hfind2</span> <span class="kwd">as</span> ?; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HenvG</span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node_cons">denot_node_cons</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars_app_r">P_vars_app_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHnds</span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id">f</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ.wt_global_cons">wt_global_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.Ordered_nodes_cons">Ordered_nodes_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;montrons&nbsp;que&nbsp;HenvG&nbsp;tient&nbsp;toujours&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span>' <span class="id">ndf</span>' <span class="id">envI</span>' <span class="id">Hfind</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.find_node_uncons">find_node_uncons</a></span> <span class="kwd">with</span> (<span class="id">nd</span> := <span class="id">nd</span>) <span class="kwd">in</span> <span class="id">Hfind</span>' <span class="kwd">as</span> ?; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HenvG</span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node_cons">denot_node_cons</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node_other">find_node_other</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node_cons">denot_node_cons</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHnds</span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id">f</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ.wt_global_cons">wt_global_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.Ordered_nodes_cons">Ordered_nodes_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;montrons&nbsp;que&nbsp;HenvG&nbsp;tient&nbsp;toujours&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span>' <span class="id">ndf</span>' <span class="id">envI</span>' <span class="id">Hfind</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.find_node_uncons">find_node_uncons</a></span> <span class="kwd">with</span> (<span class="id">nd</span> := <span class="id">a</span>) <span class="kwd">in</span> <span class="id">Hfind</span>' <span class="kwd">as</span> ?; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HenvG</span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_node_cons">denot_node_cons</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord.find_node_later_not_Is_node_in">find_node_later_not_Is_node_in</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.Top">Top</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="LDENOTINF.MOVE_ME">MOVE_ME</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.inf_dom_env_of_np">inf_dom_env_of_np</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">l</span> <span class="id">m</span> (<span class="id">mp</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">m</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">_</span>) <span class="id">mp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.env_of_np">env_of_np</a></span> <span class="id">l</span> <span class="id">mp</span>) <span class="id">l</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.env_of_np_eq">env_of_np_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.mem_nth">mem_nth</a></span> <span class="id">l</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">i</span>|] <span class="id">eqn</span>:<span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_k_def">forall_nprod_k_def</a></span>; <span class="id">auto</span>; <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_inf">DS_const_inf</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_nin">mem_nth_nin</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.MOVE_ME">MOVE_ME</a></span>.<br/>
<br/>
<div class="doc">Maintenant on passe à l'infini </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.infinite_P_vars">infinite_P_vars</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">env</span> <span class="id">l</span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> <span class="id">env</span> <span class="id">l</span> &lt;-&gt; (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span> <span class="id">n</span> <span class="id">env</span> <span class="id">l</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">env</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_vars">P_vars</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.P_var">P_var</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span>.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#nrem_inf">nrem_inf</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#inf_nrem">inf_nrem</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="LDENOTINF.denot_inf">denot_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">HasCausInj</span> : <span class="kwd">forall</span> Γ <span class="id">x</span> <span class="id">cx</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.HasCaus">HasCaus</a></span> Γ <span class="id">x</span> <span class="id">cx</span> -&gt; <span class="id">cx</span> = <span class="id">x</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_global">restr_global</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ.wt_global">wt_global</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA.node_causal">node_causal</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.nodes">nodes</a></span> <span class="id">G</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">nd</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> <span class="id">envI</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_global">denot_global</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">envI</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.get_locals">get_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_block">n_block</a></span> <span class="id">nd</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.infinite_P_vars">infinite_P_vars</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.denot_global_n">denot_global_n</a></span>; <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.sbools_ofs_inf">sbools_ofs_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">_</span>) <span class="id">np</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.sbools_of">sbools_of</a></span> <span class="id">np</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span> * <span class="id">Hf</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_inf">DS_const_inf</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_inv">forall_nprod_inv</a></span> <span class="kwd">in</span> <span class="id">Hf</span> <span class="kwd">as</span> [<span class="id">Hh</span> <span class="id">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.sbools_of">sbools_of</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#Fold_eq">Fold_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_hd">lift_hd</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_tl">lift_tl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#zip_inf">zip_inf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#map_inf">map_inf</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> (<span class="id">IHn</span> <span class="id">_</span> <span class="id">Ht</span>).<br/>
Qed.</div>
<br/>
<div class="doc">Une fois l'infinité des flots obtenue, on peut l'utiliser pour
    prouver l'infinité des expressions. </div>
<span class="kwd">Lemma</span> <span class="id"><a name="LDENOTINF.infinite_exp">infinite_exp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">envI</span> (<span class="id">envG</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.FI">FI</a></span>) <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">f</span> <span class="id">nd</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> <span class="id">envI</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> (<span class="id">envG</span> <span class="id">f</span> <span class="id">envI</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">ins</span> <span class="id">envI</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ, (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span> <span class="id">e</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> Γ <span class="id">e</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">G</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">_</span>) (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp">denot_exp</a></span> <span class="id">G</span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">HG</span> <span class="id">bsi</span> ? <span class="id">Hvar</span> <span class="id">e</span> <span class="id">Hr</span> <span class="id">Hwx</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="id">inv</span> <span class="id">Hr</span>; <span class="id">inv</span> <span class="id">Hwx</span>; <span class="id">inv</span> <span class="id">Hwl</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">simpl</span>; <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Econst&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#sconst_inf">sconst_inf</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eenum&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#sconst_inf">sconst_inf</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eunop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">IHe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">cases</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#sunop_inf">sunop_inf</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_inf">DS_const_inf</a></span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ebinop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">IHe1</span> <span class="id">IHe2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">cases</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#sbinop_inf">sbinop_inf</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_inf">DS_const_inf</a></span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Efby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H0</span>,<span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H0</span>,<span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H0</span>,<span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_denot_exps">forall_denot_exps</a></span> <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_const">forall_nprod_const</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_inf">DS_const_inf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_lift2">forall_nprod_lift2</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#fby_inf">fby_inf</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ewhen&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_denot_exps">forall_denot_exps</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_const">forall_nprod_const</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_inf">DS_const_inf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_llift">forall_nprod_llift</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#swhen_inf">swhen_inf</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Emerge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_lift_nprod">forall_lift_nprod</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#smerge_inf">smerge_inf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_denot_expss">forall_denot_expss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_denot_exps">forall_denot_exps</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *; <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ecase&nbsp;total&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_impl_In">Forall_impl_In</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id">intros</span> ? <span class="id">Hin</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">HH</span>;[| <span class="id">now</span> <span class="id">simpl_Forall</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">HH</span>;[| <span class="id">now</span> <span class="id">simpl_Forall</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">HH</span>;[| <span class="id">now</span> <span class="id">simpl_Forall</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_denot_exps">forall_denot_exps</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> )), <span class="id">HH</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_forall_denot_expss">forall_forall_denot_expss</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">Hess</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hess</span> <span class="id">IHe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>; <span class="id">cases</span>; <span class="id">intros</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_const">forall_nprod_const</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_inf">DS_const_inf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *|-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_lift_nprod">forall_lift_nprod</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#scase_inf">scase_inf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ecase&nbsp;défaut&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_impl_In">Forall_impl_In</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id">intros</span> ? <span class="id">Hin</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">HH</span>;[| <span class="id">now</span> <span class="id">simpl_Forall</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">HH</span>;[| <span class="id">now</span> <span class="id">simpl_Forall</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">HH</span>;[| <span class="id">now</span> <span class="id">simpl_Forall</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_denot_exps">forall_denot_exps</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> )), <span class="id">HH</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_forall_denot_expss">forall_forall_denot_expss</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">Hess</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_denot_exps">forall_denot_exps</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">Hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hess</span> <span class="id">IHe</span> <span class="id">Hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="id">cases</span>; <span class="id">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_const">forall_nprod_const</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_inf">DS_const_inf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *|-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_lift_nprod">forall_lift_nprod</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#scase_def_inf">scase_def_inf</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eapp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#Forall_impl_inside">Forall_impl_inside</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">_</span>) <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.forall_denot_exps">forall_denot_exps</a></span> <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="id">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_const">forall_nprod_const</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const_inf">DS_const_inf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">forall_np_of_env</span>'; <span class="id">intros</span> <span class="id">x</span> <span class="id">Hxout</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Infty.html#sreset_inf_dom">sreset_inf_dom</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.sbools_ofs_inf">sbools_ofs_inf</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.inf_dom_env_of_np">inf_dom_env_of_np</a></span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="LDENOTINF.infinite_exps">infinite_exps</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> (<span class="id">envG</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.FI">FI</a></span>) <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">f</span> <span class="id">nd</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> <span class="id">envI</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> (<span class="id">envG</span> <span class="id">f</span> <span class="id">envI</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">ins</span> <span class="id">envI</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ, (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">es</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span> <span class="id">es</span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> Γ) <span class="id">es</span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">G</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">_</span>) (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exps">denot_exps</a></span> <span class="id">G</span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span>; <span class="id">simpl</span>; <span class="id">auto</span>; <span class="id">intros</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_exps_eq">denot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_app">forall_nprod_app</a></span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.infinite_exp">infinite_exp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="LDENOTINF.infinite_expss">infinite_expss</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> (<span class="id">envG</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.FI">FI</a></span>) <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">f</span> <span class="id">nd</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">nd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> <span class="id">envI</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> (<span class="id">envG</span> <span class="id">f</span> <span class="id">envI</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">ins</span> <span class="id">envI</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ, (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv.IsVar">IsVar</a></span> Γ <span class="id">x</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span> (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">I</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.exp">exp</a></span>)) <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr.restr_exp">restr_exp</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">ess</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wx_exp">wx_exp</a></span> Γ) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.wl_exp">wl_exp</a></span> <span class="id">G</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots">annots</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) = <span class="id">n</span>) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">_</span>)) (<span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_expss">denot_expss</a></span> <span class="id">G</span> <span class="id">ins</span> <span class="id">ess</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [| (<span class="id">i</span>,<span class="id">es</span>) <span class="id">ess</span>]; <span class="id">intros</span> * <span class="id">Hr</span> <span class="id">Hwx</span> <span class="id">Hwl</span> <span class="id">Hl</span>. { <span class="id">now</span> <span class="id">simpl</span>. }<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den.denot_expss_eq">denot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>; <span class="id">inv</span> <span class="id">Hwx</span>; <span class="id">inv</span> <span class="id">Hwl</span>; <span class="id">inv</span> <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF.infinite_exps">infinite_exps</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *; <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF">LDENOTINF</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="LDenotInfFun">LDenotInfFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Typ</span>   : <span class="id"><a href="Velus.Lustre.LTyping.html#LTYPING">LTYPING</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LCA</span>   : <span class="id"><a href="Velus.Lustre.LCausality.html#LCAUSALITY">LCAUSALITY</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Restr</span> : <span class="id"><a href="Velus.Lustre.Denot.Restr.html#LRESTR">LRESTR</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Den</span>   : <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD">SD</a></span>     <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord">Lord</a></span>)<br/>
&lt;: <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF">LDENOTINF</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ">Typ</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA">LCA</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr">Restr</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den">Den</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDENOTINF">LDENOTINF</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Typ">Typ</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LCA">LCA</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Lord">Lord</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Restr">Restr</a></span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#Den">Den</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.InftyProof.html#LDenotInfFun">LDenotInfFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
