
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module lucid_ops</title>
<meta name="description" content="Documentation of Coq module lucid_ops" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module lucid_ops</h1>
<div class="coq">
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="sampled_streams.html">sampled_streams</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Constant_samplStr">Constant_samplStr</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Constant_samplStr.A">A</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Constant_samplStr.a">a</a></span>: <span class="id"><a href="lucid_ops.html#Constant_samplStr.A">A</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="elt_const">elt_const</a></span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) : <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Constant_samplStr.A">A</a></span> <span class="id">b</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Constant_samplStr.A">A</a></span> <span class="id">b</span> <span class="kwd">then</span> <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="lucid_ops.html#Constant_samplStr.a">a</a></span> <span class="kwd">else</span> <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id"><a href="lucid_ops.html#Constant_samplStr.A">A</a></span>.<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="sp_const">sp_const</a></span> (<span class="id">c</span>:<span class="id"><a href="sampled_streams.html#clock">clock</a></span>) : <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Constant_samplStr.A">A</a></span> <span class="id">c</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> <span class="id">_</span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)) (<span class="id">sp_const</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id">c</span>)).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_const_no_Fail">elt_const_no_Fail</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>), <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id">b</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span>; <span class="id">case</span> <span class="id">b</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">elt_const_no_Fail</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_wf_const">sp_wf_const</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>), <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">c</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_wf_const</span>; <span class="id">constructor</span> 1; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#Constant_samplStr">Constant_samplStr</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_wf_const</span> : <span class="id">sampled_str</span> <span class="id">sp_rec0</span>.<br/>
<br/>
<span class="kwd">Notation</span> " '`' <span class="id">c</span> '`' " := (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">c</span> <span class="id">_</span>) (<span class="kwd">at</span> <span class="id">level</span> 100).<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Mem_Less">Mem_Less</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> <span class="id"><a name="Mem_Less.A">A</a></span> <span class="id"><a name="Mem_Less.B">B</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="mem_less">mem_less</a></span> : <span class="id"><a href="sampled_streams.html#clock">clock</a></span> -&gt; <span class="id"><a href="sampled_streams.html#clock">clock</a></span> -&gt; <span class="kwd">Set</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="ml_cons">ml_cons</a></span> : <span class="kwd">forall</span> (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Mem_Less.A">A</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c1</span>) -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Mem_Less.B">B</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id">mem_less</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id">c1</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id">c2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id">mem_less</span> <span class="id">c1</span> <span class="id">c2</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ml_hd">ml_hd</a></span> (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">m</span>: <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> <span class="id">c1</span> <span class="id">c2</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">m</span> <span class="kwd">as</span> <span class="id">m</span>' <span class="kwd">in</span> <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> <span class="id">c1</span>' <span class="id">c2</span>' <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Mem_Less.A">A</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c1</span>') -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Mem_Less.B">B</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c2</span>') <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="lucid_ops.html#ml_cons">ml_cons</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> <span class="id">_</span> =&gt; <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ml_tl">ml_tl</a></span> (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">m</span>: <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> <span class="id">c1</span> <span class="id">c2</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">m</span> <span class="kwd">as</span> <span class="id">m</span>' <span class="kwd">in</span> <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> <span class="id">c1</span>' <span class="id">c2</span>' <span class="kwd">return</span> <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id">c1</span>') (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id">c2</span>') <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="lucid_ops.html#ml_cons">ml_cons</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">m</span>' =&gt; <span class="id">m</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="mem_less_apply">mem_less_apply</a></span> (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">m</span>: <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> <span class="id">c1</span> <span class="id">c2</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Mem_Less.A">A</a></span> <span class="id">c1</span>) : <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Mem_Less.B">B</a></span> <span class="id">c2</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> <span class="id">_</span> ((<span class="id"><a href="lucid_ops.html#ml_hd">ml_hd</a></span> <span class="id">m</span>) (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>)) (<span class="id">mem_less_apply</span> (<span class="id"><a href="lucid_ops.html#ml_tl">ml_tl</a></span> <span class="id">m</span>) (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>)).<br/>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="ml_const">ml_const</a></span> : (<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>), <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Mem_Less.A">A</a></span> <span class="id">b</span> -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Mem_Less.B">B</a></span> <span class="id">b</span>) -&gt; <span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>), <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> <span class="id">c</span> <span class="id">c</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">f</span> <span class="id">c</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="lucid_ops.html#ml_cons">ml_cons</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">f</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)) (<span class="id">ml_const</span> <span class="id">f</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#tl">tl</a></span> <span class="id">c</span>)).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#Mem_Less">Mem_Less</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_less_id_def">mem_less_id_def</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Set</span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id">A</span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> (<span class="id"><a href="lucid_ops.html#ml_const">ml_const</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">a</span> =&gt; <span class="id">a</span>) <span class="id">_</span>) <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">ml_id_def</span>; <span class="id">intros</span> <span class="id">A</span> <span class="id">c</span> <span class="id">x</span>; <span class="id">constructor</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">ml_id_def</span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">mem_less_id_def</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Followed_By">Followed_By</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Followed_By.A">A</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="sp_delay">sp_delay</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) : <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span> -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">c</span> <span class="kwd">as</span> <span class="id">c0</span> <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c0</span> -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c0</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id">hc</span> <span class="id">tc</span> =&gt; <span class="kwd">if</span> <span class="id">hc</span> <span class="kwd">as</span> <span class="id">b</span> <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id">b</span> <span class="id">tc</span>) -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id">b</span> <span class="id">tc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">a</span> =&gt; <span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id">tc</span>) <span class="id">a</span> (<span class="id">sp_delay</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">a</span> =&gt; <span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">tc</span>) (<span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span>) (<span class="id">sp_delay</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) <span class="id">a</span>))<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_delay_lfp">sp_delay_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">s1</span> <span class="id">s2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>) (<span class="id">a1</span> <span class="id">a2</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">s1</span> <span class="id">s2</span> -&gt; <span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> <span class="id">a1</span> <span class="id">a2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">s1</span> <span class="id">a1</span>) (<span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">s2</span> <span class="id">a2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>; <span class="id">elim</span> <span class="id">n</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">H1</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>. <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_O">sp_inf_proof_O</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n0</span> <span class="id">HR</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">H1</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H1</span>); <span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_S_n">sp_inf_proof_S_n</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_delay_loc_nfstwf">sp_delay_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>) (<span class="id">a</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">a</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">s</span> <span class="id">a</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_delay_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">s</span> <span class="id">a</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_true">loc_nfstwf_true</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">s</span> <span class="id">a</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">H1</span>; <span class="id">case</span> <span class="id">n</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>' <span class="id">H1</span>'; <span class="id">apply</span> <span class="id">sp_delay_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_true_inv">loc_nfstwf_S_n_true_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n</span>') (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">s</span> <span class="id">a</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false">loc_nfstwf_false</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">s</span> <span class="id">a</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_delay_loc_nfstwf</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>  <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sp_pre">sp_pre</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>) : <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">s</span> (<span class="kwd">Fail</span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span>).<br/>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="sp_arrow">sp_arrow</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>) : <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> <span class="id">_</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">if</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id">sp_arrow</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>))).<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sp_fby">sp_fby</a></span> <span class="id">c</span> <span class="id">x</span> <span class="id">y</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> (<span class="id">c</span> := <span class="id">c</span>) <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y</span>).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_arrow_lfp">sp_arrow_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x1</span> <span class="id">x2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>) (<span class="id">y1</span> <span class="id">y2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">x1</span> <span class="id">x2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">y1</span> <span class="id">y2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x1</span> <span class="id">y1</span>) (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x2</span> <span class="id">y2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>; <span class="id">elim</span> <span class="id">n</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">H1</span> <span class="id">H2</span>;<br/>
&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_O">sp_inf_proof_O</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_O_inv">sp_inf_O_inv</a></span> <span class="kwd">with</span> (<span class="id">s1</span> := <span class="id">x1</span>) (<span class="id">s2</span> := <span class="id">x2</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n0</span> <span class="id">HR</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">H1</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H1</span>); <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H2</span>); <span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_S_n">sp_inf_proof_S_n</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_arrow_loc_nfstwf">sp_arrow_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>)  (<span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">y</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_arrow_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_O">loc_nfstwf_O</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_true">loc_nfstwf_true</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">m</span>) (<span class="id">s</span> := <span class="id">x</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_true_inv">loc_nfstwf_S_n_true_inv</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">m</span>) (<span class="id">s</span> := <span class="id">y</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false">loc_nfstwf_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_arrow_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">x</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">y</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_arrow_loc_nfstwf_1">sp_arrow_loc_nfstwf_1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>) (<span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_arrow_loc_nfstwf_1</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_true">loc_nfstwf_true</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">x</span>) (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false">loc_nfstwf_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_arrow_loc_nfstwf_1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">x</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_arrow_ext2">sp_arrow_ext2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span> <span class="id">y1</span> <span class="id">y2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> <span class="id">y1</span> <span class="id">y2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> <span class="id">y1</span>) (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> <span class="id">y2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_arrow_ext2</span>; <span class="id">intros</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">constructor</span> 1; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_eq_inv">sp_eq_inv</a></span> <span class="id">H</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_arrow_ext2</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_eq_inv">sp_eq_inv</a></span> <span class="id">H</span>); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_delay_lfp</span> <span class="id">sp_delay_loc_nfstwf</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="sp_init_pre">sp_init_pre</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) : <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span> -&gt; <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">c</span> <span class="kwd">as</span> <span class="id">c0</span> <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c0</span> -&gt; <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c0</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id">hc</span> <span class="id">tc</span> =&gt; <span class="kwd">if</span> <span class="id">hc</span> <span class="kwd">as</span> <span class="id">b</span> <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id">b</span> <span class="id">tc</span>) -&gt; <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id">b</span> <span class="id">tc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">x</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">tc</span>) (<span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span>) (<span class="id">sp_init_pre</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_init_pre_lfp">sp_init_pre_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x1</span> <span class="id">x2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">x1</span> <span class="id">x2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">x1</span>) (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">x2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>; <span class="id">elim</span> <span class="id">n</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_O">sp_inf_proof_O</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_O_inv">sp_inf_O_inv</a></span> <span class="kwd">with</span> (<span class="id">s1</span> := <span class="id">x1</span>) (<span class="id">s2</span> := <span class="id">x2</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n0</span> <span class="id">HR</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H1</span>); <span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_S_n">sp_inf_proof_S_n</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_init_pre_loc_nfstwf">sp_init_pre_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Followed_By.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)) (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_init_pre_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">x</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="sampled_streams.html#unfold_samplStr">unfold_samplStr</a></span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">x</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)) (<span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> <span class="id">_</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> (<span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">x</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> (<span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">x</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>)))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="sampled_streams.html#unfold_samplStr">unfold_samplStr</a></span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#sp_delay_loc_nfstwf">sp_delay_loc_nfstwf</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n</span>) (<span class="id">s</span> := <span class="id">x</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false">loc_nfstwf_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_init_pre_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">x</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_arrow_lfp</span> <span class="id">sp_arrow_loc_nfstwf_1</span> <span class="id">sp_arrow_loc_nfstwf</span> <span class="id">sp_arrow_ext2</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">sp_init_pre_lfp</span> <span class="id">sp_init_pre_loc_nfstwf</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#Followed_By">Followed_By</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Pre_elimination">Pre_elimination</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Pre_elimination.A">A</a></span> <span class="id"><a name="Pre_elimination.B">B</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="sp_pre_elimination">sp_pre_elimination</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">g</span>: <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> <span class="id"><a href="lucid_ops.html#Pre_elimination.A">A</a></span> <span class="id"><a href="lucid_ops.html#Pre_elimination.B">B</a></span> <span class="id">c1</span> <span class="id">c2</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Pre_elimination.B">B</a></span> <span class="id">c2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Pre_elimination.A">A</a></span> <span class="id">c1</span>) (<span class="id">a</span>: <span class="id"><a href="lucid_ops.html#Pre_elimination.A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#clock_inf">clock_inf</a></span> <span class="id">c2</span> <span class="id">c1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> <span class="id">g</span> (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> <span class="id">g</span> (<span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> <span class="id">y</span> (<span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id">a</span>)))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;<span class="id">unfold</span> <span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span>; <span class="kwd">cofix</span> <span class="id">sp_pre_elimination</span>; <span class="id">intros</span> <span class="id">c1</span> <span class="id">c2</span>; <span class="id">case</span> <span class="id">c2</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b2</span> <span class="id">c2</span>';<br/>
&nbsp;<span class="id">case</span> <span class="id">b2</span>; <span class="id">intros</span> <span class="id">g</span> <span class="id">x</span> <span class="id">y</span> <span class="id">a</span> <span class="id">H</span>; <span class="id">constructor</span> 1; <span class="id">try</span> (<span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>; <span class="id">fail</span>).<br/>
&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#clock_inf_inv">clock_inf_inv</a></span> <span class="id">H</span>); <span class="id">intros</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>;<br/>
&nbsp;<span class="id">generalize</span> <span class="id">g</span> <span class="id">y</span>; <span class="id">rewrite</span> (<span class="id"><a href="sampled_streams.html#unfold_Str">unfold_Str</a></span> <span class="id">c1</span>); <span class="id">rewrite</span> <span class="id">H1</span>; <span class="id">simpl</span>.<br/>
&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_refl">sp_eq_refl</a></span>.<br/>
&nbsp;<span class="id">generalize</span> <span class="id">g</span> <span class="id">y</span> <span class="id">H</span> ; <span class="id">case</span> <span class="id">c1</span>; <span class="id">intros</span> <span class="id">hc1</span> <span class="id">tc1</span>; <span class="id">case</span> <span class="id">hc1</span>;<br/>
&nbsp;<span class="id">intros</span> <span class="id">g</span>' <span class="id">y</span>' <span class="id">H</span>'; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_refl">sp_eq_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_pre_elimination</span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id">g</span> := <span class="id"><a href="lucid_ops.html#ml_tl">ml_tl</a></span> <span class="id">g</span>') (<span class="id">y</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>').<br/>
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#clock_inf_inv">clock_inf_inv</a></span> <span class="id">H</span>'); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pre_init_pre">pre_init_pre</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">g</span>: <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> <span class="id"><a href="lucid_ops.html#Pre_elimination.A">A</a></span> <span class="id"><a href="lucid_ops.html#Pre_elimination.B">B</a></span> <span class="id">c1</span> <span class="id">c2</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Pre_elimination.B">B</a></span> <span class="id">c2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Pre_elimination.A">A</a></span> <span class="id">c1</span>),<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#clock_inf">clock_inf</a></span> <span class="id">c2</span> <span class="id">c1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> <span class="id">g</span> (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> <span class="id">g</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;<span class="id">unfold</span> <span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span>; <span class="kwd">cofix</span> <span class="id">pre_init_pre</span>; <span class="id">intros</span> <span class="id">c1</span> <span class="id">c2</span>; <span class="id">case</span> <span class="id">c2</span>; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">b2</span> <span class="id">c2</span>';<br/>
&nbsp;<span class="id">case</span> <span class="id">b2</span>; <span class="id">intros</span> <span class="id">g</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H</span>; <span class="id">constructor</span> 1; <span class="id">try</span> (<span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>; <span class="id">fail</span>).<br/>
&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#clock_inf_inv">clock_inf_inv</a></span> <span class="id">H</span>); <span class="id">intros</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>;<br/>
&nbsp;<span class="id">generalize</span> <span class="id">g</span> <span class="id">y</span>; <span class="id">rewrite</span> (<span class="id"><a href="sampled_streams.html#unfold_Str">unfold_Str</a></span> <span class="id">c1</span>); <span class="id">rewrite</span> <span class="id">H1</span>; <span class="id">simpl</span>.<br/>
&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_refl">sp_eq_refl</a></span>.<br/>
&nbsp;<span class="id">generalize</span> <span class="id">g</span> <span class="id">y</span> <span class="id">H</span> ; <span class="id">case</span> <span class="id">c1</span>; <span class="id">intros</span> <span class="id">hc1</span> <span class="id">tc1</span>; <span class="id">case</span> <span class="id">hc1</span>;<br/>
&nbsp;<span class="id">intros</span> <span class="id">g</span>' <span class="id">y</span>' <span class="id">H</span>'; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_refl">sp_eq_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">pre_init_pre</span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id">g</span> := <span class="id"><a href="lucid_ops.html#ml_tl">ml_tl</a></span> <span class="id">g</span>') (<span class="id">y</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>').<br/>
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#clock_inf_inv">clock_inf_inv</a></span> <span class="id">H</span>'); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#Pre_elimination">Pre_elimination</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Delays_prop">Delays_prop</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Delays_prop.A">A</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_arrow_lfp</span> <span class="id">sp_arrow_loc_nfstwf_1</span> <span class="id">sp_arrow_loc_nfstwf</span> <span class="id">sp_arrow_ext2</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">sp_init_pre_lfp</span> <span class="id">sp_init_pre_loc_nfstwf</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">pre_init_pre</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_fby_equiv">sp_fby_equiv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Delays_prop.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_fby">sp_fby</a></span> <span class="id">x</span> <span class="id">y</span>) (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="lucid_ops.html#sp_fby">sp_fby</a></span>; <span class="id">intros</span> <span class="id">c</span> <span class="id">x</span> <span class="id">y</span>;<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_trans">sp_eq_trans</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> (<span class="id"><a href="lucid_ops.html#ml_const">ml_const</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">a</span> =&gt; <span class="id">a</span>) <span class="id">_</span>) (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y</span>)));<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_trans">sp_eq_trans</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> (<span class="id"><a href="lucid_ops.html#ml_const">ml_const</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">a</span> =&gt; <span class="id">a</span>) <span class="id">_</span>) (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y</span>)));<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_fby_equiv</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_fby_lfp">sp_fby_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Delays_prop.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">x1</span> <span class="id">x2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">y1</span> <span class="id">y2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_fby">sp_fby</a></span> <span class="id">x1</span> <span class="id">y1</span>) (<span class="id"><a href="lucid_ops.html#sp_fby">sp_fby</a></span> <span class="id">x2</span> <span class="id">y2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_trans">sp_inf_trans</a></span> <span class="kwd">with</span> (<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x1</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y1</span>));<br/>
&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_trans">sp_inf_trans</a></span> <span class="kwd">with</span> (<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x2</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y2</span>));<br/>
&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_fby_loc_nfstwf">sp_fby_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Delays_prop.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">y</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="lucid_ops.html#sp_fby">sp_fby</a></span> <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_sp_eq">loc_nfstwf_sp_eq</a></span> <span class="kwd">with</span> (<span class="id">s1</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y</span>));<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">case</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_fby_glob_nfstwf">sp_fby_glob_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Delays_prop.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">y</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="lucid_ops.html#sp_fby">sp_fby</a></span> <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#nfstwf_function_convert_S">nfstwf_function_convert_S</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id"><a href="lucid_ops.html#sp_fby">sp_fby</a></span> <span class="id">x</span> <span class="id">y</span>) (<span class="id">n</span> := <span class="id">n</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">y</span>' <span class="id">H3</span> <span class="id">H4</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#sp_fby_loc_nfstwf">sp_fby_loc_nfstwf</a></span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="sampled_streams.html#glob2loc">glob2loc</a></span> (<span class="id"><a href="sampled_streams.html#loc2glob">loc2glob</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m</span>) <span class="id">c</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)) <span class="id">c</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc2glob_prop">loc2glob_prop</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_loc_nfstwf">glob_nfstwf_loc_nfstwf</a></span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_n_le">glob_nfstwf_n_le</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>);<br/>
&nbsp;&nbsp;<span class="id">auto</span>  <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#Delays_prop">Delays_prop</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Infix</span> "<span class="id">fby</span>" := <span class="id"><a href="lucid_ops.html#sp_fby">sp_fby</a></span> (<span class="kwd">at</span> <span class="id">level</span> 100, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Infix</span> "--&gt;" := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> (<span class="kwd">at</span> <span class="id">level</span> 100, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="pre">pre</a></span> := <span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Extend">Extend</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> <span class="id"><a name="Extend.A">A</a></span> <span class="id"><a name="Extend.B">B</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="elt_extend">elt_extend</a></span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">b</span>) : <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">b</span> -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span> <span class="id">b</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">f</span> <span class="kwd">as</span> <span class="id">f0</span> <span class="kwd">in</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id">_</span> <span class="id">b</span> <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">b</span> -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span> <span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">_</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt; <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id">vf</span> =&gt; <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id">vx</span> =&gt; <span class="id"><a href="sampled_streams.html#Any">Any</a></span> (<span class="id">vf</span> <span class="id">vx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Fail</span> <span class="id">_</span> =&gt; <span class="kwd">Fail</span> <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id">_</span> =&gt; <span class="kwd">Fail</span> <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Fail</span> <span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="kwd">Fail</span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_extend_lfp">elt_extend_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b1</span> <span class="id">b2</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">f1</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">b1</span>) (<span class="id">f2</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">b2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s1</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">b1</span>) (<span class="id">s2</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">b2</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> <span class="id">f1</span> <span class="id">f2</span> -&gt; <span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> <span class="id">s1</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> <span class="id">f1</span> <span class="id">s1</span>) (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> <span class="id">f2</span> <span class="id">s2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">f1</span> <span class="id">f2</span>; <span class="id">case</span> <span class="id">f1</span>; <span class="id">case</span> <span class="id">f2</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f1</span>' <span class="id">f2</span>' <span class="id">s1</span> <span class="id">s2</span> <span class="id">H1</span>; <span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">eq_dep_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>); <span class="id">intro</span> <span class="id">H2</span>; <span class="id">injection</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">H3</span>; <span class="id">rewrite</span> <span class="id">H3</span>; <span class="id">pattern</span> <span class="id">s1</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_true_inv">samplElt_true_inv</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pattern</span> <span class="id">s2</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_true_inv">samplElt_true_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span>'; <span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">eq_dep_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>'); <span class="id">intro</span> <span class="id">H2</span>'; <span class="id">injection</span> <span class="id">H2</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">H3</span>'; <span class="id">rewrite</span> <span class="id">H3</span>'; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_extend_is_no_Fail">elt_extend_is_no_Fail</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">b</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">b</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">f</span> -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> <span class="id">f</span> <span class="id">s</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">f</span>; <span class="id">case</span> <span class="id">f</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span>' <span class="id">s</span>; <span class="id">inversion</span> <span class="id">s</span> <span class="kwd">using</span> <span class="id"><a href="sampled_streams.html#samplElt_true_inv">samplElt_true_inv</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">elt_extend_lfp</span> <span class="id">elt_extend_is_no_Fail</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="sp_extend">sp_extend</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">c</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">c</span>) : <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span> <span class="id">c</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> <span class="id">_</span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">f</span>) (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>)) (<span class="id">sp_extend</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">f</span>) (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>)).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_extend_const">sp_extend_const</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span>-&gt;<span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) (<span class="id">x</span>: <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">f</span> <span class="id">c</span>) (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">x</span> <span class="id">c</span>)) (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> (<span class="id">f</span> <span class="id">x</span>) <span class="id">c</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_extend_const</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">constructor</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">case</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> (<span class="id">sp_extend_const</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>).<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_extend_lfp">sp_extend_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f1</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">c1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">c2</span>) (<span class="id">s1</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">c1</span>) (<span class="id">s2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">c2</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">f1</span> <span class="id">f2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">s1</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f1</span> <span class="id">s1</span>) (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f2</span> <span class="id">s2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>; <span class="id">elim</span> <span class="id">n</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_O">sp_inf_proof_O</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n0</span> <span class="id">HR</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">f1</span> <span class="id">f2</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">H</span> <span class="id">H0</span>;  <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H</span>);<br/>
&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H0</span>); <span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_S_n">sp_inf_proof_S_n</a></span>;<br/>
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_extend_loc_nfstwf">sp_extend_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">f</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> <span class="id">s</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_extend_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">f</span> <span class="id">s</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)); <span class="id">intros</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false">loc_nfstwf_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_extend_loc_nfstwf</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_O">loc_nfstwf_O</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_true">loc_nfstwf_true</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#elt_extend_is_no_Fail">elt_extend_is_no_Fail</a></span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n0</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_extend_loc_nfstwf</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_true_inv">loc_nfstwf_S_n_true_inv</a></span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_extend_lfp</span> <span class="id">sp_extend_loc_nfstwf</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_extend_glob_nfstwf">sp_extend_glob_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">f</span> -&gt; <span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> <span class="id">s</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">f</span> <span class="id">s</span> <span class="id">H1</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#nfstwf_function_convert">nfstwf_function_convert</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">s</span> =&gt; <span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> <span class="id">s</span>) (<span class="id">n</span> := <span class="id">n</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">s</span>' <span class="id">H3</span> <span class="id">H4</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#sp_extend_loc_nfstwf">sp_extend_loc_nfstwf</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="sampled_streams.html#glob2loc">glob2loc</a></span> (<span class="id"><a href="sampled_streams.html#loc2glob">loc2glob</a></span> <span class="id">m</span> <span class="id">c</span> <span class="id">n</span>) <span class="id">c</span> = <span class="id">m</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc2glob_prop">loc2glob_prop</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_loc_nfstwf">glob_nfstwf_loc_nfstwf</a></span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_n_le">glob_nfstwf_n_le</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n</span>); <span class="id">auto</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_extend_wf">sp_extend_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">f</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> <span class="id">s</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="ml_extend1">ml_extend1</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">c</span>) : <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span> <span class="id">c</span> <span class="id">c</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="lucid_ops.html#ml_cons">ml_cons</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">hf</span> =&gt; <span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> <span class="id">hf</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>)) (<span class="id">ml_extend1</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>)).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_extend_mem_less1">sp_extend_mem_less1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> <span class="id">s</span>) (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> (<span class="id"><a href="lucid_ops.html#ml_extend1">ml_extend1</a></span> <span class="id">s</span>) <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_extend_mem_less</span>. <span class="id">intros</span> <span class="id">c</span> <span class="id">f</span> <span class="id">s</span>; <span class="id">constructor</span> 1; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="ml_extend2">ml_extend2</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">c</span>) : <span class="id"><a href="lucid_ops.html#mem_less">mem_less</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span> <span class="id">c</span> <span class="id">c</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="lucid_ops.html#ml_cons">ml_cons</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">f</span>)) (<span class="id">ml_extend2</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">f</span>)).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_extend_mem_less2">sp_extend_mem_less2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend.B">B</a></span>) <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> <span class="id">s</span>) (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> (<span class="id"><a href="lucid_ops.html#ml_extend2">ml_extend2</a></span> <span class="id">f</span>) <span class="id">s</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_extend_mem_less</span>. <span class="id">intros</span> <span class="id">c</span> <span class="id">f</span> <span class="id">s</span>; <span class="id">constructor</span> 1; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#Extend">Extend</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_extend_lfp</span> <span class="id">sp_extend_wf</span> : <span class="id">sampled_str</span> <span class="id">sp_rec0</span>.<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_extend_loc_nfstwf</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="ext">ext</a></span> := <span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Extend_prop">Extend_prop</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_extend_id">sp_extend_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Set</span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id">A</span> -&gt; <span class="id">A</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id">A</span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">z</span>: <span class="id">A</span>), <span class="id">f</span> <span class="id">z</span> = <span class="id">z</span>) -&gt; <span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">f</span> <span class="id">c</span>) <span class="id">x</span>) <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A</span>; <span class="kwd">cofix</span> <span class="id">sp_extend_id</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">f</span> <span class="id">x</span> <span class="id">H</span>; <span class="id">constructor</span> 1.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>); <span class="id">simpl</span>; <span class="id">intros</span>; <span class="id">try</span> (<span class="id">rewrite</span> <span class="id">H</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;<span class="id">refine</span> (<span class="id">sp_extend_id</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_extend_comp">sp_extend_comp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span> <span class="id">B</span> <span class="id">C</span>: <span class="kwd">Set</span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id">A</span> -&gt; <span class="id">B</span>) (<span class="id">g</span>: <span class="id">B</span> -&gt; <span class="id">C</span>) (<span class="id">h</span>: <span class="id">A</span> -&gt; <span class="id">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id">A</span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">z</span>: <span class="id">A</span>), <span class="id">g</span> (<span class="id">f</span> <span class="id">z</span>) = <span class="id">h</span> <span class="id">z</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">g</span> <span class="id">c</span>) (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">f</span> <span class="id">c</span>) <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">h</span> <span class="id">c</span>) <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="kwd">cofix</span> <span class="id">sp_extend_comp</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span> <span class="id">x</span> <span class="id">H</span>; <span class="id">constructor</span> 1.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>); <span class="id">simpl</span>; <span class="id">intros</span>; <span class="id">try</span> (<span class="id">rewrite</span> <span class="id">H</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;<span class="id">refine</span> (<span class="id">sp_extend_comp</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Extend_prop.A">A</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_extend_mem_less2</span> <span class="id">pre_init_pre</span> <span class="id">sp_arrow_ext2</span><br/>
&nbsp;&nbsp;<span class="id">sp_arrow_lfp</span> <span class="id">sp_arrow_loc_nfstwf</span> : <span class="id">sampled_str</span>.<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_init_pre_lfp</span> <span class="id">sp_init_pre_loc_nfstwf</span> : <span class="id">sampled_str</span>.<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_arrow_loc_nfstwf_1</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_arrow_extend2_pre_equiv">sp_arrow_extend2_pre_equiv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span>) <span class="id">c</span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span>;<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_trans">sp_eq_trans</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> (<span class="id"><a href="lucid_ops.html#ml_extend2">ml_extend2</a></span> <span class="id">f</span>) (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y</span>)));<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_trans">sp_eq_trans</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#mem_less_apply">mem_less_apply</a></span> (<span class="id"><a href="lucid_ops.html#ml_extend2">ml_extend2</a></span> <span class="id">f</span>) (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y</span>)));<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_arrow_extend2_pre_equiv</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_arrow_extend2_pre_lfp">sp_arrow_extend2_pre_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span>) <span class="id">c</span>) (<span class="id">x</span> <span class="id">y1</span> <span class="id">y2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">y1</span> <span class="id">y2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y2</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_trans">sp_inf_trans</a></span> <span class="kwd">with</span> (<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y1</span>)));<br/>
&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_trans">sp_inf_trans</a></span> <span class="kwd">with</span> (<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y2</span>)));<br/>
&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_arrow_extend2_pre_loc_nfstwf">sp_arrow_extend2_pre_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span>) <span class="id">c</span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">f</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">y</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_sp_eq">loc_nfstwf_sp_eq</a></span> <span class="kwd">with</span> (<span class="id">s1</span> := <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_init_pre">sp_init_pre</a></span> <span class="id">y</span>)));<br/>
&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">H3</span>; <span class="id">case</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_arrow_extend2_pre_glob_nfstwf">sp_arrow_extend2_pre_glob_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">f</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> (<span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span> -&gt; <span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span>) <span class="id">c</span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Extend_prop.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">f</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">y</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#rec0_nfstwf_inc_loc2glob">rec0_nfstwf_inc_loc2glob</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> <span class="id">f</span> (<span class="id"><a href="lucid_ops.html#sp_pre">sp_pre</a></span> <span class="id">y</span>))); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#sp_arrow_extend2_pre_loc_nfstwf">sp_arrow_extend2_pre_loc_nfstwf</a></span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#Extend_prop">Extend_prop</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="IsFstValue">IsFstValue</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="IsFstValue.A">A</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="IsFstValue.a">a</a></span>: <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span>.<br/>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="is_fst_value">is_fst_value</a></span> : <span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>), <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> <span class="id">c</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;| <span class="id"><a name="is_fst_value_false">is_fst_value_false</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt; <span class="id">is_fst_value</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">s</span>) -&gt; <span class="id">is_fst_value</span> <span class="id">s</span><br/>
&nbsp;| <span class="id"><a name="is_fst_value_true">is_fst_value_true</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">s</span> ==&lt;&lt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> &gt;&gt; <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.a">a</a></span>) -&gt; <span class="id">is_fst_value</span> <span class="id">s</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_fst_value_false_inv">is_fst_value_false_inv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt; <span class="id"><a href="lucid_ops.html#is_fst_value">is_fst_value</a></span> <span class="id">s</span> -&gt; <span class="id"><a href="lucid_ops.html#is_fst_value">is_fst_value</a></span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">s</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">s</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">generalize</span> <span class="id">H1</span>; <span class="id">case</span> <span class="id">H2</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span>' <span class="id">s</span>' <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>' = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="EqD.html#eq_dep_eq_param">eq_dep_eq_param</a></span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">s</span>') (<span class="id">y</span> := <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.a">a</a></span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H</span>'; <span class="id">discriminate</span> <span class="id">H</span>'.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_fst_value_true_inv">is_fst_value_true_inv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="lucid_ops.html#is_fst_value">is_fst_value</a></span> <span class="id">s</span> -&gt; (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">s</span> ==&lt;&lt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> &gt;&gt; <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.a">a</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">s</span> <span class="id">H1</span> <span class="id">H2</span>;  <span class="id">generalize</span> <span class="id">H1</span>; <span class="id">case</span> <span class="id">H2</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span>' <span class="id">s</span>' <span class="id">H3</span> <span class="id">H4</span> <span class="id">H5</span>; <span class="id">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="id">discriminate</span> <span class="id">H5</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_fst_value_sp_eq">is_fst_value_sp_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">s1</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> <span class="id">c1</span>) (<span class="id">s2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> <span class="id">c2</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> <span class="id">s1</span> <span class="id">s2</span> -&gt; <span class="id"><a href="lucid_ops.html#is_fst_value">is_fst_value</a></span> <span class="id">s1</span> -&gt; <span class="id"><a href="lucid_ops.html#is_fst_value">is_fst_value</a></span> <span class="id">s2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">is_fst_value_sp_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c2</span>)).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H3</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_false">is_fst_value_false</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">is_fst_value_sp_eq</span> <span class="kwd">with</span> (<span class="id">s1</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">s1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> <span class="id">H1</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_false_inv">is_fst_value_false_inv</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H3</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#EqSt_inv">EqSt_inv</a></span> (<span class="id"><a href="sampled_streams.html#sp_eq_EqSt_clock">sp_eq_EqSt_clock</a></span> <span class="id">H1</span>)); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H3</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_true">is_fst_value_true</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="EqD.html#eq_dep_ind_l">eq_dep_ind_l</a></span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">s1</span>) (<span class="id">y</span> := <span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> := <span class="kwd">fun</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">z</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> <span class="id">b</span>) =&gt; <span class="id">z</span> ==&lt;&lt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> &gt;&gt; <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.a">a</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_true_inv">is_fst_value_true_inv</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H3</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#EqSt_inv">EqSt_inv</a></span> (<span class="id"><a href="sampled_streams.html#sp_eq_EqSt_clock">sp_eq_EqSt_clock</a></span> <span class="id">H1</span>)); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> <span class="id">H1</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_fst_value_const">is_fst_value_const</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>), <span class="id"><a href="lucid_ops.html#is_fst_value">is_fst_value</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.a">a</a></span> <span class="id">c</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">is_fst_value_const</span>; <span class="id">intros</span> <span class="id">c</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_false">is_fst_value_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_true">is_fst_value_true</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_fst_value_sp_arrow">is_fst_value_sp_arrow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#IsFstValue.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="lucid_ops.html#is_fst_value">is_fst_value</a></span> <span class="id">x</span> -&gt; <span class="id"><a href="lucid_ops.html#is_fst_value">is_fst_value</a></span> (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">is_fst_value_sp_arrow</span>; <span class="id">intros</span> <span class="id">c</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_true">is_fst_value_true</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_true_inv">is_fst_value_true_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">x</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_false">is_fst_value_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">is_fst_value_sp_arrow</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_false_inv">is_fst_value_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">x</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#IsFstValue">IsFstValue</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">is_fst_value_const</span> <span class="id">is_fst_value_sp_arrow</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Sampling">Sampling</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sp_not">sp_not</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) := <span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">c</span>).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_not2_id">sp_not2_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>)) <span class="id">lc</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">lc</span>; <span class="id">unfold</span> <span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_trans">sp_eq_trans</a></span> <span class="kwd">with</span> (<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">z</span>)) <span class="id">c</span>) <span class="id">lc</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="lucid_ops.html#sp_extend_comp">sp_extend_comp</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#sp_extend_id">sp_extend_id</a></span>; <span class="id">intros</span> <span class="id">b</span>; <span class="id">case</span> <span class="id">b</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="elt_on">elt_on</a></span> (<span class="id">b</span>:<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">o</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id">x</span> =&gt; <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Fail</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_on_eq_true">elt_on_eq_true</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">x</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; (<span class="id">x</span> ==&lt;&lt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> &gt;&gt; <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) \/  (<span class="id">x</span> ==&lt;&lt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> &gt;&gt; <span class="kwd">Fail</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x</span>; <span class="id">case</span> <span class="id">x</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H</span>; <span class="id">discriminate</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b0</span>; <span class="id">case</span> <span class="id">b0</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H</span>; <span class="id">discriminate</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_on_eq_true_weak">elt_on_eq_true_weak</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">x</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id">b</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x</span>; <span class="id">case</span> <span class="id">x</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_on_false">elt_on_false</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt; <span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">x</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x</span>; <span class="id">case</span> <span class="id">x</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span>' <span class="id">H</span>; <span class="id">discriminate</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">elt_on_false</span> : <span class="id">sp_aux</span>.<br/>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="sp_on">sp_on</a></span> (<span class="id">c</span>:<span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) : <span class="id"><a href="sampled_streams.html#clock">clock</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#Cons">Cons</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>)) (<span class="id">sp_on</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">lc</span>)).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_on_clock_inf">sp_on_clock_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>), <span class="id"><a href="sampled_streams.html#clock_inf">clock_inf</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>) <span class="id">c</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_on_clock_inf</span>; <span class="id">intros</span> <span class="id">c</span> <span class="id">lc</span>; <span class="id">constructor</span> 1; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>); <span class="id">simpl</span>; <span class="id">auto</span>. <span class="id">intros</span> <span class="id">b</span>; <span class="id">case</span> <span class="id">b</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Sampling.A">A</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="elt_merge">elt_merge</a></span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">o</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">o</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">b</span>) <span class="id">o</span>)) -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">o</span> <span class="kwd">as</span> <span class="id">o0</span> <span class="kwd">in</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id">_</span> <span class="id">b0</span> <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">o0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">b0</span>) <span class="id">o0</span>)) -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b0</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id">b0</span> =&gt; <span class="kwd">if</span> <span class="id">b0</span> <span class="kwd">as</span> <span class="id">b</span> <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b</span> -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">b</span>) -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id">x</span> <span class="kwd">else</span> <span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Fail</span> <span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="kwd">Fail</span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_merge_lfp">elt_merge_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b1</span> <span class="id">b2</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">o1</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b1</span>) (<span class="id">o2</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x1</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">o1</span>)) (<span class="id">x2</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">o2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">y1</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">_</span>) <span class="id">o1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">y2</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">_</span>) <span class="id">o2</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> <span class="id">o1</span> <span class="id">o2</span> -&gt; <span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> <span class="id">x1</span> <span class="id">x2</span> -&gt; <span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> <span class="id">y1</span> <span class="id">y2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> (<span class="id"><a href="lucid_ops.html#elt_merge">elt_merge</a></span> <span class="id">_</span> <span class="id">x1</span> <span class="id">y1</span>) (<span class="id"><a href="lucid_ops.html#elt_merge">elt_merge</a></span> <span class="id">_</span> <span class="id">x2</span> <span class="id">y2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">o1</span> <span class="id">o2</span>; <span class="id">case</span> <span class="id">o1</span>; <span class="id">case</span> <span class="id">o2</span>; <span class="id">simpl</span>; <span class="id">auto</span>; <span class="id">clear</span> <span class="id">o1</span> <span class="id">b1</span> <span class="id">o2</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">H1</span>; <span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">eq_dep_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>); <span class="id">intros</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;<span class="id">injection</span> <span class="id">H2</span>; <span class="id">intro</span> <span class="id">H3</span>; <span class="id">generalize</span> <span class="id">x1</span> <span class="id">y1</span> <span class="id">x2</span> <span class="id">y2</span>; <span class="id">rewrite</span> <span class="id">H3</span>; <span class="id">case</span> <span class="id">b1</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">H1</span>; <span class="id">inversion</span> <span class="id">H1</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_merge_is_no_Fail">elt_merge_is_no_Fail</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">o</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">o</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">b</span>) <span class="id">o</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">o</span> -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">y</span> -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> (<span class="id"><a href="lucid_ops.html#elt_merge">elt_merge</a></span> <span class="id">_</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">o</span>; <span class="id">case</span> <span class="id">o</span>; <span class="id">simpl</span>; <span class="id">auto</span>; <span class="id">clear</span> <span class="id">o</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x1</span>; <span class="id">case</span> <span class="id">x1</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_merge_true">elt_merge_true</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">o</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">o</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">b</span>) <span class="id">o</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">o</span> ==&lt;&lt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> &gt;&gt; <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> (<span class="id"><a href="lucid_ops.html#elt_merge">elt_merge</a></span> <span class="id">_</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">o</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H</span>; <span class="id">generalize</span> <span class="id">x</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="EqD.html#eq_dep_ind_l">eq_dep_ind_l</a></span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) (<span class="id">y</span> := <span class="id">o</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> := <span class="kwd">fun</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">z</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) =&gt; <span class="kwd">forall</span> (<span class="id">x0</span> : <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">z</span>))<br/>
&nbsp;&nbsp;(<span class="id">y0</span> : <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">b</span>) <span class="id">z</span>))),<br/>
<span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">x0</span> -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> (<span class="id"><a href="lucid_ops.html#elt_merge">elt_merge</a></span> <span class="id">z</span> <span class="id">x0</span> <span class="id">y0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">elt_merge_lfp</span> <span class="id">elt_merge_is_no_Fail</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="sp_merge">sp_merge</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>))) : <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">c</span> :=<br/>
&nbsp;<span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> <span class="id">_</span> (<span class="id"><a href="lucid_ops.html#elt_merge">elt_merge</a></span> <span class="id">_</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>) (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sp_merge</span> <span class="id">_</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>)).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_merge_lfp">sp_merge_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc1</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c1</span>) (<span class="id">lc2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s1</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc1</span>)) (<span class="id">s2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc1</span>))) (<span class="id">t2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc2</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">lc1</span> <span class="id">lc2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">s1</span> <span class="id">s2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">t1</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span> <span class="id">_</span> <span class="id">s1</span> <span class="id">t1</span>) (<span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span> <span class="id">_</span> <span class="id">s2</span> <span class="id">t2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>; <span class="id">elim</span> <span class="id">n</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_O">sp_inf_proof_O</a></span>; <span class="id">simpl</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#elt_merge_lfp">elt_merge_lfp</a></span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_O_inv">sp_inf_O_inv</a></span> <span class="kwd">with</span> (<span class="id">c1</span> := <span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc1</span>) (<span class="id">c2</span> := <span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc2</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_O_inv">sp_inf_O_inv</a></span> <span class="kwd">with</span> (<span class="id">c1</span> := <span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc1</span>)) (<span class="id">c2</span> := <span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc2</span>)); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n0</span> <span class="id">HR</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">lc1</span> <span class="id">lc2</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">H1</span>;  <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H</span>);<br/>
&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H0</span>);  <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H1</span>); <span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_S_n">sp_inf_proof_S_n</a></span>; <span class="id">simpl</span>;<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">locle_O</span> <span class="id">locle_S_false_false</span> <span class="id">locle_S_false_true</span><br/>
&nbsp;<span class="id">locle_S_true_true</span> : <span class="id">sp_aux</span>.<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">loc_nfstwf_O</span>  <span class="id">loc_nfstwf_false_inv</span> <span class="id">loc_nfstwf_S_n_n_tl</span> : <span class="id">sp_aux</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_merge_loc_nfstwf">sp_merge_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">lc</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">m</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>), <span class="id"><a href="sampled_streams.html#locle">locle</a></span> <span class="id">m</span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>) <span class="id">c</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">m</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="kwd">forall</span> (<span class="id">m</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>), <span class="id"><a href="sampled_streams.html#locle">locle</a></span> <span class="id">m</span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>)) <span class="id">c</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">m</span> <span class="id">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span> <span class="id">_</span> <span class="id">s</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_merge_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>; <span class="id">case</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_O">loc_nfstwf_O</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n0</span> <span class="id">c</span> <span class="id">lc</span> <span class="id">s</span> <span class="id">t</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H4</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false">loc_nfstwf_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_merge_loc_nfstwf</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">s</span>); <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H2</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#locle_S_false_false">locle_S_false_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">t</span>); <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H3</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#locle_S_false_false">locle_S_false_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H4</span>;  <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_true">loc_nfstwf_true</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#elt_merge_is_no_Fail">elt_merge_is_no_Fail</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n0</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">s</span>); <span class="id">simpl</span>; <span class="id">generalize</span>  (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x</span> <span class="id">H5</span>; <span class="id">generalize</span> <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">H5</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">y</span>; <span class="id">pattern</span> <span class="id">y</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_false_inv">samplElt_false_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H5</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">t</span>); <span class="id">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)) (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x</span> <span class="id">H5</span>; <span class="id">generalize</span> <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">H5</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">y</span>; <span class="id">pattern</span> <span class="id">y</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_false_inv">samplElt_false_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">intros</span> <span class="id">H5</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id">s</span> := <span class="id">t</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_merge_loc_nfstwf</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">H5</span>; <span class="id">case</span>  (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_n_tl">loc_nfstwf_S_n_n_tl</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">H5</span>; <span class="id">case</span>  (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H6</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">t</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_n_tl">loc_nfstwf_S_n_n_tl</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">t</span>); <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_merge_glob_nfstwf">sp_merge_glob_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">t</span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span> <span class="id">_</span> <span class="id">s</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">lc</span> <span class="id">s</span> <span class="id">t</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#nfstwf_function_convert_inf">nfstwf_function_convert_inf</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span> <span class="id">_</span> <span class="id">s</span> <span class="id">t</span>) (<span class="id">n</span> := <span class="id">n</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">t</span>' <span class="id">H4</span> <span class="id">H5</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#sp_merge_loc_nfstwf">sp_merge_loc_nfstwf</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="sampled_streams.html#glob2loc">glob2loc</a></span> (<span class="id"><a href="sampled_streams.html#loc2glob">loc2glob</a></span> <span class="id">m</span> <span class="id">c</span> <span class="id">n</span>) <span class="id">c</span> = <span class="id">m</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc2glob_prop">loc2glob_prop</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_loc_nfstwf">glob_nfstwf_loc_nfstwf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_n_le">glob_nfstwf_n_le</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span>' <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="sampled_streams.html#glob2loc">glob2loc</a></span> (<span class="id"><a href="sampled_streams.html#loc2glob">loc2glob</a></span> <span class="id">m</span>' (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>) <span class="id">n</span>) (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>) = <span class="id">m</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc2glob_prop">loc2glob_prop</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#locle_glob2loc_trans">locle_glob2loc_trans</a></span> <span class="kwd">with</span> (<span class="id">n2</span> := <span class="id">m</span>) (<span class="id">c2</span> := <span class="id">c</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_loc_nfstwf">glob_nfstwf_loc_nfstwf</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_n_le">glob_nfstwf_n_le</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_merge_loc_nfstwf_weak">sp_merge_loc_nfstwf_weak</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span> <span class="id">_</span> <span class="id">s</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_merge_loc_nfstwf_weak</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>; <span class="id">case</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_O">loc_nfstwf_O</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n0</span> <span class="id">c</span> <span class="id">lc</span> <span class="id">s</span> <span class="id">t</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H4</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false">loc_nfstwf_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_merge_loc_nfstwf_weak</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> ; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">s</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>); <span class="id">rewrite</span> <span class="id">H4</span>; <span class="id">intros</span> <span class="id">s</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pattern</span> <span class="id">s</span>'; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_false_inv">samplElt_false_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">t</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>); <span class="id">rewrite</span> <span class="id">H4</span>; <span class="id">intros</span> <span class="id">s</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pattern</span> <span class="id">s</span>'; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_false_inv">samplElt_false_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H4</span>;  <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_true">loc_nfstwf_true</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#elt_merge_is_no_Fail">elt_merge_is_no_Fail</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n0</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n0</span>) (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n0</span>) (<span class="id">s</span> := <span class="id">t</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_merge_loc_nfstwf_weak</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_n_tl">loc_nfstwf_S_n_n_tl</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_n_tl">loc_nfstwf_S_n_n_tl</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_n_tl">loc_nfstwf_S_n_n_tl</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">t</span>); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_merge_true_loc_nfstwf">sp_merge_true_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="lucid_ops.html#is_fst_value">is_fst_value</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">t</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) (<span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span> <span class="id">_</span> <span class="id">s</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_merge_true_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">lc</span> <span class="id">s</span> <span class="id">t</span> <span class="id">H</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)).<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H4</span> ; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false">loc_nfstwf_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_merge_true_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_false_inv">is_fst_value_false_inv</a></span> ; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> ; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">s</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>); <span class="id">rewrite</span> <span class="id">H4</span>; <span class="id">intros</span> <span class="id">s</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pattern</span> <span class="id">s</span>'; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_false_inv">samplElt_false_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">t</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>); <span class="id">rewrite</span> <span class="id">H4</span>; <span class="id">intros</span> <span class="id">s</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pattern</span> <span class="id">s</span>'; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_false_inv">samplElt_false_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H4</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_true">loc_nfstwf_true</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#elt_merge_true">elt_merge_true</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_true_inv">is_fst_value_true_inv</a></span> ; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n</span>) (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#sp_merge_loc_nfstwf_weak">sp_merge_loc_nfstwf_weak</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_n_tl">loc_nfstwf_S_n_n_tl</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_S_n_n_tl">loc_nfstwf_S_n_n_tl</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">s</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false_inv">loc_nfstwf_false_inv</a></span> <span class="kwd">with</span> (<span class="id">s</span> := <span class="id">t</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="EqD.html#eq_dep_ind_l">eq_dep_ind_l</a></span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) (<span class="id">y</span> := <span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> := <span class="kwd">fun</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">z</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) =&gt; <span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="lucid_ops.html#elt_extend">elt_extend</a></span> (<span class="id"><a href="lucid_ops.html#elt_const">elt_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">b</span>) <span class="id">z</span>) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.EqdepFacts.html#eq_dep_sym">eq_dep_sym</a></span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#is_fst_value_true_inv">is_fst_value_true_inv</a></span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_merge_lfp</span> <span class="id">sp_merge_loc_nfstwf_weak</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_merge_wf">sp_merge_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">t</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> (<span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span> <span class="id">_</span> <span class="id">s</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="elt_when">elt_when</a></span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">o</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b</span> -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">o</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">o</span> <span class="kwd">as</span> <span class="id">o0</span> <span class="kwd">in</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id">_</span> <span class="id">b0</span> <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b0</span> -&gt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> <span class="id">o0</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id">b0</span> =&gt; <span class="kwd">fun</span> (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">b0</span> <span class="kwd">as</span> <span class="id">b0</span>' <span class="kwd">return</span> <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b0</span>' <span class="kwd">then</span> <span class="id">x</span> <span class="kwd">else</span> <span class="id"><a href="sampled_streams.html#None">None</a></span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Fail</span> <span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">Fail</span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_when_lfp">elt_when_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b1</span> <span class="id">b2</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">o1</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b1</span>) (<span class="id">o2</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x1</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b1</span>) (<span class="id">x2</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b2</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> <span class="id">o1</span> <span class="id">o2</span> -&gt; <span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> <span class="id">x1</span> <span class="id">x2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#flat_ord">flat_ord</a></span> (<span class="id"><a href="lucid_ops.html#elt_when">elt_when</a></span> <span class="id">o1</span> <span class="id">x1</span>) (<span class="id"><a href="lucid_ops.html#elt_when">elt_when</a></span> <span class="id">o2</span> <span class="id">x2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">o1</span> <span class="id">o2</span>; <span class="id">case</span> <span class="id">o1</span>; <span class="id">case</span> <span class="id">o2</span>; <span class="id">simpl</span>; <span class="id">auto</span>; <span class="id">clear</span> <span class="id">o1</span> <span class="id">b1</span> <span class="id">o2</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">H1</span>; <span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">eq_dep_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>); <span class="id">intros</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;<span class="id">injection</span> <span class="id">H2</span>; <span class="id">intro</span> <span class="id">H3</span>; <span class="id">generalize</span> <span class="id">x1</span> <span class="id">x2</span>; <span class="id">rewrite</span> <span class="id">H3</span>; <span class="id">case</span> <span class="id">b1</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">H</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_when_is_no_Fail">elt_when_is_no_Fail</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">o</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">o</span> -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> (<span class="id"><a href="lucid_ops.html#elt_when">elt_when</a></span> <span class="id">o</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">o</span>; <span class="id">case</span> <span class="id">o</span>; <span class="id">simpl</span>; <span class="id">auto</span>; <span class="id">clear</span> <span class="id">o</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span>'; <span class="id">case</span> <span class="id">b</span>'; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">elt_when_lfp</span> <span class="id">elt_when_is_no_Fail</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="sp_when">sp_when</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">c</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_cons">sp_cons</a></span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>) (<span class="id"><a href="lucid_ops.html#elt_when">elt_when</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>) (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sp_when</span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">lc</span>) (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>)).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_when_lfp">sp_when_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c1</span> <span class="id">c2</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc1</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c1</span>) (<span class="id">lc2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s1</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">c1</span>) (<span class="id">s2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">c2</span>),<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">lc1</span> <span class="id">lc2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">s1</span> <span class="id">s2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_when">sp_when</a></span> <span class="id">lc1</span> <span class="id">s1</span>) (<span class="id"><a href="lucid_ops.html#sp_when">sp_when</a></span> <span class="id">lc2</span> <span class="id">s2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span>; <span class="id">elim</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>;  <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_O">sp_inf_proof_O</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n0</span> <span class="id">HR</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">lc1</span> <span class="id">lc2</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H1</span>); <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_inf_S_n_inv">sp_inf_S_n_inv</a></span> <span class="id">H2</span>); <span class="id">intros</span>;<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_proof_S_n">sp_inf_proof_S_n</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="elt_when_true">elt_when_true</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">o</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) (<span class="id">x</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">o</span> ==&lt;&lt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> &gt;&gt; <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#elt_when">elt_when</a></span> <span class="id">o</span> <span class="id">x</span> ==&lt;&lt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> &gt;&gt; <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">o</span> <span class="id">x</span> <span class="id">H</span>; <span class="id">generalize</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="EqD.html#eq_dep_ind_l">eq_dep_ind_l</a></span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) (<span class="id">y</span> := <span class="id">o</span>)<br/>
&nbsp;&nbsp;(<span class="id">P</span> := <span class="kwd">fun</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">z</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) =&gt; <span class="kwd">forall</span> <span class="id">x0</span> : <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b</span>, <span class="id"><a href="lucid_ops.html#elt_when">elt_when</a></span> <span class="id">z</span> <span class="id">x0</span> ==&lt;&lt; <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> &gt;&gt; <span class="id">x0</span>)<br/>
&nbsp;&nbsp;; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">elt_when_true</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Require</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_when_loc_nfstwf">sp_when_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span> <span class="id">m</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#locle">locle</a></span> <span class="id">m</span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_on">sp_on</a></span> <span class="id">lc</span>) <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">m</span> (<span class="id"><a href="lucid_ops.html#sp_when">sp_when</a></span> <span class="id">lc</span> <span class="id">s</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_when_loc_nfstwf</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">m</span>; <span class="id">case</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_O">loc_nfstwf_O</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n0</span> <span class="id">c</span> <span class="id">lc</span> <span class="id">s</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="lucid_ops.html#elt_on">elt_on</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>))).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H4</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_false">loc_nfstwf_false</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_when_loc_nfstwf</span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="sampled_streams.html#pseudo_pred">pseudo_pred</a></span> <span class="id">n</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)); <span class="id">intros</span> <span class="id">H5</span>; <span class="id">rewrite</span> <span class="id">H5</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">H1</span>; <span class="id">case</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#eq_false_dec">eq_false_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.Streams.html#hd">hd</a></span> <span class="id">c</span>)); <span class="id">intros</span> <span class="id">H5</span>; <span class="id">rewrite</span> <span class="id">H5</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">H2</span>; <span class="id">case</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">H3</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="id">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>; <span class="id">rewrite</span> &lt;- <span class="id"><a href="sampled_streams.html#pseudo_pred_S">pseudo_pred_S</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="sampled_streams.html#locle_le_1">locle_le_1</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H4</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_true">loc_nfstwf_true</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">H3</span>; <span class="id">rewrite</span> (<span class="id"><a href="lucid_ops.html#elt_on_eq_true_weak">elt_on_eq_true_weak</a></span> <span class="id">_</span> <span class="id">H4</span>) <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">case</span> (<span class="id"><a href="lucid_ops.html#elt_on_eq_true">elt_on_eq_true</a></span> <span class="id">_</span> <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="EqD.html#eq_dep_ind_l">eq_dep_ind_l</a></span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">y</span> := <span class="id"><a href="lucid_ops.html#elt_when">elt_when</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>) (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> := <span class="kwd">fun</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">z</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">b</span>) =&gt; <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n2</span>); <span class="id">auto</span>; <span class="id">rewrite</span> &lt;- <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">absurd</span> (<span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="EqD.html#eq_dep_ind_l">eq_dep_ind_l</a></span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="kwd">Fail</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">y</span> := <span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> := <span class="kwd">fun</span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">z</span>: <span class="id"><a href="sampled_streams.html#samplElt">samplElt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">b</span>) =&gt; ~ <span class="id"><a href="sampled_streams.html#is_no_Fail">is_no_Fail</a></span> <span class="id">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc_nfstwf_is_no_Fail">loc_nfstwf_is_no_Fail</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n2</span>); <span class="id">auto</span>; <span class="id">rewrite</span> &lt;- <span class="id">H0</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sp_when_loc_nfstwf</span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#pred">pred</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">H1</span>; <span class="id">case</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">H2</span>; <span class="id">case</span> <span class="id">n</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_aux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">H3</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="id">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>; <span class="id">rewrite</span> (<span class="id"><a href="lucid_ops.html#elt_on_eq_true_weak">elt_on_eq_true_weak</a></span> <span class="id">_</span> <span class="id">H4</span>); <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="sampled_streams.html#locle_le_1">locle_le_1</a></span>; <span class="id">eauto</span> <span class="kwd">with</span> <span class="id">arith</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_when_glob_nfstwf">sp_when_glob_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_when">sp_when</a></span> <span class="id">lc</span> <span class="id">s</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">c</span> <span class="id">lc</span> <span class="id">s</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#nfstwf_function_convert_sup">nfstwf_function_convert_sup</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">s</span> =&gt; <span class="id"><a href="lucid_ops.html#sp_when">sp_when</a></span> <span class="id">lc</span> <span class="id">s</span>) (<span class="id">n</span> := <span class="id">n</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#sp_on_clock_inf">sp_on_clock_inf</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">k</span> <span class="id">s</span>' <span class="id">H3</span> <span class="id">H4</span> <span class="id">H5</span>; <span class="id">apply</span> <span class="id"><a href="lucid_ops.html#sp_when_loc_nfstwf">sp_when_loc_nfstwf</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">m</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="sampled_streams.html#glob2loc">glob2loc</a></span> (<span class="id"><a href="sampled_streams.html#loc2glob">loc2glob</a></span> <span class="id">m</span> <span class="id">c</span> <span class="id">n</span>) <span class="id">c</span> = <span class="id">m</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#loc2glob_prop">loc2glob_prop</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_loc_nfstwf">glob_nfstwf_loc_nfstwf</a></span>;<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#glob_nfstwf_n_le">glob_nfstwf_n_le</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id">n</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_when_wf">sp_when_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#Sampling.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">s</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> (<span class="id"><a href="lucid_ops.html#sp_when">sp_when</a></span> <span class="id">lc</span> <span class="id">s</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">sp_merge_wf</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">ls</span> <span class="id">s</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H1</span>); <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;<span class="id">constructor</span> 1;<span class="id">simpl</span>;  <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#Sampling">Sampling</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_merge</span> <span class="id">sp_when_wf</span> : <span class="id">sampled_str</span> <span class="id">sp_rec0</span>.<br/>
<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="merge">merge</a></span> := <span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="swp_when">swp_when</a></span> := (<span class="kwd">fun</span> <span class="id">lc</span> <span class="id">s</span> =&gt; <span class="id"><a href="lucid_ops.html#sp_when">sp_when</a></span> <span class="id">s</span> <span class="id">lc</span>).<br/>
<span class="kwd">Infix</span> "<span class="id">when</span>" := <span class="id"><a href="lucid_ops.html#swp_when">swp_when</a></span> (<span class="kwd">at</span> <span class="id">level</span> 100, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_fby_lfp</span> <span class="id">sp_merge_lfp</span> <span class="id">sp_when_lfp</span> : <span class="id">sp_rec0</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_fby_loc_nfstwf</span><br/>
&nbsp;<span class="id">sp_extend_loc_nfstwf</span> <span class="id">sp_merge_loc_nfstwf_weak</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_when_glob_nfstwf</span> <span class="id">sp_fby_glob_nfstwf</span><br/>
&nbsp;<span class="id">sp_extend_glob_nfstwf</span> <span class="id">sp_merge_glob_nfstwf</span> : <span class="id">sp_rec0</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_wf_glob_nfstwf</span> <span class="id">glob_nfstwf_sp_wf</span> : <span class="id">sp_rec0</span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="If">If</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="If.A">A</a></span>: <span class="kwd">Set</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="If">If</a></span> (<span class="id">b</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="lucid_ops.html#If.A">A</a></span>) := <span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id">x</span> <span class="kwd">else</span> <span class="id">y</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sp_if">sp_if</a></span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#If.A">A</a></span> <span class="id">c</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_extend">sp_extend</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id"><a href="lucid_ops.html#If">If</a></span> <span class="id">_</span>) <span class="id">lc</span>) <span class="id">x</span>) <span class="id">y</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_if_lfp">sp_if_lfp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc1</span> <span class="id">lc2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s1</span> <span class="id">s2</span> <span class="id">t1</span> <span class="id">t2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#If.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">lc1</span> <span class="id">lc2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">s1</span> <span class="id">s2</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> <span class="id">t1</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_inf">sp_inf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span> <span class="id">lc1</span> <span class="id">s1</span> <span class="id">t1</span>) (<span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span> <span class="id">lc2</span> <span class="id">s2</span> <span class="id">t2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_if_loc_nfstwf">sp_if_loc_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s1</span> <span class="id">s2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#If.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">s1</span> -&gt; <span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#loc_nfstwf">loc_nfstwf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span> <span class="id">lc</span> <span class="id">s1</span> <span class="id">s2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sp_if_glob_nfstwf">sp_if_glob_nfstwf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">s1</span> <span class="id">s2</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#If.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">lc</span> -&gt; <span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">s1</span> -&gt; <span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#glob_nfstwf">glob_nfstwf</a></span> <span class="id">n</span> (<span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span> <span class="id">lc</span> <span class="id">s1</span> <span class="id">s2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sp_rec0</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="if_equiv">if_equiv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">lc</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">c</span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#If.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">y</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span> <span class="id">lc</span> <span class="id">x</span> <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_merge">sp_merge</a></span> <span class="id">_</span> (<span class="id"><a href="lucid_ops.html#sp_when">sp_when</a></span> <span class="id">lc</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_when">sp_when</a></span> (<span class="id"><a href="lucid_ops.html#sp_not">sp_not</a></span> <span class="id">lc</span>) <span class="id">y</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;<span class="kwd">cofix</span> <span class="id">if_equiv</span>;<br/>
&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">lc</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">constructor</span> 1.<br/>
&nbsp;<span class="id">simpl</span>; <span class="id">rewrite</span> (<span class="id"><a href="sampled_streams.html#unfold_samplStr">unfold_samplStr</a></span> <span class="id">x</span>) <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">rewrite</span> (<span class="id"><a href="sampled_streams.html#unfold_samplStr">unfold_samplStr</a></span> <span class="id">y</span>) <span class="kwd">in</span> <span class="id">H2</span>;<br/>
&nbsp;<span class="id">generalize</span> <span class="id">lc</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">case</span> <span class="id">c</span>; <span class="id">clear</span> <span class="id">H2</span> <span class="id">H1</span> <span class="id">y</span> <span class="id">x</span> <span class="id">lc</span> <span class="id">c</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">s</span>;<br/>
&nbsp;<span class="id">case</span> <span class="id">b</span>; <span class="id">intros</span> <span class="id">lc</span>; <span class="id">pattern</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">lc</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_true_inv">samplElt_true_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">a</span> <span class="id">x</span> <span class="id">y</span>; <span class="id">case</span> <span class="id">a</span>; <span class="id">simpl</span>; <span class="id">pattern</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>); <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_true_inv">samplElt_true_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">pattern</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">y</span>); <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_true_inv">samplElt_true_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">a0</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H2</span>); <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">H3</span>; <span class="id">elim</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H1</span>); <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">H3</span>; <span class="id">elim</span> <span class="id">H3</span>.<br/>
&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_false_inv">samplElt_false_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H2</span>); <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H1</span>); <span class="id">intros</span>;<br/>
&nbsp;<span class="id">apply</span> <span class="id">if_equiv</span> <span class="kwd">with</span> (<span class="id">lc</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">lc</span>) (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id">y</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>);<br/>
&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="if_false_equiv">if_false_equiv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#If.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> <span class="id">y</span> (<span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">_</span>) <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;<span class="kwd">cofix</span> <span class="id">if_false_equiv</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">x</span> <span class="id">y</span>; <span class="id">constructor</span> 1.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H</span>); <span class="id">generalize</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>); <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">y</span>); <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">a</span> <span class="id">s</span>; <span class="id">pattern</span> <span class="id">s</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_true_inv">samplElt_true_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H</span>'; <span class="id">elim</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">s</span>; <span class="id">pattern</span> <span class="id">s</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_true_inv">samplElt_true_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">if_false_equiv</span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id">y</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>); <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H</span>); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="const_decal_eq">const_decal_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Set</span>) (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">a</span>: <span class="id">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">a</span> <span class="id">c</span>) (<span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id">a</span> <span class="id">c</span>) (<span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id">a</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A</span>'; <span class="kwd">cofix</span> <span class="id">const_decal_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">a</span>; <span class="id">constructor</span> 1.<br/>
&nbsp;&nbsp;<span class="id">case</span> <span class="id">c</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span> <span class="id">c</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c</span>'; <span class="id">case</span> <span class="id">b</span>; <span class="id">apply</span> <span class="id">const_decal_eq</span> <span class="kwd">with</span> (<span class="id">c</span> := <span class="id">c</span>') (<span class="id">a</span> := <span class="id">a</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">const_decal_eq</span> <span class="id">sp_if_lfp</span> <span class="id">sp_if_loc_nfstwf</span> : <span class="id">sampled_str</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="arrow_equiv">arrow_equiv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">c</span>: <span class="id"><a href="sampled_streams.html#clock">clock</a></span>) (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="sampled_streams.html#samplStr">samplStr</a></span> <span class="id"><a href="lucid_ops.html#If.A">A</a></span> <span class="id">c</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">x</span> -&gt; <span class="id"><a href="sampled_streams.html#sp_wf">sp_wf</a></span> <span class="id">y</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="lucid_ops.html#sp_arrow">sp_arrow</a></span> <span class="id">x</span> <span class="id">y</span>) (<span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span> (`<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>` <span class="id">fby</span> `<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>`) <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
&nbsp;<span class="kwd">cofix</span> <span class="id">arrow_equiv</span>;<br/>
&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">constructor</span> 1.<br/>
&nbsp;<span class="id">simpl</span>; <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H2</span>); <span class="id">generalize</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">y</span>); <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_hd">sp_hd</a></span> <span class="id">x</span>); <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">eqD</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">a</span> <span class="id">s</span>; <span class="id">pattern</span> <span class="id">s</span>; <span class="id">apply</span> <span class="id"><a href="sampled_streams.html#samplElt_true_inv">samplElt_true_inv</a></span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H</span>'; <span class="id">elim</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H1</span>); <span class="id">case</span> (<span class="id"><a href="sampled_streams.html#sp_wf_inv">sp_wf_inv</a></span> <span class="id">H2</span>); <span class="id">generalize</span> <span class="id">x</span> <span class="id">y</span>;<br/>
&nbsp;&nbsp;<span class="id">case</span> <span class="id">c</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">c0</span>; <span class="id">case</span> <span class="id">b</span>; <span class="id">clear</span> <span class="id">b</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">y</span> <span class="id">x</span> <span class="id">c</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span>;<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="sampled_streams.html#sp_eq">sp_eq</a></span> (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span> (<span class="id"><a href="lucid_ops.html#sp_delay">sp_delay</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">c0</span>) (<span class="id"><a href="sampled_streams.html#Any">Any</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>)) (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_eq_trans">sp_eq_trans</a></span> <span class="kwd">with</span> (<span class="id">s2</span> := <span class="id"><a href="lucid_ops.html#sp_if">sp_if</a></span> (<span class="id"><a href="lucid_ops.html#sp_const">sp_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">c0</span>) (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="lucid_ops.html#if_false_equiv">if_false_equiv</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="sampled_streams.html#sp_inf_wf_eq">sp_inf_wf_eq</a></span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sampled_str</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span>; <span class="id">apply</span> <span class="id">arrow_equiv</span> <span class="kwd">with</span> (<span class="id">x</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">x</span>) (<span class="id">y</span> := <span class="id"><a href="sampled_streams.html#sp_tl">sp_tl</a></span> <span class="id">y</span>); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="lucid_ops.html#If">If</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_if_lfp</span> : <span class="id">sampled_str</span> <span class="id">sp_rec0</span>.<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_if_loc_nfstwf</span>:  <span class="id">sampled_str</span>.<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sp_if_glob_nfstwf</span> : <span class="id">sp_rec0</span>.<br/>
<br/>
<br/>
<span class="id">Unset</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
