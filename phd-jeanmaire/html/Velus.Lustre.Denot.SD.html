
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module SD</title>
<meta name="description" content="Documentation of Coq module SD" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module SD</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html">BinPos</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span> <span class="id"><a href="Velus.Ident.html">Ident</a></span> <span class="id"><a href="Velus.Operators.html">Operators</a></span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span> <span class="id"><a href="Velus.CoindStreams.html">CoindStreams</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.StaticEnv.html">Lustre.StaticEnv</a></span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span> <span class="id"><a href="Velus.Lustre.LSemantics.html">Lustre.LSemantics</a></span> <span class="id"><a href="Velus.Lustre.LOrdered.html">Lustre.LOrdered</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.html">Lustre.Denot.Cpo</a></span>.<br/>
<br/>
<span class="kwd">Close</span> <span class="kwd">Scope</span> <span class="id">equiv_scope</span>. <br/>
<span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">ListNotations</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html">CommonList2</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html">SDfuns</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="SD">SD</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span>       <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span>      <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn">Syn</a></span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SD.LSyntax_facts">LSyntax_facts</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.get_locals">get_locals</a></span> (<span class="id">blk</span> : <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.block">block</a></span>) : <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.static_env">static_env</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">blk</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">vars</span> <span class="id">_</span>) =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">vars</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; []<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.NoDup_senv_loc">NoDup_senv_loc</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>},<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>) <span class="id">vars</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span> <span class="id">nd</span> = <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">vars</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.senv_of_ins">senv_of_ins</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.senv_of_decls">senv_of_decls</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span> <span class="id">nd</span>) ++ <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.senv_of_decls">senv_of_decls</a></span> <span class="id">vars</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_nodup">n_nodup</a></span> <span class="id">nd</span>) <span class="kwd">as</span> [<span class="id">Nd</span> <span class="id">Ndl</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hn</span> <span class="kwd">in</span> <span class="id">Ndl</span>; <span class="id">inv</span> <span class="id">Ndl</span>.<br/>
&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.NoDupScope">NoDupScope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inversion_clear</span> <span class="id">it</span> <span class="kwd">as</span> [???? <span class="id">ndm</span> <span class="id">Hf</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>, 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.map_fst_senv_of_ins">map_fst_senv_of_ins</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.map_fst_senv_of_decls">map_fst_senv_of_decls</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span> <span class="kwd">in</span> <span class="id">ndm</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">NoDup_app</span>'<span class="id">_iff</span>; <span class="id">repeat</span> <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span> <span class="kwd">in</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hf</span>; <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="SD.NoDup_iol">NoDup_iol</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>},<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.senv_of_ins">senv_of_ins</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_in">n_in</a></span> <span class="id">n</span>) ++ <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.senv_of_decls">senv_of_decls</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span> <span class="id">n</span>) ++ <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_locals">get_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span> <span class="id">n</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node_NoDupMembers">node_NoDupMembers</a></span> <span class="id">n</span>) <span class="kwd">as</span> <span class="id">ND</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span> <span class="id">n</span>) <span class="id">eqn</span>:<span class="id">Hn</span>; <span class="id">simpl</span>; <span class="id">try</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.NoDup_senv_loc">NoDup_senv_loc</a></span> <span class="kwd">in</span> <span class="id">Hn</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Chercher les variables à gauche des équations dans les blocks </div>
<span class="kwd">Definition</span> <span class="id"><a name="SD.get_defined">get_defined</a></span> (<span class="id">blk</span> : <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.block">block</a></span>) : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">blk</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Beq">Beq</a></span> (<span class="id">xs</span>,<span class="id">es</span>) =&gt; <span class="id">xs</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; []<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Et dans les nœuds  </div>
<span class="kwd">Definition</span> <span class="id"><a name="SD.get_defined_node">get_defined_node</a></span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">n</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>) : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span> <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">_</span> <span class="id">blks</span>) =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#flat_map">flat_map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined">get_defined</a></span> <span class="id">blks</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; []<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.NoDup_get_defined">NoDup_get_defined</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>},<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>) <span class="id">vars</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span> <span class="id">nd</span> = <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">vars</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#flat_map">flat_map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined">get_defined</a></span> <span class="id">blks</span> ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.NoDup_senv_loc">NoDup_senv_loc</a></span> <span class="kwd">in</span> <span class="id">Hn</span> <span class="kwd">as</span> <span class="id">ndm</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_defd">n_defd</a></span> <span class="id">nd</span>) <span class="kwd">as</span> (<span class="id">outs</span> &amp; <span class="id">Vd</span> &amp; <span class="id">Perm</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hn</span> <span class="kwd">in</span> <span class="id">Vd</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Vd</span>. <span class="id">Syn.inv_scope</span>.<br/>
&nbsp;&nbsp;<span class="id">rename</span> <span class="id">x</span> <span class="id">into</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Perm</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H0</span> <span class="kwd">in</span> <span class="id">ndm</span>.<br/>
&nbsp;&nbsp;<span class="id">clear</span> - <span class="id">ndm</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span> <span class="kwd">in</span> <span class="id">ndm</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_app_comm">Permutation.Permutation_app_comm</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.map_fst_senv_of_ins">map_fst_senv_of_ins</a></span> <span class="kwd">in</span> <span class="id">ndm</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">H</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">NoDup_app</span>'; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDup_app_r">NoDup_app_r</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDup_app_l">NoDup_app_l</a></span> <span class="kwd">in</span> <span class="id">ndm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">simpl</span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">now</span> <span class="id">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="id">intros</span> <span class="id">i</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDup_app_In">NoDup_app_In</a></span> <span class="kwd">in</span> <span class="id">ndm</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">ndm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> - <span class="id">ndm</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">H0</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, 2 <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">cases</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">subst</span>; <span class="id">firstorder</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="SD.NoDup_get_defined_node">NoDup_get_defined_node</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>},<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined_node">get_defined_node</a></span> <span class="id">nd</span> ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_in">n_in</a></span> <span class="id">nd</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">Ndin</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node_NoDup_in">node_NoDup_in</a></span> <span class="id">nd</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined_node">get_defined_node</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hn</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.NoDup_get_defined">NoDup_get_defined</a></span>; <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.get_defined_node_incl">get_defined_node_incl</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>},<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined_node">get_defined_node</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span> <span class="id">n</span>) ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_locals">get_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span> <span class="id">n</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined_node">get_defined_node</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_defd">n_defd</a></span> <span class="id">n</span>) <span class="kwd">as</span> (<span class="id">xs</span> &amp; <span class="id">Vd</span> &amp; <span class="id">Perm</span>).<br/>
&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hn</span>; <span class="id">subst</span>; <span class="id">simpl</span>; <span class="id">try</span> <span class="id">now</span> (<span class="id">intros</span> ? []).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Vd</span>.<br/>
&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.VarsDefinedScope">VarsDefinedScope</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inversion_clear</span> <span class="id">it</span> <span class="kwd">as</span> [??? (<span class="id">xs</span>' &amp; <span class="id">Vd</span>' &amp; <span class="id">Perm</span>')].<br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Hn</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Perm</span> <span class="kwd">in</span> <span class="id">Perm</span>'.<br/>
&nbsp;&nbsp;<span class="id">clear</span> - <span class="id">Vd</span>' <span class="id">Perm</span>'.<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_map">Permutation.Permutation_map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="kwd">in</span> <span class="id">Perm</span>'.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Perm</span>'.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv.map_fst_senv_of_decls">map_fst_senv_of_decls</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span> <span class="id">n</span>) ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">l</span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">l</span>' ?; <span class="id">clear</span> <span class="id">l</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hincl</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">xs</span>')) <span class="id">l</span>').<br/>
&nbsp;&nbsp;{ <span class="id">intros</span> <span class="id">x</span> <span class="id">Hin</span>; <span class="id">rewrite</span> <span class="id">Perm</span>' <span class="kwd">in</span> <span class="id">Hin</span>; <span class="id">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Perm</span>'; <span class="id">revert</span> <span class="id">Hincl</span>; <span class="id">revert</span> <span class="id">l</span>'.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Vd</span>'; <span class="id">simpl</span>; <span class="id">intros</span> <span class="id">l1</span>. { <span class="id">now</span> <span class="id">intros</span> ? []. }<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">Hincl</span> <span class="id">a</span> [<span class="id">Hin</span>|<span class="id">Hin</span>]; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">now</span> <span class="id">inv</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span> <span class="kwd">as</span> (<span class="id">xs</span>,<span class="id">es</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">subst</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.LSyntax_facts">LSyntax_facts</a></span>.<br/>
<br/>
<div class="doc">We always use this specialized version of mem_nth </div>
<span class="kwd">Definition</span> <span class="id"><a name="SD.mem_nth">mem_nth</a></span> := <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth">mem_nth</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> <span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.errTy">errTy</a></span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>) := <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#err">err</a></span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#error_Ty">error_Ty</a></span>).<br/>
<br/>
<h2> Denotational environments (local &amp; program-wide) </h2>
<span class="kwd">Section</span> <span class="id"><a name="SD.Denot_env">Denot_env</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.SI">SI</a></span> := <span class="kwd">fun</span> <span class="id">_</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.FI">FI</a></span> := <span class="kwd">fun</span> <span class="id">_</span> : <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> =&gt; (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.err_env">err_env</a></span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> := <span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>.<br/>
<br/>
<div class="doc">build an environment from a tuple of streams, with names given in <span class="bracket"><span class="id">l</span></span> </div>
<span class="kwd">Definition</span> <span class="id"><a name="SD.env_of_np">env_of_np</a></span> (<span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) {<span class="id">n</span>} : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.mem_nth">mem_nth</a></span> <span class="id">l</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">n</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.env_of_np_eq">env_of_np_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> (<span class="id">ss</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span>) <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span> <span class="id">l</span> <span class="id">ss</span> <span class="id">x</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.mem_nth">mem_nth</a></span> <span class="id">l</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">n</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span> <span class="id">ss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR_simpl">Dprodi_DISTR_simpl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.env_of_np_tl">env_of_np_tl</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)) <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x</span> &lt;&gt; <span class="id">y</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span> (<span class="id">y</span> :: <span class="id">l</span>) <span class="id">np</span> <span class="id">x</span> == <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_tl">nprod_tl</a></span> <span class="id">np</span>) <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">clear</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np_eq">env_of_np_eq</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">x</span> <span class="id">y</span>); <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.mem_nth">mem_nth</a></span> <span class="id">l</span> <span class="id">x</span>); <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.env_of_np_nth">env_of_np_nth</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span>) <span class="id">k</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.mem_nth">mem_nth</a></span> <span class="id">l</span> <span class="id">x</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span> <span class="id">l</span> <span class="id">np</span> <span class="id">x</span> = <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">k</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span> <span class="id">np</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR_simpl">Dprodi_DISTR_simpl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>. <span class="id">now</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.forall_env_of_np">forall_env_of_np</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>) -&gt; <span class="kwd">Prop</span>) <span class="id">l</span> {<span class="id">n</span>} (<span class="id">ss</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> <span class="id">ss</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span> <span class="id">l</span> <span class="id">ss</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cbn</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt_ge_cases">Nat.lt_ge_cases</a></span> <span class="id">n0</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_k">forall_nprod_k</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth_err">get_nth_err</a></span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">extract a tuple from an environment  </div>
<span class="kwd">Definition</span> <span class="id"><a name="SD.np_of_env">np_of_env</a></span> (<span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">l</span>).<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [| <span class="id">x</span> <span class="id">l</span>].<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, 0.<br/>
&nbsp;&nbsp;- <span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> @2<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> <span class="id">_</span> <span class="id">x</span>) <span class="id">IHl</span>).<br/>
Defined.
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.nth_np_of_env">nth_np_of_env</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">d</span> <span class="id">d</span>' <span class="id">l</span> <span class="id">env</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> &lt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">k</span> <span class="id">d</span>' (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env</span>) = <span class="id">env</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a></span> <span class="id">k</span> <span class="id">l</span> <span class="id">d</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|? []]; <span class="id">intros</span> * <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">k</span>; <span class="id">auto</span>. <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">k</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id">IHl</span>; <span class="id">now</span> <span class="id">auto</span> <span class="kwd">with</span> <span class="id">arith</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.np_of_env_eq">np_of_env_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">i</span> :: <span class="id">l</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> (<span class="id">env</span> <span class="id">i</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.np_of_env_cons">np_of_env_cons</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> (<span class="id">i</span> :: <span class="id">l</span>) <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> (<span class="id">env</span> <span class="id">i</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">trivial</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.np_of_env_le_eq">np_of_env_le_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">env1</span> <span class="id">env2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">env1</span> &lt;= <span class="id">env2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> <span class="id">env1</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env1</span> == <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span>; <span class="id">simpl</span>; <span class="id">intros</span> * <span class="id">Hle</span> <span class="id">Hinf</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons_Oeq_compat">nprod_cons_Oeq_compat</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_le_eq">infinite_le_eq</a></span>, <span class="id">Hinf</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.np_of_env_ext">np_of_env_ext</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">env1</span> <span class="id">env2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">l</span> -&gt; <span class="id">env1</span> <span class="id">x</span> == <span class="id">env2</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env1</span> == <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|<span class="id">i</span> <span class="id">l</span>]; <span class="id">intros</span> * <span class="id">Hin</span>; <span class="id">auto</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2 (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env_eq">np_of_env_eq</a></span> (<span class="id">i</span> :: <span class="id">l</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons_Oeq_compat">nprod_cons_Oeq_compat</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">Hin</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id">Hin</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.forall_np_of_env">forall_np_of_env</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>) -&gt; <span class="kwd">Prop</span>) <span class="id">l</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">P</span> (<span class="id">env</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|? []]; <span class="id">intros</span> * <span class="id">Hp</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">IHl</span>, <span class="id">Hp</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">forall_np_of_env</span>' :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>) -&gt; <span class="kwd">Prop</span>) <span class="id">l</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">l</span> -&gt; <span class="id">P</span> (<span class="id">env</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|? []]; <span class="id">intros</span> * <span class="id">Hp</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">Hp</span>; <span class="id">now</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">Hp</span>. <span class="id">now</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">IHl</span>. <span class="id">clear</span> - <span class="id">Hp</span>. <span class="id">firstorder</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.inf_dom_np_of_env">inf_dom_np_of_env</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">l</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span> <span class="id">env</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> <span class="id">_</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#infinite_dom">infinite_dom</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span>; <span class="id">intros</span> * <span class="id">Hinf</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hinf</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.np_of_env_of_np">np_of_env_of_np</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">np</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;0 &lt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span> <span class="id">l</span> <span class="id">np</span>) == <span class="id">np</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hl</span> <span class="id">Nd</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l</span> <span class="kwd">as</span> [| <span class="id">x</span> <span class="id">l</span>]. <span class="id">now</span> <span class="id">inv</span> <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_eq">nprod_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">k</span> <span class="id">d</span> <span class="id">Hk</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.nth_np_of_env">nth_np_of_env</a></span> <span class="id">x</span> <span class="id">d</span> (<span class="id">x</span> :: <span class="id">l</span>)); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np_eq">env_of_np_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_nth">mem_nth_nth</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth_indep">get_nth_indep</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.env_of_np_of_env_proj">env_of_np_of_env_proj</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">env</span>:<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) <span class="id">l</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">i</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span> <span class="id">l</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> <span class="id">l</span> <span class="id">env</span>) <span class="id">i</span> = <span class="id">env</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np_eq">env_of_np_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;- <span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_Some">mem_nth_Some</a></span> <span class="kwd">in</span> <span class="id">Hmem</span> <span class="kwd">as</span> [? <span class="id">HH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unshelve</span> (<span class="id">erewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.nth_np_of_env">nth_np_of_env</a></span>, <span class="id">HH</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">exfalso</span>; <span class="id">now</span> <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_nin">mem_nth_nin</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_env">Denot_env</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SD.Denot_node">Denot_node</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">PSyn</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.decl">decl</a></span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.block">block</a></span> -&gt; <span class="kwd">Prop</span>}.<br/>
<span class="kwd">Context</span> {<span class="id">Prefs</span> : <span class="id"><a href="Velus.Common.Common.html#PS.t">PS.t</a></span>}.<br/>
<span class="kwd">Variable</span> (<span class="id"><a name="SD.Denot_node.G">G</a></span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.global">global</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_node.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_node.Prefs">Prefs</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.sbool_of">sbool_of</a></span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>) -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#MAP">MAP</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#pres">pres</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.Venum">Venum</a></span> 1) =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.sbools_of">sbools_of</a></span> {<span class="id">n</span>} : @<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>)) <span class="id">n</span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_Fold">nprod_Fold</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#ZIP">ZIP</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#orb">orb</a></span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#DS_const">DS_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift">lift</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.sbool_of">sbool_of</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.swhenv">swhenv</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">get_tag</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.Venum">Venum</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> | <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#swhen">swhen</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.enumtag">enumtag</a></span> <span class="id">get_tag</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.smergev">smergev</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">get_tag</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.Venum">Venum</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> | <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#smerge">smerge</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.enumtag">enumtag</a></span> <span class="id">get_tag</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.scasev">scasev</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">get_tag</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.Venum">Venum</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> | <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase">scase</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.enumtag">enumtag</a></span> <span class="id">get_tag</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.scase_defv">scase_defv</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">get_tag</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.Venum">Venum</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> | <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#scase_def">scase_def</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.enumtag">enumtag</a></span> <span class="id">get_tag</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span>.<br/>
<br/>
<div class="doc">On définit tout de suite <span class="bracket"><span class="id">denot_exps_</span></span> en fonction de <span class="bracket"><span class="id">denot_exp_</span></span>
    pour simplifier le raisonnement dans denot_exp_eq </div>
<span class="kwd">Section</span> <span class="id"><a name="SD.Denot_node.Denot_exps">Denot_exps</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="SD.Denot_node.Denot_exps.denot_exp_">denot_exp_</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> : <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>)) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>)) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_exps_">denot_exps_</a></span> (<span class="id">es</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>)) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [|<span class="id">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_app">nprod_app</a></span> @2<span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_node.Denot_exps.denot_exp_">denot_exp_</a></span> <span class="id">a</span>)) <span class="id">IHes</span>).<br/>
&nbsp;&nbsp;Defined.
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_expss_">denot_expss_</a></span> {<span class="id">A</span>} (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>)) (<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>)) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>)) <span class="id">n</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|[? <span class="id">es</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) <span class="id">n</span>) <span class="kwd">as</span> [&lt;-|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> @2<span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> <span class="id">es</span>)) <span class="id">IHess</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exact</span> 0.<br/>
&nbsp;&nbsp;Defined.
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_node.Denot_exps">Denot_exps</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_exp_">denot_exp_</a></span> (<span class="id">ins</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">e</span> : <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>)) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>)) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">ctx</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprod">Dprod</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">epose</span> (<span class="id">denot_var</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident">mem_ident</a></span> <span class="id">x</span> <span class="id">ins</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_fam">DS_fam</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) <span class="id">x</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> <span class="id">_</span> <span class="id">_</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_fam">DS_fam</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) <span class="id">x</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;<span class="kwd">fix</span> <span class="id">denot_exp_</span> 1.<br/>
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span> <span class="id">eqn</span>:<span class="id">He</span>; <span class="id">simpl</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sconst">sconst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.Vscalar">Vscalar</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.sem_cconst">sem_cconst</a></span> <span class="id">c</span>)) @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">ins</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> <span class="id">_</span> <span class="id">_</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sconst">sconst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.Venum">Venum</a></span> <span class="id">e0</span>) @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">ins</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> <span class="id">_</span> <span class="id">_</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> (<span class="id">denot_var</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, 0.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_comp">fcont_comp</a></span>. 2: <span class="id">apply</span> (<span class="id">denot_exp_</span> <span class="id">e0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e0</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.typeof">typeof</a></span> <span class="id">e0</span>) <span class="kwd">as</span> [|<span class="id">ty</span> []].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sunop">sunop</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.sem_unop">sem_unop</a></span> <span class="id">u</span> <span class="id">v</span> <span class="id">ty</span>)).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_comp2">fcont_comp2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;3: <span class="id">apply</span> (<span class="id">denot_exp_</span> <span class="id">e0_2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">apply</span> (<span class="id">denot_exp_</span> <span class="id">e0_1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e0_1</span>) <span class="kwd">as</span> [|[]], (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e0_2</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-4,6-9: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.typeof">typeof</a></span> <span class="id">e0_1</span>) <span class="kwd">as</span> [|<span class="id">ty1</span> []], (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.typeof">typeof</a></span> <span class="id">e0_2</span>) <span class="kwd">as</span> [|<span class="id">ty2</span> []].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-4,6-9: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span> (<span class="kwd">fun</span> <span class="id">v1</span> <span class="id">v2</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.sem_binop">sem_binop</a></span> <span class="id">b</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">v2</span> <span class="id">ty2</span>)).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, 0.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">e0s</span>, <span class="id">l0</span> <span class="id">into</span> <span class="id">es</span>, <span class="id">l1</span> <span class="id">into</span> <span class="id">anns</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">s0s</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> <span class="id">denot_exp_</span> <span class="id">e0s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> <span class="id">denot_exp_</span> <span class="id">es</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e0s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [<span class="id">Heq1</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e0s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">anns</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [<span class="id">Heq2</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Heq1</span> <span class="kwd">in</span> <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">Heq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2">lift2</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">SDfuns.fby</a></span>) @2<span class="id">_</span> <span class="id">s0s</span>) <span class="id">ss</span>).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, 0.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">es</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,<span class="id">ck</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p</span> <span class="kwd">as</span> (<span class="id">i</span>,<span class="id">ty</span>). <span class="id">clear</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [&lt;-|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> <span class="id">denot_exp_</span> <span class="id">es</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#llift">llift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.swhenv">swhenv</a></span> <span class="id">e0</span>) @2<span class="id">_</span> <span class="id">ss</span>) (<span class="id">denot_var</span> <span class="id">i</span>)).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">ies</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,<span class="id">ck</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p</span> <span class="kwd">as</span> [<span class="id">i</span> <span class="id">ty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ses</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_">denot_expss_</a></span> <span class="id">denot_exp_</span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="kwd">in</span> <span class="id">ses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> @<span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.smergev">smergev</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>)) @2<span class="id">_</span> <span class="id">denot_var</span> <span class="id">i</span>) <span class="id">ses</span>).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">ies</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,<span class="id">ck</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ses</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_">denot_expss_</a></span> <span class="id">denot_exp_</span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="kwd">in</span> <span class="id">ses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">o</span> <span class="kwd">as</span> [<span class="id">d_es</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">ses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">d_es</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> [&lt;-|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">ses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> ((<span class="id">_</span> @2<span class="id">_</span> (<span class="id">denot_exp_</span> <span class="id">e0</span>)) ((<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> @2<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> <span class="id">denot_exp_</span> <span class="id">d_es</span>) <span class="id">ses</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e0</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.scase_defv">scase_defv</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span> ((<span class="id">_</span> @2<span class="id">_</span> (<span class="id">denot_exp_</span> <span class="id">e0</span>)) <span class="id">ses</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e0</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> @<span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.scasev">scasev</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>))).<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">es</span>, <span class="id">l0</span> <span class="id">into</span> <span class="id">er</span>, <span class="id">l1</span> <span class="id">into</span> <span class="id">anns</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.find_node">find_node</a></span> <span class="id">i</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_node.G">G</a></span>) <span class="kwd">as</span> [<span class="id">n</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span>))) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">anns</span>)) <span class="kwd">as</span> [&lt;-|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2,3: <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">f</span> := <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> <span class="id">_</span> <span class="id">i</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> <span class="id">_</span> <span class="id">_</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> <span class="id">_</span> <span class="id">_</span> : <span class="id">ctx</span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> <span class="id">denot_exp_</span> <span class="id">es</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">rs</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> <span class="id">denot_exp_</span> <span class="id">er</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">refine</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span> <span class="id">n</span>)) @<span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset">sreset</a></span> @3<span class="id">_</span> <span class="id">f</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.sbools_of">sbools_of</a></span> @<span class="id">_</span> <span class="id">rs</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.idents">idents</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_in">n_in</a></span> <span class="id">n</span>)) @<span class="id">_</span> <span class="id">ss</span>)).<br/>
Defined.
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_exp">denot_exp</a></span> (<span class="id">ins</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) (<span class="id">e</span> : <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span> <span class="id">e</span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_exps">denot_exps</a></span> (<span class="id">ins</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) (<span class="id">es</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span>) <span class="id">es</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_exps_eq">denot_exps_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">e</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> (<span class="id">e</span> :: <span class="id">es</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_app">nprod_app</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.forall_denot_exps">forall_denot_exps</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>) -&gt; <span class="kwd">Prop</span>) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)) <span class="id">es</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span>; <span class="id">intros</span>; <span class="id">simpl</span>; <span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">Hs</span>. <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_eq">denot_exps_eq</a></span> <span class="kwd">in</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#app_forall_nprod">app_forall_nprod</a></span> <span class="kwd">in</span> <span class="id">Hs</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">IHes</span>.<br/>
&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">Hs</span>. <span class="id">inv</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_eq">denot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_app">forall_nprod_app</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">IHes</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_expss">denot_expss</a></span> {<span class="id">A</span>} (<span class="id">ins</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>)) (<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt;<br/>
&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (@<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>)) <span class="id">n</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ess</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_">denot_expss_</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span>) <span class="id">ess</span> <span class="id">n</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_expss_eq">denot_expss_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">ins</span> (<span class="id">x</span> : <span class="id">A</span>) <span class="id">es</span> <span class="id">ess</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">ins</span> ((<span class="id">x</span>,<span class="id">es</span>) :: <span class="id">ess</span>) <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqn</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="id">_</span> <span class="id">eqn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">ins</span> <span class="id">ess</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_">denot_expss_</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list_rect">list_rect</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span>) <span class="id">es</span>); <span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>; <span class="id">cases</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_expss_nil">denot_expss_nil</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">ins</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">A</span> <span class="id">ins</span> [] <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> == 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.forall_denot_expss">forall_denot_expss</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">ins</span> (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>)) <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqn</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="id">n</span> <span class="id">eqn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">P</span> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">ess</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">ins</span> <span class="id">ess</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span> * <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_eq">denot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_bot">forall_nprod_bot</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.forall_forall_denot_expss_">forall_forall_denot_expss_</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">ins</span> (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>)) <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>) -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">ins</span> <span class="id">ess</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span> * <span class="id">Herr</span> <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_eq">denot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_bot">forall_nprod_bot</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.forall_forall_denot_expss">forall_forall_denot_expss</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">ins</span> (<span class="id">ess</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>)) <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> (<span class="id">P</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>) -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.annots">annots</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) = <span class="id">n</span>) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)) <span class="id">ess</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">ins</span> <span class="id">ess</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ess</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span> * <span class="id">Hlen</span> <span class="id">Hf</span>; <span class="id">inv</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_eq">denot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons">forall_nprod_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> *; <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.Forall_denot_expss">Forall_denot_expss</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">P</span> <span class="id">ins</span> (<span class="id">es</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">A</span> * <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp">exp</a></span>)) <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.annots">annots</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) = <span class="id">n</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">l</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod">forall_nprod</a></span> <span class="id">P</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)) <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">clear</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [|[<span class="id">i</span> <span class="id">es</span>] <span class="id">ess</span>]; <span class="id">intros</span> * <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;- <span class="id">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_eq">denot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;sans&nbsp;erreurs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_cons2">Forall_cons2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- (<span class="id">IHess</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>))); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#forall_nprod_cons_iff">forall_nprod_cons_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.forall_denot_exps">forall_denot_exps</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.annots_numstreams">annots_numstreams</a></span> <span class="kwd">in</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_exps_nil">denot_exps_nil</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> [] <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_exps_1">denot_exps_1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#list_of_nprod">list_of_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> [<span class="id">e</span>] <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#list_of_nprod">list_of_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_eq">denot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#list_of_nprod_app">list_of_nprod_app</a></span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident">mem_ident</a></span> <span class="id">x</span> <span class="id">ins</span> <span class="kwd">then</span> <span class="id">envI</span> <span class="id">x</span> <span class="kwd">else</span> <span class="id">env</span> <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_exp_eq">denot_exp_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">return</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Econst">Econst</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sconst">sconst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.Vscalar">Vscalar</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.sem_cconst">sem_cconst</a></span> <span class="id">c</span>)) (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">ins</span> <span class="id">envI</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Eenum">Eenum</a></span> <span class="id">c</span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sconst">sconst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.Venum">Venum</a></span> <span class="id">c</span>) (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#bss">bss</a></span> <span class="id">ins</span> <span class="id">envI</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Evar">Evar</a></span> <span class="id">x</span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Eunop">Eunop</a></span> <span class="id">op</span> <span class="id">e</span> <span class="id">an</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">se</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span> <span class="kwd">as</span> <span class="id">n</span> <span class="kwd">return</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> 1 <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1 =&gt; <span class="kwd">fun</span> <span class="id">se</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.typeof">typeof</a></span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">ty</span>] =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sunop">sunop</a></span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.sem_unop">sem_unop</a></span> <span class="id">op</span> <span class="id">v</span> <span class="id">ty</span>) <span class="id">se</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> <span class="id">se</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Ebinop">Ebinop</a></span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">an</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">se1</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">e1</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">se2</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">e2</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e1</span> <span class="kwd">as</span> <span class="id">n1</span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e2</span> <span class="kwd">as</span> <span class="id">n2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">return</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n1</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n2</span> -&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> 1 <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1,1 =&gt; <span class="kwd">fun</span> <span class="id">se1</span> <span class="id">se2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.typeof">typeof</a></span> <span class="id">e1</span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.typeof">typeof</a></span> <span class="id">e2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">ty1</span>],[<span class="id">ty2</span>] =&gt; <span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sbinop">sbinop</a></span> (<span class="kwd">fun</span> <span class="id">v1</span> <span class="id">v2</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.sem_binop">sem_binop</a></span> <span class="id">op</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">v2</span> <span class="id">ty2</span>) <span class="id">se1</span> <span class="id">se2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>,<span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>,<span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> <span class="id">se1</span> <span class="id">se2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Efby">Efby</a></span> <span class="id">e0s</span> <span class="id">es</span> <span class="id">an</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">s0s</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">e0s</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">n</span> := (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e0s</span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">m</span> := (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">m</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">n</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">an</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqm</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqan</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift2">lift2</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#fby">SDfuns.fby</a></span>) <span class="id">s0s</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ss</span> <span class="id">_</span> <span class="id">eqm</span>)) <span class="id">_</span> <span class="id">eqan</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Ewhen">Ewhen</a></span> <span class="id">es</span> (<span class="id">x</span>,<span class="id">_</span>) <span class="id">k</span> (<span class="id">tys</span>,<span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">es</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqn</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#llift">llift</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.swhenv">swhenv</a></span> <span class="id">k</span>) <span class="id">ss</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>)) <span class="id">_</span> <span class="id">eqn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Emerge">Emerge</a></span> (<span class="id">x</span>,<span class="id">_</span>) <span class="id">ies</span> (<span class="id">tys</span>,<span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">ins</span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ss</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.smergev">smergev</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>)) <span class="id">ss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Ecase">Ecase</a></span> <span class="id">ec</span> <span class="id">ies</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id">tys</span>,<span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">ins</span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ss</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">cs</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">ec</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">ec</span> <span class="kwd">as</span> <span class="id">n</span> <span class="kwd">return</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -&gt; <span class="id">_</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1 =&gt; <span class="kwd">fun</span> <span class="id">cs</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.scasev">scasev</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>) <span class="id">cs</span>) <span class="id">ss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Ecase">Ecase</a></span> <span class="id">ec</span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">eds</span>) (<span class="id">tys</span>,<span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">ins</span> <span class="id">ies</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ss</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">cs</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">ins</span> <span class="id">ec</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ds</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">eds</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">ec</span> <span class="kwd">as</span> <span class="id">n</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">eds</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tys</span>) <span class="kwd">return</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -&gt; <span class="id">_</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqm</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">cs</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#lift_nprod">lift_nprod</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.scase_defv">scase_defv</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ies</span>) <span class="id">cs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_cons">nprod_cons</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">ds</span> <span class="id">_</span> <span class="id">eqm</span>) <span class="id">ss</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>,<span class="id">_</span> =&gt; <span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Eapp">Eapp</a></span> <span class="id">f</span> <span class="id">es</span> <span class="id">er</span> <span class="id">an</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ss</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">rs</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">er</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_node.G">G</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span>))) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">an</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">eqan</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span>)) (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sreset">sreset</a></span> (<span class="id">envG</span> <span class="id">f</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.sbools_of">sbools_of</a></span> <span class="id">rs</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np">env_of_np</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.idents">idents</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_in">n_in</a></span>)) <span class="id">ss</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">eqan</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_const">nprod_const</a></span> <span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="comment">(*&nbsp;Le&nbsp;système&nbsp;se&nbsp;sent&nbsp;obligé&nbsp;de&nbsp;dérouler&nbsp;deux&nbsp;fois&nbsp;[denot_exp_]&nbsp;lors<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d'un&nbsp;appel&nbsp;à&nbsp;[unfold]&nbsp;et&nbsp;c'est&nbsp;très&nbsp;pénible.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cette&nbsp;tactique&nbsp;permet&nbsp;de&nbsp;le&nbsp;renrouler.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">fold_denot_exps_</span> <span class="id">ins</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> ?<span class="id">A</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">A</span> <span class="kwd">with</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_">denot_expss_</a></span> ?<span class="id">A</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">A</span> <span class="kwd">with</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;On&nbsp;doit&nbsp;souvent&nbsp;abstraire&nbsp;la&nbsp;définition&nbsp;des&nbsp;sous-flots<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pour&nbsp;pouvoir&nbsp;détruire&nbsp;les&nbsp;prédicats&nbsp;d'égalité&nbsp;sous&nbsp;les&nbsp;[eq_rect]&nbsp;etc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cette&nbsp;tactique&nbsp;le&nbsp;fait&nbsp;automatiquement.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">gen_denot_sub_exps</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> ?<span class="id">A</span> ?<span class="id">B</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">A</span> <span class="id">B</span>); <span class="id">intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> ?<span class="id">A</span> ?<span class="id">B</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_">denot_exps_</a></span> <span class="id">A</span> <span class="id">B</span>); <span class="id">intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [ <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_">denot_expss_</a></span> ?<span class="id">A</span> ?<span class="id">B</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_">denot_expss_</a></span> <span class="id">A</span> <span class="id">B</span>); <span class="id">intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>; <span class="id">auto</span>; <span class="id">intros</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Evar&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eunop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span> <span class="id">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span> <span class="id">e</span>) <span class="kwd">as</span> <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e</span>) <span class="kwd">as</span> <span class="id">ne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ne</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.typeof">typeof</a></span> <span class="id">e</span>) <span class="kwd">as</span> [|? []]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ebinop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span> <span class="id">e1</span>) (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span> <span class="id">e2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span> <span class="id">e1</span>) <span class="kwd">as</span> <span class="id">ss1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="id">ins</span> <span class="id">e2</span>) <span class="kwd">as</span> <span class="id">ss2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e1</span>) <span class="kwd">as</span> <span class="id">ne1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.numstreams">numstreams</a></span> <span class="id">e2</span>) <span class="kwd">as</span> <span class="id">ne2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ne1</span> <span class="kwd">as</span> [|[]], <span class="id">ne2</span> <span class="kwd">as</span> [|[]]; <span class="id">intros</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.typeof">typeof</a></span> <span class="id">e1</span>) <span class="kwd">as</span> [|?[]], (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.typeof">typeof</a></span> <span class="id">e2</span>) <span class="kwd">as</span> [|?[]]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Efby*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_denot_exps_</span> <span class="id">ins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_denot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ewhen&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p</span> <span class="kwd">as</span> (<span class="id">i</span>,?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_denot_exps_</span> <span class="id">ins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_denot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Emerge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p</span> <span class="kwd">as</span> (<span class="id">i</span>,<span class="id">ty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_denot_exps_</span> <span class="id">ins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_denot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Ecase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l0</span> <span class="kwd">as</span> (<span class="id">tys</span>,?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;defaut&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_denot_exps_</span> <span class="id">ins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_denot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;total&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_denot_exps_</span> <span class="id">ins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_denot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Eapp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rename</span> <span class="id">l</span> <span class="id">into</span> <span class="id">es</span>, <span class="id">l0</span> <span class="id">into</span> <span class="id">er</span>, <span class="id">l1</span> <span class="id">into</span> <span class="id">anns</span>, <span class="id">i</span> <span class="id">into</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_">denot_exp_</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold_denot_exps_</span> <span class="id">ins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_denot_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.np_of_env">np_of_env</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span> <span class="id">n</span>))); <span class="id">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">destruct</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 3 <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#curry_Curry">curry_Curry</a></span>, 3 <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Curry_simpl">Curry_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_comp_simpl">fcont_comp_simpl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Opaque</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span>.<br/>
<br/>
<span class="id">Global</span> <span class="id">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">ins</span> : (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span> <span class="id">ins</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oeq">Oeq</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) ==&gt; @<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) ==&gt; @<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> ==&gt; @<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oeq">Oeq</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">denot_var_morph1</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">cases</span>.<br/>
Qed.</div>
<span class="id">Global</span> <span class="id">Add</span> <span class="id">Parametric</span> <span class="id">Morphism</span> <span class="id">ins</span> : (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span> <span class="id">ins</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">signature</span> @<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) ==&gt; @<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oeq">Oeq</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>) ==&gt; @<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> ==&gt; @<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Oeq">Oeq</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#DS">DS</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SDfuns.html#sampl">sampl</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op.value">value</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">denot_var_morph2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">cases</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_var_inf">denot_var_inf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#all_infinite">all_infinite</a></span> <span class="id">envI</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.DS_ext.html#all_infinite">all_infinite</a></span> <span class="id">env</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_streams_type.html#infinite">infinite</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">cases</span>; <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_var_nins">denot_var_nins</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ins</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span> <span class="id">ins</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">x</span> = <span class="id">env</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_var">denot_var</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#mem_ident">mem_ident</a></span> <span class="id">x</span> <span class="id">ins</span>) <span class="id">eqn</span>:<span class="id">Hmem</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Common.Common.html#mem_ident_spec">mem_ident_spec</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
Qed.</div>
<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">env_of_np_ext</span> <span class="id">xs</span> <span class="id">ss</span> <span class="id">env</span></span> binds xs to ss in env </div>
<span class="kwd">Definition</span> <span class="id"><a name="SD.env_of_np_ext">env_of_np_ext</a></span> (<span class="id">l</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) {<span class="id">n</span>} : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.mem_nth">mem_nth</a></span> <span class="id">l</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">n</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ">PROJ</a></span> <span class="id">_</span> <span class="id">x</span> @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.env_of_np_ext_eq">env_of_np_ext_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">n</span> (<span class="id">np</span> : <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod">nprod</a></span> <span class="id">n</span>) <span class="id">env</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np_ext">env_of_np_ext</a></span> <span class="id">l</span> <span class="id">np</span> <span class="id">env</span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.mem_nth">mem_nth</a></span> <span class="id">l</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#get_nth">get_nth</a></span> <span class="id">n</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.errTy">errTy</a></span> <span class="id">np</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id">env</span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np_ext">env_of_np_ext</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_block">denot_block</a></span> (<span class="id">ins</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) (<span class="id">b</span> : <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.block">block</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Beq">Beq</a></span> (<span class="id">xs</span>,<span class="id">es</span>) =&gt; ((<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np_ext">env_of_np_ext</a></span> <span class="id">xs</span> @2<span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#uncurry">uncurry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#uncurry">uncurry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">es</span>)) @<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> <span class="id">_</span> <span class="id">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt;  <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> <span class="id">_</span> <span class="id">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_block_eq">denot_block_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">b</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">env_acc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block">denot_block</a></span> <span class="id">ins</span> <span class="id">b</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">env_acc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="kwd">match</span> <span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Beq">Beq</a></span> (<span class="id">xs</span>,<span class="id">es</span>) =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np_ext">env_of_np_ext</a></span> <span class="id">xs</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="id">env_acc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">env_acc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block">denot_block</a></span>; <span class="id">intros</span>; <span class="id">cases</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_blocks">denot_blocks</a></span> (<span class="id">ins</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) (<span class="id">blks</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.block">block</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">blks</span>; <span class="kwd">fix</span> <span class="id">denot_blocks</span> 1.<br/>
&nbsp;&nbsp;<span class="id">intros</span> [| <span class="id">blk</span> <span class="id">blks</span>].<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, 0.<br/>
&nbsp;&nbsp;- <span class="id">refine</span> ((<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#ID">ID</a></span> <span class="id">_</span> @2<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#uncurry">uncurry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#uncurry">uncurry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block">denot_block</a></span> <span class="id">ins</span> <span class="id">blk</span>))) (<span class="id">denot_blocks</span> <span class="id">blks</span>)).<br/>
Defined.
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_blocks_eq">denot_blocks_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks">denot_blocks</a></span> <span class="id">ins</span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_right">fold_right</a></span> (<span class="kwd">fun</span> <span class="id">blk</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block">denot_block</a></span> <span class="id">ins</span> <span class="id">blk</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) 0 <span class="id">blks</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">blks</span>; <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks">denot_blocks</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id">setoid_rewrite</span> &lt;- <span class="id">IHblks</span>.<br/>
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="SD.denot_blocks_eq_cons">denot_blocks_eq_cons</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">blk</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks">denot_blocks</a></span> <span class="id">ins</span> (<span class="id">blk</span> :: <span class="id">blks</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block">denot_block</a></span> <span class="id">ins</span> <span class="id">blk</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks">denot_blocks</a></span> <span class="id">ins</span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_top_block">denot_top_block</a></span> (<span class="id">ins</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>) (<span class="id">b</span> : <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.block">block</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">_</span> <span class="id">blks</span>) =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks">denot_blocks</a></span> <span class="id">ins</span> <span class="id">blks</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; 0<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_top_block_eq">denot_top_block_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">blk</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_top_block">denot_top_block</a></span> <span class="id">ins</span> <span class="id">blk</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="kwd">match</span> <span class="id">blk</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">_</span> <span class="id">blks</span>) =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks">denot_blocks</a></span> <span class="id">ins</span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_top_block">denot_top_block</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_node">denot_node</a></span> (<span class="id">n</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_node.PSyn">PSyn</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_node.Prefs">Prefs</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Systems.html#DS_prod">DS_prod</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.SI">SI</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span>.<br/>
&nbsp;&nbsp;<span class="id">refine</span> ((<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_top_block">denot_top_block</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_in">n_in</a></span>)) <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span>) @2<span class="id">_</span> <span class="id">_</span>) <span class="id">_</span>).<br/>
&nbsp;&nbsp;- <span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> <span class="id">_</span> <span class="id">_</span>). <br/>
&nbsp;&nbsp;- <span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> <span class="id">_</span> <span class="id">_</span>). <br/>
Defined.
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_node_eq">denot_node_eq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ins</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_in">n_in</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_node">denot_node</a></span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span> = <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_top_block">denot_top_block</a></span> <span class="id">ins</span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span>) <span class="id">envG</span> <span class="id">envI</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_node">Denot_node</a></span>.<br/>
<br/>
<div class="doc">After rewriting <span class="bracket"><span class="id">denot_exp_eq</span></span> we often need to destruct <span class="bracket"><span class="id">numstreams</span> <span class="id">_</span></span>
    or <span class="bracket"><span class="id">Nat.eq_dec</span> <span class="id">_</span> <span class="id">_</span></span>. It does not work directly in general because
    the type of the denotation of subterms depends on these values.
    One way solve the problem is to revert the hypotheses and
    generalize the results of <span class="bracket"><span class="id">denot_exp</span>, <span class="id">denot_exps</span>, <span class="id">denot_expss</span></span> on subterms
    with the following tactic.
 </div>
<span class="kwd">Ltac</span> <span class="id">gen_sub_exps</span> :=<br/>
&nbsp;&nbsp;<span class="id">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span> [ ?<span class="id">f1</span> (?<span class="id">f2</span> (?<span class="id">f3</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> ?<span class="id">e1</span> ?<span class="id">e2</span> ?<span class="id">e3</span> ?<span class="id">e4</span>) ?<span class="id">e5</span>) ?<span class="id">e6</span>) ?<span class="id">e7</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">f1</span> (<span class="id">f2</span> (<span class="id">f3</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">e4</span>) <span class="id">e5</span>) <span class="id">e6</span>) <span class="id">e7</span>)<br/>
&nbsp;&nbsp;| |- <span class="id">context</span> [ ?<span class="id">f1</span> (?<span class="id">f2</span> (?<span class="id">f3</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> ?<span class="id">e1</span> ?<span class="id">e2</span> ?<span class="id">e3</span>) ?<span class="id">e4</span>) ?<span class="id">e5</span>) ?<span class="id">e6</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">f1</span> (<span class="id">f2</span> (<span class="id">f3</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span>) <span class="id">e4</span>) <span class="id">e5</span>) <span class="id">e6</span>)<br/>
&nbsp;&nbsp;| |- <span class="id">context</span> [ ?<span class="id">f1</span> (?<span class="id">f2</span> (?<span class="id">f3</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> ?<span class="id">e1</span> ?<span class="id">e2</span> ?<span class="id">e3</span>) ?<span class="id">e4</span>) ?<span class="id">e5</span>) ?<span class="id">e6</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">f1</span> (<span class="id">f2</span> (<span class="id">f3</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span>) <span class="id">e4</span>) <span class="id">e5</span>) <span class="id">e6</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SD.Global">Global</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_global_">denot_global_</a></span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>) : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> -<span class="id">C</span>-&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#Dprodi_DISTR">Dprodi_DISTR</a></span>; <span class="id">intro</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exact</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#curry">curry</a></span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> @<span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_node">denot_node</a></span> <span class="id">G</span> <span class="id">n</span> @2<span class="id">_</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FST">FST</a></span> <span class="id">_</span> <span class="id">_</span>) (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#SND">SND</a></span> <span class="id">_</span> <span class="id">_</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Cpo_def_ext.html#CTE">CTE</a></span>, 0.<br/>
&nbsp;&nbsp;Defined.
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_global_eq">denot_global_eq</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>) <span class="id">envG</span> <span class="id">f</span> <span class="id">envI</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_global_">denot_global_</a></span> <span class="id">G</span> <span class="id">envG</span> <span class="id">f</span> <span class="id">envI</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_node">denot_node</a></span> <span class="id">G</span> <span class="id">n</span> <span class="id">envG</span> <span class="id">envI</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_global_">denot_global_</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="SD.denot_global">denot_global</a></span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>) : <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#Dprodi">Dprodi</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.FI">FI</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_global_">denot_global_</a></span> <span class="id">G</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Global">Global</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_in">denot_in</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">envI</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_in">n_in</a></span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_global">denot_global</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">envI</span> <span class="id">x</span> == 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hfind</span> * <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">Hnin</span> := <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.NoDup_get_defined_node">NoDup_get_defined_node</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_global">denot_global</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined_node">get_defined_node</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP_eq">FIXP_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_global_eq">denot_global_eq</a></span>, <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP_eq">FIXP_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_node_eq">denot_node_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_top_block_eq">denot_top_block_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> <span class="id">envG</span> <span class="id">eqn</span>:<span class="id">HH</span>; <span class="id">clear</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> <span class="id">env</span> <span class="id">eqn</span>:<span class="id">HH</span>; <span class="id">clear</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l0</span> <span class="kwd">as</span> [| <span class="id">blk</span> <span class="id">blks</span>]; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hnin</span>; <span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span> <span class="kwd">in</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks_eq_cons">denot_blocks_eq_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block_eq">denot_block_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np_ext_eq">env_of_np_ext_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hmem</span>; <span class="id">eauto</span> 3 <span class="kwd">using</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDup_app_r">NoDup_app_r</a></span>; <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDup_app_In">NoDup_app_In</a></span>; <span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_In">mem_nth_In</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.not_out_bot">not_out_bot</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.find_node">find_node</a></span> <span class="id">f</span> <span class="id">G</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">envI</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_out">n_out</a></span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_locals">get_locals</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span> <span class="id">n</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_global">denot_global</a></span> <span class="id">G</span> <span class="id">f</span> <span class="id">envI</span> <span class="id">x</span> == 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hfind</span> * <span class="id">Nout</span> <span class="id">Nloc</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hnin</span>: ~ <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined_node">get_defined_node</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;{ <span class="id">intros</span> <span class="id">Hin</span>%<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined_node_incl">get_defined_node_incl</a></span>%<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>; <span class="id">tauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Nout</span> <span class="id">Nloc</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_defined_node">get_defined_node</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_global">denot_global</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.get_locals">get_locals</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP_eq">FIXP_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_global_eq">denot_global_eq</a></span>, <span class="id">Hfind</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP_eq">FIXP_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#PROJ_simpl">PROJ_simpl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_node_eq">denot_node_eq</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_top_block_eq">denot_top_block_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> <span class="id">envG</span> <span class="id">eqn</span>:<span class="id">HH</span>; <span class="id">clear</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#FIXP">FIXP</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> <span class="id">env</span> <span class="id">eqn</span>:<span class="id">HH</span>; <span class="id">clear</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l0</span> <span class="kwd">as</span> [| <span class="id">blk</span> <span class="id">blks</span>']; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hnin</span>; <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks_eq_cons">denot_blocks_eq_cons</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block_eq">denot_block_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">HH</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.env_of_np_ext_eq">env_of_np_ext_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hmem</span>; <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.CommonList2.html#mem_nth_In">mem_nth_In</a></span> <span class="kwd">in</span> <span class="id">Hmem</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h3> Here we show that a node can be removed from the environment
    if it is not evaluated during the computations. </h3>
<span class="kwd">Section</span> <span class="id"><a name="SD.Denot_cons">Denot_cons</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_exps_hyp">denot_exps_hyp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">G</span> <span class="id">G</span>' : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.global">global</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">e</span> =&gt; <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">G</span> <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> ==<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> <span class="id">G</span>' <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">G</span> <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> ==<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> <span class="id">G</span>' <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span>; <span class="id">intros</span> * <span class="id">Heq</span>. <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_eq">denot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_app_Oeq_compat">nprod_app_Oeq_compat</a></span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_exp_cons">denot_exp_cons</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nds</span> <span class="id">tys</span> <span class="id">exts</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ins</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Lustre.Denot.SD.html#Lord.Is_node_in_exp">Is_node_in_exp</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_name">n_name</a></span>) <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp">denot_exp</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span> :: <span class="id">nds</span>)) <span class="id">ins</span> <span class="id">e</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.exp_ind2">exp_ind2</a></span>; <span class="id">intro</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">setoid_rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_eq">denot_exp_eq</a></span>; <span class="id">auto</span> 1.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">IHe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">H</span>; <span class="id">apply</span> <span class="id">Hnin</span>; <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">IHe1</span> <span class="id">IHe2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases</span>; <span class="id">simpl</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe1</span>, <span class="id">IHe2</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">intro</span> <span class="id">H</span>; <span class="id">apply</span> <span class="id">Hnin</span>; <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;fby&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">e0s</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">e0s</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">He0s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_hyp">denot_exps_hyp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>; <span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">left</span>; <span class="id">solve_Exists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">Hes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_hyp">denot_exps_hyp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H0</span>; <span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">right</span>; <span class="id">solve_Exists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">He0s</span> <span class="id">Hes</span>; <span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">Hes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_hyp">denot_exps_hyp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>; <span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">solve_Exists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hes</span>; <span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">tyss</span> <span class="id">c</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">es</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tyss</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">es</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tyss</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">Hess</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [| [<span class="id">i</span> <span class="id">es</span>] <span class="id">ies</span>]. <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">Hes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_hyp">denot_exps_hyp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H2</span>; <span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">solve_Exists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_eq">denot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hes</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">_</span> <span class="id">_</span>); <span class="id">try</span> <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHies</span>; <span class="id">cases</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hnin</span>; <span class="id">inv</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">now</span> <span class="id">right</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hess</span>; <span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">tyss</span> <span class="id">c</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">es</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tyss</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss">denot_expss</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">es</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tyss</span>) <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">Hess</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">induction</span> <span class="id">es</span> <span class="kwd">as</span> [| [<span class="id">i</span> <span class="id">es</span>] <span class="id">ies</span>]. <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">Hes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_hyp">denot_exps_hyp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H3</span>; <span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">right</span>; <span class="id">left</span>; <span class="id">solve_Exists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_expss_eq">denot_expss_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hes</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">_</span> <span class="id">_</span>); <span class="id">try</span> <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHies</span>; <span class="id">cases</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hnin</span>; <span class="id">inv</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [|[]]; <span class="id">constructor</span>; <span class="id">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hess</span>; <span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect_r">eq_rect_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">IHe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">destruct</span> <span class="id">d</span> <span class="kwd">as</span> [<span class="id">esd</span>|]; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;défaut&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">esd</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">esd</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">Hesd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_hyp">denot_exps_hyp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H0</span>; <span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">right</span>; <span class="id">right</span>; <span class="id">esplit</span>; <span class="id">split</span>; <span class="id">eauto</span>; <span class="id">solve_Exists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hesd</span>, <span class="id">IHe</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;total&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;eapp,&nbsp;seul&nbsp;cas&nbsp;intéressant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Velus.Common.Common.html#ident_eq_dec">ident_eq_dec</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_name">n_name</a></span>) <span class="id">f</span>) <span class="kwd">as</span> [|<span class="id">Hf</span>]; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;si&nbsp;oui,&nbsp;contradiction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hnin</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Lord.INEapp2">INEapp2</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.find_node_other">find_node_other</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">Hes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_hyp">denot_exps_hyp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>; <span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">left</span>; <span class="id">solve_Exists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">er</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span>::<span class="id">nds</span>)) <span class="id">ins</span> <span class="id">er</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>) <span class="kwd">as</span> <span class="id">Her</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_hyp">denot_exps_hyp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H0</span>; <span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">right</span>; <span class="id">solve_Exists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hes</span> <span class="id">Her</span>; <span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_rect">eq_rect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gen_sub_exps</span>; <span class="id">cases</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">intros</span> ???? -&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="SD.denot_exps_cons">denot_exps_cons</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nds</span> <span class="id">tys</span> <span class="id">exts</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ins</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Lord.Is_node_in_exp">Is_node_in_exp</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_name">n_name</a></span>)) <span class="id">es</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps">denot_exps</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span> :: <span class="id">nds</span>)) <span class="id">ins</span> <span class="id">es</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span>; <span class="id">intros</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_nil">denot_exps_nil</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_eq">denot_exps_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo_ext.Nprod.html#nprod_app_Oeq_compat">nprod_app_Oeq_compat</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exp_cons">denot_exp_cons</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_block_cons">denot_block_cons</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nds</span> <span class="id">tys</span> <span class="id">exts</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ins</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">env_acc</span> <span class="id">blk</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Lustre.Denot.SD.html#Lord.Is_node_in_block">Is_node_in_block</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_name">n_name</a></span> <span class="id">nd</span>) <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block">denot_block</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">blk</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">env_acc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block">denot_block</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span> :: <span class="id">nds</span>)) <span class="id">ins</span> <span class="id">blk</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">env_acc</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block_eq">denot_block_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cases</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_exps_cons">denot_exps_cons</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="SD.denot_blocks_cons">denot_blocks_cons</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">nd</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nds</span> <span class="id">tys</span> <span class="id">exts</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ins</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Exists">List.Exists</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Lord.Is_node_in_block">Is_node_in_block</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_name">n_name</a></span> <span class="id">nd</span>)) <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks">denot_blocks</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">ins</span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks">denot_blocks</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span> :: <span class="id">nds</span>)) <span class="id">ins</span> <span class="id">blks</span> <span class="id">envG</span> <span class="id">envI</span> <span class="id">env</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2 <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks_eq">denot_blocks_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">blks</span>; <span class="id">simpl</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHblks</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block_cons">denot_block_cons</a></span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">contradict</span> <span class="id">Hnin</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SD.denot_node_cons">denot_node_cons</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">PSyn</span> <span class="id">Prefs</span>} (<span class="id">n</span> : @<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.node">node</a></span> <span class="id">PSyn</span> <span class="id">Prefs</span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nd</span> <span class="id">nds</span> <span class="id">tys</span> <span class="id">exts</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Velus.Lustre.Denot.SD.html#Lord.Is_node_in_block">Is_node_in_block</a></span> <span class="id">nd</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_name">n_name</a></span>) <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_node">denot_node</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> <span class="id">nds</span>) <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_node">denot_node</a></span> (<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.Global">Global</a></span> <span class="id">tys</span> <span class="id">exts</span> (<span class="id">nd</span> :: <span class="id">nds</span>)) <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_node">denot_node</a></span>, <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_block">denot_block</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">n</span>.(<span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn.n_block">n_block</a></span>).<br/>
&nbsp;&nbsp;1-5: <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [<span class="id">vars</span> <span class="id">blks</span>]; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_intro">fcont_eq_intro</a></span>; <span class="id">intro</span> <span class="id">envG</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_intro">fcont_eq_intro</a></span>; <span class="id">intro</span> <span class="id">envI</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.Cpo.Cpo_def.html#fcont_eq_intro">fcont_eq_intro</a></span>; <span class="id">intro</span> <span class="id">env</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">cpodb</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.denot_blocks_cons">denot_blocks_cons</a></span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">constructor</span>; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD.Denot_cons">Denot_cons</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD">SD</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="SdFun">SdFun</a></span><br/>
&nbsp;&nbsp;(<span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Cks</span>   : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span>        <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Senv</span>  : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span>     <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Syn</span>   : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span>       <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">Lord</span>  : <span class="id"><a href="Velus.Lustre.LOrdered.html#LORDERED">LORDERED</a></span>      <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn">Syn</a></span>)<br/>
&lt;: <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD">SD</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Lord">Lord</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SD">SD</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Op">Op</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#Lord">Lord</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Lustre.Denot.SD.html#SdFun">SdFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
