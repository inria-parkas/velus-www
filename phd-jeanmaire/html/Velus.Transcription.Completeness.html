
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Completeness</title>
<meta name="description" content="Documentation of Coq module Completeness" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Completeness</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html">common.Errors</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Clocks.html">Clocks</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.StaticEnv.html">Lustre.StaticEnv</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LSyntax.html">Lustre.LSyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Lustre.LTyping.html">Lustre.LTyping</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.CoreExpr.CESyntax.html">CoreExpr.CESyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.NLustre.NLSyntax.html">NLustre.NLSyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Transcription.Tr.html">Transcription.Tr</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Equality.html">Program.Equality</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="COMPLETENESS">COMPLETENESS</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span> : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Cks</span> : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Senv</span> : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">LSyn</span> : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">LT</span> : <span class="id"><a href="Velus.Lustre.LTyping.html#LTYPING">LTYPING</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn">LSyn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">CE</span> : <span class="id"><a href="Velus.CoreExpr.CESyntax.html#CESYNTAX">CESYNTAX</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NL</span> : <span class="id"><a href="Velus.NLustre.NLSyntax.html#NLSYNTAX">NLSYNTAX</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#CE">CE</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">TR</span> : <span class="id"><a href="Velus.Transcription.Tr.html#TR">TR</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn">LSyn</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#CE">CE</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#NL">NL</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COMPLETENESS.to_constant_complete">to_constant_complete</a></span> : <span class="kwd">forall</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized_constant">normalized_constant</a></span> <span class="id">c</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e</span>', <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_constant">to_constant</a></span> <span class="id">c</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">e</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof1')">Proof with</span></div>
<div class="proofscript" id="proof1">
 <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">c</span> <span class="id">Hnorm</span>. <span class="id">induction</span> <span class="id">Hnorm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eexists</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eexists</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">IHHnorm</span> <span class="kwd">as</span> [<span class="id">e</span>' <span class="id">He</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COMPLETENESS.to_lexp_complete">to_lexp_complete</a></span> : <span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized_lexp">normalized_lexp</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e</span>', <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_lexp">to_lexp</a></span> <span class="id">e</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">e</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof2')">Proof with</span></div>
<div class="proofscript" id="proof2">
 <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e</span> <span class="id">Hnorm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.exp_ind2">exp_ind2</a></span>; <span class="id">inv</span> <span class="id">Hnorm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;const&nbsp;*)</span> <span class="id">eexists</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;enum&nbsp;*)</span> <span class="id">eexists</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;var&nbsp;*)</span> <span class="id">eexists</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;last&nbsp;*)</span> <span class="id">eexists</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHe</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">e</span>' <span class="id">He</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">He</span>'; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHe1</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">e1</span>' <span class="id">He1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHe2</span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">e2</span>' <span class="id">He2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">He1</span>. <span class="id">rewrite</span> <span class="id">He2</span>. <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">e</span>' <span class="id">He</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">He</span>'. <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="COMPLETENESS.mmap_to_lexp_complete">mmap_to_lexp_complete</a></span> : <span class="kwd">forall</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized_lexp">normalized_lexp</a></span> <span class="id">es</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">es</span>', <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#mmap">Errors.mmap</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_lexp">to_lexp</a></span> <span class="id">es</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">es</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof3')">Proof with</span></div>
<div class="proofscript" id="proof3">
 <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">es</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eexists</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_lexp_complete">to_lexp_complete</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">e</span>' <span class="id">He</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHHf</span> <span class="kwd">as</span> [<span class="id">es</span>' <span class="id">Hes</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">He</span>'; <span class="id">rewrite</span> <span class="id">Hes</span>'. <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COMPLETENESS.to_cexp_complete">to_cexp_complete</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">vars</span> : <span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LT.wt_exp">wt_exp</a></span> <span class="id">G</span> <span class="id">vars</span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized_cexp">normalized_cexp</a></span> <span class="id">e</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e</span>', <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_cexp">to_cexp</a></span> <span class="id">e</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">e</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof4')">Proof with</span></div>
<div class="proofscript" id="proof4">
 <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e</span> <span class="id">Hwt</span> <span class="id">Hnorm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.exp_ind2">exp_ind2</a></span>; <span class="id">inv</span> <span class="id">Hnorm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> <span class="id">solve</span> [<span class="id">eapply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_lexp_complete">to_lexp_complete</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">e</span>' <span class="id">He</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="Velus.Transcription.Completeness.html#CE.Eexp">Eexp</a></span> <span class="id">e</span>'); <span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_cexp">to_cexp</a></span>; <span class="id">rewrite</span> <span class="id">He</span>'; <span class="id">simpl</span>; <span class="id">eauto</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> (<span class="id">solve</span> [<span class="id">take</span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized_lexp">normalized_lexp</a></span> <span class="id">_</span>) <span class="id">and</span> <span class="id">inv</span> <span class="id">it</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;when&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_lexp_complete">to_lexp_complete</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">e</span>' <span class="id">He</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="Velus.Transcription.Completeness.html#CE.Eexp">Eexp</a></span> <span class="id">e</span>'). <span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_cexp">to_cexp</a></span>. <span class="id">rewrite</span> <span class="id">He</span>'; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;merge&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">clear</span> - <span class="id">H</span> <span class="id">H1</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H9</span>; <span class="id">simpl</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span>, <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hnormed</span>); <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">subst</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHes</span> <span class="kwd">as</span> (?&amp;<span class="id">EQ</span>); <span class="id">auto</span>. <span class="id">monadInv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">EQ0</span>; <span class="id">clear</span> <span class="id">EQ0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_singl">Forall_singl</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_singl">Forall_singl</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">Hnormed</span> <span class="kwd">as</span> (?&amp;<span class="id">Htoc</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Htoc</span>; <span class="id">simpl</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_lexp_complete">to_lexp_complete</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> (?&amp;<span class="id">Htol</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">erewrite</span> <span class="id">Htol</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="kwd">exists</span> <span class="id">es</span>', <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#mmap">Errors.mmap</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">pat</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">pat</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">i</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">control</span> <span class="id">expression</span> <span class="id">not</span> <span class="id">normalized</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">i</span>, <span class="id">e0</span> :: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) =&gt; <span class="id">do</span> <span class="id">ce</span> &lt;- <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_cexp">to_cexp</a></span> <span class="id">e0</span>; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id">i</span>, <span class="id">ce</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">i</span>, <span class="id">e0</span> :: <span class="id">_</span> :: <span class="id">_</span>) =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">control</span> <span class="id">expression</span> <span class="id">not</span> <span class="id">normalized</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) <span class="id">es</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">es</span>') <span class="kwd">as</span> (?&amp;<span class="id">Htoces</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">es</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LT.wt_exp">wt_exp</a></span> <span class="id">G</span> <span class="id">vars</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">es</span>)) <span class="id">es</span>) <span class="kwd">as</span> <span class="id">Hwt</span>' <span class="kwd">by</span> (<span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> - <span class="id">H</span> <span class="id">Hwt</span>' <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">es</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Hwt</span>'; <span class="id">inv</span> <span class="id">H6</span>; <span class="id">simpl</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span>, <span class="id">H5</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">Hnormed</span>); <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">subst</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHes</span> <span class="kwd">as</span> (?&amp;<span class="id">EQ</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">EQ</span>; <span class="id">clear</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_singl">Forall_singl</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_singl">Forall_singl</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Hnormed</span> <span class="kwd">as</span> (?&amp;<span class="id">Htoc</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Htoc</span>; <span class="id">simpl</span>; <span class="id">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Htoces</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H7</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>) <span class="kwd">as</span> (?&amp;<span class="id">Heq</span>&amp;?); <span class="id">inv</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_singl">Forall_singl</a></span> <span class="kwd">in</span> <span class="id">H16</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_singl">Forall_singl</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;<span class="id">Htod</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Htod</span>, <span class="id">H9</span>. <span class="id">destruct</span> <span class="id">tn</span>; <span class="id">simpl</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COMPLETENESS.to_equation_complete">to_equation_complete</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">vars</span> : <span class="kwd">forall</span> <span class="id">outs</span> <span class="id">lasts</span> <span class="id">env</span> <span class="id">envo</span> <span class="id">xr</span> <span class="id">xs</span> <span class="id">es</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LT.wt_equation">wt_equation</a></span> <span class="id">G</span> <span class="id">vars</span> (<span class="id">xs</span>, <span class="id">es</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized_equation">normalized_equation</a></span> <span class="id">outs</span> <span class="id">lasts</span> (<span class="id">xs</span>, <span class="id">es</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">exists</span> <span class="id">cl</span>, <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span> <span class="id">env</span> <span class="id">x</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">cl</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>, <span class="id">envo</span> <span class="id">x</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> <span class="id">e</span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">outs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">eq</span>', <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_equation">to_equation</a></span> <span class="id">env</span> <span class="id">envo</span> <span class="id">xr</span> (<span class="id">xs</span>, <span class="id">es</span>) = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">eq</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof5')">Proof with</span></div>
<div class="proofscript" id="proof5">
 <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hwt</span> <span class="id">Hnorm</span> <span class="id">Hfind</span> <span class="id">Henvo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hnorm</span>. <span class="id">inv</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.mmap_to_lexp_complete">mmap_to_lexp_complete</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">es</span>' <span class="id">Hes</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.vars_of_Some">vars_of_Some</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;<span class="id">Vars</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">Hes</span>', <span class="id">Vars</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_constant_complete">to_constant_complete</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">e0</span>' <span class="id">He0</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_lexp_complete">to_lexp_complete</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">e</span>' <span class="id">He</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfind</span>. <span class="id">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [? <span class="id">Hck</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">He0</span>', <span class="id">He</span>', <span class="id">Hck</span>; <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Henvo</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">envo</span> <span class="id">x</span>); <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">simpl_Forall</span>. <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.mmap_to_lexp_complete">mmap_to_lexp_complete</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;<span class="id">Hes</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplit</span>. <span class="id">rewrite</span> <span class="id">Hes</span>; <span class="id">simpl</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_cexp_complete">to_cexp_complete</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;<span class="id">He</span>'); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfind</span>. <span class="id">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [? <span class="id">Hcl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>; <span class="id">try</span> (<span class="id">rewrite</span> <span class="id">Hcl</span>; <span class="id">rewrite</span> <span class="id">He</span>'; <span class="id">simpl</span>; <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="id">inv</span> <span class="id">He</span>'.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="COMPLETENESS.block_to_equation_complete">block_to_equation_complete</a></span> {<span class="id">PSyn</span> <span class="id">prefs</span>} (<span class="id">G</span>: @<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.global">global</a></span> <span class="id">PSyn</span> <span class="id">prefs</span>) <span class="id">vars</span> : <span class="kwd">forall</span> <span class="id">outs</span> <span class="id">lasts</span> <span class="id">env</span> <span class="id">envo</span> <span class="id">blk</span> <span class="id">xs</span> <span class="id">ls</span> <span class="id">xr</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LT.wt_block">wt_block</a></span> <span class="id">G</span> <span class="id">vars</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized_block">normalized_block</a></span> <span class="id">outs</span> <span class="id">lasts</span> <span class="id">blk</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.VarsDefinedComp">VarsDefinedComp</a></span> <span class="id">blk</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">exists</span> <span class="id">cl</span>, <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span> <span class="id">env</span> <span class="id">x</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">cl</span>) <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.LastsDefined">LastsDefined</a></span> <span class="id">blk</span> <span class="id">ls</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">exists</span> <span class="id">cl</span>, <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span> <span class="id">env</span> <span class="id">x</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">cl</span>) <span class="id">ls</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>, <span class="id">envo</span> <span class="id">x</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> <span class="id">e</span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">outs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">eq</span>', <span class="id"><a href="Velus.Transcription.Completeness.html#TR.block_to_equation">block_to_equation</a></span> <span class="id">env</span> <span class="id">envo</span> <span class="id">xr</span> <span class="id">blk</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">eq</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof6')">Proof with</span></div>
<div class="proofscript" id="proof6">
 <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hwt</span> <span class="id">Hnorm</span> <span class="id">Hvars</span> <span class="id">Hfind</span> <span class="id">Hlasts</span> <span class="id">Hfindl</span> <span class="id">Henvo</span>. <span class="id">revert</span> <span class="id">xr</span> <span class="id">xs</span> <span class="id">Hvars</span> <span class="id">Hfind</span> <span class="id">ls</span> <span class="id">Hlasts</span> <span class="id">Hfindl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Hnorm</span>; <span class="id">intros</span> * <span class="id">Hvars</span> <span class="id">Hfind</span> * <span class="id">Hlasts</span> <span class="id">Hfindl</span>; <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">Hvars</span>; <span class="id">inv</span> <span class="id">Hlasts</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">eq</span>. <span class="id">eapply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_equation_complete">to_equation_complete</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_constant_complete">to_constant_complete</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;<span class="id">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>, <span class="id">C</span>; <span class="id">simpl</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">ann0</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl_Forall</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IHHnorm</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="COMPLETENESS.mmap_block_to_equation_complete">mmap_block_to_equation_complete</a></span> {<span class="id">prefs</span>} : <span class="kwd">forall</span> (<span class="id">G</span>: @<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.global">global</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized">normalized</a></span> <span class="id">prefs</span>) (<span class="id">n</span>: @<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.node">node</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized">normalized</a></span> <span class="id">prefs</span>) <span class="id">env</span> <span class="id">envo</span> <span class="id">locs</span> <span class="id">blks</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.n_block">n_block</a></span> <span class="id">n</span> = <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.Blocal">Blocal</a></span> (<span class="kwd">Scope</span> <span class="id">locs</span> <span class="id">blks</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LT.wt_node">wt_node</a></span> <span class="id">G</span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">exists</span> <span class="id">cl</span>, <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span> <span class="id">env</span> <span class="id">x</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">cl</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.n_out">n_out</a></span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>, <span class="id">envo</span> <span class="id">x</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> <span class="id">e</span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.n_out">n_out</a></span> <span class="id">n</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">eqs</span>', <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#mmap">Errors.mmap</a></span> (<span class="id"><a href="Velus.Transcription.Completeness.html#TR.block_to_equation">block_to_equation</a></span> (<span class="id">Env.adds</span>' (<span class="id"><a href="Velus.Common.Common.html#idsnd">idsnd</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> <span class="id">locs</span>))) <span class="id">env</span>) <span class="id">envo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">blks</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">eqs</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hblk</span> <span class="id">Hwtn</span> <span class="id">Hfind</span> <span class="id">Henvo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.n_lastd">n_lastd</a></span> <span class="id">n</span>) <span class="kwd">as</span> (?&amp;<span class="id">Lasts</span>&amp;<span class="id">PermL</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.n_syn">n_syn</a></span> <span class="id">n</span>) <span class="kwd">as</span> <span class="id">Syn</span>. <span class="id">inversion</span> <span class="id">Syn</span> <span class="kwd">as</span> [??? <span class="id">Syn1</span> <span class="id">Syn2</span> (?&amp;<span class="id">Vars</span>&amp;<span class="id">Perm</span>)]; <span class="id">subst</span>; <span class="id">clear</span> <span class="id">Syn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hblk</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Vars</span>; <span class="id">inv</span> <span class="id">Lasts</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv_VarsDefined</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">exists</span> <span class="id">cl</span>, <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span> (<span class="id">Env.adds</span>' (<span class="id"><a href="Velus.Common.Common.html#idsnd">idsnd</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> <span class="id">locs</span>))) <span class="id">env</span>) <span class="id">x</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">cl</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">x2</span>)) <span class="kwd">as</span> <span class="id">Hfind</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">rewrite</span> <span class="id">Hperm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span>; <span class="id">split</span>; <span class="id">simpl_Forall</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">Perm</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">simpl_In</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span> <span class="kwd">in</span> *; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hfind</span>; <span class="id">subst</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">Env.find_adds</span>'<span class="id">_nIn</span> <span class="kwd">in</span> <span class="id">Hfind0</span> <span class="kwd">as</span> (?&amp;?). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span>. <span class="id">cases_eqn</span> <span class="id">Hfind</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">Env.find_adds</span>'<span class="id">_nIn</span> <span class="kwd">in</span> <span class="id">Hfind0</span> <span class="kwd">as</span> (<span class="id">Hinm</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#InMembers_idsnd">InMembers_idsnd</a></span>, 2 <span class="id"><a href="Velus.Common.Common.html#InMembers_idfst">InMembers_idfst</a></span> <span class="kwd">in</span> <span class="id">Hinm</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">exists</span> <span class="id">cl</span>, <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span> (<span class="id">Env.adds</span>' (<span class="id"><a href="Velus.Common.Common.html#idsnd">idsnd</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> <span class="id">locs</span>))) <span class="id">env</span>) <span class="id">x</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">cl</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#concat">concat</a></span> <span class="id">x1</span>)) <span class="kwd">as</span> <span class="id">Hfindl</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">rewrite</span> <span class="id">Hperm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span>; <span class="id">split</span>; <span class="id">simpl_Forall</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">PermL</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.lasts_of_decls">lasts_of_decls</a></span> <span class="kwd">in</span> *. <span class="id">simpl_In</span>; <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span> <span class="kwd">in</span> *; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hfind</span>; <span class="id">subst</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">Env.find_adds</span>'<span class="id">_nIn</span> <span class="kwd">in</span> <span class="id">Hfind0</span> <span class="kwd">as</span> (?&amp;?). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.lasts_of_decls">lasts_of_decls</a></span> <span class="kwd">in</span> *. <span class="id">simpl_In</span>. <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.find_clock">find_clock</a></span>. <span class="id">cases_eqn</span> <span class="id">Hfind</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">Env.find_adds</span>'<span class="id">_nIn</span> <span class="kwd">in</span> <span class="id">Hfind0</span> <span class="kwd">as</span> (<span class="id">Hinm</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#InMembers_idsnd">InMembers_idsnd</a></span>, 2 <span class="id"><a href="Velus.Common.Common.html#InMembers_idfst">InMembers_idfst</a></span> <span class="kwd">in</span> <span class="id">Hinm</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">Hwtn</span> <span class="kwd">as</span> [?? <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hwt</span>]. <span class="id">rewrite</span> <span class="id">Hblk</span> <span class="kwd">in</span> <span class="id">Hwt</span>. <span class="id">inv</span> <span class="id">Hwt</span>; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">subst</span> Γ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Hblk</span> <span class="id">Hperm0</span> <span class="id">Hperm</span>. <span class="id">revert</span> <span class="id">x1</span> <span class="id">Hvars</span> <span class="id">Hfindl</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Hvars0</span>; <span class="id">intros</span> * <span class="id">Hvars</span> <span class="id">Hfindl</span>'; <span class="id">inv</span> <span class="id">Hvars</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">eauto</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span> <span class="kwd">in</span> <span class="id">Hfind</span>' <span class="kwd">as</span> (?&amp;<span class="id">Hfind2</span>). <span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#Forall_app">Forall_app</a></span> <span class="kwd">in</span> <span class="id">Hfindl</span>' <span class="kwd">as</span> (?&amp;?). <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.block_to_equation_complete">block_to_equation_complete</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> (?&amp;<span class="id">Heqs1</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IHHvars0</span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> (?&amp;<span class="id">Heqs2</span>); <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Heqs1</span>, <span class="id">Heqs2</span>; <span class="id">simpl</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">string_scope</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="COMPLETENESS.to_node_complete">to_node_complete</a></span> : <span class="kwd">forall</span> (<span class="id">G</span>: @<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.global">global</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.normalized">normalized</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids.fby_prefs">fby_prefs</a></span>) <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LT.wt_node">wt_node</a></span> <span class="id">G</span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">n</span>', <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_node">to_node</a></span> <span class="id">n</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">n</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hwtn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_node">to_node</a></span>. <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.n_syn">n_syn</a></span> <span class="id">n</span>) <span class="kwd">as</span> <span class="id">Syn</span>. <span class="id">inversion</span> <span class="id">Syn</span> <span class="kwd">as</span> [??? <span class="id">Syn1</span> <span class="id">Syn2</span> (?&amp;<span class="id">Vars</span>&amp;<span class="id">Perm</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> (<span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.mmap_block_to_equation_complete">mmap_block_to_equation_complete</a></span> <span class="id">G</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">env</span>:=<span class="id">Env.adds</span>' (<span class="id"><a href="Velus.Common.Common.html#idsnd">idsnd</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.n_in">n_in</a></span> <span class="id">n</span>))) (<span class="id"><a href="Velus.Environment.html#Env.from_list">Env.from_list</a></span> (<span class="id"><a href="Velus.Common.Common.html#idsnd">idsnd</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.n_out">n_out</a></span> <span class="id">n</span>))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">envo</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Velus.Environment.html#Env.mem">Env.mem</a></span> <span class="id">x</span> (<span class="id"><a href="Velus.Environment.html#Env.from_list">Env.from_list</a></span> (<span class="id"><a href="Velus.Common.Common.html#idsnd">idsnd</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> (<span class="id"><a href="Velus.Common.Common.html#idfst">idfst</a></span> (<span class="id"><a href="Velus.Transcription.Completeness.html#LSyn.n_out">n_out</a></span> <span class="id">n</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">output</span> <span class="id">variable</span> <span class="id">defined</span> <span class="kwd">as</span> <span class="id">a</span> <span class="id">fby</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [? ?]; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;3:{ <span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.mmap_block_to_equation">mmap_block_to_equation</a></span>. <span class="id">destruct</span> <span class="id">n</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dependent</span> <span class="id">destruction</span> <span class="id">n_block0</span>; <span class="id">intros</span>; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hmap</span>; <span class="id">eauto</span>. <span class="id">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl_Forall</span>. <span class="id">simpl_In</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">c</span>; <span class="id">simpl</span>. <span class="id">eapply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.envs_eq_find">envs_eq_find</a></span>. <span class="id">apply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.envs_eq_inout">envs_eq_inout</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#Senv.HasClock_app">Senv.HasClock_app</a></span>. <span class="id">right</span>. <span class="id">econstructor</span>. <span class="id">solve_In</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> * <span class="id">Hmem</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-2 <span class="id"><a href="Velus.Common.Common.html#map_fst_idfst">map_fst_idfst</a></span>, &lt;-<span class="id"><a href="Velus.Common.Common.html#map_fst_idsnd">map_fst_idsnd</a></span>, &lt;-<span class="id"><a href="Velus.Common.CommonList.html#fst_InMembers">fst_InMembers</a></span>, &lt;-<span class="id"><a href="Velus.Environment.html#Env.In_from_list">Env.In_from_list</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Environment.html#Env.mem_2">Env.mem_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Hmem</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="COMPLETENESS.to_global_complete">to_global_complete</a></span> : <span class="kwd">forall</span> <span class="id">G</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Transcription.Completeness.html#LT.wt_global">wt_global</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">G</span>', <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_global">to_global</a></span> <span class="id">G</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">G</span>'.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> [] (<span class="id">_</span>&amp;<span class="id">Hwt</span>). <span class="id">revert</span> <span class="id">Hwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">nodes0</span>; <span class="id">intros</span> * <span class="id">Hwt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">Hwt</span> <span class="kwd">as</span> [|?? (?&amp;?)]; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">exists</span> (<span class="id"><a href="Velus.Transcription.Completeness.html#NL.Global">NL.Global</a></span> <span class="id">types0</span> <span class="id">externs0</span> []). <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold</span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR.to_global">to_global</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS.to_node_complete">to_node_complete</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">hd</span>'&amp;<span class="id">Hton</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Hton</span>; <span class="id">clear</span> <span class="id">Hton</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IHnodes0</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">tl</span>'&amp;<span class="id">HtoG</span>); <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">HtoG</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">EQ</span>; <span class="id">simpl</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS">COMPLETENESS</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="CompletenessFun">CompletenessFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ids</span> : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Op</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Cks</span> : <span class="id"><a href="Velus.Clocks.html#CLOCKS">CLOCKS</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Senv</span> : <span class="id"><a href="Velus.Lustre.StaticEnv.html#STATICENV">STATICENV</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LSyn</span> : <span class="id"><a href="Velus.Lustre.LSyntax.html#LSYNTAX">LSYNTAX</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Senv">Senv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LT</span> : <span class="id"><a href="Velus.Lustre.LTyping.html#LTYPING">LTYPING</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn">LSyn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CE</span> : <span class="id"><a href="Velus.CoreExpr.CESyntax.html#CESYNTAX">CESYNTAX</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NL</span> : <span class="id"><a href="Velus.NLustre.NLSyntax.html#NLSYNTAX">NLSYNTAX</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#CE">CE</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span> : <span class="id"><a href="Velus.Transcription.Tr.html#TR">TR</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn">LSyn</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#CE">CE</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#NL">NL</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;: <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS">COMPLETENESS</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn">LSyn</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LT">LT</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#CE">CE</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#NL">NL</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR">TR</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Transcription.Completeness.html#COMPLETENESS">COMPLETENESS</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Op">Op</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Cks">Cks</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#Senv">Senv</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LSyn">LSyn</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#LT">LT</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#CE">CE</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#NL">NL</a></span> <span class="id"><a href="Velus.Transcription.Completeness.html#TR">TR</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Transcription.Completeness.html#CompletenessFun">CompletenessFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
