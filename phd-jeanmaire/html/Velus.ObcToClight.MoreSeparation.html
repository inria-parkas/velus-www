
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module MoreSeparation</title>
<meta name="description" content="Documentation of Coq module MoreSeparation" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module MoreSeparation</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html">common.Separation</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html">common.Values</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html">common.Errors</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html">cfrontend.Ctypes</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Maps.html">lib.Maps</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html">lib.Coqlib</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html">lib.Integers</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.VelusMemory.html">VelusMemory</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CompCertLib.html">Common.CompCertLib</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html">ZArith.BinInt</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Tactics.html">Program.Tactics</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html">Sorting.Permutation</a></span>.<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">sep_scope</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">Z</span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">m</span> -*&gt; <span class="id">m</span>'" := (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_imp">massert_imp</a></span> <span class="id">m</span> <span class="id">m</span>') (<span class="kwd">at</span> <span class="id">level</span> 70, <span class="id">no</span> <span class="id">associativity</span>) : <span class="id">sep_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">m</span> &lt;-*-&gt; <span class="id">m</span>'" := (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> <span class="id">m</span> <span class="id">m</span>') (<span class="kwd">at</span> <span class="id">level</span> 70, <span class="id">no</span> <span class="id">associativity</span>) : <span class="id">sep_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepconj_eqv">sepconj_eqv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">P</span>' <span class="id">Q</span> <span class="id">Q</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> &lt;-*-&gt; <span class="id">P</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Q</span> &lt;-*-&gt;  <span class="id">Q</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> ** <span class="id">Q</span>) &lt;-*-&gt; (<span class="id">P</span>' ** <span class="id">Q</span>').<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">HP</span> <span class="id">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HP</span>. <span class="id">rewrite</span> <span class="id">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pure_imp">pure_imp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#pure">pure</a></span> <span class="id">P</span> -*&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#pure">pure</a></span> <span class="id">Q</span>) &lt;-&gt; (<span class="id">P</span> -&gt; <span class="id">Q</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intro</span> <span class="id">Imp</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">Imp</span> <span class="kwd">with</span> (<span class="id">m</span>:=<span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.empty">Memory.Mem.empty</a></span>).<br/>
&nbsp;&nbsp;- <span class="id">split</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pure_eqv">pure_eqv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#pure">pure</a></span> <span class="id">P</span> &lt;-*-&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#pure">pure</a></span> <span class="id">Q</span>) &lt;-&gt; (<span class="id">P</span> &lt;-&gt; <span class="id">Q</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intro</span> <span class="id">Eqv</span>; <span class="id">destruct</span> <span class="id">Eqv</span>.<br/>
&nbsp;&nbsp;- <span class="id">split</span>; <span class="id">now</span> <span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#pure_imp">pure_imp</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">split</span>; <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#pure_imp">pure_imp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="disjoint_footprint_sepconj">disjoint_footprint_sepconj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> <span class="id">R</span> (<span class="id">P</span> ** <span class="id">Q</span>) &lt;-&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> <span class="id">R</span> <span class="id">P</span> /\ <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> <span class="id">R</span> <span class="id">Q</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intro</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="id">split</span>; <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span>; <span class="id">specialize</span> (<span class="id">H</span> <span class="id">b</span> <span class="id">ofs</span>); <span class="id">intros</span> <span class="id">HfR</span> <span class="id">HfP</span>; <span class="id">apply</span> <span class="id">H</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">right</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">HfP</span> <span class="id">HfQ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">HfP</span> <span class="id">b</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">HfQ</span> <span class="id">b</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">HfR</span> <span class="id">HPQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HPQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">apply</span> <span class="id">HfP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">apply</span> <span class="id">HfQ</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html">common.Memory</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="wand_footprint">wand_footprint</a></span> (<span class="id">P</span> <span class="id">Q</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>) (<span class="id">b</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;~<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> <span class="id">P</span> <span class="id">b</span> <span class="id">ofs</span> /\ <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> <span class="id">Q</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
<br/>
<span class="id">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="sepwand">sepwand</a></span> (<span class="id">P</span> <span class="id">Q</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span> := {|<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_pred">m_pred</a></span> := <span class="kwd">fun</span> <span class="id">m</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">m</span>', <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span> <span class="id">P</span> <span class="id">Q</span>) <span class="id">m</span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span>' |= <span class="id">P</span> -&gt; <span class="id">m</span>' |= <span class="id">Q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span> <span class="id">P</span> <span class="id">Q</span> <span class="id">b</span> <span class="id">ofs</span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">b</span>);<br/>
&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> := <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span> <span class="id">P</span> <span class="id">Q</span><br/>
|}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Next Obligation.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">HPQ</span>, <span class="id">H1</span> <span class="id">into</span> <span class="id">Hval</span>, <span class="id">H0</span> <span class="id">into</span> <span class="id">Hun1</span>.<br/>
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span>'' <span class="id">Hun2</span> <span class="id">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun1</span>) <span class="kwd">in</span> <span class="id">Hun2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">HPQ</span> <span class="kwd">with</span> (1:=<span class="id">Hun2</span>) (2:=<span class="id">HP</span>).<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">Hwfoot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hval</span> <span class="kwd">with</span> (1:=<span class="id">Hwfoot</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Infix</span> "-*" := <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepwand">sepwand</a></span> (<span class="kwd">at</span> <span class="id">level</span> 65, <span class="id">right</span> <span class="id">associativity</span>) : <span class="id">sep_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="decidable_footprint">decidable_footprint</a></span> (<span class="id">P</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#decidable">Decidable.decidable</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> <span class="id">P</span> <span class="id">b</span> <span class="id">ofs</span>).<br/>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="decidable_footprint_Proper">decidable_footprint_Proper</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>) <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HPQ</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#decidable">Decidable.decidable</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> &lt;-<span class="id">HPQ</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id">HPQ</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="decidable_footprint_sepconj">decidable_footprint_sepconj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> (<span class="id">P</span> ** <span class="id">Q</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HP</span> <span class="id">HQ</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">HP</span> <span class="id">b</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">HQ</span> <span class="id">b</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">decidable_footprint_sepconj</span> : <span class="id">sep</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="decidable_ident_eq">decidable_ident_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span> <span class="id">b</span>': <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#ident">AST.ident</a></span>), <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#decidable">Decidable.decidable</a></span> (<span class="id">b</span> = <span class="id">b</span>').<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">b</span>'. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#decidable">Decidable.decidable</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' <span class="id">b</span>); <span class="id">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="decidable_footprint_range">decidable_footprint_range</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">f</span>} <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> (<span class="id">range</span>' <span class="id">f</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#dec_and">Decidable.dec_and</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_ident_eq">decidable_ident_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#dec_and">Decidable.dec_and</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_decidable">Z.le_decidable</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_decidable">Z.lt_decidable</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">decidable_footprint_range</span> : <span class="id">sep</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="decidable_footprint_contains">decidable_footprint_contains</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">f</span>} <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">spec</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> (<span class="id">contains</span>' <span class="id">f</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">spec</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#dec_and">Decidable.dec_and</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_ident_eq">decidable_ident_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#dec_and">Decidable.dec_and</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_decidable">Z.le_decidable</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_decidable">Z.lt_decidable</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">decidable_footprint_contains</span> : <span class="id">sep</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sep_unwand">sep_unwand</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> ** (<span class="id">P</span> -* <span class="id">Q</span>)) -*&gt; <span class="id">Q</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">Hdec</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span> <span class="id">HPPQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HPPQ</span> <span class="kwd">as</span> (<span class="id">HP</span> &amp; <span class="id">HW</span> &amp; <span class="id">Hdj</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HW</span> <span class="kwd">as</span> [<span class="id">Hu</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">Hdec</span> <span class="id">b</span> <span class="id">ofs</span>); [<span class="id">now</span> <span class="id">left</span>|<span class="id">right</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="disjoint_sepwand">disjoint_sepwand</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> <span class="id">P</span> (<span class="id">P</span> -* <span class="id">Q</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfP</span> <span class="id">HfPQ</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HfPQ</span> <span class="kwd">as</span> [<span class="id">HfnP</span> <span class="id">HfQ</span>].<br/>
&nbsp;&nbsp;<span class="id">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="merge_disjoint">merge_disjoint</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> <span class="id">P</span> <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= <span class="id">P</span> ** <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= <span class="id">Q</span> ** <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= <span class="id">P</span> ** <span class="id">Q</span> ** <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">m</span> <span class="id">HdPQ</span> <span class="id">HPR</span> <span class="id">HQR</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj1">sep_proj1</a></span> <span class="kwd">with</span> (1:=<span class="id">HPR</span>).<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj1">sep_proj1</a></span> <span class="kwd">with</span> (1:=<span class="id">HQR</span>).<br/>
&nbsp;&nbsp;- <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj2">sep_proj2</a></span> <span class="kwd">with</span> (1:=<span class="id">HPR</span>).<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">Hfw</span> <span class="id">HfR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hfw</span> <span class="kwd">as</span> [<span class="id">HfP</span>|<span class="id">HfPQ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">HPR</span> <span class="kwd">as</span> [? [? <span class="id">HdPR</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> <span class="kwd">in</span> <span class="id">HdPR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HdPR</span> <span class="kwd">with</span> (1:=<span class="id">HfP</span>) (2:=<span class="id">HfR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">HQR</span> <span class="kwd">as</span> [? [? <span class="id">HdQR</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> <span class="kwd">in</span> <span class="id">HdQR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HdQR</span> <span class="kwd">with</span> (1:=<span class="id">HfPQ</span>) (2:=<span class="id">HfR</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="merge_sepwand">merge_sepwand</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= <span class="id">P</span> ** <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= (<span class="id">P</span> -* <span class="id">Q</span>) ** <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= <span class="id">P</span> ** (<span class="id">P</span> -* <span class="id">Q</span>) ** <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#merge_disjoint">merge_disjoint</a></span>; <span class="id">try</span> <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#disjoint_sepwand">disjoint_sepwand</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepwand_mp">sepwand_mp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">P</span> <span class="id">Q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= <span class="id">P</span> -* <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= <span class="id">Q</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HP</span> <span class="id">HPQ</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HPQ</span>; [|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="wand_footprint_massert_imp_Proper">wand_footprint_massert_imp_Proper</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_imp">massert_imp</a></span> ==&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_imp">massert_imp</a></span> --&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HPQ</span> <span class="id">R</span> <span class="id">S</span> <span class="id">HRS</span> <span class="id">b</span>' <span class="id">b</span> <span class="id">Hbeq</span> <span class="id">ofs</span>' <span class="id">ofs</span> <span class="id">Hoeq</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id">HPQ</span>, <span class="id">HRS</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="wand_footprint_massert_eqv_Proper">wand_footprint_massert_eqv_Proper</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> ==&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>) <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HPQ</span> <span class="id">R</span> <span class="id">S</span> <span class="id">HRS</span> <span class="id">b</span>' <span class="id">b</span> <span class="id">Hbeq</span> <span class="id">ofs</span>' <span class="id">ofs</span> <span class="id">Hoeq</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HPQ</span>, <span class="id">HRS</span>. <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="sepwand_massert_Proper">sepwand_massert_Proper</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> ==&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> ==&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span>) <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepwand">sepwand</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HPQ</span> <span class="id">R</span> <span class="id">S</span> <span class="id">HRS</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">split</span>|<span class="id">split</span>].<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span> <span class="id">HPR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HPR</span> <span class="kwd">as</span> [<span class="id">HPR1</span> <span class="id">HPR2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">m</span>' <span class="id">Hun</span> <span class="id">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id">HRS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id">HPQ</span> <span class="kwd">in</span> <span class="id">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HPR1</span> <span class="kwd">with</span> (2:=<span class="id">HQ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfW</span> <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id">HPQ</span>, <span class="id">HRS</span> <span class="kwd">in</span> <span class="id">HfW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id">HPQ</span>, &lt;-<span class="id">HRS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HPR2</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> &lt;-<span class="id">HPQ</span>, &lt;-<span class="id">HRS</span> <span class="kwd">in</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span> <span class="id">HQS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HQS</span> <span class="kwd">as</span> [<span class="id">HQS1</span> <span class="id">HQS2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">m</span>' <span class="id">Hun</span> <span class="id">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HPQ</span> <span class="kwd">in</span> <span class="id">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HRS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HQS1</span> <span class="kwd">with</span> (2:=<span class="id">HP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfW</span> <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id">HPQ</span>, <span class="id">HRS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HPQ</span>, <span class="id">HRS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HQS2</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hf</span>. <span class="id">rewrite</span> <span class="id">HPQ</span>, <span class="id">HRS</span> <span class="kwd">in</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="hide_in_sepwand">hide_in_sepwand</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> &lt;-*-&gt; (<span class="id">Q</span> ** <span class="id">R</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> &lt;-*-&gt; (<span class="id">Q</span> ** (<span class="id">Q</span> -* <span class="id">P</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">HQdec</span> <span class="id">HPQR</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HPQR</span> <span class="kwd">at</span> 2.<br/>
&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">split</span>|].<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span> <span class="id">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HPQR</span> <span class="kwd">in</span> <span class="id">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [|<span class="id">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj1">sep_proj1</a></span> <span class="kwd">with</span> (1:=<span class="id">HP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> <span class="id">m</span>' <span class="id">Hun</span> <span class="id">HQ</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HP</span> <span class="kwd">as</span> (<span class="id">HQ</span> &amp; <span class="id">HR</span> &amp; <span class="id">Hdj</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>; <span class="id">try</span> <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_invar">m_invar</a></span> <span class="kwd">with</span> (1:=<span class="id">HR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfR</span> <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">HQdec</span> <span class="id">b</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> (<span class="id">exfalso</span>; <span class="id">apply</span> <span class="id">Hdj</span> <span class="kwd">with</span> (2:=<span class="id">HfR</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">assumption</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> 1 <span class="kwd">as</span> [<span class="id">HnfQ</span> [|<span class="id">HfR</span>]]; [<span class="id">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj2">sep_proj2</a></span> <span class="kwd">in</span> <span class="id">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_valid">m_valid</a></span> <span class="kwd">with</span> (1:=<span class="id">HP</span>) (2:=<span class="id">HfR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#disjoint_sepwand">disjoint_sepwand</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HPQR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hf</span> <span class="kwd">as</span> [|<span class="id">Hf</span>]; [<span class="id">now</span> <span class="id">left</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hf</span> <span class="kwd">as</span> [<span class="id">HfQ</span> [|<span class="id">HfR</span>]]; [<span class="id">now</span> <span class="id">left</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">right</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span> <span class="kwd">with</span> (1:=<span class="id">HQdec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HPQR</span>. <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepwand_out">sepwand_out</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> ** <span class="id">Q</span>) &lt;-*-&gt; (<span class="id">P</span> ** (<span class="id">P</span> -* (<span class="id">P</span> ** <span class="id">Q</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#hide_in_sepwand">hide_in_sepwand</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pure_wand_footprint">pure_wand_footprint</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="kwd">Prop</span>) <span class="id">Q</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#pure">pure</a></span> <span class="id">P</span>) <span class="id">Q</span> <span class="id">b</span> <span class="id">ofs</span> &lt;-&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> <span class="id">Q</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> 1; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">split</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_on_imp">unchanged_on_imp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> (<span class="id">Q</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id">P</span> <span class="id">m</span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id">Q</span> <span class="id">b</span> <span class="id">ofs</span> -&gt; <span class="id">P</span> <span class="id">b</span> <span class="id">ofs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id">Q</span> <span class="id">m</span> <span class="id">m</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hun</span> <span class="id">Hpq</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion_clear</span> <span class="id">Hun</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pure_sepwand">pure_sepwand</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="kwd">Prop</span>) <span class="id">Q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> -&gt; (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#pure">pure</a></span> <span class="id">P</span> -* <span class="id">Q</span>) &lt;-*-&gt; <span class="id">Q</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion_clear</span> 1 <span class="kwd">as</span> (<span class="id">Hun</span> &amp; <span class="id">Hf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hun</span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">m</span> <span class="id">Hq</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> <span class="id">m</span>' <span class="id">Hun</span> <span class="id">Hmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_invar">m_invar</a></span> <span class="kwd">with</span> (1:=<span class="id">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#unchanged_on_imp">unchanged_on_imp</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#pure_wand_footprint">pure_wand_footprint</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> * <span class="id">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#pure_wand_footprint">pure_wand_footprint</a></span> <span class="kwd">in</span> <span class="id">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="kwd">using</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_valid">m_valid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl</span>. <span class="id">intros</span> * <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#pure_wand_footprint">pure_wand_footprint</a></span> <span class="kwd">in</span> <span class="id">Hf</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reynolds1">reynolds1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P1</span> <span class="id">P2</span> <span class="id">P3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P1</span> ** <span class="id">P2</span>) -*&gt; <span class="id">P3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> <span class="id">P1</span> <span class="id">b</span> <span class="id">ofs</span> -&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span> <span class="id">P2</span> <span class="id">P3</span> <span class="id">b</span> <span class="id">ofs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P1</span> -*&gt; (<span class="id">P2</span> -* <span class="id">P3</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P1</span> <span class="id">P2</span> <span class="id">P3</span> <span class="id">HH</span> <span class="id">Hfi</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span> <span class="id">HP1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">m</span>' <span class="id">Hun</span> <span class="id">HP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [|<span class="id">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_invar">m_invar</a></span> <span class="kwd">with</span> (1:=<span class="id">HP1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">now</span> <span class="id">apply</span> <span class="id">Hfi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfP1</span> <span class="id">HfP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hfi</span> <span class="kwd">in</span> <span class="id">HfP1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HfP1</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> 1 <span class="kwd">as</span> [<span class="id">HnfP2</span> <span class="id">HfP3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HH</span> <span class="kwd">as</span> [<span class="id">HHm</span> <span class="id">HHf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HHf</span> <span class="kwd">in</span> <span class="id">HfP3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HfP3</span> <span class="kwd">as</span> [<span class="id">HfP1</span>|]; [|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_valid">m_valid</a></span> <span class="kwd">with</span> (1:=<span class="id">HP1</span>) (2:=<span class="id">HfP1</span>).<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> 1 <span class="kwd">as</span> [<span class="id">HnfP2</span> <span class="id">HfP3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HH</span> <span class="kwd">as</span> [<span class="id">HHm</span> <span class="id">HHf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HHf</span> <span class="kwd">in</span> <span class="id">HfP3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HfP3</span>; <span class="id">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reynolds2">reynolds2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P1</span> <span class="id">P2</span> <span class="id">P3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> <span class="id">P2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P1</span> -*&gt; (<span class="id">P2</span> -* <span class="id">P3</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P1</span> ** <span class="id">P2</span>) -*&gt; <span class="id">P3</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P1</span> <span class="id">P2</span> <span class="id">P3</span> <span class="id">HD2</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">HH</span>. <span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_comm">sep_comm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span> <span class="kwd">with</span> (1:=<span class="id">HD2</span>).<br/>
&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">footprint_perm</span>' (<span class="id">p</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memtype.html#permission">permission</a></span>) (<span class="id">P</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>) (<span class="id">b</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">m</span> |= <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> <span class="id">k</span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> <span class="id">P</span> <span class="id">b</span> <span class="id">i</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lo</span> &lt;= <span class="id">i</span> &lt; <span class="id">hi</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">i</span> <span class="id">k</span> <span class="id">p</span>)).<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="footprint_perm">footprint_perm</a></span> := (<span class="id">footprint_perm</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memtype.html#Freeable">Freeable</a></span>).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="footprint_perm_w">footprint_perm_w</a></span> := (<span class="id">footprint_perm</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="footprint_perm_sepconj">footprint_perm_sepconj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm</span>' <span class="id">p</span> <span class="id">P</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm</span>' <span class="id">p</span> <span class="id">Q</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm</span>' <span class="id">p</span> (<span class="id">P</span> ** <span class="id">Q</span>) <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">HfpP</span> <span class="id">HfpQ</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">HPQ</span> <span class="id">i</span> <span class="id">k</span> <span class="id">Hf</span> <span class="id">Hi</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HPQ</span> <span class="kwd">as</span> (<span class="id">HP</span> &amp; <span class="id">HQ</span> &amp; <span class="id">Hdj</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hf</span> <span class="kwd">as</span> [<span class="id">HfP</span>|<span class="id">HfQ</span>].<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">apply</span> <span class="id">HfpP</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">apply</span> <span class="id">HfpQ</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="footprint_perm_range">footprint_perm_range</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">b</span>' <span class="id">lo</span>' <span class="id">hi</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm</span>' <span class="id">p</span> (<span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>) <span class="id">b</span>' <span class="id">lo</span>' <span class="id">hi</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">b</span>' <span class="id">lo</span>' <span class="id">hi</span>' <span class="id">m</span> <span class="id">Hm</span> <span class="id">i</span> <span class="id">k</span> <span class="id">Hf</span> <span class="id">Hi</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hf</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hm</span> <span class="kwd">as</span> (<span class="id">Hlo</span> &amp; <span class="id">Hhi</span> &amp; <span class="id">Hp</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">Hp</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="footprint_perm_contains">footprint_perm_contains</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">spec</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm</span>' <span class="id">p</span> (<span class="id">contains</span>' <span class="id">p</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">spec</span>) <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">spec</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span> <span class="id">m</span> <span class="id">Hm</span> <span class="id">i</span> <span class="id">k</span> <span class="id">Hf</span> <span class="id">Hi</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hf</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hm</span> <span class="kwd">as</span> (<span class="id">Hlo</span> &amp; <span class="id">Hhi</span> &amp; <span class="id">Hv</span> &amp; <span class="id">Hl</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hv</span> <span class="kwd">as</span> (<span class="id">Hperm</span> &amp; <span class="id">j</span> &amp; <span class="id">Hofs</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">Hperm</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">footprint_perm_sepconj</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm_range</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm_contains</span> : <span class="id">sep</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="range_imp_with_wand">range_imp_with_wand</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">P</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>) -*&gt; <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm</span>' <span class="id">p</span> <span class="id">P</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>) &lt;-*-&gt; (<span class="id">P</span> ** (<span class="id">P</span> -* <span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">P</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">HRP</span> <span class="id">HPfdec</span> <span class="id">HPperm</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; [|<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span>].<br/>
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span> <span class="id">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [|<span class="id">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">apply</span> <span class="id">HRP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> <span class="id">m</span>' <span class="id">Hun</span> <span class="id">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">HR</span>':=<span class="id">HR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HR</span>' <span class="kwd">as</span> (<span class="id">Hlo</span> &amp; <span class="id">Hhi</span> &amp; <span class="id">Hperm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>; <span class="id">try</span> <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">i</span> <span class="id">k</span> <span class="id">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">HPfdec</span> <span class="id">b</span> <span class="id">i</span>) <span class="kwd">as</span> [<span class="id">HfPi</span>|<span class="id">HnfPi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">HPperm</span> <span class="kwd">with</span> (1:=<span class="id">HP</span>) (2:=<span class="id">HfPi</span>) (3:=<span class="id">Hi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">assumption</span>|<span class="id">simpl</span>; <span class="id">now</span> <span class="id">intuition</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">Hperm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> <span class="id">b</span>' <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> 1 <span class="kwd">as</span> [? <span class="id">HfR</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b</span> = <span class="id">b</span>') <span class="kwd">by</span> (<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">HfR</span>; <span class="id">intuition</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span>. <span class="id">apply</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_valid">m_valid</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">HR</span> <span class="id">HfR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">HfP</span> <span class="id">HfPR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HfPR</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HRP</span> <span class="kwd">as</span> [<span class="id">HRP</span> <span class="id">HfPR</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hf</span> <span class="kwd">as</span> [|<span class="id">Hf</span>]; [<span class="id">now</span> <span class="id">apply</span> <span class="id">HfPR</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">destruct</span> <span class="id">Hf</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="subseteq_footprint">subseteq_footprint</a></span> (<span class="id">P</span> <span class="id">Q</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>) :=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> <span class="id">P</span> <span class="id">b</span> <span class="id">ofs</span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> <span class="id">Q</span> <span class="id">b</span> <span class="id">ofs</span>).<br/>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="subseteq_footprint_footprint_Proper">subseteq_footprint_footprint_Proper</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>) <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">Hsub</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">Heqb</span> <span class="id">ofs</span> <span class="id">ofs</span>' <span class="id">Heqofs</span> <span class="id">HP</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span>. <span class="id">apply</span> <span class="id">Hsub</span> <span class="kwd">with</span> (1:=<span class="id">HP</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="subseteq_footprint_refl">subseteq_footprint_refl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> <span class="id">P</span> <span class="id">P</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">now</span> <span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="subseteq_footprint_trans">subseteq_footprint_trans</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> <span class="id">P</span> <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> <span class="id">Q</span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> <span class="id">P</span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span>. <span class="id">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="id">Add</span> <span class="id">Parametric</span> <span class="id">Relation</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span> <span class="id">proved</span> <span class="kwd">by</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint_refl">subseteq_footprint_refl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> <span class="id">proved</span> <span class="kwd">by</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint_trans">subseteq_footprint_trans</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">subseteq_footprint_rel</span>.<br/>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="subseteq_footprint_massert_imp_Proper">subseteq_footprint_massert_imp_Proper</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_imp">massert_imp</a></span> ==&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_imp">massert_imp</a></span> --&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#impl">Basics.impl</a></span>) <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HPQ</span> <span class="id">R</span> <span class="id">S</span> <span class="id">HSR</span> <span class="id">HPsR</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfQ</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HPQ</span> <span class="kwd">in</span> <span class="id">HfQ</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">HPsR</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfQ</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">HSR</span> <span class="kwd">in</span> <span class="id">HPsR</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="subseteq_footprint_massert_eqv_Proper">subseteq_footprint_massert_eqv_Proper</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> ==&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> ==&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span>) <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HPQ</span> <span class="id">R</span> <span class="id">S</span> <span class="id">HSR</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HPQ</span> <span class="kwd">as</span> [<span class="id">HPQ</span> <span class="id">HQP</span>].<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HSR</span> <span class="kwd">as</span> [<span class="id">HSR</span> <span class="id">HRS</span>].<br/>
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intro</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">HPQ</span> <span class="kwd">in</span> <span class="id">HH</span>; <span class="id">now</span> <span class="id">rewrite</span> <span class="id">HRS</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">HQP</span> <span class="kwd">in</span> <span class="id">HH</span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id">HSR</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="subseteq_footprint_sepconj">subseteq_footprint_sepconj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> <span class="id">P</span> <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> <span class="id">R</span> <span class="id">S</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> (<span class="id">P</span> ** <span class="id">R</span>) (<span class="id">Q</span> ** <span class="id">S</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">S</span> <span class="id">HPQ</span> <span class="id">HRS</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> 1 <span class="kwd">as</span> [<span class="id">HP</span>|<span class="id">HR</span>].<br/>
&nbsp;&nbsp;- <span class="id">left</span>; <span class="id">now</span> <span class="id">apply</span> <span class="id">HPQ</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>; <span class="id">now</span> <span class="id">apply</span> <span class="id">HRS</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unify_distinct_wands">unify_distinct_wands</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> <span class="id">R</span> <span class="id">S</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> <span class="id">P</span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> <span class="id">Q</span> <span class="id">S</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> -* <span class="id">R</span>) ** (<span class="id">Q</span> -* <span class="id">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-*&gt; (<span class="id">P</span> ** <span class="id">Q</span>) -* (<span class="id">R</span> ** <span class="id">S</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">S</span> <span class="id">HdjRS</span> <span class="id">HsPR</span> <span class="id">HsQS</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">m</span>' <span class="id">Hun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HH</span> <span class="kwd">as</span> (<span class="id">HPR</span> &amp; <span class="id">HQS</span> &amp; <span class="id">Hdj</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> 1 <span class="kwd">as</span> (<span class="id">HP</span> &amp; <span class="id">HQ</span> &amp; <span class="id">HdjPQ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_invar">m_invar</a></span> <span class="kwd">with</span> (<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">HPR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepwand_mp">sepwand_mp</a></span> <span class="kwd">with</span> (1:=<span class="id">HP</span>) <span class="kwd">in</span> <span class="id">HPR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfPR</span> <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HfPR</span> <span class="kwd">as</span> (<span class="id">HnfP</span> &amp; <span class="id">HfR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> 1 <span class="kwd">as</span> [<span class="id">HfP</span>|<span class="id">HfQ</span>]; [<span class="id">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HdjRS</span> <span class="kwd">with</span> (1:=<span class="id">HfR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HsQS</span> <span class="kwd">with</span> (1:=<span class="id">HfQ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_invar">m_invar</a></span> <span class="kwd">with</span> (<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">HQS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepwand_mp">sepwand_mp</a></span> <span class="kwd">with</span> (1:=<span class="id">HQ</span>) <span class="kwd">in</span> <span class="id">HQS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">HfQS</span> <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">HfQS</span> <span class="kwd">as</span> (<span class="id">HnfQ</span> &amp; <span class="id">HfS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> 1 <span class="kwd">as</span> [<span class="id">HfP</span>|<span class="id">HfQ</span>]; [|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HdjRS</span> <span class="kwd">with</span> (2:=<span class="id">HfS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HsPR</span> <span class="kwd">with</span> (1:=<span class="id">HfP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">Hfw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_valid">m_valid</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ofs</span> <span class="id">HH</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hfw</span> <span class="kwd">as</span> [<span class="id">HnfPQ</span> [<span class="id">HfR</span>|<span class="id">HfS</span>]]; [<span class="id">left</span>|<span class="id">right</span>]; <span class="id">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> (<span class="id">intro</span>; <span class="id">apply</span> <span class="id">HnfPQ</span>; <span class="id">simpl</span>); <span class="id">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> 1 <span class="kwd">as</span> [<span class="id">HnfPQ</span> [<span class="id">HfR</span>|<span class="id">HfS</span>]]; [<span class="id">left</span>|<span class="id">right</span>]; <span class="id">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> (<span class="id">intro</span>; <span class="id">apply</span> <span class="id">HnfPQ</span>; <span class="id">simpl</span>); <span class="id">intuition</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="id">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="sepemp">sepemp</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span> :=  <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#pure">pure</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepemp_disjoint">sepemp_disjoint</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> <span class="id">P</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepemp_trivial">sepemp_trivial</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">m</span> |= <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">split</span>.<br/>
Qed.</div>
<span class="id">Global</span> <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sepemp_trivial</span> : <span class="id">sep</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepemp_right">sepemp_right</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> &lt;-*-&gt; (<span class="id">P</span> ** <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">split</span>; <span class="id">simpl</span>; <span class="id">try</span> (<span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_disjoint">sepemp_disjoint</a></span>); <span class="id">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepemp_left">sepemp_left</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> &lt;-*-&gt; (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span> ** <span class="id">P</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_comm">sep_comm</a></span>. <span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span>. <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="wandwand_sepemp">wandwand_sepemp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> (<span class="id">P</span> -* <span class="id">P</span>) <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">firstorder</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="wand_footprint_sepemp">wand_footprint_sepemp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span> <span class="id">P</span> <span class="id">b</span> <span class="id">ofs</span> &lt;-&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_footprint">m_footprint</a></span> <span class="id">P</span> <span class="id">b</span> <span class="id">ofs</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">firstorder</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepemp_wand">sepemp_wand</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span> -* <span class="id">P</span> &lt;-*-&gt; <span class="id">P</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> 1 <span class="kwd">as</span> [<span class="id">Hun</span> <span class="id">Hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span> <span class="id">HP</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">m</span>' <span class="id">Hun</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_invar">m_invar</a></span> <span class="kwd">with</span> (1:=<span class="id">HP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> (1:=<span class="id">Hun</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint_sepemp">wand_footprint_sepemp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint_sepemp">wand_footprint_sepemp</a></span> <span class="kwd">in</span> <span class="id">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#m_valid">m_valid</a></span> <span class="kwd">with</span> (1:=<span class="id">HP</span>) (2:=<span class="id">Hw</span>).<br/>
&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint_sepemp">wand_footprint_sepemp</a></span> <span class="kwd">in</span> <span class="id">Hf</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="decidable_footprint_sepemp">decidable_footprint_sepemp</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#dec_False">Decidable.dec_False</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="footprint_perm_sepemp">footprint_perm_sepemp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>, <span class="id">footprint_perm</span>' <span class="id">p</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m</span>. <span class="id">inversion</span> 2.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">decidable_footprint_sepemp</span> <span class="id">footprint_perm_sepemp</span> : <span class="id">sep</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="empty_range">empty_range</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">f</span>} <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hi</span> &lt;= <span class="id">lo</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;0 &lt;= <span class="id">lo</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hi</span> &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.modulus">Ptrofs.modulus</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span> &lt;-*-&gt; (<span class="id">range</span>' <span class="id">f</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">Hgt</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">split</span>|<span class="id">split</span>].<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>. <span class="id">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> 1. <span class="id">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id">intros</span>; <span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> 1.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sepfalse">sepfalse</a></span> := <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#pure">pure</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepconj_sepfalse">sepconj_sepfalse</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id">m</span> |= <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepfalse">sepfalse</a></span> ** <span class="id">P</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">simpl</span>; <span class="id">intros</span> ?? []; <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="decidable_footprint_sepfalse">decidable_footprint_sepfalse</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepfalse">sepfalse</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Decidable.html#dec_False">Decidable.dec_False</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="footprint_perm_sepfalse">footprint_perm_sepfalse</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>, <span class="id">footprint_perm</span>' <span class="id">p</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepfalse">sepfalse</a></span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m</span> <span class="id">Hm</span>. <span class="id">inversion</span> <span class="id">Hm</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">decidable_footprint_sepfalse</span> <span class="id">footprint_perm_sepfalse</span> : <span class="id">sep</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="MassertPredEqv">MassertPredEqv</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">A</span>: <span class="kwd">Type</span>}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="massert_pred_eqv">massert_pred_eqv</a></span> (<span class="id">P</span>: <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#MassertPredEqv.A">A</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>) (<span class="id">Q</span>: <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#MassertPredEqv.A">A</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> (<span class="id">P</span> <span class="id">x</span>) (<span class="id">Q</span> <span class="id">x</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="massert_pred_eqv_refl">massert_pred_eqv_refl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span> <span class="id">P</span> <span class="id">P</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="massert_pred_eqv_sym">massert_pred_eqv_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span> <span class="id">P</span> <span class="id">Q</span> -&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span> <span class="id">Q</span> <span class="id">P</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span>. <span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">HPQ</span> <span class="id">x</span>. <span class="id">now</span> <span class="id">rewrite</span> (<span class="id">HPQ</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="massert_pred_eqv_trans">massert_pred_eqv_trans</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span> <span class="id">P</span> <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span> <span class="id">Q</span> <span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span> <span class="id">P</span> <span class="id">R</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span>. <span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">HPQ</span> <span class="id">HQR</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> (<span class="id">HPQ</span> <span class="id">x</span>), (<span class="id">HQR</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="massert_pred_eqv_inst">massert_pred_eqv_inst</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span> <span class="id">P</span> <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span> (<span class="id">P</span> <span class="id">x</span>) (<span class="id">Q</span> <span class="id">x</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">x</span> <span class="id">HPQ</span>. <span class="id">apply</span> <span class="id">HPQ</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#MassertPredEqv">MassertPredEqv</a></span>.<br/>
<br/>
<span class="id">Add</span> <span class="id">Parametric</span> <span class="id">Relation</span> (<span class="id">A</span>: <span class="kwd">Type</span>) : (<span class="id">A</span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>) <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span> <span class="id">proved</span> <span class="kwd">by</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv_refl">massert_pred_eqv_refl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry</span> <span class="id">proved</span> <span class="kwd">by</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv_sym">massert_pred_eqv_sym</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> <span class="id">proved</span> <span class="kwd">by</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv_trans">massert_pred_eqv_trans</a></span><br/>
<span class="kwd">as</span> <span class="id">massert_pred_eqv_prel</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Sepall">Sepall</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">A</span>: <span class="kwd">Type</span>}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="sepall">sepall</a></span> (<span class="id">p</span>: <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Sepall.A">A</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span>): <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Sepall.A">A</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_right">fold_right</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sepconj">sepconj</a></span> (<span class="id">p</span> <span class="id">x</span>)) <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp">sepemp</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_permutation">sepall_permutation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">xs</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> <span class="id">xs</span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">xs</span>) &lt;-*-&gt; (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">ys</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">Hperm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Hperm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl</span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id">IHHperm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHHperm1</span>, &lt;-<span class="id">IHHperm2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Hperm1</span> <span class="id">Hperm2</span> <span class="id">IHHperm1</span> <span class="id">IHHperm2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">induction</span> <span class="id">l</span>'.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_app">sepall_app</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">xs</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> (<span class="id">xs</span> ++ <span class="id">ys</span>) &lt;-*-&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">xs</span> ** <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">ys</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_comm">sep_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_right">sepemp_right</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_cons">sepall_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">x</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> (<span class="id">x</span>::<span class="id">xs</span>) &lt;-*-&gt; <span class="id">p</span> <span class="id">x</span> ** <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">constructor</span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_breakout">sepall_breakout</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ys</span> <span class="id">ws</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ys</span> = <span class="id">ws</span> ++ <span class="id">x</span> :: <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">ys</span> &lt;-*-&gt; <span class="id">p</span> <span class="id">x</span> ** <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> (<span class="id">ws</span> ++ <span class="id">xs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_app">sepall_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_cons">sepall_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_app">sepall_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id">Hys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_in">sepall_in</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">ys</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">ws</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ys</span> = <span class="id">ws</span> ++ <span class="id">x</span> :: <span class="id">xs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">ys</span> &lt;-*-&gt; <span class="id">p</span> <span class="id">x</span> ** <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> (<span class="id">ws</span> ++ <span class="id">xs</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">ys</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_split">in_split</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> [<span class="id">ws</span> [<span class="id">xs</span> <span class="id">Hys</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">ws</span>, <span class="id">xs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">p</span>. <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_breakout">sepall_breakout</a></span> <span class="kwd">with</span> (1:=<span class="id">Hys</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_wandout">sepall_wandout</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">x</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> (<span class="id">p</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">xs</span>) &lt;-*-&gt; (<span class="id">p</span> <span class="id">x</span> ** (<span class="id">p</span> <span class="id">x</span> -* <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">xs</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">Hdec</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_split">in_split</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> (<span class="id">ws</span> &amp; <span class="id">ys</span> &amp; <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_breakout">sepall_breakout</a></span> <span class="kwd">with</span> (1:=<span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepwand_out">sepwand_out</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_sepfalse">sepall_sepfalse</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">p</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> |= <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">xs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt; <span class="id">p</span> <span class="id">x</span> &lt;&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepfalse">sepfalse</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">p</span> <span class="id">xs</span> <span class="id">Hall</span> <span class="id">x</span> <span class="id">Hin</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_in">sepall_in</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> [<span class="id">ws</span> [<span class="id">ys</span> [<span class="id">Hys</span> <span class="id">Heq</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Heq</span> <span class="kwd">in</span> <span class="id">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_comm">sep_comm</a></span> <span class="kwd">in</span> <span class="id">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_drop">sep_drop</a></span> <span class="kwd">in</span> <span class="id">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hp</span> <span class="kwd">in</span> <span class="id">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hall</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_weakenp">sepall_weakenp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">P</span>' <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt; (<span class="id">P</span> <span class="id">x</span>) -*&gt; (<span class="id">P</span>' <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">P</span> <span class="id">xs</span>) -*&gt; (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">P</span>' <span class="id">xs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">P</span>' <span class="id">xs</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id">sep_imp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">Hx</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_eq">in_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHxs</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hx</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span> <span class="kwd">with</span> (1:=<span class="id">Hin</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_swapp">sepall_swapp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">P</span>' <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt; <span class="id">P</span> <span class="id">x</span> &lt;-*-&gt; <span class="id">P</span>' <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">P</span> <span class="id">xs</span> &lt;-*-&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">P</span>' <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">P</span> <span class="id">P</span>' <span class="id">xs</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepconj_eqv">sepconj_eqv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">Hx</span>. <span class="id">reflexivity</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_eq">in_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHxs</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hx</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span> <span class="kwd">with</span> (1:=<span class="id">Hin</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="decidable_footprint_sepall">decidable_footprint_sepall</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> (<span class="id">P</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">P</span> <span class="id">xs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xs</span> <span class="kwd">as</span> [|<span class="id">x</span> <span class="id">xs</span> <span class="id">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> (<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint_sepemp">decidable_footprint_sepemp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">HPx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint_sepconj">decidable_footprint_sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">HPx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IH</span> <span class="kwd">with</span> (1:=<span class="id">HPx</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="footprint_perm_sepall">footprint_perm_sepall</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">P</span> <span class="id">xs</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>, <span class="id">footprint_perm</span>' <span class="id">p</span> (<span class="id">P</span> <span class="id">x</span>) <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm</span>' <span class="id">p</span> (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">P</span> <span class="id">xs</span>) <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xs</span> <span class="kwd">as</span> [|<span class="id">x</span> <span class="id">xs</span> <span class="id">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> (<span class="id">intros</span>; <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#footprint_perm_sepemp">footprint_perm_sepemp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">Hfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#footprint_perm_sepconj">footprint_perm_sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">Hfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IH</span> <span class="kwd">with</span> (1:=<span class="id">Hfp</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">decidable_footprint_sepall</span> <span class="id">footprint_perm_sepall</span> : <span class="id">sep</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_unwand">sepall_unwand</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xs</span> <span class="id">P</span> <span class="id">Q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> (<span class="id">P</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">P</span> <span class="id">xs</span> ** <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">P</span> <span class="id">x</span> -* <span class="id">Q</span> <span class="id">x</span>) <span class="id">xs</span>) -*&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">Q</span> <span class="id">xs</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xs</span>; <span class="id">simpl</span>; <span class="id">intros</span> * <span class="id">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_left">sepemp_left</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>, &lt;-<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sep_imp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">IHxs</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="subseteq_footprint_sepall">subseteq_footprint_sepall</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id">xs</span> -&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> (<span class="id">p</span> <span class="id">x</span>) (<span class="id">q</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">xs</span>) (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">q</span> <span class="id">xs</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">q</span> <span class="id">xs</span> <span class="id">Hsub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xs</span> <span class="kwd">as</span> [|<span class="id">x</span> <span class="id">xs</span> <span class="id">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint_refl">subseteq_footprint_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint_sepconj">subseteq_footprint_sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> (<span class="id">apply</span> <span class="id">Hsub</span>; <span class="id">constructor</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span>' <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hsub</span>. <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sepall_outwand_cons">sepall_outwand_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span> <span class="id">x</span> <span class="id">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> (<span class="id">p</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint">subseteq_footprint</a></span> (<span class="id">p</span> <span class="id">x</span>) (<span class="id">q</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">p</span> <span class="id">x</span> ** (<span class="id">p</span> <span class="id">x</span> -* <span class="id">q</span> <span class="id">x</span>)) ** <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">xs</span> ** (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> <span class="id">xs</span> -* <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">q</span> <span class="id">xs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-*&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> (<span class="id">x</span>::<span class="id">xs</span>) ** (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">p</span> (<span class="id">x</span>::<span class="id">xs</span>) -* <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">q</span> (<span class="id">x</span>::<span class="id">xs</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">q</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">Hdec</span> <span class="id">Hsub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">m</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span> <span class="kwd">in</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#unify_distinct_wands">unify_distinct_wands</a></span> <span class="kwd">in</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">Opaque</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sepconj">sepconj</a></span>. <span class="id">simpl</span>. <span class="kwd">Transparent</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sepconj">sepconj</a></span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap23">sep_swap23</a></span> <span class="kwd">in</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span> <span class="kwd">in</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span> <span class="kwd">in</span> <span class="id">Hm</span>; [|<span class="id">now</span> <span class="id">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span> <span class="kwd">in</span> <span class="id">Hm</span>; [|<span class="id">now</span> <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sep</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">Hsub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint_sepall">subseteq_footprint_sepall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hsub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span>; [|<span class="id">now</span> <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sep</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;-<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sep_unwand">sep_unwand</a></span>; [|<span class="id">now</span> <span class="id">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hf</span> <span class="kwd">as</span> [<span class="id">Hfp</span>|<span class="id">Hf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#subseteq_footprint_sepall">subseteq_footprint_sepall</a></span> <span class="kwd">with</span> (<span class="id">q</span>:=<span class="id">q</span>) <span class="kwd">in</span> <span class="id">Hfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">destruct</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Sepall">Sepall</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sepall_map">sepall_map</a></span> {<span class="id">A</span> <span class="id">B</span>} :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span> : <span class="id">B</span> -&gt; <span class="id">_</span>) <span class="id">f</span> (<span class="id">xs</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id">P</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id">f</span> <span class="id">xs</span>) &lt;-*-&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">P</span> (<span class="id">f</span> <span class="id">x</span>)) <span class="id">xs</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">xs</span>; <span class="id">simpl</span>; <span class="id">try</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepconj_eqv">sepconj_eqv</a></span>; <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">decidable_footprint_sepall</span> <span class="id">footprint_perm_sepall</span> : <span class="id">sep</span>.<br/>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="sepall_massert_pred_eqv_permutation_eqv_Proper">sepall_massert_pred_eqv_permutation_eqv_Proper</a></span> <span class="id">A</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv">massert_pred_eqv</a></span> ==&gt; @<span class="id"><a href="https://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation.Permutation</a></span> <span class="id">A</span> ==&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_eqv">massert_eqv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">q</span> <span class="id">Heq</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">Hperm</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_permutation">sepall_permutation</a></span> <span class="kwd">with</span> (1:=<span class="id">Hperm</span>).<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">Hperm</span>.<br/>
&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id">IHHperm</span>, (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv_inst">massert_pred_eqv_inst</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Heq</span>).<br/>
&nbsp;&nbsp;- <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv_inst">massert_pred_eqv_inst</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Heq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepconj_eqv">sepconj_eqv</a></span>; <span class="id">try</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span>; [<span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id">IHl</span>, (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#massert_pred_eqv_inst">massert_pred_eqv_inst</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Heq</span>).<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="id">rewrite</span> <span class="id">IHHperm2</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="bitsizeof_pos">bitsizeof_pos</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;0 &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitsizeof">bitsizeof</a></span> <span class="id">env</span> <span class="id">ty</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitsizeof">bitsizeof</a></span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof_pos">sizeof_pos</a></span> <span class="id">env</span> <span class="id">ty</span>).<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="bitalignof_pos">bitalignof_pos</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitalignof">bitalignof</a></span> <span class="id">env</span> <span class="id">ty</span> &gt; 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
&nbsp;&nbsp;<span class="id">intros</span> *.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitalignof">bitalignof</a></span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#alignof_pos">alignof_pos</a></span> <span class="id">env</span> <span class="id">ty</span>).<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fact</span> <span class="id"><a name="bytes_of_bits_le_incr">bytes_of_bits_le_incr</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x</span> &lt;= <span class="id">y</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bytes_of_bits">bytes_of_bits</a></span> <span class="id">x</span> &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bytes_of_bits">bytes_of_bits</a></span> <span class="id">y</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hy</span>. <span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bytes_of_bits">bytes_of_bits</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_le">Z_div_le</a></span>; <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Fact</span> <span class="id"><a name="bytes_of_bits_div">bytes_of_bits_div</a></span> : <span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(8 | <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bytes_of_bits">bytes_of_bits</a></span> <span class="id">x</span> = <span class="id">x</span> / 8.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bytes_of_bits">bytes_of_bits</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hdiv</span>. <span class="id">destruct</span> <span class="id">Hdiv</span> <span class="kwd">as</span> (<span class="id">c</span>&amp;?); <span class="id">subst</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_plus_full_l">Z_div_plus_full_l</a></span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_mult">Z_div_mult</a></span>; <span class="id">auto</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">range</span>'<span class="id">_sub</span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">lo</span>' <span class="id">hi</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lo</span>' &lt;= <span class="id">hi</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lo</span>' &gt;= <span class="id">lo</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hi</span>' &lt;= <span class="id">hi</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> -*&gt; <span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span>' <span class="id">hi</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hle</span> <span class="id">Hlo</span> <span class="id">Hhi</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">range_split</span>', <span class="id">range_split</span>' <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_comm">sep_comm</a></span>, 2 <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_drop">sep_drop</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SplitRange">SplitRange</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="SplitRange.env">env</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_env">composite_env</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="SplitRange.id">id</a></span>: <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="SplitRange.co">co</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite">composite</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="SplitRange.Henv">Henv</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#composite_env_consistent">Ctypes.composite_env_consistent</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="SplitRange.Hco">Hco</a></span>: <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span>!<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.id">id</a></span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.co">co</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="SplitRange.Hstruct">Hstruct</a></span>: <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_su">co_su</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.co">co</a></span> = <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#Struct">Struct</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">field_range</span>' (<span class="id">p</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memtype.html#permission">permission</a></span>) (<span class="id">flds</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#ident">AST.ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">type</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">b</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Values.html#block">block</a></span>) (<span class="id">lo</span>: <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">fld</span>: <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#ident">AST.ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">type</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert">massert</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">id</span>, <span class="id">ty</span>) := <span class="id">fld</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#field_offset">field_offset</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">id</span> (<span class="id"><a href="Velus.Common.CompCertLib.html#mk_members">mk_members</a></span> <span class="id">flds</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">Errors.OK</a></span> <span class="id">ofs</span>  =&gt; <span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> (<span class="id">lo</span> + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ofs</span>) (<span class="id">lo</span> + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ofs</span> + <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Errors.Error</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepfalse">sepfalse</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="decidable_footprint_field_range">decidable_footprint_field_range</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">lo</span> <span class="id">b</span> <span class="id">flds</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint">decidable_footprint</a></span> (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> (<span class="id">field_range</span>' <span class="id">p</span> <span class="id">flds</span> <span class="id">b</span> <span class="id">lo</span>) <span class="id">flds</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#decidable_footprint_sepall">decidable_footprint_sepall</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">fld</span>. <span class="id">destruct</span> <span class="id">fld</span> <span class="kwd">as</span> [<span class="id">x</span> <span class="id">ty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#field_offset">field_offset</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">x</span> <span class="id">_</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sep</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="footprint_perm_field_range">footprint_perm_field_range</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">flds</span> <span class="id">b</span> <span class="id">pos</span> <span class="id">x</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">footprint_perm</span>' <span class="id">p</span> (<span class="id">field_range</span>' <span class="id">p</span> <span class="id">flds</span> <span class="id">b</span> <span class="id">pos</span> <span class="id">x</span>) <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">flds</span> <span class="id">b</span> <span class="id">pos</span> <span class="id">x</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [<span class="id">x</span> <span class="id">ty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#field_offset">field_offset</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">x</span> <span class="id">_</span>); <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sep</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">split_range_fields</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">flds</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id">flds</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> (<span class="id">lo</span> + <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof_struct">sizeof_struct</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> (<span class="id"><a href="Velus.Common.CompCertLib.html#mk_members">mk_members</a></span> <span class="id">flds</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-*&gt; (<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> (<span class="id">field_range</span>' <span class="id">p</span> <span class="id">flds</span> <span class="id">b</span> <span class="id">lo</span>) <span class="id">flds</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">flds</span> <span class="id">Hndup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof_struct">sizeof_struct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cut</span> (<span class="kwd">forall</span> <span class="id">cur</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(8 | <span class="id">cur</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_imp">massert_imp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> (<span class="id">lo</span> + <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bytes_of_bits">bytes_of_bits</a></span> <span class="id">cur</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">lo</span> + <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bytes_of_bits">bytes_of_bits</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitsizeof_struct">bitsizeof_struct</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">cur</span> (<span class="id"><a href="Velus.Common.CompCertLib.html#mk_members">mk_members</a></span> <span class="id">flds</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> (<span class="kwd">fun</span> <span class="id">fld</span> : <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#ident">AST.ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">type</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">id0</span>, <span class="id">ty</span>) := <span class="id">fld</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#field_offset_rec">field_offset_rec</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">id0</span> (<span class="id"><a href="Velus.Common.CompCertLib.html#mk_members">mk_members</a></span> <span class="id">flds</span>) <span class="id">cur</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">Errors.OK</a></span> <span class="id">ofs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> (<span class="id">lo</span> + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ofs</span>) (<span class="id">lo</span> + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">ofs</span> + <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Errors.Error</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepfalse">sepfalse</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) <span class="id">flds</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intro</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> <span class="id">HH</span> <span class="kwd">with</span> 0. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">in</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">HH</span>. <span class="id">eexists</span> 0; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">induction</span> <span class="id">flds</span> <span class="kwd">as</span> [|[<span class="id">id</span>' <span class="id">ty</span>'] <span class="id">xs</span> <span class="id">IH</span>]; [<span class="id">now</span> <span class="id">constructor</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_cons_inv">NoDupMembers_cons_inv</a></span> <span class="kwd">in</span> <span class="id">Hndup</span> <span class="kwd">as</span> [<span class="id">Hnin</span> <span class="id">Hndup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IH</span> <span class="id">Hndup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">cur</span> <span class="id">Hdiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Opaque</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sepconj">sepconj</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#peq_true">peq_true</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_swapp">sepall_swapp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id">range_split</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">assert</span> (8 | <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#align">align</a></span> <span class="id">cur</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitalignof">bitalignof</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">ty</span>') + <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitsizeof">bitsizeof</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">ty</span>') <span class="kwd">as</span> <span class="id">Hdiv</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etransitivity</span>. 2:<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#align_divides">align_divides</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#bitalignof_pos">bitalignof_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitalignof">bitalignof</a></span>. <span class="id">eexists</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitsizeof">bitsizeof</a></span>. <span class="id">eexists</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">sep_imp</span>'; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">range</span>'<span class="id">_sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">rewrite</span> &lt;-<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_assoc">Z.add_assoc</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_le_mono_l">Z.add_le_mono_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">at</span> 1. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_le_mono">Z.add_le_mono</a></span>; <span class="id">auto</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof_pos">sizeof_pos</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> <span class="id">ty</span>'). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_ge">Z.le_ge</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_le_mono_l">Z.add_le_mono_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#bytes_of_bits_div">bytes_of_bits_div</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.div_le_mono">Z.div_le_mono</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#align_le">align_le</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#bitalignof_pos">bitalignof_pos</a></span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">repeat</span> <span class="id">rewrite</span> &lt;-<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_assoc">Z.add_assoc</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_le_mono_l">Z.add_le_mono_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#bytes_of_bits_div">bytes_of_bits_div</a></span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitsizeof">bitsizeof</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_plus">Z_div_plus</a></span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_le_mono_l">Z.add_le_mono_l</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#bytes_of_bits_le_incr">bytes_of_bits_le_incr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">at</span> 1. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_le_mono">Z.add_le_mono</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#bitsizeof_pos">bitsizeof_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#align_le">align_le</a></span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#bitalignof_pos">bitalignof_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_le_mono_l">Z.add_le_mono_l</a></span>, <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#bytes_of_bits_le_incr">bytes_of_bits_le_incr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>. 2:<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#bitsizeof_struct_incr">bitsizeof_struct_incr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> (?&amp;?) <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#peq_false">peq_false</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intro</span> <span class="id">Heq</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Velus.Common.CommonList.html#In_InMembers">In_InMembers</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="split_range_fields">split_range_fields</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">b</span> <span class="id">flds</span> <span class="id">lo</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.co">co</a></span> = <span class="id"><a href="Velus.Common.CompCertLib.html#mk_members">mk_members</a></span> <span class="id">flds</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#name_member">name_member</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.co">co</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#massert_imp">massert_imp</a></span> (<span class="id">range</span>' <span class="id">p</span> <span class="id">b</span> <span class="id">lo</span> (<span class="id">lo</span> + <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_sizeof">co_sizeof</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.co">co</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> (<span class="id">field_range</span>' <span class="id">p</span> <span class="id">flds</span> <span class="id">b</span> <span class="id">lo</span>) <span class="id">flds</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> * <span class="id">Hmem</span> <span class="id">Hndup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Hco</span>':=<span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.Hco">Hco</a></span>). <span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.Henv">Henv</a></span> <span class="kwd">in</span> <span class="id">Hco</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_consistent_sizeof">co_consistent_sizeof</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hco</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_consistent_alignof">co_consistent_alignof</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hco</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.Hstruct">Hstruct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">range_split</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">mid</span>:=<span class="id">lo</span> + <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#sizeof_struct">sizeof_struct</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.env">env</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange.co">co</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id">Hmem</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">split_range_fields</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Velus.Common.CompCertLib.html#mk_members_names">mk_members_names</a></span>, &lt;-<span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span> <span class="kwd">in</span> <span class="id">Hndup</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_comm">sep_comm</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_drop">sep_drop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> &lt;-<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_le_mono_l">Z.add_le_mono_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CompCertLib.html#sizeof_struct_pos">sizeof_struct_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_le_mono_l">Z.add_le_mono_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#align_le">align_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#alignof_composite_pos">alignof_composite_pos</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#SplitRange">SplitRange</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="field_range">field_range</a></span> <span class="id">ge</span> := (<span class="id">field_range</span>' <span class="id">ge</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memtype.html#Freeable">Freeable</a></span>).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="field_range_w">field_range_w</a></span> <span class="id">ge</span> := (<span class="id">field_range</span>' <span class="id">ge</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
<br/>
<br/>
<span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html">AST</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html">Clight</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Galloc">Galloc</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="Galloc.p">p</a></span> : <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#program">program</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="grange">grange</a></span> (<span class="id">idg</span> : <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Clight.html#fundef">fundef</a></span> <span class="id"><a href="../../CompCert/doc/html/compcert.cfrontend.Ctypes.html#type">type</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">id</span>, <span class="id">g</span>) := <span class="id">idg</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc.p">p</a></span>) <span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepfalse">sepfalse</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">g</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id">f</span> =&gt; <span class="id">range</span>' <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id">b</span> 0 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#pure">pure</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>) &lt;= <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Integers.html#Ptrofs.modulus">Ptrofs.modulus</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-* <span class="id">range</span>' (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.perm_globvar">Genv.perm_globvar</a></span> <span class="id">v</span>) <span class="id">b</span> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">v</span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#gvar_init">gvar_init</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="init_grange">init_grange</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers">NoDupMembers</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc.p">p</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#prog_defs">prog_defs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc.p">p</a></span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> |= <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#grange">grange</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc.p">p</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#prog_defs">prog_defs</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc.p">p</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#prog_defs">prog_defs</a></span>)) <span class="kwd">as</span> <span class="id">Hps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hps</span>. <span class="id">generalize</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc.p">p</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#prog_defs">prog_defs</a></span>) <span class="kwd">at</span> 2 4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">ps</span> <span class="id">Hps</span>' <span class="id">m0</span> <span class="id">Hndups</span> <span class="id">Hinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="kwd">exists</span> <span class="id">ps</span>', <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc.p">p</a></span>.(<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#prog_defs">prog_defs</a></span>) = <span class="id">ps</span>' ++ <span class="id">ps</span>) <span class="kwd">as</span> <span class="id">Hps</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="id">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Hps</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ps</span>; <span class="id">auto</span> <span class="kwd">with</span> <span class="id">sep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="kwd">as</span> (<span class="id">id</span>, <span class="id">g</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hps</span> <span class="kwd">as</span> (<span class="id">ps</span>' &amp; <span class="id">Hps</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">m0</span> |= <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall">sepall</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#grange">grange</a></span> <span class="id">ps</span>) <span class="kwd">as</span> <span class="id">IH</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">apply</span> <span class="id">IHps</span>; <span class="kwd">exists</span> (<span class="id">ps</span>' ++ (<span class="id">id</span>, <span class="id">g</span>)::<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> &lt;- <span class="id"><a href="Velus.Common.CommonList.html#List_shift_first">List_shift_first</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">IHps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> ((<span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc.p">p</a></span>) ! <span class="id">id</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">g</span>) <span class="kwd">as</span> <span class="id">Hpdm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.AST.html#prog_defmap_norepet">prog_defmap_norepet</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Velus.Common.CompCertLib.html#NoDup_norepet">NoDup_norepet</a></span>, <span class="id"><a href="Velus.Common.CommonList.html#fst_NoDupMembers">fst_NoDupMembers</a></span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hps</span>; <span class="id">intuition</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> <span class="kwd">in</span> <span class="id">Hpdm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hpdm</span> <span class="kwd">as</span> (<span class="id">b</span> &amp; <span class="id">Hfs</span> &amp; <span class="id">Hfd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_cons">sepall_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;m0&nbsp;|=&nbsp;grange&nbsp;(id,&nbsp;g)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">Hfs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;g&nbsp;=&nbsp;Gfun&nbsp;f&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="kwd">in</span> <span class="id">Hfd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.init_mem_characterization_2">Genv.init_mem_characterization_2</a></span> <span class="kwd">with</span> (2:=<span class="id">Hinit</span>) <span class="kwd">in</span> <span class="id">Hfd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hfd</span> <span class="kwd">as</span> (<span class="id">Hperm</span> &amp; <span class="id">Hperm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.one_succ">Z.one_succ</a></span>; <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.gt_lt">Z.gt_lt</a></span>, <span class="id"><a href="../../CompCert/doc/html/compcert.lib.Coqlib.html#two_power_nat_pos">two_power_nat_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> * <span class="id">HH</span>. <span class="id">assert</span> (<span class="id">i</span> = 0) <span class="kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span>. <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;g&nbsp;=&nbsp;Gvar&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="kwd">in</span> <span class="id">Hfd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.init_mem_characterization">Genv.init_mem_characterization</a></span> <span class="kwd">with</span> (2:=<span class="id">Hinit</span>) <span class="kwd">in</span> <span class="id">Hfd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hfd</span> <span class="kwd">as</span> (<span class="id">Hrp</span> &amp; <span class="id">Hfd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">constructor</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">intros</span> <span class="id">i</span> <span class="id">k</span> <span class="id">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#wand_footprint">wand_footprint</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span> <span class="kwd">with</span> (1:=<span class="id">H</span>); <span class="id">simpl</span>; <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inversion_clear</span> 1 <span class="kwd">as</span> (? &amp; <span class="id">Hf</span>). <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hf</span> <span class="kwd">as</span> (<span class="id">Hb</span> &amp; <span class="id">Hf</span>). <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Memory.html#Mem.perm_valid_block">Mem.perm_valid_block</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;disjoint_footprint&nbsp;(grange&nbsp;(id,&nbsp;g))&nbsp;(sepall&nbsp;grange&nbsp;ids)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hps</span> <span class="kwd">in</span> <span class="id">Hndups</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NoDupMembers_app_cons">NoDupMembers_app_cons</a></span> <span class="kwd">in</span> <span class="id">Hndups</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hndups</span> <span class="kwd">as</span> (<span class="id">Hndups1</span> &amp; <span class="id">Hndups2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NotInMembers_app">NotInMembers_app</a></span> <span class="kwd">in</span> <span class="id">Hndups1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="kwd">in</span> <span class="id">Hndups1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">Hndups2</span> <span class="id">Hinit</span> <span class="id">Hps</span> <span class="id">Hfd</span> <span class="id">ps</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">ps</span>; <span class="id">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepemp_disjoint">sepemp_disjoint</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="kwd">as</span> (<span class="id">id</span>' &amp; <span class="id">g</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.Common.CommonList.html#NotInMembers_cons">NotInMembers_cons</a></span> <span class="kwd">in</span> <span class="id">Hndups1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hndups1</span> <span class="kwd">as</span> (<span class="id">Hndups</span> &amp; <span class="id">Hnid</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_cons">sepall_cons</a></span> <span class="kwd">in</span> <span class="id">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHps</span> <span class="id">Hndups</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj2">sep_proj2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">IH</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_proj1">sep_proj1</a></span> <span class="kwd">in</span> <span class="id">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#sepall_cons">sepall_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#disjoint_footprint_sepconj">disjoint_footprint_sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">auto</span>. <span class="id">clear</span> <span class="id">IHps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">Hf1</span> <span class="id">Hf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hfs</span> <span class="kwd">in</span> <span class="id">Hf1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc.p">p</a></span>) <span class="id">id</span>') <span class="id">eqn</span>:<span class="id">Hfs</span>'; [|<span class="id">inv</span> <span class="id">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Globalenvs.html#Genv.global_addresses_distinct">Genv.global_addresses_distinct</a></span> <span class="kwd">with</span> (1:=<span class="id">Hnid</span>') (2:=<span class="id">Hfs</span>) <span class="kwd">in</span> <span class="id">Hfs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Hfs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">g</span>, <span class="id">g</span>'; <span class="id">inversion_clear</span> <span class="id">Hf1</span>; <span class="id">inversion_clear</span> <span class="id">Hf2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">subst</span>; <span class="id">intuition</span>; <span class="id">now</span> <span class="id">subst</span> <span class="id">b</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.ObcToClight.MoreSeparation.html#Galloc">Galloc</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sep_swap56">sep_swap56</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">S</span> <span class="id">T</span> <span class="id">U</span> <span class="id">V</span>, (<span class="id">P</span> ** <span class="id">Q</span> ** <span class="id">R</span> ** <span class="id">S</span> ** <span class="id">T</span> ** <span class="id">U</span> ** <span class="id">V</span>) &lt;-*-&gt; (<span class="id">P</span> ** <span class="id">Q</span> ** <span class="id">R</span> ** <span class="id">S</span> ** <span class="id">U</span> ** <span class="id">T</span> ** <span class="id">V</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="id">T</span>). <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sep_swap67">sep_swap67</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">S</span> <span class="id">T</span> <span class="id">U</span> <span class="id">V</span> <span class="id">W</span>, (<span class="id">P</span> ** <span class="id">Q</span> ** <span class="id">R</span> ** <span class="id">S</span> ** <span class="id">T</span> ** <span class="id">U</span> ** <span class="id">V</span> ** <span class="id">W</span>) &lt;-*-&gt; (<span class="id">P</span> ** <span class="id">Q</span> ** <span class="id">R</span> ** <span class="id">S</span> ** <span class="id">T</span> ** <span class="id">V</span> ** <span class="id">U</span> ** <span class="id">W</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="id">U</span>). <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sep_swap78">sep_swap78</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">R</span> <span class="id">S</span> <span class="id">T</span> <span class="id">U</span> <span class="id">V</span> <span class="id">W</span> <span class="id">X</span>, (<span class="id">P</span> ** <span class="id">Q</span> ** <span class="id">R</span> ** <span class="id">S</span> ** <span class="id">T</span> ** <span class="id">U</span> ** <span class="id">V</span> ** <span class="id">W</span> ** <span class="id">X</span>) &lt;-*-&gt; (<span class="id">P</span> ** <span class="id">Q</span> ** <span class="id">R</span> ** <span class="id">S</span> ** <span class="id">T</span> ** <span class="id">U</span> ** <span class="id">W</span> ** <span class="id">V</span> ** <span class="id">X</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="id">V</span>). <span class="id">reflexivity</span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
