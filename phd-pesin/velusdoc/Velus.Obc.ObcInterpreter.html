
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module ObcInterpreter</title>
<meta name="description" content="Documentation of Coq module ObcInterpreter" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module ObcInterpreter</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FMapPositive.html">FSets.FMapPositive</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Setoids.Setoid.html">Setoid</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#ListNotations">List.ListNotations</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html">common.Errors</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.Common.html">Common</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Common.CommonProgram.html">CommonProgram</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Environment.html">Environment</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Operators.html">Operators</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.VelusMemory.html">VelusMemory</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Obc.ObcSyntax.html">Obc.ObcSyntax</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Velus</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Velus.Obc.ObcSemantics.html">Obc.ObcSemantics</a></span>.<br/>
<br/>
<h1> Obc interpreter </h1>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id"><a name="OBCINTERPRETER">OBCINTERPRETER</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Obc.ObcSyntax.html#OBCSYNTAX">OBCSYNTAX</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Sem</span>   : <span class="id"><a href="Velus.Obc.ObcSemantics.html#OBCSEMANTICS">OBCSEMANTICS</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn">Syn</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="OBCINTERPRETER.eval_stmt">eval_stmt</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCINTERPRETER.eval_stmt.eval_method">eval_method</a></span> : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span> -&gt; <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> -&gt; <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.value">value</a></span>) -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.value">value</a></span>)).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="OBCINTERPRETER.eval_exp">eval_exp</a></span> (<span class="id">me</span>: <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span>) (<span class="id">ve</span>: <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.venv">venv</a></span>) (<span class="id">e</span>: <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.exp">exp</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.value">value</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Var">Var</a></span> <span class="id">x</span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id">x</span> <span class="id">ve</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.State">State</a></span> <span class="id">x</span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.VelusMemory.html#find_val">find_val</a></span> <span class="id">x</span> <span class="id">me</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">state</span> <span class="id">variable</span> <span class="id">absent</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Const">Const</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.Vscalar">Vscalar</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.sem_cconst">sem_cconst</a></span> <span class="id">c</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Enum">Enum</a></span> <span class="id">e</span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.Venum">Venum</a></span> <span class="id">e</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Unop">Unop</a></span> <span class="id">op</span> <span class="id">e</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v1</span> &lt;- <span class="id">eval_exp</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.sem_unop">sem_unop</a></span> <span class="id">op</span> <span class="id">v</span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.typeof">typeof</a></span> <span class="id">e</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">unary</span> <span class="id">operator</span> <span class="id">failure</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">unary</span> <span class="id">operator</span> <span class="id">input</span> <span class="id">cannot</span> <span class="id">be</span> <span class="id">absent</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Binop">Binop</a></span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v1</span> &lt;- <span class="id">eval_exp</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v2</span> &lt;- <span class="id">eval_exp</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v1</span>, <span class="id">v2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.sem_binop">sem_binop</a></span> <span class="id">op</span> <span class="id">v1</span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.typeof">typeof</a></span> <span class="id">e1</span>) <span class="id">v2</span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.typeof">typeof</a></span> <span class="id">e2</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">binary</span> <span class="id">operator</span> <span class="id">failure</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">binary</span> <span class="id">operator</span> <span class="id">input</span> <span class="id">cannot</span> <span class="id">be</span> <span class="id">absent</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Valid">Valid</a></span> <span class="id">x</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id">x</span> <span class="id">ve</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">valid</span> <span class="id">variable</span> <span class="id">absent</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="OBCINTERPRETER.eval_stmt.eval_stmt_branch">eval_stmt_branch</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCINTERPRETER.eval_stmt.eval_stmt_branch.eval_stmt">eval_stmt</a></span> : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span> -&gt; <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.venv">venv</a></span> -&gt; <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.stmt">stmt</a></span> -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span> * <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.venv">venv</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> (<span class="id"><a name="OBCINTERPRETER.eval_stmt.eval_stmt_branch.me">me</a></span> : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span>) (<span class="id"><a name="OBCINTERPRETER.eval_stmt.eval_stmt_branch.ve">ve</a></span> : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.venv">venv</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="OBCINTERPRETER.eval_stmt.eval_stmt_branch.default">default</a></span> : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.stmt">stmt</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="OBCINTERPRETER.eval_stmt_branch">eval_stmt_branch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">branches</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.stmt">stmt</a></span>)) (<span class="id">c</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span> * <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.venv">venv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">branches</span>, <span class="id">c</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.stmt">stmt</a></span>::<span class="id">_</span>, 0 =&gt; <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt.eval_stmt_branch.eval_stmt">eval_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt.eval_stmt_branch.me">me</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt.eval_stmt_branch.ve">ve</a></span> <span class="id">stmt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>::<span class="id">_</span>, 0 =&gt; <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt.eval_stmt_branch.eval_stmt">eval_stmt</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt.eval_stmt_branch.me">me</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt.eval_stmt_branch.ve">ve</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt.eval_stmt_branch.default">default</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>::<span class="id">branches</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span> =&gt; <span class="id">eval_stmt_branch</span> <span class="id">branches</span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [], <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">not</span> <span class="id">enough</span> <span class="id">branches</span> <span class="kwd">in</span> <span class="id">switch</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt.eval_stmt_branch">eval_stmt_branch</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="OBCINTERPRETER.eval_stmt">eval_stmt</a></span> (<span class="id">me</span> : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span>) (<span class="id">ve</span> : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.venv">venv</a></span>) (<span class="id">s</span> : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.stmt">stmt</a></span>) {<span class="kwd">struct</span> <span class="id">s</span>} : <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span> * <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.venv">venv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">s</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Assign">Assign</a></span> <span class="id">x</span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v</span> &lt;- <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp">eval_exp</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">value</span> <span class="kwd">in</span> <span class="id">assign</span> <span class="kwd">is</span> <span class="id">absent</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id">me</span>, <span class="id"><a href="Velus.Environment.html#Env.add">Env.add</a></span> <span class="id">x</span> <span class="id">v</span> <span class="id">ve</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.AssignSt">AssignSt</a></span> <span class="id">x</span> <span class="id">e</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v</span> &lt;- <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp">eval_exp</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">value</span> <span class="kwd">in</span> <span class="id">stassign</span> <span class="kwd">is</span> <span class="id">absent</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="Velus.VelusMemory.html#add_val">add_val</a></span> <span class="id">x</span> <span class="id">v</span> <span class="id">me</span>, <span class="id">ve</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Call">Call</a></span> <span class="id">ys</span> <span class="id">clsid</span> <span class="id">o</span> <span class="id">f</span> <span class="id">es</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">vos</span> &lt;- <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#mmap">Errors.mmap</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp">eval_exp</a></span> <span class="id">me</span> <span class="id">ve</span>) <span class="id">es</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">ome</span>', <span class="id">rvos</span>) &lt;- <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt.eval_method">eval_method</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.instance_match">instance_match</a></span> <span class="id">o</span> <span class="id">me</span>) <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="Velus.VelusMemory.html#add_inst">add_inst</a></span> <span class="id">o</span> <span class="id">ome</span>' <span class="id">me</span>, <span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> <span class="id">ys</span> <span class="id">rvos</span> <span class="id">ve</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.ExternCall">ExternCall</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">extern</span> <span class="id">calls</span> <span class="id">not</span> <span class="id">supported</span> <span class="kwd">in</span> <span class="id">interpreter</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Comp">Comp</a></span> <span class="id">stmt1</span> <span class="id">stmt2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">me1</span>, <span class="id">ve1</span>) &lt;- <span class="id">eval_stmt</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">stmt1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_stmt</span> <span class="id">me1</span> <span class="id">ve1</span> <span class="id">stmt2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Switch">Switch</a></span> <span class="id">cond</span> <span class="id">branches</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Ids.default">default</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v</span> &lt;- <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp">eval_exp</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">cond</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.Venum">Venum</a></span> <span class="id">c</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt_branch">eval_stmt_branch</a></span> <span class="id">eval_stmt</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">default</span> <span class="id">branches</span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> "<span class="id">condition</span> <span class="id">of</span> <span class="id">switch</span> <span class="id">didnt</span> <span class="id">produce</span> <span class="id">an</span> <span class="id">enumerated</span> <span class="id">value</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.Skip">Skip</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id">me</span>, <span class="id">ve</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt">eval_stmt</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OBCINTERPRETER.eval_method">eval_method</a></span> (<span class="id">p</span> : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.program">program</a></span>) : <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span> -&gt; <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> -&gt; <span class="id"><a href="Velus.Common.Common.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.value">value</a></span>) -&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.menv">menv</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.value">value</a></span>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fix</span> <span class="id">aux</span> (<span class="id">cls</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.class">class</a></span>) <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">cls</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> "<span class="kwd">Class</span> " :: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#CTX">CTX</a></span> <span class="id">clsid</span> :: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> " <span class="id">not</span> <span class="id">found</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">cl</span>::<span class="id">cls</span> =&gt; <span class="kwd">if</span> <span class="id">cl</span>.(<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.c_name">c_name</a></span>) ==<span class="id">b</span> <span class="id">clsid</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="kwd">match</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.find_method">find_method</a></span> <span class="id">f</span> <span class="id">cl</span>.(<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.c_methods">c_methods</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fm</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">List.length</a></span> <span class="id">vos</span> ==<span class="id">b</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">List.length</a></span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.m_in">m_in</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> ("<span class="id">Not</span> <span class="id">the</span> <span class="id">correct</span> <span class="id">number</span> <span class="id">of</span> <span class="id">argument</span>"))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> (<span class="id">me</span>', <span class="id">ve</span>') &lt;- <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt">eval_stmt</a></span> (<span class="id">aux</span> <span class="id">cls</span>) <span class="id">me</span> (<span class="id"><a href="Velus.Environment.html#Env.adds_opt">Env.adds_opt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.m_in">m_in</a></span>)) <span class="id">vos</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.vempty">vempty</a></span>) <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.m_body">m_body</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id">me</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id">x</span> <span class="id">ve</span>') (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">fm</span>.(<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.m_out">m_out</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#MSG">MSG</a></span> "<span class="id">Method</span> " :: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#CTX">CTX</a></span> <span class="id">f</span> :: <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#msg">msg</a></span> " <span class="id">not</span> <span class="id">found</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">aux</span> <span class="id">cls</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) <span class="id">p</span>.(<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.classes">classes</a></span>).<br/>
<br/>
<h2> Correctness </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCINTERPRETER.eval_exp_correct">eval_exp_correct</a></span> : <span class="kwd">forall</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp">eval_exp</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.exp_eval">exp_eval</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">intros</span> * <span class="id">Heval</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">monadInv</span> <span class="id">Heval</span>; <span class="tactic">try</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;State&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">Heq</span>. <span class="id">monadInv</span> <span class="id">Heval</span>. <span class="id">now</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">EQ</span>; <span class="id">monadInv</span> <span class="id">EQ0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">EQ</span>; <span class="id">monadInv</span> <span class="id">EQ2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Valid&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">EQ</span>; <span class="id">monadInv</span> <span class="id">Heval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fact</span> <span class="id"><a name="OBCINTERPRETER.eval_stmt_branch_inv">eval_stmt_branch_inv</a></span> <span class="id">eval_method</span> : <span class="kwd">forall</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">default</span> <span class="id">k</span> <span class="id">branches</span> <span class="id">me</span>' <span class="id">ve</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt_branch">eval_stmt_branch</a></span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt">eval_stmt</a></span> <span class="id">eval_method</span>) <span class="id">me</span> <span class="id">ve</span> <span class="id">default</span> <span class="id">branches</span> <span class="id">k</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id">me</span>', <span class="id">ve</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id">branches</span> <span class="id">k</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt">eval_stmt</a></span> <span class="id">eval_method</span> <span class="id">me</span> <span class="id">ve</span> (<span class="id"><a href="Velus.Common.Common.html#or_default">or_default</a></span> <span class="id">default</span> <span class="id">s</span>) = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id">me</span>', <span class="id">ve</span>').<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">k</span>; <span class="tactic">intros</span> * <span class="id">Heval</span>; <span class="tactic">destruct</span> <span class="id">branches</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">monadInv</span> <span class="id">Heval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id">cases</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCINTERPRETER.eval_stmt_correct">eval_stmt_correct</a></span> <span class="id">eval_method</span> <span class="id">p</span> : <span class="kwd">forall</span> <span class="id">st</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">me</span>' <span class="id">ve</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span> <span class="id">me</span>' <span class="id">rvos</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_method</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id">me</span>', <span class="id">rvos</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span> <span class="id">me</span>' <span class="id">rvos</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt">eval_stmt</a></span> <span class="id">eval_method</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">st</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id">me</span>', <span class="id">ve</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.stmt_eval">stmt_eval</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">st</span> (<span class="id">me</span>', <span class="id">ve</span>').<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">st</span> <span class="kwd">using</span> <span class="id">stmt_ind2</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> * <span class="id">Hmethod</span> <span class="id">Heval</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">monadInv</span> <span class="id">Heval</span>; <span class="tactic">try</span> <span class="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Assign&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">EQ</span>. <span class="id">monadInv</span> <span class="id">EQ0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp_correct">eval_exp_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;StAssign&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">EQ</span>. <span class="id">monadInv</span> <span class="id">EQ0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">constructor</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp_correct">eval_exp_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cases_eqn</span> <span class="id">EQ</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt_branch_inv">eval_stmt_branch_inv</a></span> <span class="kwd">in</span> <span class="id">EQ0</span> <span class="kwd">as</span> (?&amp;<span class="id">Hnth</span>&amp;<span class="id">Heval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp_correct">eval_exp_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span> <span class="kwd">in</span> <span class="id">Hnth</span>. <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Comp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.Icall">Icall</a></span> <span class="kwd">with</span> (<span class="id">vos</span>:=<span class="id">x</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">clear</span> - <span class="id">EQ</span>. <span class="tactic">apply</span> <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#mmap_inversion">mmap_inversion</a></span> <span class="kwd">in</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">EQ</span>; <span class="tactic">constructor</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp_correct">eval_exp_correct</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="OBCINTERPRETER.eval_method_correct">eval_method_correct</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span> <span class="id">me</span>' <span class="id">rvos</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_method">eval_method</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> (<span class="id">me</span>', <span class="id">rvos</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.stmt_call_eval">stmt_call_eval</a></span> <span class="id">p</span> <span class="id">me</span> <span class="id">clsid</span> <span class="id">f</span> <span class="id">vos</span> <span class="id">me</span>' <span class="id">rvos</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_method">eval_method</a></span>, <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.find_class">find_class</a></span>. <span class="tactic">intros</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">classes0</span>; <span class="tactic">intros</span> * <span class="id">Heval</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">monadInv</span> <span class="id">Heval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.c_name">c_name</a></span> <span class="id">_</span> ==<span class="id">b</span> <span class="id">clsid</span>) <span class="id">eqn</span>:<span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#equiv_decb_equiv">equiv_decb_equiv</a></span> <span class="kwd">in</span> <span class="id">Heq</span>. <span class="id">inv</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn.find_method">find_method</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">eqn</span>:<span class="id">Hfind</span>'; [|<span class="id">monadInv</span> <span class="id">Heval</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">_</span> ==<span class="id">b</span> <span class="id">_</span>) <span class="id">eqn</span>:<span class="id">Hlen</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">monadInv</span> <span class="id">Heval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#equiv_decb_equiv">equiv_decb_equiv</a></span> <span class="kwd">in</span> <span class="id">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_now">find_unit_now</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_stmt_correct">eval_stmt_correct</a></span> <span class="kwd">in</span> <span class="id">EQ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="id">simpl_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="Velus.Common.Common.html#not_equiv_decb_equiv">not_equiv_decb_equiv</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHclasses0</span> <span class="kwd">in</span> <span class="id">Heval</span>. <span class="id">inv</span> <span class="id">Heval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">setoid_rewrite</span> <span class="id"><a href="Velus.Common.CommonProgram.html#find_unit_other">find_unit_other</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ?; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Completeness </h2>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OBCINTERPRETER.eval_exp_complete">eval_exp_complete</a></span> : <span class="kwd">forall</span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem.exp_eval">exp_eval</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER.eval_exp">eval_exp</a></span> <span class="id">me</span> <span class="id">ve</span> <span class="id">e</span> = <span class="id"><a href="../../CompCert/doc/html/compcert.common.Errors.html#OK">OK</a></span> <span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">intros</span> * <span class="id">Hsem</span>; <span class="id">inv</span> <span class="id">Hsem</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;State&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.VelusMemory.html#find_val">find_val</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Unop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">IHe</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.sem_unop">sem_unop</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Binop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">IHe1</span>, <span class="id">IHe2</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op.sem_binop">sem_binop</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Valid&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">take</span> (<span class="id"><a href="Velus.Environment.html#Env.find">Env.find</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span>) <span class="id">and</span> <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">it</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER">OBCINTERPRETER</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="ObcInterpreterFun">ObcInterpreterFun</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Ids</span>   : <span class="id"><a href="Velus.Common.Common.html#IDS">IDS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Op</span>    : <span class="id"><a href="Velus.Operators.html#OPERATORS">OPERATORS</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">OpAux</span> : <span class="id"><a href="Velus.Operators.html#OPERATORS_AUX">OPERATORS_AUX</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op">Op</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Syn</span>   : <span class="id"><a href="Velus.Obc.ObcSyntax.html#OBCSYNTAX">OBCSYNTAX</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OpAux">OpAux</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">Import</span> <span class="id">Sem</span>   : <span class="id"><a href="Velus.Obc.ObcSemantics.html#OBCSEMANTICS">OBCSEMANTICS</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn">Syn</a></span>) &lt;: <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER">OBCINTERPRETER</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem">Sem</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Include</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OBCINTERPRETER">OBCINTERPRETER</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Ids">Ids</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Op">Op</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#OpAux">OpAux</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Syn">Syn</a></span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#Sem">Sem</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="Velus.Obc.ObcInterpreter.html#ObcInterpreterFun">ObcInterpreterFun</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
